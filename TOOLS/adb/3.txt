
adbd:     file format elf32-tradlittlemips


Disassembly of section .init:

00401588 <_init>:
_init():
  401588:	3c1c0003 	lui	gp,0x3
  40158c:	279cc208 	addiu	gp,gp,-15864
  401590:	0399e021 	addu	gp,gp,t9
  401594:	27bdffe0 	addiu	sp,sp,-32
  401598:	afbc0010 	sw	gp,16(sp)
  40159c:	afbf001c 	sw	ra,28(sp)
  4015a0:	afbc0018 	sw	gp,24(sp)
  4015a4:	04110001 	bal	4015ac <_init+0x24>
  4015a8:	00000000 	nop
  4015ac:	0c1005e5 	jal	401794 <frame_dummy>
  4015b0:	00000000 	nop
  4015b4:	04110001 	bal	4015bc <_init+0x34>
  4015b8:	00000000 	nop
  4015bc:	0c1049a4 	jal	412690 <__do_global_ctors_aux>
  4015c0:	00000000 	nop
  4015c4:	8fbf001c 	lw	ra,28(sp)
  4015c8:	03e00008 	jr	ra
  4015cc:	27bd0020 	addiu	sp,sp,32

Disassembly of section .text:

004015d0 <__start>:
__start():
  4015d0:	3c1c0043 	lui	gp,0x43
  4015d4:	279cd790 	addiu	gp,gp,-10352
  4015d8:	0000f821 	move	ra,zero
  4015dc:	3c040040 	lui	a0,0x40
  4015e0:	24843abc 	addiu	a0,a0,15036
  4015e4:	8fa50000 	lw	a1,0(sp)
  4015e8:	27a60004 	addiu	a2,sp,4
  4015ec:	2401fff8 	li	at,-8
  4015f0:	03a1e824 	and	sp,sp,at
  4015f4:	27bdffe0 	addiu	sp,sp,-32
  4015f8:	3c070040 	lui	a3,0x40
  4015fc:	24e71588 	addiu	a3,a3,5512
  401600:	3c080041 	lui	t0,0x41
  401604:	25082710 	addiu	t0,t0,10000
  401608:	afa80010 	sw	t0,16(sp)
  40160c:	afa20014 	sw	v0,20(sp)
  401610:	0c10530c 	jal	414c30 <__uClibc_main@plt>
  401614:	afbd0018 	sw	sp,24(sp)

00401618 <hlt>:
  401618:	1000ffff 	b	401618 <hlt>
  40161c:	00000000 	nop

00401620 <deregister_tm_clones>:
deregister_tm_clones():
  401620:	3c040042 	lui	a0,0x42
  401624:	3c020042 	lui	v0,0x42
  401628:	24845790 	addiu	a0,a0,22416
  40162c:	24425793 	addiu	v0,v0,22419
  401630:	00441023 	subu	v0,v0,a0
  401634:	2c420007 	sltiu	v0,v0,7
  401638:	10400003 	beqz	v0,401648 <deregister_tm_clones+0x28>
  40163c:	3c190000 	lui	t9,0x0
  401640:	03e00008 	jr	ra
  401644:	00000000 	nop
  401648:	27390000 	addiu	t9,t9,0
  40164c:	1320fffc 	beqz	t9,401640 <deregister_tm_clones+0x20>
  401650:	00000000 	nop
  401654:	03200008 	jr	t9
  401658:	00000000 	nop

0040165c <register_tm_clones>:
register_tm_clones():
  40165c:	3c040042 	lui	a0,0x42
  401660:	3c020042 	lui	v0,0x42
  401664:	24845790 	addiu	a0,a0,22416
  401668:	24425790 	addiu	v0,v0,22416
  40166c:	00441023 	subu	v0,v0,a0
  401670:	00021083 	sra	v0,v0,0x2
  401674:	00021fc2 	srl	v1,v0,0x1f
  401678:	00621021 	addu	v0,v1,v0
  40167c:	00022843 	sra	a1,v0,0x1
  401680:	14a00003 	bnez	a1,401690 <register_tm_clones+0x34>
  401684:	3c190000 	lui	t9,0x0
  401688:	03e00008 	jr	ra
  40168c:	00000000 	nop
  401690:	27390000 	addiu	t9,t9,0
  401694:	1320fffc 	beqz	t9,401688 <register_tm_clones+0x2c>
  401698:	00000000 	nop
  40169c:	03200008 	jr	t9
  4016a0:	00000000 	nop

004016a4 <__do_global_dtors_aux>:
__do_global_dtors_aux():
  4016a4:	27bdffd0 	addiu	sp,sp,-48
  4016a8:	afb30028 	sw	s3,40(sp)
  4016ac:	3c130042 	lui	s3,0x42
  4016b0:	926257d0 	lbu	v0,22480(s3)
  4016b4:	afbf002c 	sw	ra,44(sp)
  4016b8:	afb20024 	sw	s2,36(sp)
  4016bc:	afb10020 	sw	s1,32(sp)
  4016c0:	14400027 	bnez	v0,401760 <__do_global_dtors_aux+0xbc>
  4016c4:	afb0001c 	sw	s0,28(sp)
  4016c8:	3c120042 	lui	s2,0x42
  4016cc:	3c110042 	lui	s1,0x42
  4016d0:	3c100042 	lui	s0,0x42
  4016d4:	26525098 	addiu	s2,s2,20632
  4016d8:	2631509c 	addiu	s1,s1,20636
  4016dc:	8e0257d4 	lw	v0,22484(s0)
  4016e0:	02328823 	subu	s1,s1,s2
  4016e4:	00118883 	sra	s1,s1,0x2
  4016e8:	2631ffff 	addiu	s1,s1,-1
  4016ec:	0051182b 	sltu	v1,v0,s1
  4016f0:	1060000a 	beqz	v1,40171c <__do_global_dtors_aux+0x78>
  4016f4:	24420001 	addiu	v0,v0,1
  4016f8:	00021880 	sll	v1,v0,0x2
  4016fc:	02431821 	addu	v1,s2,v1
  401700:	8c790000 	lw	t9,0(v1)
  401704:	0320f809 	jalr	t9
  401708:	ae0257d4 	sw	v0,22484(s0)
  40170c:	8e0257d4 	lw	v0,22484(s0)
  401710:	0051182b 	sltu	v1,v0,s1
  401714:	1460fff8 	bnez	v1,4016f8 <__do_global_dtors_aux+0x54>
  401718:	24420001 	addiu	v0,v0,1
  40171c:	0c100588 	jal	401620 <deregister_tm_clones>
  401720:	00000000 	nop
  401724:	3c020000 	lui	v0,0x0
  401728:	24420000 	addiu	v0,v0,0
  40172c:	10400013 	beqz	v0,40177c <__do_global_dtors_aux+0xd8>
  401730:	3c020000 	lui	v0,0x0
  401734:	24440000 	addiu	a0,v0,0
  401738:	10800010 	beqz	a0,40177c <__do_global_dtors_aux+0xd8>
  40173c:	00000000 	nop
  401740:	80420000 	lb	v0,0(v0)
  401744:	28420002 	slti	v0,v0,2
  401748:	1440000d 	bnez	v0,401780 <__do_global_dtors_aux+0xdc>
  40174c:	3c020041 	lui	v0,0x41
  401750:	0c10534c 	jal	414d30 <__deregister_frame_info_bases@plt>
  401754:	00000000 	nop
  401758:	24020001 	li	v0,1
  40175c:	a26257d0 	sb	v0,22480(s3)
  401760:	8fbf002c 	lw	ra,44(sp)
  401764:	8fb30028 	lw	s3,40(sp)
  401768:	8fb20024 	lw	s2,36(sp)
  40176c:	8fb10020 	lw	s1,32(sp)
  401770:	8fb0001c 	lw	s0,28(sp)
  401774:	03e00008 	jr	ra
  401778:	27bd0030 	addiu	sp,sp,48
  40177c:	3c020041 	lui	v0,0x41
  401780:	24424d30 	addiu	v0,v0,19760
  401784:	1040fff4 	beqz	v0,401758 <__do_global_dtors_aux+0xb4>
  401788:	3c040041 	lui	a0,0x41
  40178c:	1000fff0 	b	401750 <__do_global_dtors_aux+0xac>
  401790:	24844a60 	addiu	a0,a0,19040

00401794 <frame_dummy>:
frame_dummy():
  401794:	3c020000 	lui	v0,0x0
  401798:	27bdffe0 	addiu	sp,sp,-32
  40179c:	24420000 	addiu	v0,v0,0
  4017a0:	1040001a 	beqz	v0,40180c <frame_dummy+0x78>
  4017a4:	afbf001c 	sw	ra,28(sp)
  4017a8:	3c020000 	lui	v0,0x0
  4017ac:	24440000 	addiu	a0,v0,0
  4017b0:	10800016 	beqz	a0,40180c <frame_dummy+0x78>
  4017b4:	00000000 	nop
  4017b8:	80420000 	lb	v0,0(v0)
  4017bc:	28420002 	slti	v0,v0,2
  4017c0:	14400012 	bnez	v0,40180c <frame_dummy+0x78>
  4017c4:	3c050042 	lui	a1,0x42
  4017c8:	3c070043 	lui	a3,0x43
  4017cc:	24a557d8 	addiu	a1,a1,22488
  4017d0:	00003021 	move	a2,zero
  4017d4:	0c000000 	jal	0 <_DYNAMIC-0x400128>
  4017d8:	24e7d790 	addiu	a3,a3,-10352
  4017dc:	3c040042 	lui	a0,0x42
  4017e0:	8c8250a0 	lw	v0,20640(a0)
  4017e4:	10400006 	beqz	v0,401800 <frame_dummy+0x6c>
  4017e8:	3c190000 	lui	t9,0x0
  4017ec:	27390000 	addiu	t9,t9,0
  4017f0:	13200004 	beqz	t9,401804 <frame_dummy+0x70>
  4017f4:	8fbf001c 	lw	ra,28(sp)
  4017f8:	0320f809 	jalr	t9
  4017fc:	248450a0 	addiu	a0,a0,20640
  401800:	8fbf001c 	lw	ra,28(sp)
  401804:	08100597 	j	40165c <register_tm_clones>
  401808:	27bd0020 	addiu	sp,sp,32
  40180c:	3c020041 	lui	v0,0x41
  401810:	24424ab0 	addiu	v0,v0,19120
  401814:	1040fff1 	beqz	v0,4017dc <frame_dummy+0x48>
  401818:	3c040041 	lui	a0,0x41
  40181c:	3c050042 	lui	a1,0x42
  401820:	3c070043 	lui	a3,0x43
  401824:	24844a60 	addiu	a0,a0,19040
  401828:	24a557d8 	addiu	a1,a1,22488
  40182c:	00003021 	move	a2,zero
  401830:	0c1052ac 	jal	414ab0 <__register_frame_info_bases@plt>
  401834:	24e7d790 	addiu	a3,a3,-10352
  401838:	1000ffe9 	b	4017e0 <frame_dummy+0x4c>
  40183c:	3c040042 	lui	a0,0x42

00401840 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  401840:	27bdffe0 	addiu	sp,sp,-32
  401844:	afbf001c 	sw	ra,28(sp)
  401848:	afbe0018 	sw	s8,24(sp)
  40184c:	03a0f021 	move	s8,sp
  401850:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  401854:	8fc40020 	lw	a0,32(s8)
  401858:	24050002 	li	a1,2
  40185c:	24060001 	li	a2,1
  401860:	0c10532c 	jal	414cb0 <fcntl@plt>
  401864:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  401868:	03c0e821 	move	sp,s8
  40186c:	8fbf001c 	lw	ra,28(sp)
  401870:	8fbe0018 	lw	s8,24(sp)
  401874:	27bd0020 	addiu	sp,sp,32
  401878:	03e00008 	jr	ra
  40187c:	00000000 	nop

00401880 <unix_open>:
unix_open():
/home_a/ppchen/adb/sysdeps.h:310

static __inline__ int  unix_open(const char*  path, int options,...)
{
  401880:	27bdffd8 	addiu	sp,sp,-40
  401884:	afbf0024 	sw	ra,36(sp)
  401888:	afbe0020 	sw	s8,32(sp)
  40188c:	03a0f021 	move	s8,sp
  401890:	afc40028 	sw	a0,40(s8)
  401894:	afc60030 	sw	a2,48(s8)
  401898:	afc70034 	sw	a3,52(s8)
  40189c:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:311
    if ((options & O_CREAT) == 0)
  4018a0:	8fc2002c 	lw	v0,44(s8)
  4018a4:	30420100 	andi	v0,v0,0x100
  4018a8:	14400007 	bnez	v0,4018c8 <unix_open+0x48>
  4018ac:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:313
    {
        return  open(path, options);
  4018b0:	8fc40028 	lw	a0,40(s8)
  4018b4:	8fc5002c 	lw	a1,44(s8)
  4018b8:	0c1052c4 	jal	414b10 <open@plt>
  4018bc:	00000000 	nop
  4018c0:	1000000d 	b	4018f8 <unix_open+0x78>
  4018c4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:319
    }
    else
    {
        int      mode;
        va_list  args;
        va_start( args, options );
  4018c8:	27c20030 	addiu	v0,s8,48
  4018cc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sysdeps.h:320
        mode = va_arg( args, int );
  4018d0:	8fc2001c 	lw	v0,28(s8)
  4018d4:	24430004 	addiu	v1,v0,4
  4018d8:	afc3001c 	sw	v1,28(s8)
  4018dc:	8c420000 	lw	v0,0(v0)
  4018e0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:322
        va_end( args );
        return open(path, options, mode);
  4018e4:	8fc40028 	lw	a0,40(s8)
  4018e8:	8fc5002c 	lw	a1,44(s8)
  4018ec:	8fc60018 	lw	a2,24(s8)
  4018f0:	0c1052c4 	jal	414b10 <open@plt>
  4018f4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:324
    }
}
  4018f8:	03c0e821 	move	sp,s8
  4018fc:	8fbf0024 	lw	ra,36(sp)
  401900:	8fbe0020 	lw	s8,32(sp)
  401904:	27bd0028 	addiu	sp,sp,40
  401908:	03e00008 	jr	ra
  40190c:	00000000 	nop

00401910 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  401910:	27bdffe0 	addiu	sp,sp,-32
  401914:	afbf001c 	sw	ra,28(sp)
  401918:	afbe0018 	sw	s8,24(sp)
  40191c:	03a0f021 	move	s8,sp
  401920:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  401924:	8fc40020 	lw	a0,32(s8)
  401928:	0c105378 	jal	414de0 <close@plt>
  40192c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  401930:	03c0e821 	move	sp,s8
  401934:	8fbf001c 	lw	ra,28(sp)
  401938:	8fbe0018 	lw	s8,24(sp)
  40193c:	27bd0020 	addiu	sp,sp,32
  401940:	03e00008 	jr	ra
  401944:	00000000 	nop

00401948 <adb_write>:
adb_write():
/home_a/ppchen/adb/sysdeps.h:367

#undef   read
#define  read  ___xxx_read

static __inline__ int  adb_write(int  fd, const void*  buf, size_t  len)
{
  401948:	27bdffe0 	addiu	sp,sp,-32
  40194c:	afbf001c 	sw	ra,28(sp)
  401950:	afbe0018 	sw	s8,24(sp)
  401954:	03a0f021 	move	s8,sp
  401958:	afc40020 	sw	a0,32(s8)
  40195c:	afc50024 	sw	a1,36(s8)
  401960:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:368
    return write(fd, buf, len);
  401964:	8fc40020 	lw	a0,32(s8)
  401968:	8fc50024 	lw	a1,36(s8)
  40196c:	8fc60028 	lw	a2,40(s8)
  401970:	0c10536c 	jal	414db0 <write@plt>
  401974:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:369
}
  401978:	03c0e821 	move	sp,s8
  40197c:	8fbf001c 	lw	ra,28(sp)
  401980:	8fbe0018 	lw	s8,24(sp)
  401984:	27bd0020 	addiu	sp,sp,32
  401988:	03e00008 	jr	ra
  40198c:	00000000 	nop

00401990 <adb_socket_accept>:
adb_socket_accept():
/home_a/ppchen/adb/sysdeps.h:401
}
#undef   creat
#define  creat  ___xxx_creat

static __inline__ int  adb_socket_accept(int  serverfd, struct sockaddr*  addr, socklen_t  *addrlen)
{
  401990:	27bdffd8 	addiu	sp,sp,-40
  401994:	afbf0024 	sw	ra,36(sp)
  401998:	afbe0020 	sw	s8,32(sp)
  40199c:	03a0f021 	move	s8,sp
  4019a0:	afc40028 	sw	a0,40(s8)
  4019a4:	afc5002c 	sw	a1,44(s8)
  4019a8:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/sysdeps.h:404
    int fd;

    fd = accept(serverfd, addr, addrlen);
  4019ac:	8fc2002c 	lw	v0,44(s8)
  4019b0:	8fc40028 	lw	a0,40(s8)
  4019b4:	00402821 	move	a1,v0
  4019b8:	8fc60030 	lw	a2,48(s8)
  4019bc:	0c1053e0 	jal	414f80 <accept@plt>
  4019c0:	00000000 	nop
  4019c4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:406

    if (fd >= 0)
  4019c8:	8fc20018 	lw	v0,24(s8)
  4019cc:	04400004 	bltz	v0,4019e0 <adb_socket_accept+0x50>
  4019d0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:407
        close_on_exec(fd);
  4019d4:	8fc40018 	lw	a0,24(s8)
  4019d8:	0c100610 	jal	401840 <close_on_exec>
  4019dc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:409

    return fd;
  4019e0:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:410
}
  4019e4:	03c0e821 	move	sp,s8
  4019e8:	8fbf0024 	lw	ra,36(sp)
  4019ec:	8fbe0020 	lw	s8,32(sp)
  4019f0:	27bd0028 	addiu	sp,sp,40
  4019f4:	03e00008 	jr	ra
  4019f8:	00000000 	nop

004019fc <adb_socket_setbufsize>:
adb_socket_setbufsize():
/home_a/ppchen/adb/sysdeps.h:440

    return ret;
}

static __inline__  int  adb_socket_setbufsize( int   fd, int  bufsize )
{
  4019fc:	27bdffd0 	addiu	sp,sp,-48
  401a00:	afbf002c 	sw	ra,44(sp)
  401a04:	afbe0028 	sw	s8,40(sp)
  401a08:	03a0f021 	move	s8,sp
  401a0c:	afc40030 	sw	a0,48(s8)
  401a10:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/sysdeps.h:441
    int opt = bufsize;
  401a14:	8fc20034 	lw	v0,52(s8)
  401a18:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sysdeps.h:442
    return setsockopt(fd, SOL_SOCKET, SO_RCVBUF, &opt, sizeof(opt));
  401a1c:	24020004 	li	v0,4
  401a20:	afa20010 	sw	v0,16(sp)
  401a24:	8fc40030 	lw	a0,48(s8)
  401a28:	3405ffff 	li	a1,0xffff
  401a2c:	24061002 	li	a2,4098
  401a30:	27c20020 	addiu	v0,s8,32
  401a34:	00403821 	move	a3,v0
  401a38:	0c10535c 	jal	414d70 <setsockopt@plt>
  401a3c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:443
}
  401a40:	03c0e821 	move	sp,s8
  401a44:	8fbf002c 	lw	ra,44(sp)
  401a48:	8fbe0028 	lw	s8,40(sp)
  401a4c:	27bd0030 	addiu	sp,sp,48
  401a50:	03e00008 	jr	ra
  401a54:	00000000 	nop

00401a58 <adb_mkdir>:
adb_mkdir():
/home_a/ppchen/adb/sysdeps.h:484
{
    usleep( mseconds*1000 );
}

static __inline__ int  adb_mkdir(const char*  path, int mode)
{
  401a58:	27bdffe0 	addiu	sp,sp,-32
  401a5c:	afbf001c 	sw	ra,28(sp)
  401a60:	afbe0018 	sw	s8,24(sp)
  401a64:	03a0f021 	move	s8,sp
  401a68:	afc40020 	sw	a0,32(s8)
  401a6c:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/sysdeps.h:485
    return mkdir(path, mode);
  401a70:	8fc20024 	lw	v0,36(s8)
  401a74:	8fc40020 	lw	a0,32(s8)
  401a78:	00402821 	move	a1,v0
  401a7c:	0c1052fc 	jal	414bf0 <mkdir@plt>
  401a80:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:486
}
  401a84:	03c0e821 	move	sp,s8
  401a88:	8fbf001c 	lw	ra,28(sp)
  401a8c:	8fbe0018 	lw	s8,24(sp)
  401a90:	27bd0020 	addiu	sp,sp,32
  401a94:	03e00008 	jr	ra
  401a98:	00000000 	nop

00401a9c <fatal>:
fatal():
/home_a/ppchen/adb/adb.c:51
int HOST = 0;

static const char *adb_device_banner = "device";

void fatal(const char *fmt, ...)
{
  401a9c:	27bdffd8 	addiu	sp,sp,-40
  401aa0:	afbf0024 	sw	ra,36(sp)
  401aa4:	afbe0020 	sw	s8,32(sp)
  401aa8:	03a0f021 	move	s8,sp
  401aac:	afc5002c 	sw	a1,44(s8)
  401ab0:	afc60030 	sw	a2,48(s8)
  401ab4:	afc70034 	sw	a3,52(s8)
  401ab8:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/adb.c:53
    va_list ap;
    va_start(ap, fmt);
  401abc:	27c2002c 	addiu	v0,s8,44
  401ac0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:54
    fprintf(stderr, "error: ");
  401ac4:	3c020042 	lui	v0,0x42
  401ac8:	8c4257c4 	lw	v0,22468(v0)
  401acc:	3c030041 	lui	v1,0x41
  401ad0:	24642e10 	addiu	a0,v1,11792
  401ad4:	24050001 	li	a1,1
  401ad8:	24060007 	li	a2,7
  401adc:	00403821 	move	a3,v0
  401ae0:	0c1052d0 	jal	414b40 <fwrite@plt>
  401ae4:	00000000 	nop
/home_a/ppchen/adb/adb.c:55
    vfprintf(stderr, fmt, ap);
  401ae8:	3c020042 	lui	v0,0x42
  401aec:	8c4357c4 	lw	v1,22468(v0)
  401af0:	8fc20018 	lw	v0,24(s8)
  401af4:	00602021 	move	a0,v1
  401af8:	8fc50028 	lw	a1,40(s8)
  401afc:	00403021 	move	a2,v0
  401b00:	0c1052e8 	jal	414ba0 <vfprintf@plt>
  401b04:	00000000 	nop
/home_a/ppchen/adb/adb.c:56
    fprintf(stderr, "\n");
  401b08:	3c020042 	lui	v0,0x42
  401b0c:	8c4257c4 	lw	v0,22468(v0)
  401b10:	2404000a 	li	a0,10
  401b14:	00402821 	move	a1,v0
  401b18:	0c10537c 	jal	414df0 <fputc@plt>
  401b1c:	00000000 	nop
/home_a/ppchen/adb/adb.c:58
    va_end(ap);
    exit(-1);
  401b20:	2404ffff 	li	a0,-1
  401b24:	0c1053cc 	jal	414f30 <exit@plt>
  401b28:	00000000 	nop

00401b2c <fatal_errno>:
fatal_errno():
/home_a/ppchen/adb/adb.c:62
}

void fatal_errno(const char *fmt, ...)
{
  401b2c:	27bdffd0 	addiu	sp,sp,-48
  401b30:	afbf002c 	sw	ra,44(sp)
  401b34:	afbe0028 	sw	s8,40(sp)
  401b38:	afb00024 	sw	s0,36(sp)
  401b3c:	03a0f021 	move	s8,sp
  401b40:	afc50034 	sw	a1,52(s8)
  401b44:	afc60038 	sw	a2,56(s8)
  401b48:	afc7003c 	sw	a3,60(s8)
  401b4c:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/adb.c:64
    va_list ap;
    va_start(ap, fmt);
  401b50:	27c20034 	addiu	v0,s8,52
  401b54:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:65
    fprintf(stderr, "error: %s: ", strerror(errno));
  401b58:	3c020042 	lui	v0,0x42
  401b5c:	8c5057c4 	lw	s0,22468(v0)
  401b60:	0c1052c0 	jal	414b00 <__errno_location@plt>
  401b64:	00000000 	nop
  401b68:	8c420000 	lw	v0,0(v0)
  401b6c:	00402021 	move	a0,v0
  401b70:	0c1053f8 	jal	414fe0 <strerror@plt>
  401b74:	00000000 	nop
  401b78:	02002021 	move	a0,s0
  401b7c:	3c030041 	lui	v1,0x41
  401b80:	24652e18 	addiu	a1,v1,11800
  401b84:	00403021 	move	a2,v0
  401b88:	0c1053b4 	jal	414ed0 <fprintf@plt>
  401b8c:	00000000 	nop
/home_a/ppchen/adb/adb.c:66
    vfprintf(stderr, fmt, ap);
  401b90:	3c020042 	lui	v0,0x42
  401b94:	8c4357c4 	lw	v1,22468(v0)
  401b98:	8fc20018 	lw	v0,24(s8)
  401b9c:	00602021 	move	a0,v1
  401ba0:	8fc50030 	lw	a1,48(s8)
  401ba4:	00403021 	move	a2,v0
  401ba8:	0c1052e8 	jal	414ba0 <vfprintf@plt>
  401bac:	00000000 	nop
/home_a/ppchen/adb/adb.c:67
    fprintf(stderr, "\n");
  401bb0:	3c020042 	lui	v0,0x42
  401bb4:	8c4257c4 	lw	v0,22468(v0)
  401bb8:	2404000a 	li	a0,10
  401bbc:	00402821 	move	a1,v0
  401bc0:	0c10537c 	jal	414df0 <fputc@plt>
  401bc4:	00000000 	nop
/home_a/ppchen/adb/adb.c:69
    va_end(ap);
    exit(-1);
  401bc8:	2404ffff 	li	a0,-1
  401bcc:	0c1053cc 	jal	414f30 <exit@plt>
  401bd0:	00000000 	nop

00401bd4 <adb_trace_init>:
adb_trace_init():
/home_a/ppchen/adb/adb.c:80
 * from the ADB_TRACE environment variable and build the trace
 * mask from it. note that '1' and 'all' are special cases to
 * enable all tracing
 */
void  adb_trace_init(void)
{
  401bd4:	27bdffc8 	addiu	sp,sp,-56
  401bd8:	afbf0034 	sw	ra,52(sp)
  401bdc:	afbe0030 	sw	s8,48(sp)
  401be0:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:81
    const char*  p = getenv("ADB_TRACE");
  401be4:	3c020041 	lui	v0,0x41
  401be8:	24442e24 	addiu	a0,v0,11812
  401bec:	0c1052cc 	jal	414b30 <getenv@plt>
  401bf0:	00000000 	nop
  401bf4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:103
        { "jdwp", TRACE_JDWP },
        { "services", TRACE_SERVICES },
        { NULL, 0 }
    };

    if (p == NULL)
  401bf8:	8fc20018 	lw	v0,24(s8)
  401bfc:	14400064 	bnez	v0,401d90 <adb_trace_init+0x1bc>
  401c00:	00000000 	nop
/home_a/ppchen/adb/adb.c:104
            return;
  401c04:	10000067 	b	401da4 <adb_trace_init+0x1d0>
  401c08:	00000000 	nop
/home_a/ppchen/adb/adb.c:110

    /* use a comma/column/semi-colum/space separated list */
    while (*p) {
        int  len, tagn;

        q = strpbrk(p, " ,:;");
  401c0c:	8fc40018 	lw	a0,24(s8)
  401c10:	3c020041 	lui	v0,0x41
  401c14:	24452e30 	addiu	a1,v0,11824
  401c18:	0c1053ec 	jal	414fb0 <strpbrk@plt>
  401c1c:	00000000 	nop
  401c20:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:111
        if (q == NULL) {
  401c24:	8fc2001c 	lw	v0,28(s8)
  401c28:	14400007 	bnez	v0,401c48 <adb_trace_init+0x74>
  401c2c:	00000000 	nop
/home_a/ppchen/adb/adb.c:112
            q = p + strlen(p);
  401c30:	8fc40018 	lw	a0,24(s8)
  401c34:	0c10531c 	jal	414c70 <strlen@plt>
  401c38:	00000000 	nop
  401c3c:	8fc30018 	lw	v1,24(s8)
  401c40:	00621021 	addu	v0,v1,v0
  401c44:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:114
        }
        len = q - p;
  401c48:	8fc3001c 	lw	v1,28(s8)
  401c4c:	8fc20018 	lw	v0,24(s8)
  401c50:	00621023 	subu	v0,v1,v0
  401c54:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/adb.c:116

        for (tagn = 0; tags[tagn].tag != NULL; tagn++)
  401c58:	afc00020 	sw	zero,32(s8)
  401c5c:	10000039 	b	401d44 <adb_trace_init+0x170>
  401c60:	00000000 	nop
/home_a/ppchen/adb/adb.c:118
        {
            int  taglen = strlen(tags[tagn].tag);
  401c64:	3c020041 	lui	v0,0x41
  401c68:	8fc30020 	lw	v1,32(s8)
  401c6c:	000318c0 	sll	v1,v1,0x3
  401c70:	244231dc 	addiu	v0,v0,12764
  401c74:	00621021 	addu	v0,v1,v0
  401c78:	8c420000 	lw	v0,0(v0)
  401c7c:	00402021 	move	a0,v0
  401c80:	0c10531c 	jal	414c70 <strlen@plt>
  401c84:	00000000 	nop
  401c88:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/adb.c:120

            if (len == taglen && !memcmp(tags[tagn].tag, p, len) )
  401c8c:	8fc30024 	lw	v1,36(s8)
  401c90:	8fc20028 	lw	v0,40(s8)
  401c94:	14620028 	bne	v1,v0,401d38 <adb_trace_init+0x164>
  401c98:	00000000 	nop
/home_a/ppchen/adb/adb.c:120 (discriminator 1)
  401c9c:	3c020041 	lui	v0,0x41
  401ca0:	8fc30020 	lw	v1,32(s8)
  401ca4:	000318c0 	sll	v1,v1,0x3
  401ca8:	244231dc 	addiu	v0,v0,12764
  401cac:	00621021 	addu	v0,v1,v0
  401cb0:	8c430000 	lw	v1,0(v0)
  401cb4:	8fc20024 	lw	v0,36(s8)
  401cb8:	00602021 	move	a0,v1
  401cbc:	8fc50018 	lw	a1,24(s8)
  401cc0:	00403021 	move	a2,v0
  401cc4:	0c1053bc 	jal	414ef0 <memcmp@plt>
  401cc8:	00000000 	nop
  401ccc:	1440001a 	bnez	v0,401d38 <adb_trace_init+0x164>
  401cd0:	00000000 	nop
/home_a/ppchen/adb/adb.c:122
            {
                int  flag = tags[tagn].flag;
  401cd4:	3c030041 	lui	v1,0x41
  401cd8:	8fc20020 	lw	v0,32(s8)
  401cdc:	246331dc 	addiu	v1,v1,12764
  401ce0:	000210c0 	sll	v0,v0,0x3
  401ce4:	00621021 	addu	v0,v1,v0
  401ce8:	8c420004 	lw	v0,4(v0)
  401cec:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/adb.c:123
                if (flag == 0) {
  401cf0:	8fc2002c 	lw	v0,44(s8)
  401cf4:	14400006 	bnez	v0,401d10 <adb_trace_init+0x13c>
  401cf8:	00000000 	nop
/home_a/ppchen/adb/adb.c:124
                    adb_trace_mask = ~0;
  401cfc:	3c020042 	lui	v0,0x42
  401d00:	2403ffff 	li	v1,-1
  401d04:	ac4357b4 	sw	v1,22452(v0)
/home_a/ppchen/adb/adb.c:125
                    return;
  401d08:	10000026 	b	401da4 <adb_trace_init+0x1d0>
  401d0c:	00000000 	nop
/home_a/ppchen/adb/adb.c:127
                }
                adb_trace_mask |= (1 << flag);
  401d10:	24030001 	li	v1,1
  401d14:	8fc2002c 	lw	v0,44(s8)
  401d18:	00431804 	sllv	v1,v1,v0
  401d1c:	3c020042 	lui	v0,0x42
  401d20:	8c4257b4 	lw	v0,22452(v0)
  401d24:	00621825 	or	v1,v1,v0
  401d28:	3c020042 	lui	v0,0x42
  401d2c:	ac4357b4 	sw	v1,22452(v0)
/home_a/ppchen/adb/adb.c:128
                break;
  401d30:	1000000c 	b	401d64 <adb_trace_init+0x190>
  401d34:	00000000 	nop
/home_a/ppchen/adb/adb.c:116
        if (q == NULL) {
            q = p + strlen(p);
        }
        len = q - p;

        for (tagn = 0; tags[tagn].tag != NULL; tagn++)
  401d38:	8fc20020 	lw	v0,32(s8)
  401d3c:	24420001 	addiu	v0,v0,1
  401d40:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/adb.c:116 (discriminator 1)
  401d44:	3c020041 	lui	v0,0x41
  401d48:	8fc30020 	lw	v1,32(s8)
  401d4c:	000318c0 	sll	v1,v1,0x3
  401d50:	244231dc 	addiu	v0,v0,12764
  401d54:	00621021 	addu	v0,v1,v0
  401d58:	8c420000 	lw	v0,0(v0)
  401d5c:	1440ffc1 	bnez	v0,401c64 <adb_trace_init+0x90>
  401d60:	00000000 	nop
/home_a/ppchen/adb/adb.c:131
                }
                adb_trace_mask |= (1 << flag);
                break;
            }
        }
        p = q;
  401d64:	8fc2001c 	lw	v0,28(s8)
  401d68:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:132
        if (*p)
  401d6c:	8fc20018 	lw	v0,24(s8)
  401d70:	80420000 	lb	v0,0(v0)
  401d74:	10400007 	beqz	v0,401d94 <adb_trace_init+0x1c0>
  401d78:	00000000 	nop
/home_a/ppchen/adb/adb.c:133
            p++;
  401d7c:	8fc20018 	lw	v0,24(s8)
  401d80:	24420001 	addiu	v0,v0,1
  401d84:	afc20018 	sw	v0,24(s8)
  401d88:	10000002 	b	401d94 <adb_trace_init+0x1c0>
  401d8c:	00000000 	nop
/home_a/ppchen/adb/adb.c:107

    if (p == NULL)
            return;

    /* use a comma/column/semi-colum/space separated list */
    while (*p) {
  401d90:	00000000 	nop
/home_a/ppchen/adb/adb.c:107 (discriminator 1)
  401d94:	8fc20018 	lw	v0,24(s8)
  401d98:	80420000 	lb	v0,0(v0)
  401d9c:	1440ff9b 	bnez	v0,401c0c <adb_trace_init+0x38>
  401da0:	00000000 	nop
/home_a/ppchen/adb/adb.c:135
        }
        p = q;
        if (*p)
            p++;
    }
}
  401da4:	03c0e821 	move	sp,s8
  401da8:	8fbf0034 	lw	ra,52(sp)
  401dac:	8fbe0030 	lw	s8,48(sp)
  401db0:	27bd0038 	addiu	sp,sp,56
  401db4:	03e00008 	jr	ra
  401db8:	00000000 	nop

00401dbc <get_apacket>:
get_apacket():
/home_a/ppchen/adb/adb.c:193

#endif
#endif  /* !ADB_HOST */

apacket *get_apacket(void)
{
  401dbc:	27bdffd8 	addiu	sp,sp,-40
  401dc0:	afbf0024 	sw	ra,36(sp)
  401dc4:	afbe0020 	sw	s8,32(sp)
  401dc8:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:194
    apacket *p = malloc(sizeof(apacket));
  401dcc:	24041024 	li	a0,4132
  401dd0:	0c105300 	jal	414c00 <malloc@plt>
  401dd4:	00000000 	nop
  401dd8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:195
    if(p == 0) fatal("failed to allocate an apacket");
  401ddc:	8fc20018 	lw	v0,24(s8)
  401de0:	14400005 	bnez	v0,401df8 <get_apacket+0x3c>
  401de4:	00000000 	nop
/home_a/ppchen/adb/adb.c:195 (discriminator 1)
  401de8:	3c020041 	lui	v0,0x41
  401dec:	24442e38 	addiu	a0,v0,11832
  401df0:	0c1006a7 	jal	401a9c <fatal>
  401df4:	00000000 	nop
/home_a/ppchen/adb/adb.c:196
    memset(p, 0, sizeof(apacket) - MAX_PAYLOAD);
  401df8:	8fc40018 	lw	a0,24(s8)
  401dfc:	00002821 	move	a1,zero
  401e00:	24060024 	li	a2,36
  401e04:	0c1053ac 	jal	414eb0 <memset@plt>
  401e08:	00000000 	nop
/home_a/ppchen/adb/adb.c:197
    return p;
  401e0c:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/adb.c:198
}
  401e10:	03c0e821 	move	sp,s8
  401e14:	8fbf0024 	lw	ra,36(sp)
  401e18:	8fbe0020 	lw	s8,32(sp)
  401e1c:	27bd0028 	addiu	sp,sp,40
  401e20:	03e00008 	jr	ra
  401e24:	00000000 	nop

00401e28 <put_apacket>:
put_apacket():
/home_a/ppchen/adb/adb.c:201

void put_apacket(apacket *p)
{
  401e28:	27bdffe0 	addiu	sp,sp,-32
  401e2c:	afbf001c 	sw	ra,28(sp)
  401e30:	afbe0018 	sw	s8,24(sp)
  401e34:	03a0f021 	move	s8,sp
  401e38:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/adb.c:202
    free(p);
  401e3c:	8fc40020 	lw	a0,32(s8)
  401e40:	0c1053e4 	jal	414f90 <free@plt>
  401e44:	00000000 	nop
/home_a/ppchen/adb/adb.c:203
}
  401e48:	03c0e821 	move	sp,s8
  401e4c:	8fbf001c 	lw	ra,28(sp)
  401e50:	8fbe0018 	lw	s8,24(sp)
  401e54:	27bd0020 	addiu	sp,sp,32
  401e58:	03e00008 	jr	ra
  401e5c:	00000000 	nop

00401e60 <handle_online>:
handle_online():
/home_a/ppchen/adb/adb.c:206

void handle_online(void)
{
  401e60:	27bdfff8 	addiu	sp,sp,-8
  401e64:	afbe0004 	sw	s8,4(sp)
  401e68:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:208

}
  401e6c:	03c0e821 	move	sp,s8
  401e70:	8fbe0004 	lw	s8,4(sp)
  401e74:	27bd0008 	addiu	sp,sp,8
  401e78:	03e00008 	jr	ra
  401e7c:	00000000 	nop

00401e80 <handle_offline>:
handle_offline():
/home_a/ppchen/adb/adb.c:211

void handle_offline(atransport *t)
{
  401e80:	27bdffe0 	addiu	sp,sp,-32
  401e84:	afbf001c 	sw	ra,28(sp)
  401e88:	afbe0018 	sw	s8,24(sp)
  401e8c:	03a0f021 	move	s8,sp
  401e90:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/adb.c:214

    //Close the associated usb
    run_transport_disconnects(t);
  401e94:	8fc40020 	lw	a0,32(s8)
  401e98:	0c101905 	jal	406414 <run_transport_disconnects>
  401e9c:	00000000 	nop
/home_a/ppchen/adb/adb.c:215
}
  401ea0:	03c0e821 	move	sp,s8
  401ea4:	8fbf001c 	lw	ra,28(sp)
  401ea8:	8fbe0018 	lw	s8,24(sp)
  401eac:	27bd0020 	addiu	sp,sp,32
  401eb0:	03e00008 	jr	ra
  401eb4:	00000000 	nop

00401eb8 <send_ready>:
send_ready():
/home_a/ppchen/adb/adb.c:258
    fprintf(stderr, tag);
}
#endif

static void send_ready(unsigned local, unsigned remote, atransport *t)
{
  401eb8:	27bdffd8 	addiu	sp,sp,-40
  401ebc:	afbf0024 	sw	ra,36(sp)
  401ec0:	afbe0020 	sw	s8,32(sp)
  401ec4:	03a0f021 	move	s8,sp
  401ec8:	afc40028 	sw	a0,40(s8)
  401ecc:	afc5002c 	sw	a1,44(s8)
  401ed0:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/adb.c:260

    apacket *p = get_apacket();
  401ed4:	0c10076f 	jal	401dbc <get_apacket>
  401ed8:	00000000 	nop
  401edc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:261
    p->msg.command = A_OKAY;
  401ee0:	8fc20018 	lw	v0,24(s8)
  401ee4:	3c035941 	lui	v1,0x5941
  401ee8:	34634b4f 	ori	v1,v1,0x4b4f
  401eec:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/adb.c:262
    p->msg.arg0 = local;
  401ef0:	8fc20018 	lw	v0,24(s8)
  401ef4:	8fc30028 	lw	v1,40(s8)
  401ef8:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/adb.c:263
    p->msg.arg1 = remote;
  401efc:	8fc20018 	lw	v0,24(s8)
  401f00:	8fc3002c 	lw	v1,44(s8)
  401f04:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:265
    
    send_packet(p, t);
  401f08:	8fc40018 	lw	a0,24(s8)
  401f0c:	8fc50030 	lw	a1,48(s8)
  401f10:	0c101a6e 	jal	4069b8 <send_packet>
  401f14:	00000000 	nop
/home_a/ppchen/adb/adb.c:266
}
  401f18:	03c0e821 	move	sp,s8
  401f1c:	8fbf0024 	lw	ra,36(sp)
  401f20:	8fbe0020 	lw	s8,32(sp)
  401f24:	27bd0028 	addiu	sp,sp,40
  401f28:	03e00008 	jr	ra
  401f2c:	00000000 	nop

00401f30 <send_close>:
send_close():
/home_a/ppchen/adb/adb.c:269

static void send_close(unsigned local, unsigned remote, atransport *t)
{
  401f30:	27bdffd8 	addiu	sp,sp,-40
  401f34:	afbf0024 	sw	ra,36(sp)
  401f38:	afbe0020 	sw	s8,32(sp)
  401f3c:	03a0f021 	move	s8,sp
  401f40:	afc40028 	sw	a0,40(s8)
  401f44:	afc5002c 	sw	a1,44(s8)
  401f48:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/adb.c:271
  
    apacket *p = get_apacket();
  401f4c:	0c10076f 	jal	401dbc <get_apacket>
  401f50:	00000000 	nop
  401f54:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:272
    p->msg.command = A_CLSE;
  401f58:	8fc20018 	lw	v0,24(s8)
  401f5c:	3c034553 	lui	v1,0x4553
  401f60:	34634c43 	ori	v1,v1,0x4c43
  401f64:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/adb.c:273
    p->msg.arg0 = local;
  401f68:	8fc20018 	lw	v0,24(s8)
  401f6c:	8fc30028 	lw	v1,40(s8)
  401f70:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/adb.c:274
    p->msg.arg1 = remote;
  401f74:	8fc20018 	lw	v0,24(s8)
  401f78:	8fc3002c 	lw	v1,44(s8)
  401f7c:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:275
    send_packet(p, t);
  401f80:	8fc40018 	lw	a0,24(s8)
  401f84:	8fc50030 	lw	a1,48(s8)
  401f88:	0c101a6e 	jal	4069b8 <send_packet>
  401f8c:	00000000 	nop
/home_a/ppchen/adb/adb.c:276
}
  401f90:	03c0e821 	move	sp,s8
  401f94:	8fbf0024 	lw	ra,36(sp)
  401f98:	8fbe0020 	lw	s8,32(sp)
  401f9c:	27bd0028 	addiu	sp,sp,40
  401fa0:	03e00008 	jr	ra
  401fa4:	00000000 	nop

00401fa8 <send_connect>:
send_connect():
/home_a/ppchen/adb/adb.c:279

static void send_connect(atransport *t)
{
  401fa8:	27bdffd8 	addiu	sp,sp,-40
  401fac:	afbf0024 	sw	ra,36(sp)
  401fb0:	afbe0020 	sw	s8,32(sp)
  401fb4:	03a0f021 	move	s8,sp
  401fb8:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/adb.c:281
   
    apacket *cp = get_apacket();
  401fbc:	0c10076f 	jal	401dbc <get_apacket>
  401fc0:	00000000 	nop
  401fc4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:282
    cp->msg.command = A_CNXN;
  401fc8:	8fc20018 	lw	v0,24(s8)
  401fcc:	3c034e58 	lui	v1,0x4e58
  401fd0:	34634e43 	ori	v1,v1,0x4e43
  401fd4:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/adb.c:283
    cp->msg.arg0 = A_VERSION;
  401fd8:	8fc20018 	lw	v0,24(s8)
  401fdc:	3c030100 	lui	v1,0x100
  401fe0:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/adb.c:284
    cp->msg.arg1 = MAX_PAYLOAD;
  401fe4:	8fc20018 	lw	v0,24(s8)
  401fe8:	24031000 	li	v1,4096
  401fec:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:285
    snprintf((char*) cp->data, sizeof cp->data, "%s::",
  401ff0:	8fc20018 	lw	v0,24(s8)
  401ff4:	24430024 	addiu	v1,v0,36
/home_a/ppchen/adb/adb.c:286
            HOST ? "host" : adb_device_banner);
  401ff8:	3c020042 	lui	v0,0x42
  401ffc:	8c42580c 	lw	v0,22540(v0)
/home_a/ppchen/adb/adb.c:285
   
    apacket *cp = get_apacket();
    cp->msg.command = A_CNXN;
    cp->msg.arg0 = A_VERSION;
    cp->msg.arg1 = MAX_PAYLOAD;
    snprintf((char*) cp->data, sizeof cp->data, "%s::",
  402000:	14400005 	bnez	v0,402018 <send_connect+0x70>
  402004:	00000000 	nop
/home_a/ppchen/adb/adb.c:285 (discriminator 1)
  402008:	3c020042 	lui	v0,0x42
  40200c:	8c4255e0 	lw	v0,21984(v0)
  402010:	10000003 	b	402020 <send_connect+0x78>
  402014:	00000000 	nop
/home_a/ppchen/adb/adb.c:285 (discriminator 2)
  402018:	3c020041 	lui	v0,0x41
  40201c:	24422e58 	addiu	v0,v0,11864
/home_a/ppchen/adb/adb.c:285 (discriminator 3)
  402020:	00602021 	move	a0,v1
  402024:	24051000 	li	a1,4096
  402028:	3c030041 	lui	v1,0x41
  40202c:	24662e60 	addiu	a2,v1,11872
  402030:	00403821 	move	a3,v0
  402034:	0c105334 	jal	414cd0 <snprintf@plt>
  402038:	00000000 	nop
/home_a/ppchen/adb/adb.c:287 (discriminator 3)
            HOST ? "host" : adb_device_banner);
    cp->msg.data_length = strlen((char*) cp->data) + 1;
  40203c:	8fc20018 	lw	v0,24(s8)
  402040:	24420024 	addiu	v0,v0,36
  402044:	00402021 	move	a0,v0
  402048:	0c10531c 	jal	414c70 <strlen@plt>
  40204c:	00000000 	nop
  402050:	24430001 	addiu	v1,v0,1
  402054:	8fc20018 	lw	v0,24(s8)
  402058:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/adb.c:288 (discriminator 3)
    send_packet(cp, t);
  40205c:	8fc40018 	lw	a0,24(s8)
  402060:	8fc50028 	lw	a1,40(s8)
  402064:	0c101a6e 	jal	4069b8 <send_packet>
  402068:	00000000 	nop
/home_a/ppchen/adb/adb.c:294 (discriminator 3)
#if ADB_HOST
        /* XXX why sleep here? */
    // allow the device some time to respond to the connect message
    adb_sleep_ms(1000);
#endif
}
  40206c:	03c0e821 	move	sp,s8
  402070:	8fbf0024 	lw	ra,36(sp)
  402074:	8fbe0020 	lw	s8,32(sp)
  402078:	27bd0028 	addiu	sp,sp,40
  40207c:	03e00008 	jr	ra
  402080:	00000000 	nop

00402084 <connection_state_name>:
connection_state_name():
/home_a/ppchen/adb/adb.c:297

static char *connection_state_name(atransport *t)
{
  402084:	27bdfff8 	addiu	sp,sp,-8
  402088:	afbe0004 	sw	s8,4(sp)
  40208c:	03a0f021 	move	s8,sp
  402090:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/adb.c:298
    if (t == NULL) {
  402094:	8fc20008 	lw	v0,8(s8)
  402098:	14400005 	bnez	v0,4020b0 <connection_state_name+0x2c>
  40209c:	00000000 	nop
/home_a/ppchen/adb/adb.c:299
        return "unknown";
  4020a0:	3c020041 	lui	v0,0x41
  4020a4:	24422e68 	addiu	v0,v0,11880
  4020a8:	1000001b 	b	402118 <connection_state_name+0x94>
  4020ac:	00000000 	nop
/home_a/ppchen/adb/adb.c:302
    }

    switch(t->connection_state) {
  4020b0:	8fc20008 	lw	v0,8(s8)
  4020b4:	8c420044 	lw	v0,68(v0)
  4020b8:	24030001 	li	v1,1
  4020bc:	10430008 	beq	v0,v1,4020e0 <connection_state_name+0x5c>
  4020c0:	00000000 	nop
  4020c4:	24030002 	li	v1,2
  4020c8:	10430009 	beq	v0,v1,4020f0 <connection_state_name+0x6c>
  4020cc:	00000000 	nop
  4020d0:	1040000b 	beqz	v0,402100 <connection_state_name+0x7c>
  4020d4:	00000000 	nop
  4020d8:	1000000d 	b	402110 <connection_state_name+0x8c>
  4020dc:	00000000 	nop
/home_a/ppchen/adb/adb.c:304
    case CS_BOOTLOADER:
        return "bootloader";
  4020e0:	3c020041 	lui	v0,0x41
  4020e4:	24422e70 	addiu	v0,v0,11888
  4020e8:	1000000b 	b	402118 <connection_state_name+0x94>
  4020ec:	00000000 	nop
/home_a/ppchen/adb/adb.c:306
    case CS_DEVICE:
        return "device";
  4020f0:	3c020041 	lui	v0,0x41
  4020f4:	24422e08 	addiu	v0,v0,11784
  4020f8:	10000007 	b	402118 <connection_state_name+0x94>
  4020fc:	00000000 	nop
/home_a/ppchen/adb/adb.c:308
    case CS_OFFLINE:
        return "offline";
  402100:	3c020041 	lui	v0,0x41
  402104:	24422e7c 	addiu	v0,v0,11900
  402108:	10000003 	b	402118 <connection_state_name+0x94>
  40210c:	00000000 	nop
/home_a/ppchen/adb/adb.c:310
    default:
        return "unknown";
  402110:	3c020041 	lui	v0,0x41
  402114:	24422e68 	addiu	v0,v0,11880
/home_a/ppchen/adb/adb.c:312
    }
}
  402118:	03c0e821 	move	sp,s8
  40211c:	8fbe0004 	lw	s8,4(sp)
  402120:	27bd0008 	addiu	sp,sp,8
  402124:	03e00008 	jr	ra
  402128:	00000000 	nop

0040212c <parse_banner>:
parse_banner():
/home_a/ppchen/adb/adb.c:315

void parse_banner(char *banner, atransport *t)
{
  40212c:	27bdffd0 	addiu	sp,sp,-48
  402130:	afbf002c 	sw	ra,44(sp)
  402134:	afbe0028 	sw	s8,40(sp)
  402138:	03a0f021 	move	s8,sp
  40213c:	afc40030 	sw	a0,48(s8)
  402140:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/adb.c:319
    char *type, *product, *end;

   
    type = banner;
  402144:	8fc20030 	lw	v0,48(s8)
  402148:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:320
    product = strchr(type, ':');
  40214c:	8fc4001c 	lw	a0,28(s8)
  402150:	2405003a 	li	a1,58
  402154:	0c1053f4 	jal	414fd0 <strchr@plt>
  402158:	00000000 	nop
  40215c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:321
    if(product) {
  402160:	8fc20018 	lw	v0,24(s8)
  402164:	10400008 	beqz	v0,402188 <parse_banner+0x5c>
  402168:	00000000 	nop
/home_a/ppchen/adb/adb.c:322
        *product++ = 0;
  40216c:	8fc20018 	lw	v0,24(s8)
  402170:	a0400000 	sb	zero,0(v0)
  402174:	8fc20018 	lw	v0,24(s8)
  402178:	24420001 	addiu	v0,v0,1
  40217c:	afc20018 	sw	v0,24(s8)
  402180:	10000004 	b	402194 <parse_banner+0x68>
  402184:	00000000 	nop
/home_a/ppchen/adb/adb.c:324
    } else {
        product = "";
  402188:	3c020041 	lui	v0,0x41
  40218c:	24422e84 	addiu	v0,v0,11908
  402190:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:328
    }

        /* remove trailing ':' */
    end = strchr(product, ':');
  402194:	8fc40018 	lw	a0,24(s8)
  402198:	2405003a 	li	a1,58
  40219c:	0c1053f4 	jal	414fd0 <strchr@plt>
  4021a0:	00000000 	nop
  4021a4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/adb.c:329
    if(end) *end = 0;
  4021a8:	8fc20020 	lw	v0,32(s8)
  4021ac:	10400003 	beqz	v0,4021bc <parse_banner+0x90>
  4021b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:329 (discriminator 1)
  4021b4:	8fc20020 	lw	v0,32(s8)
  4021b8:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/adb.c:332

        /* save product name in device structure */
    if (t->product == NULL) {
  4021bc:	8fc20034 	lw	v0,52(s8)
  4021c0:	8c420058 	lw	v0,88(v0)
  4021c4:	14400009 	bnez	v0,4021ec <parse_banner+0xc0>
  4021c8:	00000000 	nop
/home_a/ppchen/adb/adb.c:333
        t->product = strdup(product);
  4021cc:	8fc40018 	lw	a0,24(s8)
  4021d0:	0c105408 	jal	415020 <strdup@plt>
  4021d4:	00000000 	nop
  4021d8:	00401821 	move	v1,v0
  4021dc:	8fc20034 	lw	v0,52(s8)
  4021e0:	ac430058 	sw	v1,88(v0)
  4021e4:	10000014 	b	402238 <parse_banner+0x10c>
  4021e8:	00000000 	nop
/home_a/ppchen/adb/adb.c:334
    } else if (strcmp(product, t->product) != 0) {
  4021ec:	8fc20034 	lw	v0,52(s8)
  4021f0:	8c420058 	lw	v0,88(v0)
  4021f4:	8fc40018 	lw	a0,24(s8)
  4021f8:	00402821 	move	a1,v0
  4021fc:	0c1053d8 	jal	414f60 <strcmp@plt>
  402200:	00000000 	nop
  402204:	1040000c 	beqz	v0,402238 <parse_banner+0x10c>
  402208:	00000000 	nop
/home_a/ppchen/adb/adb.c:335
        free(t->product);
  40220c:	8fc20034 	lw	v0,52(s8)
  402210:	8c420058 	lw	v0,88(v0)
  402214:	00402021 	move	a0,v0
  402218:	0c1053e4 	jal	414f90 <free@plt>
  40221c:	00000000 	nop
/home_a/ppchen/adb/adb.c:336
        t->product = strdup(product);
  402220:	8fc40018 	lw	a0,24(s8)
  402224:	0c105408 	jal	415020 <strdup@plt>
  402228:	00000000 	nop
  40222c:	00401821 	move	v1,v0
  402230:	8fc20034 	lw	v0,52(s8)
  402234:	ac430058 	sw	v1,88(v0)
/home_a/ppchen/adb/adb.c:339
    }

    if(!strcmp(type, "bootloader")){
  402238:	8fc4001c 	lw	a0,28(s8)
  40223c:	3c020041 	lui	v0,0x41
  402240:	24452e70 	addiu	a1,v0,11888
  402244:	0c1053d8 	jal	414f60 <strcmp@plt>
  402248:	00000000 	nop
  40224c:	14400008 	bnez	v0,402270 <parse_banner+0x144>
  402250:	00000000 	nop
/home_a/ppchen/adb/adb.c:341
       
        t->connection_state = CS_BOOTLOADER;
  402254:	8fc20034 	lw	v0,52(s8)
  402258:	24030001 	li	v1,1
  40225c:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/adb.c:342
        update_transports();
  402260:	0c101b88 	jal	406e20 <update_transports>
  402264:	00000000 	nop
/home_a/ppchen/adb/adb.c:343
        return;
  402268:	1000002e 	b	402324 <parse_banner+0x1f8>
  40226c:	00000000 	nop
/home_a/ppchen/adb/adb.c:346
    }

    if(!strcmp(type, "device")) {
  402270:	8fc4001c 	lw	a0,28(s8)
  402274:	3c020041 	lui	v0,0x41
  402278:	24452e08 	addiu	a1,v0,11784
  40227c:	0c1053d8 	jal	414f60 <strcmp@plt>
  402280:	00000000 	nop
  402284:	14400008 	bnez	v0,4022a8 <parse_banner+0x17c>
  402288:	00000000 	nop
/home_a/ppchen/adb/adb.c:348
       
        t->connection_state = CS_DEVICE;
  40228c:	8fc20034 	lw	v0,52(s8)
  402290:	24030002 	li	v1,2
  402294:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/adb.c:349
        update_transports();
  402298:	0c101b88 	jal	406e20 <update_transports>
  40229c:	00000000 	nop
/home_a/ppchen/adb/adb.c:350
        return;
  4022a0:	10000020 	b	402324 <parse_banner+0x1f8>
  4022a4:	00000000 	nop
/home_a/ppchen/adb/adb.c:353
    }

    if(!strcmp(type, "recovery")) {
  4022a8:	8fc4001c 	lw	a0,28(s8)
  4022ac:	3c020041 	lui	v0,0x41
  4022b0:	24452e88 	addiu	a1,v0,11912
  4022b4:	0c1053d8 	jal	414f60 <strcmp@plt>
  4022b8:	00000000 	nop
  4022bc:	14400008 	bnez	v0,4022e0 <parse_banner+0x1b4>
  4022c0:	00000000 	nop
/home_a/ppchen/adb/adb.c:355
       
        t->connection_state = CS_RECOVERY;
  4022c4:	8fc20034 	lw	v0,52(s8)
  4022c8:	24030004 	li	v1,4
  4022cc:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/adb.c:356
        update_transports();
  4022d0:	0c101b88 	jal	406e20 <update_transports>
  4022d4:	00000000 	nop
/home_a/ppchen/adb/adb.c:357
        return;
  4022d8:	10000012 	b	402324 <parse_banner+0x1f8>
  4022dc:	00000000 	nop
/home_a/ppchen/adb/adb.c:360
    }

    if(!strcmp(type, "sideload")) {
  4022e0:	8fc4001c 	lw	a0,28(s8)
  4022e4:	3c020041 	lui	v0,0x41
  4022e8:	24452e94 	addiu	a1,v0,11924
  4022ec:	0c1053d8 	jal	414f60 <strcmp@plt>
  4022f0:	00000000 	nop
  4022f4:	14400008 	bnez	v0,402318 <parse_banner+0x1ec>
  4022f8:	00000000 	nop
/home_a/ppchen/adb/adb.c:362
       
        t->connection_state = CS_SIDELOAD;
  4022fc:	8fc20034 	lw	v0,52(s8)
  402300:	24030006 	li	v1,6
  402304:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/adb.c:363
        update_transports();
  402308:	0c101b88 	jal	406e20 <update_transports>
  40230c:	00000000 	nop
/home_a/ppchen/adb/adb.c:364
        return;
  402310:	10000004 	b	402324 <parse_banner+0x1f8>
  402314:	00000000 	nop
/home_a/ppchen/adb/adb.c:367
    }

    t->connection_state = CS_HOST;
  402318:	8fc20034 	lw	v0,52(s8)
  40231c:	24030003 	li	v1,3
  402320:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/adb.c:368
}
  402324:	03c0e821 	move	sp,s8
  402328:	8fbf002c 	lw	ra,44(sp)
  40232c:	8fbe0028 	lw	s8,40(sp)
  402330:	27bd0030 	addiu	sp,sp,48
  402334:	03e00008 	jr	ra
  402338:	00000000 	nop

0040233c <handle_packet>:
handle_packet():
/home_a/ppchen/adb/adb.c:371

void handle_packet(apacket *p, atransport *t)
{
  40233c:	27bdffd0 	addiu	sp,sp,-48
  402340:	afbf002c 	sw	ra,44(sp)
  402344:	afbe0028 	sw	s8,40(sp)
  402348:	03a0f021 	move	s8,sp
  40234c:	afc40030 	sw	a0,48(s8)
  402350:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/adb.c:376
    asocket *s;

print_packet("recv", p);

    switch(p->msg.command){
  402354:	8fc20030 	lw	v0,48(s8)
  402358:	8c42000c 	lw	v0,12(v0)
  40235c:	3c034554 	lui	v1,0x4554
  402360:	34635257 	ori	v1,v1,0x5257
  402364:	104300d2 	beq	v0,v1,4026b0 <handle_packet+0x374>
  402368:	00000000 	nop
  40236c:	3c034554 	lui	v1,0x4554
  402370:	34635258 	ori	v1,v1,0x5258
  402374:	0043182b 	sltu	v1,v0,v1
  402378:	1060000b 	beqz	v1,4023a8 <handle_packet+0x6c>
  40237c:	00000000 	nop
  402380:	3c03434e 	lui	v1,0x434e
  402384:	34635953 	ori	v1,v1,0x5953
  402388:	10430015 	beq	v0,v1,4023e0 <handle_packet+0xa4>
  40238c:	00000000 	nop
  402390:	3c034553 	lui	v1,0x4553
  402394:	34634c43 	ori	v1,v1,0x4c43
  402398:	104300b0 	beq	v0,v1,40265c <handle_packet+0x320>
  40239c:	00000000 	nop
  4023a0:	100000e9 	b	402748 <handle_packet+0x40c>
  4023a4:	00000000 	nop
  4023a8:	3c034e58 	lui	v1,0x4e58
  4023ac:	34634e43 	ori	v1,v1,0x4e43
  4023b0:	10430027 	beq	v0,v1,402450 <handle_packet+0x114>
  4023b4:	00000000 	nop
  4023b8:	3c035941 	lui	v1,0x5941
  4023bc:	34634b4f 	ori	v1,v1,0x4b4f
  4023c0:	10430080 	beq	v0,v1,4025c4 <handle_packet+0x288>
  4023c4:	00000000 	nop
  4023c8:	3c034e45 	lui	v1,0x4e45
  4023cc:	3463504f 	ori	v1,v1,0x504f
  4023d0:	10430039 	beq	v0,v1,4024b8 <handle_packet+0x17c>
  4023d4:	00000000 	nop
  4023d8:	100000db 	b	402748 <handle_packet+0x40c>
  4023dc:	00000000 	nop
/home_a/ppchen/adb/adb.c:379
    case A_SYNC:
	
        if(p->msg.arg0){
  4023e0:	8fc20030 	lw	v0,48(s8)
  4023e4:	8c420010 	lw	v0,16(v0)
  4023e8:	1040000e 	beqz	v0,402424 <handle_packet+0xe8>
  4023ec:	00000000 	nop
/home_a/ppchen/adb/adb.c:380
            send_packet(p, t);
  4023f0:	8fc40030 	lw	a0,48(s8)
  4023f4:	8fc50034 	lw	a1,52(s8)
  4023f8:	0c101a6e 	jal	4069b8 <send_packet>
  4023fc:	00000000 	nop
/home_a/ppchen/adb/adb.c:381
            if(HOST) send_connect(t);
  402400:	3c020042 	lui	v0,0x42
  402404:	8c42580c 	lw	v0,22540(v0)
  402408:	104000ea 	beqz	v0,4027b4 <handle_packet+0x478>
  40240c:	00000000 	nop
/home_a/ppchen/adb/adb.c:381 (discriminator 1)
  402410:	8fc40034 	lw	a0,52(s8)
  402414:	0c1007ea 	jal	401fa8 <send_connect>
  402418:	00000000 	nop
/home_a/ppchen/adb/adb.c:387 (discriminator 1)
        } else {
            t->connection_state = CS_OFFLINE;
            handle_offline(t);
            send_packet(p, t);
        }
        return;
  40241c:	100000e5 	b	4027b4 <handle_packet+0x478>
  402420:	00000000 	nop
/home_a/ppchen/adb/adb.c:383
	
        if(p->msg.arg0){
            send_packet(p, t);
            if(HOST) send_connect(t);
        } else {
            t->connection_state = CS_OFFLINE;
  402424:	8fc20034 	lw	v0,52(s8)
  402428:	ac400044 	sw	zero,68(v0)
/home_a/ppchen/adb/adb.c:384
            handle_offline(t);
  40242c:	8fc40034 	lw	a0,52(s8)
  402430:	0c1007a0 	jal	401e80 <handle_offline>
  402434:	00000000 	nop
/home_a/ppchen/adb/adb.c:385
            send_packet(p, t);
  402438:	8fc40030 	lw	a0,48(s8)
  40243c:	8fc50034 	lw	a1,52(s8)
  402440:	0c101a6e 	jal	4069b8 <send_packet>
  402444:	00000000 	nop
/home_a/ppchen/adb/adb.c:387
        }
        return;
  402448:	100000da 	b	4027b4 <handle_packet+0x478>
  40244c:	00000000 	nop
/home_a/ppchen/adb/adb.c:392

    case A_CNXN: /* CONNECT(version, maxdata, "system-id-string") */
            /* XXX verify version, etc */
	
        if(t->connection_state != CS_OFFLINE) {
  402450:	8fc20034 	lw	v0,52(s8)
  402454:	8c420044 	lw	v0,68(v0)
  402458:	10400006 	beqz	v0,402474 <handle_packet+0x138>
  40245c:	00000000 	nop
/home_a/ppchen/adb/adb.c:393
            t->connection_state = CS_OFFLINE;
  402460:	8fc20034 	lw	v0,52(s8)
  402464:	ac400044 	sw	zero,68(v0)
/home_a/ppchen/adb/adb.c:394
            handle_offline(t);
  402468:	8fc40034 	lw	a0,52(s8)
  40246c:	0c1007a0 	jal	401e80 <handle_offline>
  402470:	00000000 	nop
/home_a/ppchen/adb/adb.c:396
        }
        parse_banner((char*) p->data, t);
  402474:	8fc20030 	lw	v0,48(s8)
  402478:	24420024 	addiu	v0,v0,36
  40247c:	00402021 	move	a0,v0
  402480:	8fc50034 	lw	a1,52(s8)
  402484:	0c10084b 	jal	40212c <parse_banner>
  402488:	00000000 	nop
/home_a/ppchen/adb/adb.c:397
        handle_online();
  40248c:	0c100798 	jal	401e60 <handle_online>
  402490:	00000000 	nop
/home_a/ppchen/adb/adb.c:398
        if(!HOST) send_connect(t);
  402494:	3c020042 	lui	v0,0x42
  402498:	8c42580c 	lw	v0,22540(v0)
  40249c:	144000b3 	bnez	v0,40276c <handle_packet+0x430>
  4024a0:	00000000 	nop
/home_a/ppchen/adb/adb.c:398 (discriminator 1)
  4024a4:	8fc40034 	lw	a0,52(s8)
  4024a8:	0c1007ea 	jal	401fa8 <send_connect>
  4024ac:	00000000 	nop
/home_a/ppchen/adb/adb.c:399 (discriminator 1)
        break;
  4024b0:	100000ae 	b	40276c <handle_packet+0x430>
  4024b4:	00000000 	nop
/home_a/ppchen/adb/adb.c:403

    case A_OPEN: /* OPEN(local-id, 0, "destination") */
	
        if(t->connection_state != CS_OFFLINE) {
  4024b8:	8fc20034 	lw	v0,52(s8)
  4024bc:	8c420044 	lw	v0,68(v0)
  4024c0:	104000ad 	beqz	v0,402778 <handle_packet+0x43c>
  4024c4:	00000000 	nop
/home_a/ppchen/adb/adb.c:404
            char *name = (char*) p->data;
  4024c8:	8fc20030 	lw	v0,48(s8)
  4024cc:	24420024 	addiu	v0,v0,36
  4024d0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:405
            name[p->msg.data_length > 0 ? p->msg.data_length - 1 : 0] = 0;
  4024d4:	8fc20030 	lw	v0,48(s8)
  4024d8:	8c420018 	lw	v0,24(v0)
  4024dc:	10400006 	beqz	v0,4024f8 <handle_packet+0x1bc>
  4024e0:	00000000 	nop
/home_a/ppchen/adb/adb.c:405 (discriminator 1)
  4024e4:	8fc20030 	lw	v0,48(s8)
  4024e8:	8c420018 	lw	v0,24(v0)
  4024ec:	2442ffff 	addiu	v0,v0,-1
  4024f0:	10000002 	b	4024fc <handle_packet+0x1c0>
  4024f4:	00000000 	nop
/home_a/ppchen/adb/adb.c:405 (discriminator 2)
  4024f8:	00001021 	move	v0,zero
/home_a/ppchen/adb/adb.c:405 (discriminator 3)
  4024fc:	8fc30018 	lw	v1,24(s8)
  402500:	00621021 	addu	v0,v1,v0
  402504:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/adb.c:406 (discriminator 3)
            s = create_local_service_socket(name);
  402508:	8fc40018 	lw	a0,24(s8)
  40250c:	0c102864 	jal	40a190 <create_local_service_socket>
  402510:	00000000 	nop
  402514:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:407 (discriminator 3)
            if(s == 0) {
  402518:	8fc2001c 	lw	v0,28(s8)
  40251c:	1440000a 	bnez	v0,402548 <handle_packet+0x20c>
  402520:	00000000 	nop
/home_a/ppchen/adb/adb.c:408
                send_close(0, p->msg.arg0, t);
  402524:	8fc20030 	lw	v0,48(s8)
  402528:	8c420010 	lw	v0,16(v0)
  40252c:	00002021 	move	a0,zero
  402530:	00402821 	move	a1,v0
  402534:	8fc60034 	lw	a2,52(s8)
  402538:	0c1007cc 	jal	401f30 <send_close>
  40253c:	00000000 	nop
/home_a/ppchen/adb/adb.c:416
                s->peer->peer = s;
                send_ready(s->id, s->peer->id, t);
                s->ready(s);
            }
        }
        break;
  402540:	1000008d 	b	402778 <handle_packet+0x43c>
  402544:	00000000 	nop
/home_a/ppchen/adb/adb.c:410
            name[p->msg.data_length > 0 ? p->msg.data_length - 1 : 0] = 0;
            s = create_local_service_socket(name);
            if(s == 0) {
                send_close(0, p->msg.arg0, t);
            } else {
                s->peer = create_remote_socket(p->msg.arg0, t);
  402548:	8fc20030 	lw	v0,48(s8)
  40254c:	8c420010 	lw	v0,16(v0)
  402550:	00402021 	move	a0,v0
  402554:	8fc50034 	lw	a1,52(s8)
  402558:	0c10295b 	jal	40a56c <create_remote_socket>
  40255c:	00000000 	nop
  402560:	00401821 	move	v1,v0
  402564:	8fc2001c 	lw	v0,28(s8)
  402568:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:411
                s->peer->peer = s;
  40256c:	8fc2001c 	lw	v0,28(s8)
  402570:	8c420014 	lw	v0,20(v0)
  402574:	8fc3001c 	lw	v1,28(s8)
  402578:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:412
                send_ready(s->id, s->peer->id, t);
  40257c:	8fc2001c 	lw	v0,28(s8)
  402580:	8c430008 	lw	v1,8(v0)
  402584:	8fc2001c 	lw	v0,28(s8)
  402588:	8c420014 	lw	v0,20(v0)
  40258c:	8c420008 	lw	v0,8(v0)
  402590:	00602021 	move	a0,v1
  402594:	00402821 	move	a1,v0
  402598:	8fc60034 	lw	a2,52(s8)
  40259c:	0c1007ae 	jal	401eb8 <send_ready>
  4025a0:	00000000 	nop
/home_a/ppchen/adb/adb.c:413
                s->ready(s);
  4025a4:	8fc2001c 	lw	v0,28(s8)
  4025a8:	8c420044 	lw	v0,68(v0)
  4025ac:	8fc4001c 	lw	a0,28(s8)
  4025b0:	0040c821 	move	t9,v0
  4025b4:	0320f809 	jalr	t9
  4025b8:	00000000 	nop
/home_a/ppchen/adb/adb.c:416
            }
        }
        break;
  4025bc:	1000006e 	b	402778 <handle_packet+0x43c>
  4025c0:	00000000 	nop
/home_a/ppchen/adb/adb.c:420

    case A_OKAY: /* READY(local-id, remote-id, "") */
	
        if(t->connection_state != CS_OFFLINE) {
  4025c4:	8fc20034 	lw	v0,52(s8)
  4025c8:	8c420044 	lw	v0,68(v0)
  4025cc:	1040006d 	beqz	v0,402784 <handle_packet+0x448>
  4025d0:	00000000 	nop
/home_a/ppchen/adb/adb.c:421
            if((s = find_local_socket(p->msg.arg1))) {
  4025d4:	8fc20030 	lw	v0,48(s8)
  4025d8:	8c420014 	lw	v0,20(v0)
  4025dc:	00402021 	move	a0,v0
  4025e0:	0c102568 	jal	4095a0 <find_local_socket>
  4025e4:	00000000 	nop
  4025e8:	afc2001c 	sw	v0,28(s8)
  4025ec:	8fc2001c 	lw	v0,28(s8)
  4025f0:	10400064 	beqz	v0,402784 <handle_packet+0x448>
  4025f4:	00000000 	nop
/home_a/ppchen/adb/adb.c:422
                if(s->peer == 0) {
  4025f8:	8fc2001c 	lw	v0,28(s8)
  4025fc:	8c420014 	lw	v0,20(v0)
  402600:	1440000e 	bnez	v0,40263c <handle_packet+0x300>
  402604:	00000000 	nop
/home_a/ppchen/adb/adb.c:423
                    s->peer = create_remote_socket(p->msg.arg0, t);
  402608:	8fc20030 	lw	v0,48(s8)
  40260c:	8c420010 	lw	v0,16(v0)
  402610:	00402021 	move	a0,v0
  402614:	8fc50034 	lw	a1,52(s8)
  402618:	0c10295b 	jal	40a56c <create_remote_socket>
  40261c:	00000000 	nop
  402620:	00401821 	move	v1,v0
  402624:	8fc2001c 	lw	v0,28(s8)
  402628:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:424
                    s->peer->peer = s;
  40262c:	8fc2001c 	lw	v0,28(s8)
  402630:	8c420014 	lw	v0,20(v0)
  402634:	8fc3001c 	lw	v1,28(s8)
  402638:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/adb.c:426
                }
                s->ready(s);
  40263c:	8fc2001c 	lw	v0,28(s8)
  402640:	8c420044 	lw	v0,68(v0)
  402644:	8fc4001c 	lw	a0,28(s8)
  402648:	0040c821 	move	t9,v0
  40264c:	0320f809 	jalr	t9
  402650:	00000000 	nop
/home_a/ppchen/adb/adb.c:429
            }
        }
        break;
  402654:	1000004b 	b	402784 <handle_packet+0x448>
  402658:	00000000 	nop
/home_a/ppchen/adb/adb.c:433

    case A_CLSE: /* CLOSE(local-id, remote-id, "") */
	
        if(t->connection_state != CS_OFFLINE) {
  40265c:	8fc20034 	lw	v0,52(s8)
  402660:	8c420044 	lw	v0,68(v0)
  402664:	1040004a 	beqz	v0,402790 <handle_packet+0x454>
  402668:	00000000 	nop
/home_a/ppchen/adb/adb.c:434
            if((s = find_local_socket(p->msg.arg1))) {
  40266c:	8fc20030 	lw	v0,48(s8)
  402670:	8c420014 	lw	v0,20(v0)
  402674:	00402021 	move	a0,v0
  402678:	0c102568 	jal	4095a0 <find_local_socket>
  40267c:	00000000 	nop
  402680:	afc2001c 	sw	v0,28(s8)
  402684:	8fc2001c 	lw	v0,28(s8)
  402688:	10400041 	beqz	v0,402790 <handle_packet+0x454>
  40268c:	00000000 	nop
/home_a/ppchen/adb/adb.c:435
                s->close(s);
  402690:	8fc2001c 	lw	v0,28(s8)
  402694:	8c420048 	lw	v0,72(v0)
  402698:	8fc4001c 	lw	a0,28(s8)
  40269c:	0040c821 	move	t9,v0
  4026a0:	0320f809 	jalr	t9
  4026a4:	00000000 	nop
/home_a/ppchen/adb/adb.c:438
            }
        }
        break;
  4026a8:	10000039 	b	402790 <handle_packet+0x454>
  4026ac:	00000000 	nop
/home_a/ppchen/adb/adb.c:442

    case A_WRTE:
	
        if(t->connection_state != CS_OFFLINE) {
  4026b0:	8fc20034 	lw	v0,52(s8)
  4026b4:	8c420044 	lw	v0,68(v0)
  4026b8:	10400038 	beqz	v0,40279c <handle_packet+0x460>
  4026bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:443
            if((s = find_local_socket(p->msg.arg1))) {
  4026c0:	8fc20030 	lw	v0,48(s8)
  4026c4:	8c420014 	lw	v0,20(v0)
  4026c8:	00402021 	move	a0,v0
  4026cc:	0c102568 	jal	4095a0 <find_local_socket>
  4026d0:	00000000 	nop
  4026d4:	afc2001c 	sw	v0,28(s8)
  4026d8:	8fc2001c 	lw	v0,28(s8)
  4026dc:	1040002f 	beqz	v0,40279c <handle_packet+0x460>
  4026e0:	00000000 	nop
/home_a/ppchen/adb/adb.c:444
                unsigned rid = p->msg.arg0;
  4026e4:	8fc20030 	lw	v0,48(s8)
  4026e8:	8c420010 	lw	v0,16(v0)
  4026ec:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/adb.c:445
                p->len = p->msg.data_length;
  4026f0:	8fc20030 	lw	v0,48(s8)
  4026f4:	8c430018 	lw	v1,24(v0)
  4026f8:	8fc20030 	lw	v0,48(s8)
  4026fc:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/adb.c:447
                
                if(s->enqueue(s, p) == 0) {
  402700:	8fc2001c 	lw	v0,28(s8)
  402704:	8c420040 	lw	v0,64(v0)
  402708:	8fc4001c 	lw	a0,28(s8)
  40270c:	8fc50030 	lw	a1,48(s8)
  402710:	0040c821 	move	t9,v0
  402714:	0320f809 	jalr	t9
  402718:	00000000 	nop
  40271c:	14400028 	bnez	v0,4027c0 <handle_packet+0x484>
  402720:	00000000 	nop
/home_a/ppchen/adb/adb.c:449
              
                    send_ready(s->id, rid, t);
  402724:	8fc2001c 	lw	v0,28(s8)
  402728:	8c420008 	lw	v0,8(v0)
  40272c:	00402021 	move	a0,v0
  402730:	8fc50020 	lw	a1,32(s8)
  402734:	8fc60034 	lw	a2,52(s8)
  402738:	0c1007ae 	jal	401eb8 <send_ready>
  40273c:	00000000 	nop
/home_a/ppchen/adb/adb.c:451
                }
                return;
  402740:	1000001f 	b	4027c0 <handle_packet+0x484>
  402744:	00000000 	nop
/home_a/ppchen/adb/adb.c:457
            }
        }
        break;

    default:
        printf("handle_packet: what is %08x?!\n", p->msg.command);
  402748:	8fc20030 	lw	v0,48(s8)
  40274c:	8c42000c 	lw	v0,12(v0)
  402750:	3c030041 	lui	v1,0x41
  402754:	24642ea0 	addiu	a0,v1,11936
  402758:	00402821 	move	a1,v0
  40275c:	0c105400 	jal	415000 <printf@plt>
  402760:	00000000 	nop
  402764:	1000000e 	b	4027a0 <handle_packet+0x464>
  402768:	00000000 	nop
/home_a/ppchen/adb/adb.c:399
            handle_offline(t);
        }
        parse_banner((char*) p->data, t);
        handle_online();
        if(!HOST) send_connect(t);
        break;
  40276c:	00000000 	nop
  402770:	1000000b 	b	4027a0 <handle_packet+0x464>
  402774:	00000000 	nop
/home_a/ppchen/adb/adb.c:416
                s->peer->peer = s;
                send_ready(s->id, s->peer->id, t);
                s->ready(s);
            }
        }
        break;
  402778:	00000000 	nop
  40277c:	10000008 	b	4027a0 <handle_packet+0x464>
  402780:	00000000 	nop
/home_a/ppchen/adb/adb.c:429
                    s->peer->peer = s;
                }
                s->ready(s);
            }
        }
        break;
  402784:	00000000 	nop
  402788:	10000005 	b	4027a0 <handle_packet+0x464>
  40278c:	00000000 	nop
/home_a/ppchen/adb/adb.c:438
        if(t->connection_state != CS_OFFLINE) {
            if((s = find_local_socket(p->msg.arg1))) {
                s->close(s);
            }
        }
        break;
  402790:	00000000 	nop
  402794:	10000002 	b	4027a0 <handle_packet+0x464>
  402798:	00000000 	nop
/home_a/ppchen/adb/adb.c:454
                    send_ready(s->id, rid, t);
                }
                return;
            }
        }
        break;
  40279c:	00000000 	nop
/home_a/ppchen/adb/adb.c:460

    default:
        printf("handle_packet: what is %08x?!\n", p->msg.command);
    }

    put_apacket(p);
  4027a0:	8fc40030 	lw	a0,48(s8)
  4027a4:	0c10078a 	jal	401e28 <put_apacket>
  4027a8:	00000000 	nop
  4027ac:	10000005 	b	4027c4 <handle_packet+0x488>
  4027b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:387
        } else {
            t->connection_state = CS_OFFLINE;
            handle_offline(t);
            send_packet(p, t);
        }
        return;
  4027b4:	00000000 	nop
  4027b8:	10000002 	b	4027c4 <handle_packet+0x488>
  4027bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:451
                
                if(s->enqueue(s, p) == 0) {
              
                    send_ready(s->id, rid, t);
                }
                return;
  4027c0:	00000000 	nop
/home_a/ppchen/adb/adb.c:461
    default:
        printf("handle_packet: what is %08x?!\n", p->msg.command);
    }

    put_apacket(p);
}
  4027c4:	03c0e821 	move	sp,s8
  4027c8:	8fbf002c 	lw	ra,44(sp)
  4027cc:	8fbe0028 	lw	s8,40(sp)
  4027d0:	27bd0030 	addiu	sp,sp,48
  4027d4:	03e00008 	jr	ra
  4027d8:	00000000 	nop

004027dc <ss_listener_event_func>:
ss_listener_event_func():
/home_a/ppchen/adb/adb.c:469
    .next = &listener_list,
    .prev = &listener_list,
};

static void ss_listener_event_func(int _fd, unsigned ev, void *_l)
{
  4027dc:	27bdffc0 	addiu	sp,sp,-64
  4027e0:	afbf003c 	sw	ra,60(sp)
  4027e4:	afbe0038 	sw	s8,56(sp)
  4027e8:	03a0f021 	move	s8,sp
  4027ec:	afc40040 	sw	a0,64(s8)
  4027f0:	afc50044 	sw	a1,68(s8)
  4027f4:	afc60048 	sw	a2,72(s8)
/home_a/ppchen/adb/adb.c:472
    asocket *s;

    if(ev & FDE_READ) {
  4027f8:	8fc20044 	lw	v0,68(s8)
  4027fc:	30420001 	andi	v0,v0,0x1
  402800:	10400021 	beqz	v0,402888 <ss_listener_event_func+0xac>
  402804:	00000000 	nop
/home_a/ppchen/adb/adb.c:477
        struct sockaddr addr;
        socklen_t alen;
        int fd;

        alen = sizeof(addr);
  402808:	24020010 	li	v0,16
  40280c:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/adb.c:478
        fd = adb_socket_accept(_fd, &addr, &alen);
  402810:	27c30020 	addiu	v1,s8,32
  402814:	27c20030 	addiu	v0,s8,48
  402818:	8fc40040 	lw	a0,64(s8)
  40281c:	00602821 	move	a1,v1
  402820:	00403021 	move	a2,v0
  402824:	0c100664 	jal	401990 <adb_socket_accept>
  402828:	00000000 	nop
  40282c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:479
        if(fd < 0) return;
  402830:	8fc20018 	lw	v0,24(s8)
  402834:	04400014 	bltz	v0,402888 <ss_listener_event_func+0xac>
  402838:	00000000 	nop
/home_a/ppchen/adb/adb.c:481

        adb_socket_setbufsize(fd, CHUNK_SIZE);
  40283c:	8fc40018 	lw	a0,24(s8)
  402840:	3c050001 	lui	a1,0x1
  402844:	0c10067f 	jal	4019fc <adb_socket_setbufsize>
  402848:	00000000 	nop
/home_a/ppchen/adb/adb.c:483

        s = create_local_socket(fd);
  40284c:	8fc40018 	lw	a0,24(s8)
  402850:	0c102831 	jal	40a0c4 <create_local_socket>
  402854:	00000000 	nop
  402858:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:484
        if(s) {
  40285c:	8fc2001c 	lw	v0,28(s8)
  402860:	10400006 	beqz	v0,40287c <ss_listener_event_func+0xa0>
  402864:	00000000 	nop
/home_a/ppchen/adb/adb.c:485
            connect_to_smartsocket(s);
  402868:	8fc4001c 	lw	a0,28(s8)
  40286c:	0c102bb9 	jal	40aee4 <connect_to_smartsocket>
  402870:	00000000 	nop
  402874:	10000004 	b	402888 <ss_listener_event_func+0xac>
  402878:	00000000 	nop
/home_a/ppchen/adb/adb.c:489
            return;
        }

        adb_close(fd);
  40287c:	8fc40018 	lw	a0,24(s8)
  402880:	0c100644 	jal	401910 <adb_close>
  402884:	00000000 	nop
/home_a/ppchen/adb/adb.c:491
    }
}
  402888:	03c0e821 	move	sp,s8
  40288c:	8fbf003c 	lw	ra,60(sp)
  402890:	8fbe0038 	lw	s8,56(sp)
  402894:	27bd0040 	addiu	sp,sp,64
  402898:	03e00008 	jr	ra
  40289c:	00000000 	nop

004028a0 <listener_event_func>:
listener_event_func():
/home_a/ppchen/adb/adb.c:494

static void listener_event_func(int _fd, unsigned ev, void *_l)
{
  4028a0:	27bdffc0 	addiu	sp,sp,-64
  4028a4:	afbf003c 	sw	ra,60(sp)
  4028a8:	afbe0038 	sw	s8,56(sp)
  4028ac:	03a0f021 	move	s8,sp
  4028b0:	afc40040 	sw	a0,64(s8)
  4028b4:	afc50044 	sw	a1,68(s8)
  4028b8:	afc60048 	sw	a2,72(s8)
/home_a/ppchen/adb/adb.c:495
    alistener *l = _l;
  4028bc:	8fc20048 	lw	v0,72(s8)
  4028c0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:498
    asocket *s;

    if(ev & FDE_READ) {
  4028c4:	8fc20044 	lw	v0,68(s8)
  4028c8:	30420001 	andi	v0,v0,0x1
  4028cc:	10400024 	beqz	v0,402960 <listener_event_func+0xc0>
  4028d0:	00000000 	nop
/home_a/ppchen/adb/adb.c:503
        struct sockaddr addr;
        socklen_t alen;
        int fd;

        alen = sizeof(addr);
  4028d4:	24020010 	li	v0,16
  4028d8:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/adb.c:504
        fd = adb_socket_accept(_fd, &addr, &alen);
  4028dc:	27c30024 	addiu	v1,s8,36
  4028e0:	27c20034 	addiu	v0,s8,52
  4028e4:	8fc40040 	lw	a0,64(s8)
  4028e8:	00602821 	move	a1,v1
  4028ec:	00403021 	move	a2,v0
  4028f0:	0c100664 	jal	401990 <adb_socket_accept>
  4028f4:	00000000 	nop
  4028f8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:505
        if(fd < 0) return;
  4028fc:	8fc2001c 	lw	v0,28(s8)
  402900:	04400017 	bltz	v0,402960 <listener_event_func+0xc0>
  402904:	00000000 	nop
/home_a/ppchen/adb/adb.c:507

        s = create_local_socket(fd);
  402908:	8fc4001c 	lw	a0,28(s8)
  40290c:	0c102831 	jal	40a0c4 <create_local_socket>
  402910:	00000000 	nop
  402914:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/adb.c:508
        if(s) {
  402918:	8fc20020 	lw	v0,32(s8)
  40291c:	1040000d 	beqz	v0,402954 <listener_event_func+0xb4>
  402920:	00000000 	nop
/home_a/ppchen/adb/adb.c:509
            s->transport = l->transport;
  402924:	8fc20018 	lw	v0,24(s8)
  402928:	8c430030 	lw	v1,48(v0)
  40292c:	8fc20020 	lw	v0,32(s8)
  402930:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/adb.c:510
            connect_to_remote(s, l->connect_to);
  402934:	8fc20018 	lw	v0,24(s8)
  402938:	8c42002c 	lw	v0,44(v0)
  40293c:	8fc40020 	lw	a0,32(s8)
  402940:	00402821 	move	a1,v0
  402944:	0c102994 	jal	40a650 <connect_to_remote>
  402948:	00000000 	nop
  40294c:	10000004 	b	402960 <listener_event_func+0xc0>
  402950:	00000000 	nop
/home_a/ppchen/adb/adb.c:514
            return;
        }

        adb_close(fd);
  402954:	8fc4001c 	lw	a0,28(s8)
  402958:	0c100644 	jal	401910 <adb_close>
  40295c:	00000000 	nop
/home_a/ppchen/adb/adb.c:516
    }
}
  402960:	03c0e821 	move	sp,s8
  402964:	8fbf003c 	lw	ra,60(sp)
  402968:	8fbe0038 	lw	s8,56(sp)
  40296c:	27bd0040 	addiu	sp,sp,64
  402970:	03e00008 	jr	ra
  402974:	00000000 	nop

00402978 <free_listener>:
free_listener():
/home_a/ppchen/adb/adb.c:519

static void  free_listener(alistener*  l)
{
  402978:	27bdffe0 	addiu	sp,sp,-32
  40297c:	afbf001c 	sw	ra,28(sp)
  402980:	afbe0018 	sw	s8,24(sp)
  402984:	03a0f021 	move	s8,sp
  402988:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/adb.c:520
    if (l->next) {
  40298c:	8fc20020 	lw	v0,32(s8)
  402990:	8c420000 	lw	v0,0(v0)
  402994:	10400012 	beqz	v0,4029e0 <free_listener+0x68>
  402998:	00000000 	nop
/home_a/ppchen/adb/adb.c:521
        l->next->prev = l->prev;
  40299c:	8fc20020 	lw	v0,32(s8)
  4029a0:	8c420000 	lw	v0,0(v0)
  4029a4:	8fc30020 	lw	v1,32(s8)
  4029a8:	8c630004 	lw	v1,4(v1)
  4029ac:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/adb.c:522
        l->prev->next = l->next;
  4029b0:	8fc20020 	lw	v0,32(s8)
  4029b4:	8c420004 	lw	v0,4(v0)
  4029b8:	8fc30020 	lw	v1,32(s8)
  4029bc:	8c630000 	lw	v1,0(v1)
  4029c0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/adb.c:523
        l->next = l->prev = l;
  4029c4:	8fc20020 	lw	v0,32(s8)
  4029c8:	8fc30020 	lw	v1,32(s8)
  4029cc:	ac430004 	sw	v1,4(v0)
  4029d0:	8fc20020 	lw	v0,32(s8)
  4029d4:	8c430004 	lw	v1,4(v0)
  4029d8:	8fc20020 	lw	v0,32(s8)
  4029dc:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/adb.c:527
    }

    // closes the corresponding fd
    fdevent_remove(&l->fde);
  4029e0:	8fc20020 	lw	v0,32(s8)
  4029e4:	24420008 	addiu	v0,v0,8
  4029e8:	00402021 	move	a0,v0
  4029ec:	0c1016c0 	jal	405b00 <fdevent_remove>
  4029f0:	00000000 	nop
/home_a/ppchen/adb/adb.c:529

    if (l->local_name)
  4029f4:	8fc20020 	lw	v0,32(s8)
  4029f8:	8c420028 	lw	v0,40(v0)
  4029fc:	10400006 	beqz	v0,402a18 <free_listener+0xa0>
  402a00:	00000000 	nop
/home_a/ppchen/adb/adb.c:530
        free((char*)l->local_name);
  402a04:	8fc20020 	lw	v0,32(s8)
  402a08:	8c420028 	lw	v0,40(v0)
  402a0c:	00402021 	move	a0,v0
  402a10:	0c1053e4 	jal	414f90 <free@plt>
  402a14:	00000000 	nop
/home_a/ppchen/adb/adb.c:532

    if (l->connect_to)
  402a18:	8fc20020 	lw	v0,32(s8)
  402a1c:	8c42002c 	lw	v0,44(v0)
  402a20:	10400006 	beqz	v0,402a3c <free_listener+0xc4>
  402a24:	00000000 	nop
/home_a/ppchen/adb/adb.c:533
        free((char*)l->connect_to);
  402a28:	8fc20020 	lw	v0,32(s8)
  402a2c:	8c42002c 	lw	v0,44(v0)
  402a30:	00402021 	move	a0,v0
  402a34:	0c1053e4 	jal	414f90 <free@plt>
  402a38:	00000000 	nop
/home_a/ppchen/adb/adb.c:535

    if (l->transport) {
  402a3c:	8fc20020 	lw	v0,32(s8)
  402a40:	8c420030 	lw	v0,48(v0)
  402a44:	10400009 	beqz	v0,402a6c <free_listener+0xf4>
  402a48:	00000000 	nop
/home_a/ppchen/adb/adb.c:536
        remove_transport_disconnect(l->transport, &l->disconnect);
  402a4c:	8fc20020 	lw	v0,32(s8)
  402a50:	8c430030 	lw	v1,48(v0)
  402a54:	8fc20020 	lw	v0,32(s8)
  402a58:	24420034 	addiu	v0,v0,52
  402a5c:	00602021 	move	a0,v1
  402a60:	00402821 	move	a1,v0
  402a64:	0c101d80 	jal	407600 <remove_transport_disconnect>
  402a68:	00000000 	nop
/home_a/ppchen/adb/adb.c:538
    }
    free(l);
  402a6c:	8fc40020 	lw	a0,32(s8)
  402a70:	0c1053e4 	jal	414f90 <free@plt>
  402a74:	00000000 	nop
/home_a/ppchen/adb/adb.c:539
}
  402a78:	03c0e821 	move	sp,s8
  402a7c:	8fbf001c 	lw	ra,28(sp)
  402a80:	8fbe0018 	lw	s8,24(sp)
  402a84:	27bd0020 	addiu	sp,sp,32
  402a88:	03e00008 	jr	ra
  402a8c:	00000000 	nop

00402a90 <listener_disconnect>:
listener_disconnect():
/home_a/ppchen/adb/adb.c:542

static void listener_disconnect(void*  _l, atransport*  t)
{
  402a90:	27bdffd8 	addiu	sp,sp,-40
  402a94:	afbf0024 	sw	ra,36(sp)
  402a98:	afbe0020 	sw	s8,32(sp)
  402a9c:	03a0f021 	move	s8,sp
  402aa0:	afc40028 	sw	a0,40(s8)
  402aa4:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/adb.c:543
    alistener*  l = _l;
  402aa8:	8fc20028 	lw	v0,40(s8)
  402aac:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:545

    free_listener(l);
  402ab0:	8fc40018 	lw	a0,24(s8)
  402ab4:	0c100a5e 	jal	402978 <free_listener>
  402ab8:	00000000 	nop
/home_a/ppchen/adb/adb.c:546
}
  402abc:	03c0e821 	move	sp,s8
  402ac0:	8fbf0024 	lw	ra,36(sp)
  402ac4:	8fbe0020 	lw	s8,32(sp)
  402ac8:	27bd0028 	addiu	sp,sp,40
  402acc:	03e00008 	jr	ra
  402ad0:	00000000 	nop

00402ad4 <local_name_to_fd>:
local_name_to_fd():
/home_a/ppchen/adb/adb.c:549

int local_name_to_fd(const char *name)
{
  402ad4:	27bdffd8 	addiu	sp,sp,-40
  402ad8:	afbf0024 	sw	ra,36(sp)
  402adc:	afbe0020 	sw	s8,32(sp)
  402ae0:	03a0f021 	move	s8,sp
  402ae4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/adb.c:552
    int port;

    if(!strncmp("tcp:", name, 4)){
  402ae8:	3c020041 	lui	v0,0x41
  402aec:	24442ec0 	addiu	a0,v0,11968
  402af0:	8fc50028 	lw	a1,40(s8)
  402af4:	24060004 	li	a2,4
  402af8:	0c105308 	jal	414c20 <strncmp@plt>
  402afc:	00000000 	nop
  402b00:	1440000f 	bnez	v0,402b40 <local_name_to_fd+0x6c>
  402b04:	00000000 	nop
/home_a/ppchen/adb/adb.c:554
        int  ret;
        port = atoi(name + 4);
  402b08:	8fc20028 	lw	v0,40(s8)
  402b0c:	24420004 	addiu	v0,v0,4
  402b10:	00402021 	move	a0,v0
  402b14:	0c1053e8 	jal	414fa0 <atoi@plt>
  402b18:	00000000 	nop
  402b1c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:555
        ret = socket_loopback_server(port, SOCK_STREAM);
  402b20:	8fc40018 	lw	a0,24(s8)
  402b24:	24050002 	li	a1,2
  402b28:	0c104900 	jal	412400 <socket_loopback_server>
  402b2c:	00000000 	nop
  402b30:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:556
        return ret;
  402b34:	8fc2001c 	lw	v0,28(s8)
  402b38:	1000003a 	b	402c24 <local_name_to_fd+0x150>
  402b3c:	00000000 	nop
/home_a/ppchen/adb/adb.c:560
    }
#ifndef HAVE_WIN32_IPC  /* no Unix-domain sockets on Win32 */
    // It's non-sensical to support the "reserved" space on the adb host side
    if(!strncmp(name, "local:", 6)) {
  402b40:	8fc40028 	lw	a0,40(s8)
  402b44:	3c020041 	lui	v0,0x41
  402b48:	24452ec8 	addiu	a1,v0,11976
  402b4c:	24060006 	li	a2,6
  402b50:	0c105308 	jal	414c20 <strncmp@plt>
  402b54:	00000000 	nop
  402b58:	1440000a 	bnez	v0,402b84 <local_name_to_fd+0xb0>
  402b5c:	00000000 	nop
/home_a/ppchen/adb/adb.c:561
        return socket_local_server(name + 6,
  402b60:	8fc20028 	lw	v0,40(s8)
  402b64:	24420006 	addiu	v0,v0,6
  402b68:	00402021 	move	a0,v0
  402b6c:	00002821 	move	a1,zero
  402b70:	24060002 	li	a2,2
  402b74:	0c1048c2 	jal	412308 <socket_local_server>
  402b78:	00000000 	nop
  402b7c:	10000029 	b	402c24 <local_name_to_fd+0x150>
  402b80:	00000000 	nop
/home_a/ppchen/adb/adb.c:563
                ANDROID_SOCKET_NAMESPACE_ABSTRACT, SOCK_STREAM);
    } else if(!strncmp(name, "localabstract:", 14)) {
  402b84:	8fc40028 	lw	a0,40(s8)
  402b88:	3c020041 	lui	v0,0x41
  402b8c:	24452ed0 	addiu	a1,v0,11984
  402b90:	2406000e 	li	a2,14
  402b94:	0c105308 	jal	414c20 <strncmp@plt>
  402b98:	00000000 	nop
  402b9c:	1440000a 	bnez	v0,402bc8 <local_name_to_fd+0xf4>
  402ba0:	00000000 	nop
/home_a/ppchen/adb/adb.c:564
        return socket_local_server(name + 14,
  402ba4:	8fc20028 	lw	v0,40(s8)
  402ba8:	2442000e 	addiu	v0,v0,14
  402bac:	00402021 	move	a0,v0
  402bb0:	00002821 	move	a1,zero
  402bb4:	24060002 	li	a2,2
  402bb8:	0c1048c2 	jal	412308 <socket_local_server>
  402bbc:	00000000 	nop
  402bc0:	10000018 	b	402c24 <local_name_to_fd+0x150>
  402bc4:	00000000 	nop
/home_a/ppchen/adb/adb.c:566
                ANDROID_SOCKET_NAMESPACE_ABSTRACT, SOCK_STREAM);
    } else if(!strncmp(name, "localfilesystem:", 16)) {
  402bc8:	8fc40028 	lw	a0,40(s8)
  402bcc:	3c020041 	lui	v0,0x41
  402bd0:	24452ee0 	addiu	a1,v0,12000
  402bd4:	24060010 	li	a2,16
  402bd8:	0c105308 	jal	414c20 <strncmp@plt>
  402bdc:	00000000 	nop
  402be0:	1440000a 	bnez	v0,402c0c <local_name_to_fd+0x138>
  402be4:	00000000 	nop
/home_a/ppchen/adb/adb.c:567
        return socket_local_server(name + 16,
  402be8:	8fc20028 	lw	v0,40(s8)
  402bec:	24420010 	addiu	v0,v0,16
  402bf0:	00402021 	move	a0,v0
  402bf4:	24050002 	li	a1,2
  402bf8:	24060002 	li	a2,2
  402bfc:	0c1048c2 	jal	412308 <socket_local_server>
  402c00:	00000000 	nop
  402c04:	10000007 	b	402c24 <local_name_to_fd+0x150>
  402c08:	00000000 	nop
/home_a/ppchen/adb/adb.c:572
                ANDROID_SOCKET_NAMESPACE_FILESYSTEM, SOCK_STREAM);
    }

#endif
    printf("unknown local portname '%s'\n", name);
  402c0c:	3c020041 	lui	v0,0x41
  402c10:	24442ef4 	addiu	a0,v0,12020
  402c14:	8fc50028 	lw	a1,40(s8)
  402c18:	0c105400 	jal	415000 <printf@plt>
  402c1c:	00000000 	nop
/home_a/ppchen/adb/adb.c:573
    return -1;
  402c20:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/adb.c:574
}
  402c24:	03c0e821 	move	sp,s8
  402c28:	8fbf0024 	lw	ra,36(sp)
  402c2c:	8fbe0020 	lw	s8,32(sp)
  402c30:	27bd0028 	addiu	sp,sp,40
  402c34:	03e00008 	jr	ra
  402c38:	00000000 	nop

00402c3c <remove_listener>:
remove_listener():
/home_a/ppchen/adb/adb.c:577

static int remove_listener(const char *local_name, const char *connect_to, atransport* transport)
{
  402c3c:	27bdffd8 	addiu	sp,sp,-40
  402c40:	afbf0024 	sw	ra,36(sp)
  402c44:	afbe0020 	sw	s8,32(sp)
  402c48:	03a0f021 	move	s8,sp
  402c4c:	afc40028 	sw	a0,40(s8)
  402c50:	afc5002c 	sw	a1,44(s8)
  402c54:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/adb.c:580
    alistener *l;

    for (l = listener_list.next; l != &listener_list; l = l->next) {
  402c58:	3c020042 	lui	v0,0x42
  402c5c:	8c4255e8 	lw	v0,21992(v0)
  402c60:	afc20018 	sw	v0,24(s8)
  402c64:	10000024 	b	402cf8 <remove_listener+0xbc>
  402c68:	00000000 	nop
/home_a/ppchen/adb/adb.c:581
        if (!strcmp(local_name, l->local_name) &&
  402c6c:	8fc20018 	lw	v0,24(s8)
  402c70:	8c420028 	lw	v0,40(v0)
  402c74:	8fc40028 	lw	a0,40(s8)
  402c78:	00402821 	move	a1,v0
  402c7c:	0c1053d8 	jal	414f60 <strcmp@plt>
  402c80:	00000000 	nop
  402c84:	14400019 	bnez	v0,402cec <remove_listener+0xb0>
  402c88:	00000000 	nop
/home_a/ppchen/adb/adb.c:582 (discriminator 1)
            !strcmp(connect_to, l->connect_to) &&
  402c8c:	8fc20018 	lw	v0,24(s8)
  402c90:	8c42002c 	lw	v0,44(v0)
  402c94:	8fc4002c 	lw	a0,44(s8)
  402c98:	00402821 	move	a1,v0
  402c9c:	0c1053d8 	jal	414f60 <strcmp@plt>
  402ca0:	00000000 	nop
/home_a/ppchen/adb/adb.c:581 (discriminator 1)
static int remove_listener(const char *local_name, const char *connect_to, atransport* transport)
{
    alistener *l;

    for (l = listener_list.next; l != &listener_list; l = l->next) {
        if (!strcmp(local_name, l->local_name) &&
  402ca4:	14400011 	bnez	v0,402cec <remove_listener+0xb0>
  402ca8:	00000000 	nop
/home_a/ppchen/adb/adb.c:583
            !strcmp(connect_to, l->connect_to) &&
            l->transport && l->transport == transport) {
  402cac:	8fc20018 	lw	v0,24(s8)
  402cb0:	8c420030 	lw	v0,48(v0)
/home_a/ppchen/adb/adb.c:582
{
    alistener *l;

    for (l = listener_list.next; l != &listener_list; l = l->next) {
        if (!strcmp(local_name, l->local_name) &&
            !strcmp(connect_to, l->connect_to) &&
  402cb4:	1040000d 	beqz	v0,402cec <remove_listener+0xb0>
  402cb8:	00000000 	nop
/home_a/ppchen/adb/adb.c:583
            l->transport && l->transport == transport) {
  402cbc:	8fc20018 	lw	v0,24(s8)
  402cc0:	8c430030 	lw	v1,48(v0)
  402cc4:	8fc20030 	lw	v0,48(s8)
  402cc8:	14620008 	bne	v1,v0,402cec <remove_listener+0xb0>
  402ccc:	00000000 	nop
/home_a/ppchen/adb/adb.c:585

            listener_disconnect(l, transport);
  402cd0:	8fc40018 	lw	a0,24(s8)
  402cd4:	8fc50030 	lw	a1,48(s8)
  402cd8:	0c100aa4 	jal	402a90 <listener_disconnect>
  402cdc:	00000000 	nop
/home_a/ppchen/adb/adb.c:586
            return 0;
  402ce0:	00001021 	move	v0,zero
  402ce4:	1000000a 	b	402d10 <remove_listener+0xd4>
  402ce8:	00000000 	nop
/home_a/ppchen/adb/adb.c:580

static int remove_listener(const char *local_name, const char *connect_to, atransport* transport)
{
    alistener *l;

    for (l = listener_list.next; l != &listener_list; l = l->next) {
  402cec:	8fc20018 	lw	v0,24(s8)
  402cf0:	8c420000 	lw	v0,0(v0)
  402cf4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:580 (discriminator 1)
  402cf8:	8fc30018 	lw	v1,24(s8)
  402cfc:	3c020042 	lui	v0,0x42
  402d00:	244255e8 	addiu	v0,v0,21992
  402d04:	1462ffd9 	bne	v1,v0,402c6c <remove_listener+0x30>
  402d08:	00000000 	nop
/home_a/ppchen/adb/adb.c:590
            listener_disconnect(l, transport);
            return 0;
        }
    }

    return -1;
  402d0c:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/adb.c:591
}
  402d10:	03c0e821 	move	sp,s8
  402d14:	8fbf0024 	lw	ra,36(sp)
  402d18:	8fbe0020 	lw	s8,32(sp)
  402d1c:	27bd0028 	addiu	sp,sp,40
  402d20:	03e00008 	jr	ra
  402d24:	00000000 	nop

00402d28 <install_listener>:
install_listener():
/home_a/ppchen/adb/adb.c:594

static int install_listener(const char *local_name, const char *connect_to, atransport* transport)
{
  402d28:	27bdffd8 	addiu	sp,sp,-40
  402d2c:	afbf0024 	sw	ra,36(sp)
  402d30:	afbe0020 	sw	s8,32(sp)
  402d34:	03a0f021 	move	s8,sp
  402d38:	afc40028 	sw	a0,40(s8)
  402d3c:	afc5002c 	sw	a1,44(s8)
  402d40:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/adb.c:599
    alistener *l;

    //printf("install_listener('%s','%s')\n", local_name, connect_to);

    for(l = listener_list.next; l != &listener_list; l = l->next){
  402d44:	3c020042 	lui	v0,0x42
  402d48:	8c4255e8 	lw	v0,21992(v0)
  402d4c:	afc20018 	sw	v0,24(s8)
  402d50:	10000042 	b	402e5c <install_listener+0x134>
  402d54:	00000000 	nop
/home_a/ppchen/adb/adb.c:600
        if(strcmp(local_name, l->local_name) == 0) {
  402d58:	8fc20018 	lw	v0,24(s8)
  402d5c:	8c420028 	lw	v0,40(v0)
  402d60:	8fc40028 	lw	a0,40(s8)
  402d64:	00402821 	move	a1,v0
  402d68:	0c1053d8 	jal	414f60 <strcmp@plt>
  402d6c:	00000000 	nop
  402d70:	14400037 	bnez	v0,402e50 <install_listener+0x128>
  402d74:	00000000 	nop
/home_a/ppchen/adb/adb.c:604
            char *cto;

                /* can't repurpose a smartsocket */
            if(l->connect_to[0] == '*') {
  402d78:	8fc20018 	lw	v0,24(s8)
  402d7c:	8c42002c 	lw	v0,44(v0)
  402d80:	80430000 	lb	v1,0(v0)
  402d84:	2402002a 	li	v0,42
  402d88:	14620004 	bne	v1,v0,402d9c <install_listener+0x74>
  402d8c:	00000000 	nop
/home_a/ppchen/adb/adb.c:605
                return -1;
  402d90:	2402ffff 	li	v0,-1
  402d94:	100000d0 	b	4030d8 <install_listener+0x3b0>
  402d98:	00000000 	nop
/home_a/ppchen/adb/adb.c:608
            }

            cto = strdup(connect_to);
  402d9c:	8fc4002c 	lw	a0,44(s8)
  402da0:	0c105408 	jal	415020 <strdup@plt>
  402da4:	00000000 	nop
  402da8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/adb.c:609
            if(cto == 0) {
  402dac:	8fc2001c 	lw	v0,28(s8)
  402db0:	14400004 	bnez	v0,402dc4 <install_listener+0x9c>
  402db4:	00000000 	nop
/home_a/ppchen/adb/adb.c:610
                return -1;
  402db8:	2402ffff 	li	v0,-1
  402dbc:	100000c6 	b	4030d8 <install_listener+0x3b0>
  402dc0:	00000000 	nop
/home_a/ppchen/adb/adb.c:614
            }

            //printf("rebinding '%s' to '%s'\n", local_name, connect_to);
            free((void*) l->connect_to);
  402dc4:	8fc20018 	lw	v0,24(s8)
  402dc8:	8c42002c 	lw	v0,44(v0)
  402dcc:	00402021 	move	a0,v0
  402dd0:	0c1053e4 	jal	414f90 <free@plt>
  402dd4:	00000000 	nop
/home_a/ppchen/adb/adb.c:615
            l->connect_to = cto;
  402dd8:	8fc20018 	lw	v0,24(s8)
  402ddc:	8fc3001c 	lw	v1,28(s8)
  402de0:	ac43002c 	sw	v1,44(v0)
/home_a/ppchen/adb/adb.c:616
            if (l->transport != transport) {
  402de4:	8fc20018 	lw	v0,24(s8)
  402de8:	8c430030 	lw	v1,48(v0)
  402dec:	8fc20030 	lw	v0,48(s8)
  402df0:	10620014 	beq	v1,v0,402e44 <install_listener+0x11c>
  402df4:	00000000 	nop
/home_a/ppchen/adb/adb.c:617
                remove_transport_disconnect(l->transport, &l->disconnect);
  402df8:	8fc20018 	lw	v0,24(s8)
  402dfc:	8c430030 	lw	v1,48(v0)
  402e00:	8fc20018 	lw	v0,24(s8)
  402e04:	24420034 	addiu	v0,v0,52
  402e08:	00602021 	move	a0,v1
  402e0c:	00402821 	move	a1,v0
  402e10:	0c101d80 	jal	407600 <remove_transport_disconnect>
  402e14:	00000000 	nop
/home_a/ppchen/adb/adb.c:618
                l->transport = transport;
  402e18:	8fc20018 	lw	v0,24(s8)
  402e1c:	8fc30030 	lw	v1,48(s8)
  402e20:	ac430030 	sw	v1,48(v0)
/home_a/ppchen/adb/adb.c:619
                add_transport_disconnect(l->transport, &l->disconnect);
  402e24:	8fc20018 	lw	v0,24(s8)
  402e28:	8c430030 	lw	v1,48(v0)
  402e2c:	8fc20018 	lw	v0,24(s8)
  402e30:	24420034 	addiu	v0,v0,52
  402e34:	00602021 	move	a0,v1
  402e38:	00402821 	move	a1,v0
  402e3c:	0c101d5b 	jal	40756c <add_transport_disconnect>
  402e40:	00000000 	nop
/home_a/ppchen/adb/adb.c:621
            }
            return 0;
  402e44:	00001021 	move	v0,zero
  402e48:	100000a3 	b	4030d8 <install_listener+0x3b0>
  402e4c:	00000000 	nop
/home_a/ppchen/adb/adb.c:599
{
    alistener *l;

    //printf("install_listener('%s','%s')\n", local_name, connect_to);

    for(l = listener_list.next; l != &listener_list; l = l->next){
  402e50:	8fc20018 	lw	v0,24(s8)
  402e54:	8c420000 	lw	v0,0(v0)
  402e58:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:599 (discriminator 1)
  402e5c:	8fc30018 	lw	v1,24(s8)
  402e60:	3c020042 	lui	v0,0x42
  402e64:	244255e8 	addiu	v0,v0,21992
  402e68:	1462ffbb 	bne	v1,v0,402d58 <install_listener+0x30>
  402e6c:	00000000 	nop
/home_a/ppchen/adb/adb.c:625
            }
            return 0;
        }
    }

    if((l = calloc(1, sizeof(alistener))) == 0) goto nomem;
  402e70:	24040001 	li	a0,1
  402e74:	24050044 	li	a1,68
  402e78:	0c1052b8 	jal	414ae0 <calloc@plt>
  402e7c:	00000000 	nop
  402e80:	afc20018 	sw	v0,24(s8)
  402e84:	8fc20018 	lw	v0,24(s8)
  402e88:	10400087 	beqz	v0,4030a8 <install_listener+0x380>
  402e8c:	00000000 	nop
/home_a/ppchen/adb/adb.c:626
    if((l->local_name = strdup(local_name)) == 0) goto nomem;
  402e90:	8fc40028 	lw	a0,40(s8)
  402e94:	0c105408 	jal	415020 <strdup@plt>
  402e98:	00000000 	nop
  402e9c:	00401821 	move	v1,v0
  402ea0:	8fc20018 	lw	v0,24(s8)
  402ea4:	ac430028 	sw	v1,40(v0)
  402ea8:	8fc20018 	lw	v0,24(s8)
  402eac:	8c420028 	lw	v0,40(v0)
  402eb0:	10400080 	beqz	v0,4030b4 <install_listener+0x38c>
  402eb4:	00000000 	nop
/home_a/ppchen/adb/adb.c:627
    if((l->connect_to = strdup(connect_to)) == 0) goto nomem;
  402eb8:	8fc4002c 	lw	a0,44(s8)
  402ebc:	0c105408 	jal	415020 <strdup@plt>
  402ec0:	00000000 	nop
  402ec4:	00401821 	move	v1,v0
  402ec8:	8fc20018 	lw	v0,24(s8)
  402ecc:	ac43002c 	sw	v1,44(v0)
  402ed0:	8fc20018 	lw	v0,24(s8)
  402ed4:	8c42002c 	lw	v0,44(v0)
  402ed8:	10400079 	beqz	v0,4030c0 <install_listener+0x398>
  402edc:	00000000 	nop
/home_a/ppchen/adb/adb.c:630


    l->fd = local_name_to_fd(local_name);
  402ee0:	8fc40028 	lw	a0,40(s8)
  402ee4:	0c100ab5 	jal	402ad4 <local_name_to_fd>
  402ee8:	00000000 	nop
  402eec:	00401821 	move	v1,v0
  402ef0:	8fc20018 	lw	v0,24(s8)
  402ef4:	ac430024 	sw	v1,36(v0)
/home_a/ppchen/adb/adb.c:631
    if(l->fd < 0) {
  402ef8:	8fc20018 	lw	v0,24(s8)
  402efc:	8c420024 	lw	v0,36(v0)
  402f00:	04410016 	bgez	v0,402f5c <install_listener+0x234>
  402f04:	00000000 	nop
/home_a/ppchen/adb/adb.c:632
        free((void*) l->local_name);
  402f08:	8fc20018 	lw	v0,24(s8)
  402f0c:	8c420028 	lw	v0,40(v0)
  402f10:	00402021 	move	a0,v0
  402f14:	0c1053e4 	jal	414f90 <free@plt>
  402f18:	00000000 	nop
/home_a/ppchen/adb/adb.c:633
        free((void*) l->connect_to);
  402f1c:	8fc20018 	lw	v0,24(s8)
  402f20:	8c42002c 	lw	v0,44(v0)
  402f24:	00402021 	move	a0,v0
  402f28:	0c1053e4 	jal	414f90 <free@plt>
  402f2c:	00000000 	nop
/home_a/ppchen/adb/adb.c:634
        free(l);
  402f30:	8fc40018 	lw	a0,24(s8)
  402f34:	0c1053e4 	jal	414f90 <free@plt>
  402f38:	00000000 	nop
/home_a/ppchen/adb/adb.c:635
        printf("cannot bind '%s'\n", local_name);
  402f3c:	3c020041 	lui	v0,0x41
  402f40:	24442f14 	addiu	a0,v0,12052
  402f44:	8fc50028 	lw	a1,40(s8)
  402f48:	0c105400 	jal	415000 <printf@plt>
  402f4c:	00000000 	nop
/home_a/ppchen/adb/adb.c:636
        return -2;
  402f50:	2402fffe 	li	v0,-2
  402f54:	10000060 	b	4030d8 <install_listener+0x3b0>
  402f58:	00000000 	nop
/home_a/ppchen/adb/adb.c:639
    }

    close_on_exec(l->fd);
  402f5c:	8fc20018 	lw	v0,24(s8)
  402f60:	8c420024 	lw	v0,36(v0)
  402f64:	00402021 	move	a0,v0
  402f68:	0c100610 	jal	401840 <close_on_exec>
  402f6c:	00000000 	nop
/home_a/ppchen/adb/adb.c:640
    if(!strcmp(l->connect_to, "*smartsocket*")) {
  402f70:	8fc20018 	lw	v0,24(s8)
  402f74:	8c42002c 	lw	v0,44(v0)
  402f78:	00402021 	move	a0,v0
  402f7c:	3c020041 	lui	v0,0x41
  402f80:	24452f28 	addiu	a1,v0,12072
  402f84:	0c1053d8 	jal	414f60 <strcmp@plt>
  402f88:	00000000 	nop
  402f8c:	1440000e 	bnez	v0,402fc8 <install_listener+0x2a0>
  402f90:	00000000 	nop
/home_a/ppchen/adb/adb.c:641
        fdevent_install(&l->fde, l->fd, ss_listener_event_func, l);
  402f94:	8fc20018 	lw	v0,24(s8)
  402f98:	24430008 	addiu	v1,v0,8
  402f9c:	8fc20018 	lw	v0,24(s8)
  402fa0:	8c420024 	lw	v0,36(v0)
  402fa4:	00602021 	move	a0,v1
  402fa8:	00402821 	move	a1,v0
  402fac:	3c020040 	lui	v0,0x40
  402fb0:	244627dc 	addiu	a2,v0,10204
  402fb4:	8fc70018 	lw	a3,24(s8)
  402fb8:	0c101689 	jal	405a24 <fdevent_install>
  402fbc:	00000000 	nop
  402fc0:	1000000c 	b	402ff4 <install_listener+0x2cc>
  402fc4:	00000000 	nop
/home_a/ppchen/adb/adb.c:643
    } else {
        fdevent_install(&l->fde, l->fd, listener_event_func, l);
  402fc8:	8fc20018 	lw	v0,24(s8)
  402fcc:	24430008 	addiu	v1,v0,8
  402fd0:	8fc20018 	lw	v0,24(s8)
  402fd4:	8c420024 	lw	v0,36(v0)
  402fd8:	00602021 	move	a0,v1
  402fdc:	00402821 	move	a1,v0
  402fe0:	3c020040 	lui	v0,0x40
  402fe4:	244628a0 	addiu	a2,v0,10400
  402fe8:	8fc70018 	lw	a3,24(s8)
  402fec:	0c101689 	jal	405a24 <fdevent_install>
  402ff0:	00000000 	nop
/home_a/ppchen/adb/adb.c:645
    }
    fdevent_set(&l->fde, FDE_READ);
  402ff4:	8fc20018 	lw	v0,24(s8)
  402ff8:	24420008 	addiu	v0,v0,8
  402ffc:	00402021 	move	a0,v0
  403000:	24050001 	li	a1,1
  403004:	0c1016e7 	jal	405b9c <fdevent_set>
  403008:	00000000 	nop
/home_a/ppchen/adb/adb.c:647

    l->next = &listener_list;
  40300c:	8fc20018 	lw	v0,24(s8)
  403010:	3c030042 	lui	v1,0x42
  403014:	246355e8 	addiu	v1,v1,21992
  403018:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/adb.c:648
    l->prev = listener_list.prev;
  40301c:	3c020042 	lui	v0,0x42
  403020:	244255e8 	addiu	v0,v0,21992
  403024:	8c430004 	lw	v1,4(v0)
  403028:	8fc20018 	lw	v0,24(s8)
  40302c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/adb.c:649
    l->next->prev = l;
  403030:	8fc20018 	lw	v0,24(s8)
  403034:	8c420000 	lw	v0,0(v0)
  403038:	8fc30018 	lw	v1,24(s8)
  40303c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/adb.c:650
    l->prev->next = l;
  403040:	8fc20018 	lw	v0,24(s8)
  403044:	8c420004 	lw	v0,4(v0)
  403048:	8fc30018 	lw	v1,24(s8)
  40304c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/adb.c:651
    l->transport = transport;
  403050:	8fc20018 	lw	v0,24(s8)
  403054:	8fc30030 	lw	v1,48(s8)
  403058:	ac430030 	sw	v1,48(v0)
/home_a/ppchen/adb/adb.c:653

    if (transport) {
  40305c:	8fc20030 	lw	v0,48(s8)
  403060:	1040000e 	beqz	v0,40309c <install_listener+0x374>
  403064:	00000000 	nop
/home_a/ppchen/adb/adb.c:654
        l->disconnect.opaque = l;
  403068:	8fc20018 	lw	v0,24(s8)
  40306c:	8fc30018 	lw	v1,24(s8)
  403070:	ac430038 	sw	v1,56(v0)
/home_a/ppchen/adb/adb.c:655
        l->disconnect.func   = listener_disconnect;
  403074:	8fc20018 	lw	v0,24(s8)
  403078:	3c030040 	lui	v1,0x40
  40307c:	24632a90 	addiu	v1,v1,10896
  403080:	ac430034 	sw	v1,52(v0)
/home_a/ppchen/adb/adb.c:656
        add_transport_disconnect(transport, &l->disconnect);
  403084:	8fc20018 	lw	v0,24(s8)
  403088:	24420034 	addiu	v0,v0,52
  40308c:	8fc40030 	lw	a0,48(s8)
  403090:	00402821 	move	a1,v0
  403094:	0c101d5b 	jal	40756c <add_transport_disconnect>
  403098:	00000000 	nop
/home_a/ppchen/adb/adb.c:658
    }
    return 0;
  40309c:	00001021 	move	v0,zero
  4030a0:	1000000d 	b	4030d8 <install_listener+0x3b0>
  4030a4:	00000000 	nop
/home_a/ppchen/adb/adb.c:625
            }
            return 0;
        }
    }

    if((l = calloc(1, sizeof(alistener))) == 0) goto nomem;
  4030a8:	00000000 	nop
  4030ac:	10000005 	b	4030c4 <install_listener+0x39c>
  4030b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:626
    if((l->local_name = strdup(local_name)) == 0) goto nomem;
  4030b4:	00000000 	nop
  4030b8:	10000002 	b	4030c4 <install_listener+0x39c>
  4030bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:627
    if((l->connect_to = strdup(connect_to)) == 0) goto nomem;
  4030c0:	00000000 	nop
/home_a/ppchen/adb/adb.c:661
        add_transport_disconnect(transport, &l->disconnect);
    }
    return 0;

nomem:
    fatal("cannot allocate listener");
  4030c4:	3c020041 	lui	v0,0x41
  4030c8:	24442f38 	addiu	a0,v0,12088
  4030cc:	0c1006a7 	jal	401a9c <fatal>
  4030d0:	00000000 	nop
/home_a/ppchen/adb/adb.c:662
    return 0;
  4030d4:	00001021 	move	v0,zero
/home_a/ppchen/adb/adb.c:663
}
  4030d8:	03c0e821 	move	sp,s8
  4030dc:	8fbf0024 	lw	ra,36(sp)
  4030e0:	8fbe0020 	lw	s8,32(sp)
  4030e4:	27bd0028 	addiu	sp,sp,40
  4030e8:	03e00008 	jr	ra
  4030ec:	00000000 	nop

004030f0 <adb_cleanup>:
adb_cleanup():
/home_a/ppchen/adb/adb.c:674
    return TRUE;
}
#endif

static void adb_cleanup(void)
{
  4030f0:	27bdffe0 	addiu	sp,sp,-32
  4030f4:	afbf001c 	sw	ra,28(sp)
  4030f8:	afbe0018 	sw	s8,24(sp)
  4030fc:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:675
    usb_cleanup();
  403100:	0c1044f0 	jal	4113c0 <usb_cleanup>
  403104:	00000000 	nop
/home_a/ppchen/adb/adb.c:676
}
  403108:	03c0e821 	move	sp,s8
  40310c:	8fbf001c 	lw	ra,28(sp)
  403110:	8fbe0018 	lw	s8,24(sp)
  403114:	27bd0020 	addiu	sp,sp,32
  403118:	03e00008 	jr	ra
  40311c:	00000000 	nop

00403120 <start_logging>:
start_logging():
/home_a/ppchen/adb/adb.c:679

void start_logging(void)
{
  403120:	27bdffd0 	addiu	sp,sp,-48
  403124:	afbf002c 	sw	ra,44(sp)
  403128:	afbe0028 	sw	s8,40(sp)
  40312c:	afb00024 	sw	s0,36(sp)
  403130:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:705
    stderr[0] = flog[0];
    fprintf(stderr,"--- adb starting (pid %d) ---\n", getpid());
#else
    int fd;

    fd = unix_open("/dev/null", O_RDONLY);
  403134:	3c020041 	lui	v0,0x41
  403138:	24442f54 	addiu	a0,v0,12116
  40313c:	00002821 	move	a1,zero
  403140:	0c100620 	jal	401880 <unix_open>
  403144:	00000000 	nop
  403148:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:706
    dup2(fd, 0);
  40314c:	8fc40018 	lw	a0,24(s8)
  403150:	00002821 	move	a1,zero
  403154:	0c105338 	jal	414ce0 <dup2@plt>
  403158:	00000000 	nop
/home_a/ppchen/adb/adb.c:707
    adb_close(fd);
  40315c:	8fc40018 	lw	a0,24(s8)
  403160:	0c100644 	jal	401910 <adb_close>
  403164:	00000000 	nop
/home_a/ppchen/adb/adb.c:709

    fd = unix_open("/tmp/adb.log", O_WRONLY | O_CREAT | O_APPEND, 0640);
  403168:	3c020041 	lui	v0,0x41
  40316c:	24442f60 	addiu	a0,v0,12128
  403170:	24050109 	li	a1,265
  403174:	240601a0 	li	a2,416
  403178:	0c100620 	jal	401880 <unix_open>
  40317c:	00000000 	nop
  403180:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:710
    if(fd < 0) {
  403184:	8fc20018 	lw	v0,24(s8)
  403188:	04410007 	bgez	v0,4031a8 <start_logging+0x88>
  40318c:	00000000 	nop
/home_a/ppchen/adb/adb.c:711
        fd = unix_open("/dev/null", O_WRONLY);
  403190:	3c020041 	lui	v0,0x41
  403194:	24442f54 	addiu	a0,v0,12116
  403198:	24050001 	li	a1,1
  40319c:	0c100620 	jal	401880 <unix_open>
  4031a0:	00000000 	nop
  4031a4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:713
    }
    dup2(fd, 1);
  4031a8:	8fc40018 	lw	a0,24(s8)
  4031ac:	24050001 	li	a1,1
  4031b0:	0c105338 	jal	414ce0 <dup2@plt>
  4031b4:	00000000 	nop
/home_a/ppchen/adb/adb.c:714
    dup2(fd, 2);
  4031b8:	8fc40018 	lw	a0,24(s8)
  4031bc:	24050002 	li	a1,2
  4031c0:	0c105338 	jal	414ce0 <dup2@plt>
  4031c4:	00000000 	nop
/home_a/ppchen/adb/adb.c:715
    adb_close(fd);
  4031c8:	8fc40018 	lw	a0,24(s8)
  4031cc:	0c100644 	jal	401910 <adb_close>
  4031d0:	00000000 	nop
/home_a/ppchen/adb/adb.c:716
    fprintf(stderr,"--- adb starting (pid %d) ---\n", getpid());
  4031d4:	3c020042 	lui	v0,0x42
  4031d8:	8c5057c4 	lw	s0,22468(v0)
  4031dc:	0c105358 	jal	414d60 <getpid@plt>
  4031e0:	00000000 	nop
  4031e4:	02002021 	move	a0,s0
  4031e8:	3c030041 	lui	v1,0x41
  4031ec:	24652f70 	addiu	a1,v1,12144
  4031f0:	00403021 	move	a2,v0
  4031f4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  4031f8:	00000000 	nop
/home_a/ppchen/adb/adb.c:718
#endif
}
  4031fc:	03c0e821 	move	sp,s8
  403200:	8fbf002c 	lw	ra,44(sp)
  403204:	8fbe0028 	lw	s8,40(sp)
  403208:	8fb00024 	lw	s0,36(sp)
  40320c:	27bd0030 	addiu	sp,sp,48
  403210:	03e00008 	jr	ra
  403214:	00000000 	nop

00403218 <start_device_log>:
start_device_log():
/home_a/ppchen/adb/adb.c:722

#if !ADB_HOST
void start_device_log(void)
{
  403218:	27bdef48 	addiu	sp,sp,-4280
  40321c:	afbf10b4 	sw	ra,4276(sp)
  403220:	afbe10b0 	sw	s8,4272(sp)
  403224:	afb010ac 	sw	s0,4268(sp)
  403228:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:731
    time_t t;
    char value[PROPERTY_VALUE_MAX];

    // read the trace mask from persistent property persist.adb.trace_mask
    // give up if the property is not set or cannot be parsed
    property_get("persist.adb.trace_mask", value, "");
  40322c:	27c2104c 	addiu	v0,s8,4172
  403230:	3c030041 	lui	v1,0x41
  403234:	24642f90 	addiu	a0,v1,12176
  403238:	00402821 	move	a1,v0
  40323c:	3c020041 	lui	v0,0x41
  403240:	24462e84 	addiu	a2,v0,11908
  403244:	0c1046ac 	jal	411ab0 <property_get>
  403248:	00000000 	nop
/home_a/ppchen/adb/adb.c:732
    if (sscanf(value, "%x", &adb_trace_mask) != 1)
  40324c:	27c2104c 	addiu	v0,s8,4172
  403250:	00402021 	move	a0,v0
  403254:	3c020041 	lui	v0,0x41
  403258:	24452fa8 	addiu	a1,v0,12200
  40325c:	3c020042 	lui	v0,0x42
  403260:	244657b4 	addiu	a2,v0,22452
  403264:	0c105390 	jal	414e40 <sscanf@plt>
  403268:	00000000 	nop
  40326c:	00401821 	move	v1,v0
  403270:	24020001 	li	v0,1
  403274:	14620047 	bne	v1,v0,403394 <start_device_log+0x17c>
  403278:	00000000 	nop
/home_a/ppchen/adb/adb.c:735
        return;

    adb_mkdir("/data/adb", 0775);
  40327c:	3c020041 	lui	v0,0x41
  403280:	24442fac 	addiu	a0,v0,12204
  403284:	240501fd 	li	a1,509
  403288:	0c100696 	jal	401a58 <adb_mkdir>
  40328c:	00000000 	nop
/home_a/ppchen/adb/adb.c:736
    tzset();
  403290:	0c105388 	jal	414e20 <tzset@plt>
  403294:	00000000 	nop
/home_a/ppchen/adb/adb.c:737
    time(&t);
  403298:	27c21048 	addiu	v0,s8,4168
  40329c:	00402021 	move	a0,v0
  4032a0:	0c105360 	jal	414d80 <time@plt>
  4032a4:	00000000 	nop
/home_a/ppchen/adb/adb.c:738
    localtime_r(&t, &now);
  4032a8:	27c31048 	addiu	v1,s8,4168
  4032ac:	27c2101c 	addiu	v0,s8,4124
  4032b0:	00602021 	move	a0,v1
  4032b4:	00402821 	move	a1,v0
  4032b8:	0c105344 	jal	414d10 <localtime_r@plt>
  4032bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:739
    strftime(path, sizeof(path),
  4032c0:	27c3001c 	addiu	v1,s8,28
/home_a/ppchen/adb/adb.c:741
                "/data/adb/adb-%Y-%m-%d-%H-%M-%S.txt",
                &now);
  4032c4:	27c2101c 	addiu	v0,s8,4124
/home_a/ppchen/adb/adb.c:739

    adb_mkdir("/data/adb", 0775);
    tzset();
    time(&t);
    localtime_r(&t, &now);
    strftime(path, sizeof(path),
  4032c8:	00602021 	move	a0,v1
  4032cc:	24051000 	li	a1,4096
  4032d0:	3c030041 	lui	v1,0x41
  4032d4:	24662fb8 	addiu	a2,v1,12216
  4032d8:	00403821 	move	a3,v0
  4032dc:	0c1052b4 	jal	414ad0 <strftime@plt>
  4032e0:	00000000 	nop
/home_a/ppchen/adb/adb.c:742
                "/data/adb/adb-%Y-%m-%d-%H-%M-%S.txt",
                &now);
    fd = unix_open(path, O_WRONLY | O_CREAT | O_TRUNC, 0640);
  4032e4:	27c2001c 	addiu	v0,s8,28
  4032e8:	00402021 	move	a0,v0
  4032ec:	24050301 	li	a1,769
  4032f0:	240601a0 	li	a2,416
  4032f4:	0c100620 	jal	401880 <unix_open>
  4032f8:	00000000 	nop
  4032fc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:743
    if (fd < 0)
  403300:	8fc20018 	lw	v0,24(s8)
  403304:	04400023 	bltz	v0,403394 <start_device_log+0x17c>
  403308:	00000000 	nop
/home_a/ppchen/adb/adb.c:747
        return;

    // redirect stdout and stderr to the log file
    dup2(fd, 1);
  40330c:	8fc40018 	lw	a0,24(s8)
  403310:	24050001 	li	a1,1
  403314:	0c105338 	jal	414ce0 <dup2@plt>
  403318:	00000000 	nop
/home_a/ppchen/adb/adb.c:748
    dup2(fd, 2);
  40331c:	8fc40018 	lw	a0,24(s8)
  403320:	24050002 	li	a1,2
  403324:	0c105338 	jal	414ce0 <dup2@plt>
  403328:	00000000 	nop
/home_a/ppchen/adb/adb.c:749
    fprintf(stderr,"--- adb starting (pid %d) ---\n", getpid());
  40332c:	3c020042 	lui	v0,0x42
  403330:	8c5057c4 	lw	s0,22468(v0)
  403334:	0c105358 	jal	414d60 <getpid@plt>
  403338:	00000000 	nop
  40333c:	02002021 	move	a0,s0
  403340:	3c030041 	lui	v1,0x41
  403344:	24652f70 	addiu	a1,v1,12144
  403348:	00403021 	move	a2,v0
  40334c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  403350:	00000000 	nop
/home_a/ppchen/adb/adb.c:750
    adb_close(fd);
  403354:	8fc40018 	lw	a0,24(s8)
  403358:	0c100644 	jal	401910 <adb_close>
  40335c:	00000000 	nop
/home_a/ppchen/adb/adb.c:752

    fd = unix_open("/dev/null", O_RDONLY);
  403360:	3c020041 	lui	v0,0x41
  403364:	24442f54 	addiu	a0,v0,12116
  403368:	00002821 	move	a1,zero
  40336c:	0c100620 	jal	401880 <unix_open>
  403370:	00000000 	nop
  403374:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:753
    dup2(fd, 0);
  403378:	8fc40018 	lw	a0,24(s8)
  40337c:	00002821 	move	a1,zero
  403380:	0c105338 	jal	414ce0 <dup2@plt>
  403384:	00000000 	nop
/home_a/ppchen/adb/adb.c:754
    adb_close(fd);
  403388:	8fc40018 	lw	a0,24(s8)
  40338c:	0c100644 	jal	401910 <adb_close>
  403390:	00000000 	nop
/home_a/ppchen/adb/adb.c:755
}
  403394:	03c0e821 	move	sp,s8
  403398:	8fbf10b4 	lw	ra,4276(sp)
  40339c:	8fbe10b0 	lw	s8,4272(sp)
  4033a0:	8fb010ac 	lw	s0,4268(sp)
  4033a4:	27bd10b8 	addiu	sp,sp,4280
  4033a8:	03e00008 	jr	ra
  4033ac:	00000000 	nop

004033b0 <build_local_name>:
build_local_name():
/home_a/ppchen/adb/adb.c:901
 * target_str points to the target string, it's content will be overwritten.
 * target_size is the capacity of the target string.
 * server_port is the port number to use for the local name.
 */
void build_local_name(char* target_str, size_t target_size, int server_port)
{
  4033b0:	27bdffe0 	addiu	sp,sp,-32
  4033b4:	afbf001c 	sw	ra,28(sp)
  4033b8:	afbe0018 	sw	s8,24(sp)
  4033bc:	03a0f021 	move	s8,sp
  4033c0:	afc40020 	sw	a0,32(s8)
  4033c4:	afc50024 	sw	a1,36(s8)
  4033c8:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/adb.c:902
  snprintf(target_str, target_size, "tcp:%d", server_port);
  4033cc:	8fc40020 	lw	a0,32(s8)
  4033d0:	8fc50024 	lw	a1,36(s8)
  4033d4:	3c020041 	lui	v0,0x41
  4033d8:	24462fdc 	addiu	a2,v0,12252
  4033dc:	8fc70028 	lw	a3,40(s8)
  4033e0:	0c105334 	jal	414cd0 <snprintf@plt>
  4033e4:	00000000 	nop
/home_a/ppchen/adb/adb.c:903
}
  4033e8:	03c0e821 	move	sp,s8
  4033ec:	8fbf001c 	lw	ra,28(sp)
  4033f0:	8fbe0018 	lw	s8,24(sp)
  4033f4:	27bd0020 	addiu	sp,sp,32
  4033f8:	03e00008 	jr	ra
  4033fc:	00000000 	nop

00403400 <should_drop_privileges>:
should_drop_privileges():
/home_a/ppchen/adb/adb.c:906

#if !ADB_HOST
static int should_drop_privileges() {
  403400:	27bdff80 	addiu	sp,sp,-128
  403404:	afbf007c 	sw	ra,124(sp)
  403408:	afbe0078 	sw	s8,120(sp)
  40340c:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/adb.c:910
#ifndef ALLOW_ADBD_ROOT
    return 1;
#else /* ALLOW_ADBD_ROOT */
    int secure = 0;
  403410:	afc00018 	sw	zero,24(s8)
/home_a/ppchen/adb/adb.c:916
    char value[PROPERTY_VALUE_MAX];

   /* run adbd in secure mode if ro.secure is set and
    ** we are not in the emulator
    */
    property_get("ro.kernel.qemu", value, "");
  403414:	27c2001c 	addiu	v0,s8,28
  403418:	3c030041 	lui	v1,0x41
  40341c:	24642fe4 	addiu	a0,v1,12260
  403420:	00402821 	move	a1,v0
  403424:	3c020041 	lui	v0,0x41
  403428:	24462e84 	addiu	a2,v0,11908
  40342c:	0c1046ac 	jal	411ab0 <property_get>
  403430:	00000000 	nop
/home_a/ppchen/adb/adb.c:917
    if (strcmp(value, "1") != 0) {
  403434:	27c2001c 	addiu	v0,s8,28
  403438:	00402021 	move	a0,v0
  40343c:	3c020041 	lui	v0,0x41
  403440:	24452ff4 	addiu	a1,v0,12276
  403444:	0c1053d8 	jal	414f60 <strcmp@plt>
  403448:	00000000 	nop
  40344c:	10400034 	beqz	v0,403520 <should_drop_privileges+0x120>
  403450:	00000000 	nop
/home_a/ppchen/adb/adb.c:918
        property_get("ro.secure", value, "1");
  403454:	27c2001c 	addiu	v0,s8,28
  403458:	3c030041 	lui	v1,0x41
  40345c:	24642ff8 	addiu	a0,v1,12280
  403460:	00402821 	move	a1,v0
  403464:	3c020041 	lui	v0,0x41
  403468:	24462ff4 	addiu	a2,v0,12276
  40346c:	0c1046ac 	jal	411ab0 <property_get>
  403470:	00000000 	nop
/home_a/ppchen/adb/adb.c:919
        if (strcmp(value, "1") == 0) {
  403474:	27c2001c 	addiu	v0,s8,28
  403478:	00402021 	move	a0,v0
  40347c:	3c020041 	lui	v0,0x41
  403480:	24452ff4 	addiu	a1,v0,12276
  403484:	0c1053d8 	jal	414f60 <strcmp@plt>
  403488:	00000000 	nop
  40348c:	14400024 	bnez	v0,403520 <should_drop_privileges+0x120>
  403490:	00000000 	nop
/home_a/ppchen/adb/adb.c:921
            // don't run as root if ro.secure is set...
            secure = 1;
  403494:	24020001 	li	v0,1
  403498:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/adb.c:925

            // ... except we allow running as root in userdebug builds if the
            // service.adb.root property has been set by the "adb root" command
            property_get("ro.debuggable", value, "");
  40349c:	27c2001c 	addiu	v0,s8,28
  4034a0:	3c030041 	lui	v1,0x41
  4034a4:	24643004 	addiu	a0,v1,12292
  4034a8:	00402821 	move	a1,v0
  4034ac:	3c020041 	lui	v0,0x41
  4034b0:	24462e84 	addiu	a2,v0,11908
  4034b4:	0c1046ac 	jal	411ab0 <property_get>
  4034b8:	00000000 	nop
/home_a/ppchen/adb/adb.c:926
            if (strcmp(value, "1") == 0) {
  4034bc:	27c2001c 	addiu	v0,s8,28
  4034c0:	00402021 	move	a0,v0
  4034c4:	3c020041 	lui	v0,0x41
  4034c8:	24452ff4 	addiu	a1,v0,12276
  4034cc:	0c1053d8 	jal	414f60 <strcmp@plt>
  4034d0:	00000000 	nop
  4034d4:	14400012 	bnez	v0,403520 <should_drop_privileges+0x120>
  4034d8:	00000000 	nop
/home_a/ppchen/adb/adb.c:927
                property_get("service.adb.root", value, "");
  4034dc:	27c2001c 	addiu	v0,s8,28
  4034e0:	3c030041 	lui	v1,0x41
  4034e4:	24643014 	addiu	a0,v1,12308
  4034e8:	00402821 	move	a1,v0
  4034ec:	3c020041 	lui	v0,0x41
  4034f0:	24462e84 	addiu	a2,v0,11908
  4034f4:	0c1046ac 	jal	411ab0 <property_get>
  4034f8:	00000000 	nop
/home_a/ppchen/adb/adb.c:928
                if (strcmp(value, "1") == 0) {
  4034fc:	27c2001c 	addiu	v0,s8,28
  403500:	00402021 	move	a0,v0
  403504:	3c020041 	lui	v0,0x41
  403508:	24452ff4 	addiu	a1,v0,12276
  40350c:	0c1053d8 	jal	414f60 <strcmp@plt>
  403510:	00000000 	nop
  403514:	14400002 	bnez	v0,403520 <should_drop_privileges+0x120>
  403518:	00000000 	nop
/home_a/ppchen/adb/adb.c:929
                    secure = 0;
  40351c:	afc00018 	sw	zero,24(s8)
/home_a/ppchen/adb/adb.c:934
                }
            }
        }
    }
    return secure;
  403520:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/adb.c:936
#endif /* ALLOW_ADBD_ROOT */
}
  403524:	03c0e821 	move	sp,s8
  403528:	8fbf007c 	lw	ra,124(sp)
  40352c:	8fbe0078 	lw	s8,120(sp)
  403530:	27bd0080 	addiu	sp,sp,128
  403534:	03e00008 	jr	ra
  403538:	00000000 	nop

0040353c <adb_main>:
adb_main():
/home_a/ppchen/adb/adb.c:940
#endif /* !ADB_HOST */

int adb_main(int is_daemon, int server_port)
{
  40353c:	27bdff20 	addiu	sp,sp,-224
  403540:	afbf00dc 	sw	ra,220(sp)
  403544:	afbe00d8 	sw	s8,216(sp)
  403548:	03a0f021 	move	s8,sp
  40354c:	afc400e0 	sw	a0,224(s8)
  403550:	afc500e4 	sw	a1,228(s8)
/home_a/ppchen/adb/adb.c:945
#if !ADB_HOST
    int port;
    char value[PROPERTY_VALUE_MAX];

    umask(000);
  403554:	00002021 	move	a0,zero
  403558:	0c10538c 	jal	414e30 <umask@plt>
  40355c:	00000000 	nop
/home_a/ppchen/adb/adb.c:948
#endif

    atexit(adb_cleanup);
  403560:	3c020040 	lui	v0,0x40
  403564:	244430f0 	addiu	a0,v0,12528
  403568:	0c104996 	jal	412658 <.pic.atexit>
  40356c:	00000000 	nop
/home_a/ppchen/adb/adb.c:956
#elif defined(HAVE_FORKEXEC)
    // No SIGCHLD. Let the service subproc handle its children.
    signal(SIGPIPE, SIG_IGN);
#endif

    init_transport_registration();
  403570:	0c101cb6 	jal	4072d8 <init_transport_registration>
  403574:	00000000 	nop
/home_a/ppchen/adb/adb.c:1020
        capset(&header, &cap);

    
    } else {
        char local_name[30];
        build_local_name(local_name, sizeof(local_name), server_port);
  403578:	27c2008c 	addiu	v0,s8,140
  40357c:	00402021 	move	a0,v0
  403580:	2405001e 	li	a1,30
  403584:	8fc600e4 	lw	a2,228(s8)
  403588:	0c100cec 	jal	4033b0 <build_local_name>
  40358c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1021
        if(install_listener(local_name, "*smartsocket*", NULL)) {
  403590:	27c2008c 	addiu	v0,s8,140
  403594:	00402021 	move	a0,v0
  403598:	3c020041 	lui	v0,0x41
  40359c:	24452f28 	addiu	a1,v0,12072
  4035a0:	00003021 	move	a2,zero
  4035a4:	0c100b4a 	jal	402d28 <install_listener>
  4035a8:	00000000 	nop
  4035ac:	10400004 	beqz	v0,4035c0 <adb_main+0x84>
  4035b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1022
            exit(1);
  4035b4:	24040001 	li	a0,1
  4035b8:	0c1053cc 	jal	414f30 <exit@plt>
  4035bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:1031
        /* for the device, start the usb transport if the
        ** android usb device exists and the "service.adb.tcp.port" and
        ** "persist.adb.tcp.port" properties are not set.
        ** Otherwise start the network transport.
        */
    property_get("service.adb.tcp.port", value, "");
  4035c0:	27c2001c 	addiu	v0,s8,28
  4035c4:	3c030041 	lui	v1,0x41
  4035c8:	24643028 	addiu	a0,v1,12328
  4035cc:	00402821 	move	a1,v0
  4035d0:	3c020041 	lui	v0,0x41
  4035d4:	24462e84 	addiu	a2,v0,11908
  4035d8:	0c1046ac 	jal	411ab0 <property_get>
  4035dc:	00000000 	nop
/home_a/ppchen/adb/adb.c:1032
    if (!value[0])
  4035e0:	83c2001c 	lb	v0,28(s8)
  4035e4:	14400009 	bnez	v0,40360c <adb_main+0xd0>
  4035e8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1033
        property_get("persist.adb.tcp.port", value, "");
  4035ec:	27c2001c 	addiu	v0,s8,28
  4035f0:	3c030041 	lui	v1,0x41
  4035f4:	24643040 	addiu	a0,v1,12352
  4035f8:	00402821 	move	a1,v0
  4035fc:	3c020041 	lui	v0,0x41
  403600:	24462e84 	addiu	a2,v0,11908
  403604:	0c1046ac 	jal	411ab0 <property_get>
  403608:	00000000 	nop
/home_a/ppchen/adb/adb.c:1034
    if (sscanf(value, "%d", &port) == 1 && port > 0) {
  40360c:	27c2001c 	addiu	v0,s8,28
  403610:	00402021 	move	a0,v0
  403614:	3c020041 	lui	v0,0x41
  403618:	24453058 	addiu	a1,v0,12376
  40361c:	27c20018 	addiu	v0,s8,24
  403620:	00403021 	move	a2,v0
  403624:	0c105390 	jal	414e40 <sscanf@plt>
  403628:	00000000 	nop
  40362c:	00401821 	move	v1,v0
  403630:	24020001 	li	v0,1
  403634:	1462000a 	bne	v1,v0,403660 <adb_main+0x124>
  403638:	00000000 	nop
/home_a/ppchen/adb/adb.c:1034 (discriminator 1)
  40363c:	8fc20018 	lw	v0,24(s8)
  403640:	18400007 	blez	v0,403660 <adb_main+0x124>
  403644:	00000000 	nop
/home_a/ppchen/adb/adb.c:1037
        // listen on TCP port specified by service.adb.tcp.port property

        local_init(port);
  403648:	8fc20018 	lw	v0,24(s8)
  40364c:	00402021 	move	a0,v0
  403650:	0c10231e 	jal	408c78 <local_init>
  403654:	00000000 	nop
  403658:	1000000f 	b	403698 <adb_main+0x15c>
  40365c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1039
    }
	else if (access("/dev/android_adb", F_OK) == 0) {
  403660:	3c020041 	lui	v0,0x41
  403664:	2444305c 	addiu	a0,v0,12380
  403668:	00002821 	move	a1,zero
  40366c:	0c105354 	jal	414d50 <access@plt>
  403670:	00000000 	nop
  403674:	14400005 	bnez	v0,40368c <adb_main+0x150>
  403678:	00000000 	nop
/home_a/ppchen/adb/adb.c:1041
        // listen on USB
        usb_init();
  40367c:	0c104579 	jal	4115e4 <usb_init>
  403680:	00000000 	nop
  403684:	10000004 	b	403698 <adb_main+0x15c>
  403688:	00000000 	nop
/home_a/ppchen/adb/adb.c:1046
    } 
	else {
        // listen on default port
    
        local_init(DEFAULT_ADB_LOCAL_TRANSPORT_PORT);
  40368c:	240415b3 	li	a0,5555
  403690:	0c10231e 	jal	408c78 <local_init>
  403694:	00000000 	nop
/home_a/ppchen/adb/adb.c:1049
    }

    init_jdwp();
  403698:	0c1041a4 	jal	410690 <init_jdwp>
  40369c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1053

#endif

    if (is_daemon)
  4036a0:	8fc200e0 	lw	v0,224(s8)
  4036a4:	10400003 	beqz	v0,4036b4 <adb_main+0x178>
  4036a8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1062
        DWORD  count;
        WriteFile( GetStdHandle( STD_OUTPUT_HANDLE ), "OK\n", 3, &count, NULL );
#elif defined(HAVE_FORKEXEC)
        fprintf(stderr, "OK\n");
#endif
        start_logging();
  4036ac:	0c100c48 	jal	403120 <start_logging>
  4036b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1066
    }


    fdevent_loop();
  4036b4:	0c101791 	jal	405e44 <fdevent_loop>
  4036b8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1068

    usb_cleanup();
  4036bc:	0c1044f0 	jal	4113c0 <usb_cleanup>
  4036c0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1070

    return 0;
  4036c4:	00001021 	move	v0,zero
/home_a/ppchen/adb/adb.c:1071
}
  4036c8:	03c0e821 	move	sp,s8
  4036cc:	8fbf00dc 	lw	ra,220(sp)
  4036d0:	8fbe00d8 	lw	s8,216(sp)
  4036d4:	27bd00e0 	addiu	sp,sp,224
  4036d8:	03e00008 	jr	ra
  4036dc:	00000000 	nop

004036e0 <handle_host_request>:
handle_host_request():
/home_a/ppchen/adb/adb.c:1173
    }
}
#endif

int handle_host_request(char *service, transport_type ttype, char* serial, int reply_fd, asocket *s)
{
  4036e0:	27bdefb8 	addiu	sp,sp,-4168
  4036e4:	afbf1044 	sw	ra,4164(sp)
  4036e8:	afbe1040 	sw	s8,4160(sp)
  4036ec:	03a0f021 	move	s8,sp
  4036f0:	afc41048 	sw	a0,4168(s8)
  4036f4:	afc5104c 	sw	a1,4172(s8)
  4036f8:	afc61050 	sw	a2,4176(s8)
  4036fc:	afc71054 	sw	a3,4180(s8)
/home_a/ppchen/adb/adb.c:1174
    atransport *transport = NULL;
  403700:	afc00024 	sw	zero,36(s8)
/home_a/ppchen/adb/adb.c:1176
    char buf[4096];
    printf("handle_host_request  start!!!\n");
  403704:	3c020041 	lui	v0,0x41
  403708:	24443070 	addiu	a0,v0,12400
  40370c:	0c10540c 	jal	415030 <puts@plt>
  403710:	00000000 	nop
/home_a/ppchen/adb/adb.c:1177
    if(!strcmp(service, "kill")) {
  403714:	8fc41048 	lw	a0,4168(s8)
  403718:	3c020041 	lui	v0,0x41
  40371c:	24453090 	addiu	a1,v0,12432
  403720:	0c1053d8 	jal	414f60 <strcmp@plt>
  403724:	00000000 	nop
  403728:	1440001a 	bnez	v0,403794 <handle_host_request+0xb4>
  40372c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1178
        fprintf(stderr,"adb server killed by remote request\n");
  403730:	3c020042 	lui	v0,0x42
  403734:	8c4257c4 	lw	v0,22468(v0)
  403738:	3c030041 	lui	v1,0x41
  40373c:	24643098 	addiu	a0,v1,12440
  403740:	24050001 	li	a1,1
  403744:	24060024 	li	a2,36
  403748:	00403821 	move	a3,v0
  40374c:	0c1052d0 	jal	414b40 <fwrite@plt>
  403750:	00000000 	nop
/home_a/ppchen/adb/adb.c:1179
        fflush(stdout);
  403754:	3c020042 	lui	v0,0x42
  403758:	8c4257c0 	lw	v0,22464(v0)
  40375c:	00402021 	move	a0,v0
  403760:	0c1053a8 	jal	414ea0 <fflush@plt>
  403764:	00000000 	nop
/home_a/ppchen/adb/adb.c:1180
        adb_write(reply_fd, "OKAY", 4);
  403768:	8fc41054 	lw	a0,4180(s8)
  40376c:	3c020041 	lui	v0,0x41
  403770:	244530c0 	addiu	a1,v0,12480
  403774:	24060004 	li	a2,4
  403778:	0c100652 	jal	401948 <adb_write>
  40377c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1181
        usb_cleanup();
  403780:	0c1044f0 	jal	4113c0 <usb_cleanup>
  403784:	00000000 	nop
/home_a/ppchen/adb/adb.c:1182
        exit(0);
  403788:	00002021 	move	a0,zero
  40378c:	0c1053cc 	jal	414f30 <exit@plt>
  403790:	00000000 	nop
/home_a/ppchen/adb/adb.c:1301
        /* we don't even need to send a reply */
        return 0;
    }
#endif // ADB_HOST

    if(!strncmp(service,"forward:",8) || !strncmp(service,"killforward:",12)) {
  403794:	8fc41048 	lw	a0,4168(s8)
  403798:	3c020041 	lui	v0,0x41
  40379c:	244530c8 	addiu	a1,v0,12488
  4037a0:	24060008 	li	a2,8
  4037a4:	0c105308 	jal	414c20 <strncmp@plt>
  4037a8:	00000000 	nop
  4037ac:	10400009 	beqz	v0,4037d4 <handle_host_request+0xf4>
  4037b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1301 (discriminator 1)
  4037b4:	8fc41048 	lw	a0,4168(s8)
  4037b8:	3c020041 	lui	v0,0x41
  4037bc:	244530d4 	addiu	a1,v0,12500
  4037c0:	2406000c 	li	a2,12
  4037c4:	0c105308 	jal	414c20 <strncmp@plt>
  4037c8:	00000000 	nop
  4037cc:	14400087 	bnez	v0,4039ec <handle_host_request+0x30c>
  4037d0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1306
        char *local, *remote, *err;
        int r;
        atransport *transport;

        int createForward = strncmp(service,"kill",4);
  4037d4:	8fc41048 	lw	a0,4168(s8)
  4037d8:	3c020041 	lui	v0,0x41
  4037dc:	24453090 	addiu	a1,v0,12432
  4037e0:	24060004 	li	a2,4
  4037e4:	0c105308 	jal	414c20 <strncmp@plt>
  4037e8:	00000000 	nop
  4037ec:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/adb.c:1308

        local = service + (createForward ? 8 : 12);
  4037f0:	8fc2002c 	lw	v0,44(s8)
  4037f4:	10400004 	beqz	v0,403808 <handle_host_request+0x128>
  4037f8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1308 (discriminator 1)
  4037fc:	24020008 	li	v0,8
  403800:	10000002 	b	40380c <handle_host_request+0x12c>
  403804:	00000000 	nop
/home_a/ppchen/adb/adb.c:1308 (discriminator 2)
  403808:	2402000c 	li	v0,12
/home_a/ppchen/adb/adb.c:1308 (discriminator 3)
  40380c:	8fc31048 	lw	v1,4168(s8)
  403810:	00621021 	addu	v0,v1,v0
  403814:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/adb.c:1309 (discriminator 3)
        remote = strchr(local,';');
  403818:	8fc40030 	lw	a0,48(s8)
  40381c:	2405003b 	li	a1,59
  403820:	0c1053f4 	jal	414fd0 <strchr@plt>
  403824:	00000000 	nop
  403828:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/adb.c:1310 (discriminator 3)
        if(remote == 0) {
  40382c:	8fc20034 	lw	v0,52(s8)
  403830:	14400009 	bnez	v0,403858 <handle_host_request+0x178>
  403834:	00000000 	nop
/home_a/ppchen/adb/adb.c:1311
            sendfailmsg(reply_fd, "malformed forward spec");
  403838:	8fc41054 	lw	a0,4180(s8)
  40383c:	3c020041 	lui	v0,0x41
  403840:	244530e4 	addiu	a1,v0,12516
  403844:	0c102538 	jal	4094e0 <sendfailmsg>
  403848:	00000000 	nop
/home_a/ppchen/adb/adb.c:1312
            return 0;
  40384c:	00001021 	move	v0,zero
  403850:	10000094 	b	403aa4 <handle_host_request+0x3c4>
  403854:	00000000 	nop
/home_a/ppchen/adb/adb.c:1315
        }

        *remote++ = 0;
  403858:	8fc20034 	lw	v0,52(s8)
  40385c:	a0400000 	sb	zero,0(v0)
  403860:	8fc20034 	lw	v0,52(s8)
  403864:	24420001 	addiu	v0,v0,1
  403868:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/adb.c:1316
        if((local[0] == 0) || (remote[0] == 0) || (remote[0] == '*')){
  40386c:	8fc20030 	lw	v0,48(s8)
  403870:	80420000 	lb	v0,0(v0)
  403874:	1040000a 	beqz	v0,4038a0 <handle_host_request+0x1c0>
  403878:	00000000 	nop
/home_a/ppchen/adb/adb.c:1316 (discriminator 1)
  40387c:	8fc20034 	lw	v0,52(s8)
  403880:	80420000 	lb	v0,0(v0)
  403884:	10400006 	beqz	v0,4038a0 <handle_host_request+0x1c0>
  403888:	00000000 	nop
  40388c:	8fc20034 	lw	v0,52(s8)
  403890:	80430000 	lb	v1,0(v0)
  403894:	2402002a 	li	v0,42
  403898:	14620009 	bne	v1,v0,4038c0 <handle_host_request+0x1e0>
  40389c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1317
            sendfailmsg(reply_fd, "malformed forward spec");
  4038a0:	8fc41054 	lw	a0,4180(s8)
  4038a4:	3c020041 	lui	v0,0x41
  4038a8:	244530e4 	addiu	a1,v0,12516
  4038ac:	0c102538 	jal	4094e0 <sendfailmsg>
  4038b0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1318
            return 0;
  4038b4:	00001021 	move	v0,zero
  4038b8:	1000007a 	b	403aa4 <handle_host_request+0x3c4>
  4038bc:	00000000 	nop
/home_a/ppchen/adb/adb.c:1321
        }

        transport = acquire_one_transport(CS_ANY, ttype, serial, &err);
  4038c0:	27c2103c 	addiu	v0,s8,4156
  4038c4:	2404ffff 	li	a0,-1
  4038c8:	8fc5104c 	lw	a1,4172(s8)
  4038cc:	8fc61050 	lw	a2,4176(s8)
  4038d0:	00403821 	move	a3,v0
  4038d4:	0c101d9b 	jal	40766c <acquire_one_transport>
  4038d8:	00000000 	nop
  4038dc:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/adb.c:1322
        if (!transport) {
  4038e0:	8fc20038 	lw	v0,56(s8)
  4038e4:	14400009 	bnez	v0,40390c <handle_host_request+0x22c>
  4038e8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1323
            sendfailmsg(reply_fd, err);
  4038ec:	8fc2103c 	lw	v0,4156(s8)
  4038f0:	8fc41054 	lw	a0,4180(s8)
  4038f4:	00402821 	move	a1,v0
  4038f8:	0c102538 	jal	4094e0 <sendfailmsg>
  4038fc:	00000000 	nop
/home_a/ppchen/adb/adb.c:1324
            return 0;
  403900:	00001021 	move	v0,zero
  403904:	10000067 	b	403aa4 <handle_host_request+0x3c4>
  403908:	00000000 	nop
/home_a/ppchen/adb/adb.c:1327
        }

        if (createForward) {
  40390c:	8fc2002c 	lw	v0,44(s8)
  403910:	10400009 	beqz	v0,403938 <handle_host_request+0x258>
  403914:	00000000 	nop
/home_a/ppchen/adb/adb.c:1328
            r = install_listener(local, remote, transport);
  403918:	8fc40030 	lw	a0,48(s8)
  40391c:	8fc50034 	lw	a1,52(s8)
  403920:	8fc60038 	lw	a2,56(s8)
  403924:	0c100b4a 	jal	402d28 <install_listener>
  403928:	00000000 	nop
  40392c:	afc20020 	sw	v0,32(s8)
  403930:	10000007 	b	403950 <handle_host_request+0x270>
  403934:	00000000 	nop
/home_a/ppchen/adb/adb.c:1330
        } else {
            r = remove_listener(local, remote, transport);
  403938:	8fc40030 	lw	a0,48(s8)
  40393c:	8fc50034 	lw	a1,52(s8)
  403940:	8fc60038 	lw	a2,56(s8)
  403944:	0c100b0f 	jal	402c3c <remove_listener>
  403948:	00000000 	nop
  40394c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/adb.c:1332
        }
        if(r == 0) {
  403950:	8fc20020 	lw	v0,32(s8)
  403954:	1440000a 	bnez	v0,403980 <handle_host_request+0x2a0>
  403958:	00000000 	nop
/home_a/ppchen/adb/adb.c:1334
                /* 1st OKAY is connect, 2nd OKAY is status */
            writex(reply_fd, "OKAYOKAY", 8);
  40395c:	8fc41054 	lw	a0,4180(s8)
  403960:	3c020041 	lui	v0,0x41
  403964:	244530fc 	addiu	a1,v0,12540
  403968:	24060008 	li	a2,8
  40396c:	0c101f4e 	jal	407d38 <writex>
  403970:	00000000 	nop
/home_a/ppchen/adb/adb.c:1335
            return 0;
  403974:	00001021 	move	v0,zero
  403978:	1000004a 	b	403aa4 <handle_host_request+0x3c4>
  40397c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1338
        }

        if (createForward) {
  403980:	8fc2002c 	lw	v0,44(s8)
  403984:	10400011 	beqz	v0,4039cc <handle_host_request+0x2ec>
  403988:	00000000 	nop
/home_a/ppchen/adb/adb.c:1339
            sendfailmsg(reply_fd, (r == -1) ? "cannot rebind smartsocket" : "cannot bind socket");
  40398c:	8fc30020 	lw	v1,32(s8)
  403990:	2402ffff 	li	v0,-1
  403994:	14620005 	bne	v1,v0,4039ac <handle_host_request+0x2cc>
  403998:	00000000 	nop
/home_a/ppchen/adb/adb.c:1339 (discriminator 1)
  40399c:	3c020041 	lui	v0,0x41
  4039a0:	24423108 	addiu	v0,v0,12552
  4039a4:	10000003 	b	4039b4 <handle_host_request+0x2d4>
  4039a8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1339 (discriminator 2)
  4039ac:	3c020041 	lui	v0,0x41
  4039b0:	24423124 	addiu	v0,v0,12580
/home_a/ppchen/adb/adb.c:1339 (discriminator 3)
  4039b4:	8fc41054 	lw	a0,4180(s8)
  4039b8:	00402821 	move	a1,v0
  4039bc:	0c102538 	jal	4094e0 <sendfailmsg>
  4039c0:	00000000 	nop
  4039c4:	10000006 	b	4039e0 <handle_host_request+0x300>
  4039c8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1341
        } else {
            sendfailmsg(reply_fd, "cannot remove listener");
  4039cc:	8fc41054 	lw	a0,4180(s8)
  4039d0:	3c020041 	lui	v0,0x41
  4039d4:	24453138 	addiu	a1,v0,12600
  4039d8:	0c102538 	jal	4094e0 <sendfailmsg>
  4039dc:	00000000 	nop
/home_a/ppchen/adb/adb.c:1343
        }
        return 0;
  4039e0:	00001021 	move	v0,zero
  4039e4:	1000002f 	b	403aa4 <handle_host_request+0x3c4>
  4039e8:	00000000 	nop
/home_a/ppchen/adb/adb.c:1346
    }

    if(!strncmp(service,"get-state",strlen("get-state"))) {
  4039ec:	8fc41048 	lw	a0,4168(s8)
  4039f0:	3c020041 	lui	v0,0x41
  4039f4:	24453150 	addiu	a1,v0,12624
  4039f8:	24060009 	li	a2,9
  4039fc:	0c105308 	jal	414c20 <strncmp@plt>
  403a00:	00000000 	nop
  403a04:	14400026 	bnez	v0,403aa0 <handle_host_request+0x3c0>
  403a08:	00000000 	nop
/home_a/ppchen/adb/adb.c:1347
        transport = acquire_one_transport(CS_ANY, ttype, serial, NULL);
  403a0c:	2404ffff 	li	a0,-1
  403a10:	8fc5104c 	lw	a1,4172(s8)
  403a14:	8fc61050 	lw	a2,4176(s8)
  403a18:	00003821 	move	a3,zero
  403a1c:	0c101d9b 	jal	40766c <acquire_one_transport>
  403a20:	00000000 	nop
  403a24:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/adb.c:1348
        char *state = connection_state_name(transport);
  403a28:	8fc40024 	lw	a0,36(s8)
  403a2c:	0c100821 	jal	402084 <connection_state_name>
  403a30:	00000000 	nop
  403a34:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/adb.c:1349
        snprintf(buf, sizeof buf, "OKAY%04x%s",(unsigned)strlen(state),state);
  403a38:	8fc40028 	lw	a0,40(s8)
  403a3c:	0c10531c 	jal	414c70 <strlen@plt>
  403a40:	00000000 	nop
  403a44:	27c3003c 	addiu	v1,s8,60
  403a48:	8fc40028 	lw	a0,40(s8)
  403a4c:	afa40010 	sw	a0,16(sp)
  403a50:	00602021 	move	a0,v1
  403a54:	24051000 	li	a1,4096
  403a58:	3c030041 	lui	v1,0x41
  403a5c:	2466315c 	addiu	a2,v1,12636
  403a60:	00403821 	move	a3,v0
  403a64:	0c105334 	jal	414cd0 <snprintf@plt>
  403a68:	00000000 	nop
/home_a/ppchen/adb/adb.c:1350
        writex(reply_fd, buf, strlen(buf));
  403a6c:	27c2003c 	addiu	v0,s8,60
  403a70:	00402021 	move	a0,v0
  403a74:	0c10531c 	jal	414c70 <strlen@plt>
  403a78:	00000000 	nop
  403a7c:	27c3003c 	addiu	v1,s8,60
  403a80:	8fc41054 	lw	a0,4180(s8)
  403a84:	00602821 	move	a1,v1
  403a88:	00403021 	move	a2,v0
  403a8c:	0c101f4e 	jal	407d38 <writex>
  403a90:	00000000 	nop
/home_a/ppchen/adb/adb.c:1351
        return 0;
  403a94:	00001021 	move	v0,zero
  403a98:	10000002 	b	403aa4 <handle_host_request+0x3c4>
  403a9c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1353
    }
    return -1;
  403aa0:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/adb.c:1354
}
  403aa4:	03c0e821 	move	sp,s8
  403aa8:	8fbf1044 	lw	ra,4164(sp)
  403aac:	8fbe1040 	lw	s8,4160(sp)
  403ab0:	27bd1048 	addiu	sp,sp,4168
  403ab4:	03e00008 	jr	ra
  403ab8:	00000000 	nop

00403abc <main>:
main():
/home_a/ppchen/adb/adb.c:1361
#if !ADB_HOST
int recovery_mode = 0;
#endif

int main(int argc, char **argv)
{
  403abc:	27bdffe0 	addiu	sp,sp,-32
  403ac0:	afbf001c 	sw	ra,28(sp)
  403ac4:	afbe0018 	sw	s8,24(sp)
  403ac8:	03a0f021 	move	s8,sp
  403acc:	afc40020 	sw	a0,32(s8)
  403ad0:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/adb.c:1371
    return adb_commandline(argc - 1, argv + 1);
#else
    /* If adbd runs inside the emulator this will enable adb tracing via
     * adb-debug qemud service in the emulator. */
    //adb_qemu_trace_init();
    if((argc > 1) && (!strcmp(argv[1],"recovery"))) {
  403ad4:	8fc20020 	lw	v0,32(s8)
  403ad8:	28420002 	slti	v0,v0,2
  403adc:	14400012 	bnez	v0,403b28 <main+0x6c>
  403ae0:	00000000 	nop
/home_a/ppchen/adb/adb.c:1371 (discriminator 1)
  403ae4:	8fc20024 	lw	v0,36(s8)
  403ae8:	24420004 	addiu	v0,v0,4
  403aec:	8c420000 	lw	v0,0(v0)
  403af0:	00402021 	move	a0,v0
  403af4:	3c020041 	lui	v0,0x41
  403af8:	24452e88 	addiu	a1,v0,11912
  403afc:	0c1053d8 	jal	414f60 <strcmp@plt>
  403b00:	00000000 	nop
  403b04:	14400008 	bnez	v0,403b28 <main+0x6c>
  403b08:	00000000 	nop
/home_a/ppchen/adb/adb.c:1372
        adb_device_banner = "recovery";
  403b0c:	3c020042 	lui	v0,0x42
  403b10:	3c030041 	lui	v1,0x41
  403b14:	24632e88 	addiu	v1,v1,11912
  403b18:	ac4355e0 	sw	v1,21984(v0)
/home_a/ppchen/adb/adb.c:1373
        recovery_mode = 1;
  403b1c:	3c020042 	lui	v0,0x42
  403b20:	24030001 	li	v1,1
  403b24:	ac435810 	sw	v1,22544(v0)
/home_a/ppchen/adb/adb.c:1376
    }

    start_device_log();
  403b28:	0c100c86 	jal	403218 <start_device_log>
  403b2c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1378

    return adb_main(0, DEFAULT_ADB_PORT);
  403b30:	00002021 	move	a0,zero
  403b34:	240513ad 	li	a1,5037
  403b38:	0c100d4f 	jal	40353c <adb_main>
  403b3c:	00000000 	nop
/home_a/ppchen/adb/adb.c:1380
#endif
}
  403b40:	03c0e821 	move	sp,s8
  403b44:	8fbf001c 	lw	ra,28(sp)
  403b48:	8fbe0018 	lw	s8,24(sp)
  403b4c:	27bd0020 	addiu	sp,sp,32
  403b50:	03e00008 	jr	ra
  403b54:	00000000 	nop
	...

00403b60 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  403b60:	27bdffe0 	addiu	sp,sp,-32
  403b64:	afbf001c 	sw	ra,28(sp)
  403b68:	afbe0018 	sw	s8,24(sp)
  403b6c:	03a0f021 	move	s8,sp
  403b70:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  403b74:	8fc40020 	lw	a0,32(s8)
  403b78:	24050002 	li	a1,2
  403b7c:	24060001 	li	a2,1
  403b80:	0c10532c 	jal	414cb0 <fcntl@plt>
  403b84:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  403b88:	03c0e821 	move	sp,s8
  403b8c:	8fbf001c 	lw	ra,28(sp)
  403b90:	8fbe0018 	lw	s8,24(sp)
  403b94:	27bd0020 	addiu	sp,sp,32
  403b98:	03e00008 	jr	ra
  403b9c:	00000000 	nop

00403ba0 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  403ba0:	27bdffe0 	addiu	sp,sp,-32
  403ba4:	afbf001c 	sw	ra,28(sp)
  403ba8:	afbe0018 	sw	s8,24(sp)
  403bac:	03a0f021 	move	s8,sp
  403bb0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  403bb4:	8fc40020 	lw	a0,32(s8)
  403bb8:	0c105378 	jal	414de0 <close@plt>
  403bbc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  403bc0:	03c0e821 	move	sp,s8
  403bc4:	8fbf001c 	lw	ra,28(sp)
  403bc8:	8fbe0018 	lw	s8,24(sp)
  403bcc:	27bd0020 	addiu	sp,sp,32
  403bd0:	03e00008 	jr	ra
  403bd4:	00000000 	nop

00403bd8 <adb_thread_create>:
adb_thread_create():
/home_a/ppchen/adb/sysdeps.h:424
typedef  pthread_t                 adb_thread_t;

typedef void*  (*adb_thread_func_t)( void*  arg );

static __inline__ int  adb_thread_create( adb_thread_t  *pthread, adb_thread_func_t  start, void*  arg )
{
  403bd8:	27bdffb8 	addiu	sp,sp,-72
  403bdc:	afbf0044 	sw	ra,68(sp)
  403be0:	afbe0040 	sw	s8,64(sp)
  403be4:	03a0f021 	move	s8,sp
  403be8:	afc40048 	sw	a0,72(s8)
  403bec:	afc5004c 	sw	a1,76(s8)
  403bf0:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sysdeps.h:429
    pthread_attr_t   attr;


    //pthread_detach(pthread_self());
    pthread_attr_init (&attr);
  403bf4:	27c2001c 	addiu	v0,s8,28
  403bf8:	00402021 	move	a0,v0
  403bfc:	0c1052ec 	jal	414bb0 <pthread_attr_init@plt>
  403c00:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:430
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
  403c04:	27c2001c 	addiu	v0,s8,28
  403c08:	00402021 	move	a0,v0
  403c0c:	24050001 	li	a1,1
  403c10:	0c1052c8 	jal	414b20 <pthread_attr_setdetachstate@plt>
  403c14:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:431
    pthread_attr_setstacksize(&attr, 64*1024);
  403c18:	27c2001c 	addiu	v0,s8,28
  403c1c:	00402021 	move	a0,v0
  403c20:	3c050001 	lui	a1,0x1
  403c24:	0c105314 	jal	414c50 <pthread_attr_setstacksize@plt>
  403c28:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:434
   

    int ret =  pthread_create( pthread, &attr, start, arg );
  403c2c:	27c2001c 	addiu	v0,s8,28
  403c30:	8fc40048 	lw	a0,72(s8)
  403c34:	00402821 	move	a1,v0
  403c38:	8fc6004c 	lw	a2,76(s8)
  403c3c:	8fc70050 	lw	a3,80(s8)
  403c40:	0c105368 	jal	414da0 <pthread_create@plt>
  403c44:	00000000 	nop
  403c48:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:436

    return ret;
  403c4c:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:437
}
  403c50:	03c0e821 	move	sp,s8
  403c54:	8fbf0044 	lw	ra,68(sp)
  403c58:	8fbe0040 	lw	s8,64(sp)
  403c5c:	27bd0048 	addiu	sp,sp,72
  403c60:	03e00008 	jr	ra
  403c64:	00000000 	nop

00403c68 <unix_socketpair>:
unix_socketpair():
/home_a/ppchen/adb/sysdeps.h:453
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
}


static __inline__ int  unix_socketpair( int  d, int  type, int  protocol, int sv[2] )
{
  403c68:	27bdffe0 	addiu	sp,sp,-32
  403c6c:	afbf001c 	sw	ra,28(sp)
  403c70:	afbe0018 	sw	s8,24(sp)
  403c74:	03a0f021 	move	s8,sp
  403c78:	afc40020 	sw	a0,32(s8)
  403c7c:	afc50024 	sw	a1,36(s8)
  403c80:	afc60028 	sw	a2,40(s8)
  403c84:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/sysdeps.h:454
    return socketpair( d, type, protocol, sv );
  403c88:	8fc40020 	lw	a0,32(s8)
  403c8c:	8fc50024 	lw	a1,36(s8)
  403c90:	8fc60028 	lw	a2,40(s8)
  403c94:	8fc7002c 	lw	a3,44(s8)
  403c98:	0c105394 	jal	414e50 <socketpair@plt>
  403c9c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:455
}
  403ca0:	03c0e821 	move	sp,s8
  403ca4:	8fbf001c 	lw	ra,28(sp)
  403ca8:	8fbe0018 	lw	s8,24(sp)
  403cac:	27bd0020 	addiu	sp,sp,32
  403cb0:	03e00008 	jr	ra
  403cb4:	00000000 	nop

00403cb8 <backup_socketpair>:
backup_socketpair():
/home_a/ppchen/adb/backup_service.c:31
    pid_t pid;
    int fd;
} backup_harvest_params;

// socketpair but do *not* mark as close_on_exec
static int backup_socketpair(int sv[2]) {
  403cb8:	27bdffd8 	addiu	sp,sp,-40
  403cbc:	afbf0024 	sw	ra,36(sp)
  403cc0:	afbe0020 	sw	s8,32(sp)
  403cc4:	03a0f021 	move	s8,sp
  403cc8:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/backup_service.c:32
    int rc = unix_socketpair( AF_UNIX, SOCK_STREAM, 0, sv );
  403ccc:	24040001 	li	a0,1
  403cd0:	24050002 	li	a1,2
  403cd4:	00003021 	move	a2,zero
  403cd8:	8fc70028 	lw	a3,40(s8)
  403cdc:	0c100f1a 	jal	403c68 <unix_socketpair>
  403ce0:	00000000 	nop
  403ce4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/backup_service.c:33
    if (rc < 0)
  403ce8:	8fc20018 	lw	v0,24(s8)
  403cec:	04410004 	bgez	v0,403d00 <backup_socketpair+0x48>
  403cf0:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:34
        return -1;
  403cf4:	2402ffff 	li	v0,-1
  403cf8:	10000002 	b	403d04 <backup_socketpair+0x4c>
  403cfc:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:36

    return 0;
  403d00:	00001021 	move	v0,zero
/home_a/ppchen/adb/backup_service.c:37
}
  403d04:	03c0e821 	move	sp,s8
  403d08:	8fbf0024 	lw	ra,36(sp)
  403d0c:	8fbe0020 	lw	s8,32(sp)
  403d10:	27bd0028 	addiu	sp,sp,40
  403d14:	03e00008 	jr	ra
  403d18:	00000000 	nop

00403d1c <backup_child_waiter>:
backup_child_waiter():
/home_a/ppchen/adb/backup_service.c:40

// harvest the child process then close the read end of the socketpair
static void* backup_child_waiter(void* args) {
  403d1c:	27bdffd8 	addiu	sp,sp,-40
  403d20:	afbf0024 	sw	ra,36(sp)
  403d24:	afbe0020 	sw	s8,32(sp)
  403d28:	03a0f021 	move	s8,sp
  403d2c:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/backup_service.c:42
    int status;
    backup_harvest_params* params = (backup_harvest_params*) args;
  403d30:	8fc20028 	lw	v0,40(s8)
  403d34:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/backup_service.c:44

    waitpid(params->pid, &status, 0);
  403d38:	8fc20018 	lw	v0,24(s8)
  403d3c:	8c430000 	lw	v1,0(v0)
  403d40:	27c2001c 	addiu	v0,s8,28
  403d44:	00602021 	move	a0,v1
  403d48:	00402821 	move	a1,v0
  403d4c:	00003021 	move	a2,zero
  403d50:	0c1053dc 	jal	414f70 <waitpid@plt>
  403d54:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:45
    adb_close(params->fd);
  403d58:	8fc20018 	lw	v0,24(s8)
  403d5c:	8c420004 	lw	v0,4(v0)
  403d60:	00402021 	move	a0,v0
  403d64:	0c100ee8 	jal	403ba0 <adb_close>
  403d68:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:46
    free(params);
  403d6c:	8fc40018 	lw	a0,24(s8)
  403d70:	0c1053e4 	jal	414f90 <free@plt>
  403d74:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:47
    return NULL;
  403d78:	00001021 	move	v0,zero
/home_a/ppchen/adb/backup_service.c:48
}
  403d7c:	03c0e821 	move	sp,s8
  403d80:	8fbf0024 	lw	ra,36(sp)
  403d84:	8fbe0020 	lw	s8,32(sp)
  403d88:	27bd0028 	addiu	sp,sp,40
  403d8c:	03e00008 	jr	ra
  403d90:	00000000 	nop

00403d94 <backup_service>:
backup_service():
/home_a/ppchen/adb/backup_service.c:51

/* returns the data socket passing the backup data here for forwarding */
int backup_service(BackupOperation op, char* args) {
  403d94:	27bdff90 	addiu	sp,sp,-112
  403d98:	afbf006c 	sw	ra,108(sp)
  403d9c:	afbe0068 	sw	s8,104(sp)
  403da0:	03a0f021 	move	s8,sp
  403da4:	afc40070 	sw	a0,112(s8)
  403da8:	afc50074 	sw	a1,116(s8)
/home_a/ppchen/adb/backup_service.c:58
    int s[2];
    char* operation;
    int socketnum;

    // Command string and choice of stdin/stdout for the pipe depend on our invocation
    if (op == BACKUP) {
  403dac:	8fc20070 	lw	v0,112(s8)
  403db0:	14400008 	bnez	v0,403dd4 <backup_service+0x40>
  403db4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:59
        operation = "backup";
  403db8:	3c020041 	lui	v0,0x41
  403dbc:	24423250 	addiu	v0,v0,12880
  403dc0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/backup_service.c:60
        socketnum = STDOUT_FILENO;
  403dc4:	24020001 	li	v0,1
  403dc8:	afc20024 	sw	v0,36(s8)
  403dcc:	10000005 	b	403de4 <backup_service+0x50>
  403dd0:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:62
    } else {
        operation = "restore";
  403dd4:	3c020041 	lui	v0,0x41
  403dd8:	24423258 	addiu	v0,v0,12888
  403ddc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/backup_service.c:63
        socketnum = STDIN_FILENO;
  403de0:	afc00024 	sw	zero,36(s8)
/home_a/ppchen/adb/backup_service.c:66 (discriminator 1)
    }

    D("backup_service(%s, %s)\n", operation, args);
  403de4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403de8:	00000000 	nop
  403dec:	8c420000 	lw	v0,0(v0)
  403df0:	afc20028 	sw	v0,40(s8)
  403df4:	3c020042 	lui	v0,0x42
  403df8:	244457f0 	addiu	a0,v0,22512
  403dfc:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  403e00:	00000000 	nop
  403e04:	3c020042 	lui	v0,0x42
  403e08:	8c4257c4 	lw	v0,22468(v0)
  403e0c:	00402021 	move	a0,v0
  403e10:	3c020041 	lui	v0,0x41
  403e14:	24453260 	addiu	a1,v0,12896
  403e18:	3c020041 	lui	v0,0x41
  403e1c:	2446326c 	addiu	a2,v0,12908
  403e20:	3c020041 	lui	v0,0x41
  403e24:	244733c0 	addiu	a3,v0,13248
  403e28:	0c1053b4 	jal	414ed0 <fprintf@plt>
  403e2c:	00000000 	nop
  403e30:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403e34:	00000000 	nop
  403e38:	8fc30028 	lw	v1,40(s8)
  403e3c:	ac430000 	sw	v1,0(v0)
  403e40:	3c020042 	lui	v0,0x42
  403e44:	8c4257c4 	lw	v0,22468(v0)
  403e48:	00402021 	move	a0,v0
  403e4c:	3c020041 	lui	v0,0x41
  403e50:	24453280 	addiu	a1,v0,12928
  403e54:	8fc60018 	lw	a2,24(s8)
  403e58:	8fc70074 	lw	a3,116(s8)
  403e5c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  403e60:	00000000 	nop
  403e64:	3c020042 	lui	v0,0x42
  403e68:	8c4257c4 	lw	v0,22468(v0)
  403e6c:	00402021 	move	a0,v0
  403e70:	0c1053a8 	jal	414ea0 <fflush@plt>
  403e74:	00000000 	nop
  403e78:	3c020042 	lui	v0,0x42
  403e7c:	244457f0 	addiu	a0,v0,22512
  403e80:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  403e84:	00000000 	nop
  403e88:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403e8c:	00000000 	nop
  403e90:	8fc30028 	lw	v1,40(s8)
  403e94:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:70 (discriminator 1)

    // set up the pipe from the subprocess to here
    // parent will read s[0]; child will write s[1]
    if (backup_socketpair(s)) {
  403e98:	27c2004c 	addiu	v0,s8,76
  403e9c:	00402021 	move	a0,v0
  403ea0:	0c100f2e 	jal	403cb8 <backup_socketpair>
  403ea4:	00000000 	nop
  403ea8:	1040003a 	beqz	v0,403f94 <backup_service+0x200>
  403eac:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:71 (discriminator 1)
        D("can't create backup/restore socketpair\n");
  403eb0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403eb4:	00000000 	nop
  403eb8:	8c420000 	lw	v0,0(v0)
  403ebc:	afc2002c 	sw	v0,44(s8)
  403ec0:	3c020042 	lui	v0,0x42
  403ec4:	244457f0 	addiu	a0,v0,22512
  403ec8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  403ecc:	00000000 	nop
  403ed0:	3c020042 	lui	v0,0x42
  403ed4:	8c4257c4 	lw	v0,22468(v0)
  403ed8:	00402021 	move	a0,v0
  403edc:	3c020041 	lui	v0,0x41
  403ee0:	24453260 	addiu	a1,v0,12896
  403ee4:	3c020041 	lui	v0,0x41
  403ee8:	2446326c 	addiu	a2,v0,12908
  403eec:	3c020041 	lui	v0,0x41
  403ef0:	244733c0 	addiu	a3,v0,13248
  403ef4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  403ef8:	00000000 	nop
  403efc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403f00:	00000000 	nop
  403f04:	8fc3002c 	lw	v1,44(s8)
  403f08:	ac430000 	sw	v1,0(v0)
  403f0c:	3c020042 	lui	v0,0x42
  403f10:	8c4257c4 	lw	v0,22468(v0)
  403f14:	3c030041 	lui	v1,0x41
  403f18:	24643298 	addiu	a0,v1,12952
  403f1c:	24050001 	li	a1,1
  403f20:	24060027 	li	a2,39
  403f24:	00403821 	move	a3,v0
  403f28:	0c1052d0 	jal	414b40 <fwrite@plt>
  403f2c:	00000000 	nop
  403f30:	3c020042 	lui	v0,0x42
  403f34:	8c4257c4 	lw	v0,22468(v0)
  403f38:	00402021 	move	a0,v0
  403f3c:	0c1053a8 	jal	414ea0 <fflush@plt>
  403f40:	00000000 	nop
  403f44:	3c020042 	lui	v0,0x42
  403f48:	244457f0 	addiu	a0,v0,22512
  403f4c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  403f50:	00000000 	nop
  403f54:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403f58:	00000000 	nop
  403f5c:	8fc3002c 	lw	v1,44(s8)
  403f60:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:72 (discriminator 1)
        fprintf(stderr, "unable to create backup/restore socketpair\n");
  403f64:	3c020042 	lui	v0,0x42
  403f68:	8c4257c4 	lw	v0,22468(v0)
  403f6c:	3c030041 	lui	v1,0x41
  403f70:	246432c0 	addiu	a0,v1,12992
  403f74:	24050001 	li	a1,1
  403f78:	2406002b 	li	a2,43
  403f7c:	00403821 	move	a3,v0
  403f80:	0c1052d0 	jal	414b40 <fwrite@plt>
  403f84:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:73 (discriminator 1)
        return -1;
  403f88:	2402ffff 	li	v0,-1
  403f8c:	10000195 	b	4045e4 <backup_service+0x850>
  403f90:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:76 (discriminator 1)
    }

    D("Backup/restore socket pair: (send=%d, receive=%d)\n", s[1], s[0]);
  403f94:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403f98:	00000000 	nop
  403f9c:	8c420000 	lw	v0,0(v0)
  403fa0:	afc20030 	sw	v0,48(s8)
  403fa4:	3c020042 	lui	v0,0x42
  403fa8:	244457f0 	addiu	a0,v0,22512
  403fac:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  403fb0:	00000000 	nop
  403fb4:	3c020042 	lui	v0,0x42
  403fb8:	8c4257c4 	lw	v0,22468(v0)
  403fbc:	00402021 	move	a0,v0
  403fc0:	3c020041 	lui	v0,0x41
  403fc4:	24453260 	addiu	a1,v0,12896
  403fc8:	3c020041 	lui	v0,0x41
  403fcc:	2446326c 	addiu	a2,v0,12908
  403fd0:	3c020041 	lui	v0,0x41
  403fd4:	244733c0 	addiu	a3,v0,13248
  403fd8:	0c1053b4 	jal	414ed0 <fprintf@plt>
  403fdc:	00000000 	nop
  403fe0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  403fe4:	00000000 	nop
  403fe8:	8fc30030 	lw	v1,48(s8)
  403fec:	ac430000 	sw	v1,0(v0)
  403ff0:	3c020042 	lui	v0,0x42
  403ff4:	8c4457c4 	lw	a0,22468(v0)
  403ff8:	8fc30050 	lw	v1,80(s8)
  403ffc:	8fc2004c 	lw	v0,76(s8)
  404000:	3c050041 	lui	a1,0x41
  404004:	24a532ec 	addiu	a1,a1,13036
  404008:	00603021 	move	a2,v1
  40400c:	00403821 	move	a3,v0
  404010:	0c1053b4 	jal	414ed0 <fprintf@plt>
  404014:	00000000 	nop
  404018:	3c020042 	lui	v0,0x42
  40401c:	8c4257c4 	lw	v0,22468(v0)
  404020:	00402021 	move	a0,v0
  404024:	0c1053a8 	jal	414ea0 <fflush@plt>
  404028:	00000000 	nop
  40402c:	3c020042 	lui	v0,0x42
  404030:	244457f0 	addiu	a0,v0,22512
  404034:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  404038:	00000000 	nop
  40403c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404040:	00000000 	nop
  404044:	8fc30030 	lw	v1,48(s8)
  404048:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:77 (discriminator 1)
    close_on_exec(s[0]);    // only the side we hold on to
  40404c:	8fc2004c 	lw	v0,76(s8)
  404050:	00402021 	move	a0,v0
  404054:	0c100ed8 	jal	403b60 <close_on_exec>
  404058:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:80 (discriminator 1)

    // spin off the child process to run the backup command
    pid = fork();
  40405c:	0c1053d0 	jal	414f40 <fork@plt>
  404060:	00000000 	nop
  404064:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/backup_service.c:81 (discriminator 1)
    if (pid < 0) {
  404068:	8fc20034 	lw	v0,52(s8)
  40406c:	04410040 	bgez	v0,404170 <backup_service+0x3dc>
  404070:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:83 (discriminator 1)
        // failure
        D("can't fork for %s\n", operation);
  404074:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404078:	00000000 	nop
  40407c:	8c420000 	lw	v0,0(v0)
  404080:	afc20038 	sw	v0,56(s8)
  404084:	3c020042 	lui	v0,0x42
  404088:	244457f0 	addiu	a0,v0,22512
  40408c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  404090:	00000000 	nop
  404094:	3c020042 	lui	v0,0x42
  404098:	8c4257c4 	lw	v0,22468(v0)
  40409c:	00402021 	move	a0,v0
  4040a0:	3c020041 	lui	v0,0x41
  4040a4:	24453260 	addiu	a1,v0,12896
  4040a8:	3c020041 	lui	v0,0x41
  4040ac:	2446326c 	addiu	a2,v0,12908
  4040b0:	3c020041 	lui	v0,0x41
  4040b4:	244733c0 	addiu	a3,v0,13248
  4040b8:	0c1053b4 	jal	414ed0 <fprintf@plt>
  4040bc:	00000000 	nop
  4040c0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4040c4:	00000000 	nop
  4040c8:	8fc30038 	lw	v1,56(s8)
  4040cc:	ac430000 	sw	v1,0(v0)
  4040d0:	3c020042 	lui	v0,0x42
  4040d4:	8c4257c4 	lw	v0,22468(v0)
  4040d8:	00402021 	move	a0,v0
  4040dc:	3c020041 	lui	v0,0x41
  4040e0:	24453320 	addiu	a1,v0,13088
  4040e4:	8fc60018 	lw	a2,24(s8)
  4040e8:	0c1053b4 	jal	414ed0 <fprintf@plt>
  4040ec:	00000000 	nop
  4040f0:	3c020042 	lui	v0,0x42
  4040f4:	8c4257c4 	lw	v0,22468(v0)
  4040f8:	00402021 	move	a0,v0
  4040fc:	0c1053a8 	jal	414ea0 <fflush@plt>
  404100:	00000000 	nop
  404104:	3c020042 	lui	v0,0x42
  404108:	244457f0 	addiu	a0,v0,22512
  40410c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  404110:	00000000 	nop
  404114:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404118:	00000000 	nop
  40411c:	8fc30038 	lw	v1,56(s8)
  404120:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:84 (discriminator 1)
        fprintf(stderr, "unable to fork for %s\n", operation);
  404124:	3c020042 	lui	v0,0x42
  404128:	8c4257c4 	lw	v0,22468(v0)
  40412c:	00402021 	move	a0,v0
  404130:	3c020041 	lui	v0,0x41
  404134:	24453334 	addiu	a1,v0,13108
  404138:	8fc60018 	lw	a2,24(s8)
  40413c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  404140:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:85 (discriminator 1)
        adb_close(s[0]);
  404144:	8fc2004c 	lw	v0,76(s8)
  404148:	00402021 	move	a0,v0
  40414c:	0c100ee8 	jal	403ba0 <adb_close>
  404150:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:86 (discriminator 1)
        adb_close(s[1]);
  404154:	8fc20050 	lw	v0,80(s8)
  404158:	00402021 	move	a0,v0
  40415c:	0c100ee8 	jal	403ba0 <adb_close>
  404160:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:87 (discriminator 1)
        return -1;
  404164:	2402ffff 	li	v0,-1
  404168:	1000011e 	b	4045e4 <backup_service+0x850>
  40416c:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:91
    }

    // Great, we're off and running.
    if (pid == 0) {
  404170:	8fc20034 	lw	v0,52(s8)
  404174:	144000a0 	bnez	v0,4043f8 <backup_service+0x664>
  404178:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:99
        int argc;
        char portnum[16];
        char** bu_args;

        // fixed args:  [0] is 'bu', [1] is the port number, [2] is the 'operation' string
        argc = 3;
  40417c:	24020003 	li	v0,3
  404180:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:100
        for (p = (char*)args; p && *p; ) {
  404184:	8fc20074 	lw	v0,116(s8)
  404188:	afc2001c 	sw	v0,28(s8)
  40418c:	1000001a 	b	4041f8 <backup_service+0x464>
  404190:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:101
            argc++;
  404194:	8fc20020 	lw	v0,32(s8)
  404198:	24420001 	addiu	v0,v0,1
  40419c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:102
            while (*p && *p != ':') p++;
  4041a0:	10000004 	b	4041b4 <backup_service+0x420>
  4041a4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:102 (discriminator 1)
  4041a8:	8fc2001c 	lw	v0,28(s8)
  4041ac:	24420001 	addiu	v0,v0,1
  4041b0:	afc2001c 	sw	v0,28(s8)
  4041b4:	8fc2001c 	lw	v0,28(s8)
  4041b8:	80420000 	lb	v0,0(v0)
  4041bc:	10400006 	beqz	v0,4041d8 <backup_service+0x444>
  4041c0:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:102 (discriminator 2)
  4041c4:	8fc2001c 	lw	v0,28(s8)
  4041c8:	80430000 	lb	v1,0(v0)
  4041cc:	2402003a 	li	v0,58
  4041d0:	1462fff5 	bne	v1,v0,4041a8 <backup_service+0x414>
  4041d4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:103
            if (*p == ':') p++;
  4041d8:	8fc2001c 	lw	v0,28(s8)
  4041dc:	80430000 	lb	v1,0(v0)
  4041e0:	2402003a 	li	v0,58
  4041e4:	14620004 	bne	v1,v0,4041f8 <backup_service+0x464>
  4041e8:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:103 (discriminator 1)
  4041ec:	8fc2001c 	lw	v0,28(s8)
  4041f0:	24420001 	addiu	v0,v0,1
  4041f4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/backup_service.c:100 (discriminator 1)
        char portnum[16];
        char** bu_args;

        // fixed args:  [0] is 'bu', [1] is the port number, [2] is the 'operation' string
        argc = 3;
        for (p = (char*)args; p && *p; ) {
  4041f8:	8fc2001c 	lw	v0,28(s8)
  4041fc:	10400005 	beqz	v0,404214 <backup_service+0x480>
  404200:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:100 (discriminator 2)
  404204:	8fc2001c 	lw	v0,28(s8)
  404208:	80420000 	lb	v0,0(v0)
  40420c:	1440ffe1 	bnez	v0,404194 <backup_service+0x400>
  404210:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:106
            argc++;
            while (*p && *p != ':') p++;
            if (*p == ':') p++;
        }

        bu_args = (char**) alloca(argc*sizeof(char*) + 1);
  404214:	8fc20020 	lw	v0,32(s8)
  404218:	00021080 	sll	v0,v0,0x2
  40421c:	24420001 	addiu	v0,v0,1
  404220:	24420007 	addiu	v0,v0,7
  404224:	24420007 	addiu	v0,v0,7
  404228:	000210c2 	srl	v0,v0,0x3
  40422c:	000210c0 	sll	v0,v0,0x3
  404230:	03a2e823 	subu	sp,sp,v0
  404234:	27a20010 	addiu	v0,sp,16
  404238:	24420007 	addiu	v0,v0,7
  40423c:	000210c2 	srl	v0,v0,0x3
  404240:	000210c0 	sll	v0,v0,0x3
  404244:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/backup_service.c:109

        // run through again to build the argv array
        argc = 0;
  404248:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/backup_service.c:110
        bu_args[argc++] = "bu";
  40424c:	8fc20020 	lw	v0,32(s8)
  404250:	00021080 	sll	v0,v0,0x2
  404254:	8fc3003c 	lw	v1,60(s8)
  404258:	00621021 	addu	v0,v1,v0
  40425c:	3c030041 	lui	v1,0x41
  404260:	2463334c 	addiu	v1,v1,13132
  404264:	ac430000 	sw	v1,0(v0)
  404268:	8fc20020 	lw	v0,32(s8)
  40426c:	24420001 	addiu	v0,v0,1
  404270:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:111
        snprintf(portnum, sizeof(portnum), "%d", s[1]);
  404274:	8fc20050 	lw	v0,80(s8)
  404278:	27c30054 	addiu	v1,s8,84
  40427c:	00602021 	move	a0,v1
  404280:	24050010 	li	a1,16
  404284:	3c030041 	lui	v1,0x41
  404288:	24663350 	addiu	a2,v1,13136
  40428c:	00403821 	move	a3,v0
  404290:	0c105334 	jal	414cd0 <snprintf@plt>
  404294:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:112
        bu_args[argc++] = portnum;
  404298:	8fc20020 	lw	v0,32(s8)
  40429c:	00021080 	sll	v0,v0,0x2
  4042a0:	8fc3003c 	lw	v1,60(s8)
  4042a4:	00621021 	addu	v0,v1,v0
  4042a8:	27c30054 	addiu	v1,s8,84
  4042ac:	ac430000 	sw	v1,0(v0)
  4042b0:	8fc20020 	lw	v0,32(s8)
  4042b4:	24420001 	addiu	v0,v0,1
  4042b8:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:113
        bu_args[argc++] = operation;
  4042bc:	8fc20020 	lw	v0,32(s8)
  4042c0:	00021080 	sll	v0,v0,0x2
  4042c4:	8fc3003c 	lw	v1,60(s8)
  4042c8:	00621021 	addu	v0,v1,v0
  4042cc:	8fc30018 	lw	v1,24(s8)
  4042d0:	ac430000 	sw	v1,0(v0)
  4042d4:	8fc20020 	lw	v0,32(s8)
  4042d8:	24420001 	addiu	v0,v0,1
  4042dc:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:114
        for (p = (char*)args; p && *p; ) {
  4042e0:	8fc20074 	lw	v0,116(s8)
  4042e4:	afc2001c 	sw	v0,28(s8)
  4042e8:	10000022 	b	404374 <backup_service+0x5e0>
  4042ec:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:115
            bu_args[argc++] = p;
  4042f0:	8fc20020 	lw	v0,32(s8)
  4042f4:	00021080 	sll	v0,v0,0x2
  4042f8:	8fc3003c 	lw	v1,60(s8)
  4042fc:	00621021 	addu	v0,v1,v0
  404300:	8fc3001c 	lw	v1,28(s8)
  404304:	ac430000 	sw	v1,0(v0)
  404308:	8fc20020 	lw	v0,32(s8)
  40430c:	24420001 	addiu	v0,v0,1
  404310:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/backup_service.c:116
            while (*p && *p != ':') p++;
  404314:	10000004 	b	404328 <backup_service+0x594>
  404318:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:116 (discriminator 1)
  40431c:	8fc2001c 	lw	v0,28(s8)
  404320:	24420001 	addiu	v0,v0,1
  404324:	afc2001c 	sw	v0,28(s8)
  404328:	8fc2001c 	lw	v0,28(s8)
  40432c:	80420000 	lb	v0,0(v0)
  404330:	10400006 	beqz	v0,40434c <backup_service+0x5b8>
  404334:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:116 (discriminator 2)
  404338:	8fc2001c 	lw	v0,28(s8)
  40433c:	80430000 	lb	v1,0(v0)
  404340:	2402003a 	li	v0,58
  404344:	1462fff5 	bne	v1,v0,40431c <backup_service+0x588>
  404348:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:117
            if (*p == ':') {
  40434c:	8fc2001c 	lw	v0,28(s8)
  404350:	80430000 	lb	v1,0(v0)
  404354:	2402003a 	li	v0,58
  404358:	14620006 	bne	v1,v0,404374 <backup_service+0x5e0>
  40435c:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:118
                *p = 0;
  404360:	8fc2001c 	lw	v0,28(s8)
  404364:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/backup_service.c:119
                p++;
  404368:	8fc2001c 	lw	v0,28(s8)
  40436c:	24420001 	addiu	v0,v0,1
  404370:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/backup_service.c:114 (discriminator 1)
        argc = 0;
        bu_args[argc++] = "bu";
        snprintf(portnum, sizeof(portnum), "%d", s[1]);
        bu_args[argc++] = portnum;
        bu_args[argc++] = operation;
        for (p = (char*)args; p && *p; ) {
  404374:	8fc2001c 	lw	v0,28(s8)
  404378:	10400005 	beqz	v0,404390 <backup_service+0x5fc>
  40437c:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:114 (discriminator 2)
  404380:	8fc2001c 	lw	v0,28(s8)
  404384:	80420000 	lb	v0,0(v0)
  404388:	1440ffd9 	bnez	v0,4042f0 <backup_service+0x55c>
  40438c:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:122
            if (*p == ':') {
                *p = 0;
                p++;
            }
        }
        bu_args[argc] = NULL;
  404390:	8fc20020 	lw	v0,32(s8)
  404394:	00021080 	sll	v0,v0,0x2
  404398:	8fc3003c 	lw	v1,60(s8)
  40439c:	00621021 	addu	v0,v1,v0
  4043a0:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/backup_service.c:126

        // Close the half of the socket that we don't care about, route 'bu's console
        // to the output socket, and off we go
        adb_close(s[0]);
  4043a4:	8fc2004c 	lw	v0,76(s8)
  4043a8:	00402021 	move	a0,v0
  4043ac:	0c100ee8 	jal	403ba0 <adb_close>
  4043b0:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:129

        // off we go
        execvp("/system/bin/bu", (char * const *)bu_args);
  4043b4:	3c020041 	lui	v0,0x41
  4043b8:	24443354 	addiu	a0,v0,13140
  4043bc:	8fc5003c 	lw	a1,60(s8)
  4043c0:	0c105410 	jal	415040 <execvp@plt>
  4043c4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:131
        // oops error - close up shop and go home
        fprintf(stderr, "Unable to exec 'bu', bailing\n");
  4043c8:	3c020042 	lui	v0,0x42
  4043cc:	8c4257c4 	lw	v0,22468(v0)
  4043d0:	3c030041 	lui	v1,0x41
  4043d4:	24643364 	addiu	a0,v1,13156
  4043d8:	24050001 	li	a1,1
  4043dc:	2406001d 	li	a2,29
  4043e0:	00403821 	move	a3,v0
  4043e4:	0c1052d0 	jal	414b40 <fwrite@plt>
  4043e8:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:132
        exit(-1);
  4043ec:	2404ffff 	li	a0,-1
  4043f0:	0c1053cc 	jal	414f30 <exit@plt>
  4043f4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:138 (discriminator 1)
    } else {
        adb_thread_t t;
        backup_harvest_params* params;

        // parent, i.e. adbd -- close the sending half of the socket
        D("fork() returned pid %d\n", pid);
  4043f8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4043fc:	00000000 	nop
  404400:	8c420000 	lw	v0,0(v0)
  404404:	afc20040 	sw	v0,64(s8)
  404408:	3c020042 	lui	v0,0x42
  40440c:	244457f0 	addiu	a0,v0,22512
  404410:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  404414:	00000000 	nop
  404418:	3c020042 	lui	v0,0x42
  40441c:	8c4257c4 	lw	v0,22468(v0)
  404420:	00402021 	move	a0,v0
  404424:	3c020041 	lui	v0,0x41
  404428:	24453260 	addiu	a1,v0,12896
  40442c:	3c020041 	lui	v0,0x41
  404430:	2446326c 	addiu	a2,v0,12908
  404434:	3c020041 	lui	v0,0x41
  404438:	244733c0 	addiu	a3,v0,13248
  40443c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  404440:	00000000 	nop
  404444:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404448:	00000000 	nop
  40444c:	8fc30040 	lw	v1,64(s8)
  404450:	ac430000 	sw	v1,0(v0)
  404454:	3c020042 	lui	v0,0x42
  404458:	8c4257c4 	lw	v0,22468(v0)
  40445c:	00402021 	move	a0,v0
  404460:	3c020041 	lui	v0,0x41
  404464:	24453384 	addiu	a1,v0,13188
  404468:	8fc60034 	lw	a2,52(s8)
  40446c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  404470:	00000000 	nop
  404474:	3c020042 	lui	v0,0x42
  404478:	8c4257c4 	lw	v0,22468(v0)
  40447c:	00402021 	move	a0,v0
  404480:	0c1053a8 	jal	414ea0 <fflush@plt>
  404484:	00000000 	nop
  404488:	3c020042 	lui	v0,0x42
  40448c:	244457f0 	addiu	a0,v0,22512
  404490:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  404494:	00000000 	nop
  404498:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40449c:	00000000 	nop
  4044a0:	8fc30040 	lw	v1,64(s8)
  4044a4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:139 (discriminator 1)
        adb_close(s[1]);
  4044a8:	8fc20050 	lw	v0,80(s8)
  4044ac:	00402021 	move	a0,v0
  4044b0:	0c100ee8 	jal	403ba0 <adb_close>
  4044b4:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:142 (discriminator 1)

        // spin a thread to harvest the child process
        params = (backup_harvest_params*) malloc(sizeof(backup_harvest_params));
  4044b8:	24040008 	li	a0,8
  4044bc:	0c105300 	jal	414c00 <malloc@plt>
  4044c0:	00000000 	nop
  4044c4:	afc20044 	sw	v0,68(s8)
/home_a/ppchen/adb/backup_service.c:143 (discriminator 1)
        params->pid = pid;
  4044c8:	8fc20044 	lw	v0,68(s8)
  4044cc:	8fc30034 	lw	v1,52(s8)
  4044d0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:144 (discriminator 1)
        params->fd = s[0];
  4044d4:	8fc3004c 	lw	v1,76(s8)
  4044d8:	8fc20044 	lw	v0,68(s8)
  4044dc:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/backup_service.c:145 (discriminator 1)
        if (adb_thread_create(&t, backup_child_waiter, params)) {
  4044e0:	27c20064 	addiu	v0,s8,100
  4044e4:	00402021 	move	a0,v0
  4044e8:	3c020040 	lui	v0,0x40
  4044ec:	24453d1c 	addiu	a1,v0,15644
  4044f0:	8fc60044 	lw	a2,68(s8)
  4044f4:	0c100ef6 	jal	403bd8 <adb_thread_create>
  4044f8:	00000000 	nop
  4044fc:	10400038 	beqz	v0,4045e0 <backup_service+0x84c>
  404500:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:146
            adb_close(s[0]);
  404504:	8fc2004c 	lw	v0,76(s8)
  404508:	00402021 	move	a0,v0
  40450c:	0c100ee8 	jal	403ba0 <adb_close>
  404510:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:147
            free(params);
  404514:	8fc40044 	lw	a0,68(s8)
  404518:	0c1053e4 	jal	414f90 <free@plt>
  40451c:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:148
            D("Unable to create child harvester\n");
  404520:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404524:	00000000 	nop
  404528:	8c420000 	lw	v0,0(v0)
  40452c:	afc20048 	sw	v0,72(s8)
  404530:	3c020042 	lui	v0,0x42
  404534:	244457f0 	addiu	a0,v0,22512
  404538:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40453c:	00000000 	nop
  404540:	3c020042 	lui	v0,0x42
  404544:	8c4257c4 	lw	v0,22468(v0)
  404548:	00402021 	move	a0,v0
  40454c:	3c020041 	lui	v0,0x41
  404550:	24453260 	addiu	a1,v0,12896
  404554:	3c020041 	lui	v0,0x41
  404558:	2446326c 	addiu	a2,v0,12908
  40455c:	3c020041 	lui	v0,0x41
  404560:	244733c0 	addiu	a3,v0,13248
  404564:	0c1053b4 	jal	414ed0 <fprintf@plt>
  404568:	00000000 	nop
  40456c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404570:	00000000 	nop
  404574:	8fc30048 	lw	v1,72(s8)
  404578:	ac430000 	sw	v1,0(v0)
  40457c:	3c020042 	lui	v0,0x42
  404580:	8c4257c4 	lw	v0,22468(v0)
  404584:	3c030041 	lui	v1,0x41
  404588:	2464339c 	addiu	a0,v1,13212
  40458c:	24050001 	li	a1,1
  404590:	24060021 	li	a2,33
  404594:	00403821 	move	a3,v0
  404598:	0c1052d0 	jal	414b40 <fwrite@plt>
  40459c:	00000000 	nop
  4045a0:	3c020042 	lui	v0,0x42
  4045a4:	8c4257c4 	lw	v0,22468(v0)
  4045a8:	00402021 	move	a0,v0
  4045ac:	0c1053a8 	jal	414ea0 <fflush@plt>
  4045b0:	00000000 	nop
  4045b4:	3c020042 	lui	v0,0x42
  4045b8:	244457f0 	addiu	a0,v0,22512
  4045bc:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4045c0:	00000000 	nop
  4045c4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4045c8:	00000000 	nop
  4045cc:	8fc30048 	lw	v1,72(s8)
  4045d0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/backup_service.c:149
            return -1;
  4045d4:	2402ffff 	li	v0,-1
  4045d8:	10000002 	b	4045e4 <backup_service+0x850>
  4045dc:	00000000 	nop
/home_a/ppchen/adb/backup_service.c:154
        }
    }

    // we'll be reading from s[0] as the data is sent by the child process
    return s[0];
  4045e0:	8fc2004c 	lw	v0,76(s8)
/home_a/ppchen/adb/backup_service.c:155
}
  4045e4:	03c0e821 	move	sp,s8
  4045e8:	8fbf006c 	lw	ra,108(sp)
  4045ec:	8fbe0068 	lw	s8,104(sp)
  4045f0:	27bd0070 	addiu	sp,sp,112
  4045f4:	03e00008 	jr	ra
  4045f8:	00000000 	nop
  4045fc:	00000000 	nop

00404600 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  404600:	27bdffe0 	addiu	sp,sp,-32
  404604:	afbf001c 	sw	ra,28(sp)
  404608:	afbe0018 	sw	s8,24(sp)
  40460c:	03a0f021 	move	s8,sp
  404610:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  404614:	8fc40020 	lw	a0,32(s8)
  404618:	24050002 	li	a1,2
  40461c:	24060001 	li	a2,1
  404620:	0c10532c 	jal	414cb0 <fcntl@plt>
  404624:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  404628:	03c0e821 	move	sp,s8
  40462c:	8fbf001c 	lw	ra,28(sp)
  404630:	8fbe0018 	lw	s8,24(sp)
  404634:	27bd0020 	addiu	sp,sp,32
  404638:	03e00008 	jr	ra
  40463c:	00000000 	nop

00404640 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  404640:	27bdffe0 	addiu	sp,sp,-32
  404644:	afbf001c 	sw	ra,28(sp)
  404648:	afbe0018 	sw	s8,24(sp)
  40464c:	03a0f021 	move	s8,sp
  404650:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  404654:	8fc40020 	lw	a0,32(s8)
  404658:	0c105378 	jal	414de0 <close@plt>
  40465c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  404660:	03c0e821 	move	sp,s8
  404664:	8fbf001c 	lw	ra,28(sp)
  404668:	8fbe0018 	lw	s8,24(sp)
  40466c:	27bd0020 	addiu	sp,sp,32
  404670:	03e00008 	jr	ra
  404674:	00000000 	nop

00404678 <unix_socketpair>:
unix_socketpair():
/home_a/ppchen/adb/sysdeps.h:453
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
}


static __inline__ int  unix_socketpair( int  d, int  type, int  protocol, int sv[2] )
{
  404678:	27bdffe0 	addiu	sp,sp,-32
  40467c:	afbf001c 	sw	ra,28(sp)
  404680:	afbe0018 	sw	s8,24(sp)
  404684:	03a0f021 	move	s8,sp
  404688:	afc40020 	sw	a0,32(s8)
  40468c:	afc50024 	sw	a1,36(s8)
  404690:	afc60028 	sw	a2,40(s8)
  404694:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/sysdeps.h:454
    return socketpair( d, type, protocol, sv );
  404698:	8fc40020 	lw	a0,32(s8)
  40469c:	8fc50024 	lw	a1,36(s8)
  4046a0:	8fc60028 	lw	a2,40(s8)
  4046a4:	8fc7002c 	lw	a3,44(s8)
  4046a8:	0c105394 	jal	414e50 <socketpair@plt>
  4046ac:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:455
}
  4046b0:	03c0e821 	move	sp,s8
  4046b4:	8fbf001c 	lw	ra,28(sp)
  4046b8:	8fbe0018 	lw	s8,24(sp)
  4046bc:	27bd0020 	addiu	sp,sp,32
  4046c0:	03e00008 	jr	ra
  4046c4:	00000000 	nop

004046c8 <adb_socketpair>:
adb_socketpair():
/home_a/ppchen/adb/sysdeps.h:458

static __inline__ int  adb_socketpair( int  sv[2] )
{
  4046c8:	27bdffd8 	addiu	sp,sp,-40
  4046cc:	afbf0024 	sw	ra,36(sp)
  4046d0:	afbe0020 	sw	s8,32(sp)
  4046d4:	03a0f021 	move	s8,sp
  4046d8:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sysdeps.h:463
    int  rc;



    rc = unix_socketpair( AF_UNIX, SOCK_STREAM, 0, sv );
  4046dc:	24040001 	li	a0,1
  4046e0:	24050002 	li	a1,2
  4046e4:	00003021 	move	a2,zero
  4046e8:	8fc70028 	lw	a3,40(s8)
  4046ec:	0c10119e 	jal	404678 <unix_socketpair>
  4046f0:	00000000 	nop
  4046f4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:467



    if (rc < 0)
  4046f8:	8fc20018 	lw	v0,24(s8)
  4046fc:	04410004 	bgez	v0,404710 <adb_socketpair+0x48>
  404700:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:468
        return -1;
  404704:	2402ffff 	li	v0,-1
  404708:	1000000d 	b	404740 <adb_socketpair+0x78>
  40470c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:470

    close_on_exec( sv[0] );
  404710:	8fc20028 	lw	v0,40(s8)
  404714:	8c420000 	lw	v0,0(v0)
  404718:	00402021 	move	a0,v0
  40471c:	0c101180 	jal	404600 <close_on_exec>
  404720:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:471
    close_on_exec( sv[1] );
  404724:	8fc20028 	lw	v0,40(s8)
  404728:	24420004 	addiu	v0,v0,4
  40472c:	8c420000 	lw	v0,0(v0)
  404730:	00402021 	move	a0,v0
  404734:	0c101180 	jal	404600 <close_on_exec>
  404738:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:472
    return 0;
  40473c:	00001021 	move	v0,zero
/home_a/ppchen/adb/sysdeps.h:473
}
  404740:	03c0e821 	move	sp,s8
  404744:	8fbf0024 	lw	ra,36(sp)
  404748:	8fbe0020 	lw	s8,32(sp)
  40474c:	27bd0028 	addiu	sp,sp,40
  404750:	03e00008 	jr	ra
  404754:	00000000 	nop

00404758 <fatal>:
fatal():
/home_a/ppchen/adb/fdevent.c:48
// It wakes up the fdevent_loop() and cause the correct handling
// of the shell's pseudo-tty master. I.e. force close it.
int SHELL_EXIT_NOTIFY_FD = -1;

static void fatal(const char *fn, const char *fmt, ...)
{
  404758:	27bdffd8 	addiu	sp,sp,-40
  40475c:	afbf0024 	sw	ra,36(sp)
  404760:	afbe0020 	sw	s8,32(sp)
  404764:	03a0f021 	move	s8,sp
  404768:	afc40028 	sw	a0,40(s8)
  40476c:	afc60030 	sw	a2,48(s8)
  404770:	afc70034 	sw	a3,52(s8)
  404774:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/fdevent.c:50
    va_list ap;
    va_start(ap, fmt);
  404778:	27c20030 	addiu	v0,s8,48
  40477c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:51
    fprintf(stderr, "%s:", fn);
  404780:	3c020042 	lui	v0,0x42
  404784:	8c4257c4 	lw	v0,22468(v0)
  404788:	00402021 	move	a0,v0
  40478c:	3c020041 	lui	v0,0x41
  404790:	244533d0 	addiu	a1,v0,13264
  404794:	8fc60028 	lw	a2,40(s8)
  404798:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40479c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:52
    vfprintf(stderr, fmt, ap);
  4047a0:	3c020042 	lui	v0,0x42
  4047a4:	8c4357c4 	lw	v1,22468(v0)
  4047a8:	8fc20018 	lw	v0,24(s8)
  4047ac:	00602021 	move	a0,v1
  4047b0:	8fc5002c 	lw	a1,44(s8)
  4047b4:	00403021 	move	a2,v0
  4047b8:	0c1052e8 	jal	414ba0 <vfprintf@plt>
  4047bc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:54
    va_end(ap);
    abort();
  4047c0:	0c1053b8 	jal	414ee0 <abort@plt>
  4047c4:	00000000 	nop

004047c8 <dump_fde>:
dump_fde():
/home_a/ppchen/adb/fdevent.c:71
        fprintf(stderr, __VA_ARGS__);          \
        adb_mutex_unlock(&D_lock);             \
        errno = save_errno;                    \
    } while(0)
static void dump_fde(fdevent *fde, const char *info)
{
  4047c8:	27bdffe0 	addiu	sp,sp,-32
  4047cc:	afbf001c 	sw	ra,28(sp)
  4047d0:	afbe0018 	sw	s8,24(sp)
  4047d4:	03a0f021 	move	s8,sp
  4047d8:	afc40020 	sw	a0,32(s8)
  4047dc:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/fdevent.c:72
    adb_mutex_lock(&D_lock);
  4047e0:	3c020042 	lui	v0,0x42
  4047e4:	244457f0 	addiu	a0,v0,22512
  4047e8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4047ec:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:74

    adb_mutex_unlock(&D_lock);
  4047f0:	3c020042 	lui	v0,0x42
  4047f4:	244457f0 	addiu	a0,v0,22512
  4047f8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4047fc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:75
}
  404800:	03c0e821 	move	sp,s8
  404804:	8fbf001c 	lw	ra,28(sp)
  404808:	8fbe0018 	lw	s8,24(sp)
  40480c:	27bd0020 	addiu	sp,sp,32
  404810:	03e00008 	jr	ra
  404814:	00000000 	nop

00404818 <fdevent_init>:
fdevent_init():
/home_a/ppchen/adb/fdevent.c:250
static fd_set error_fds;

static int select_n = 0;

static void fdevent_init(void)
{
  404818:	27bdffd8 	addiu	sp,sp,-40
  40481c:	afbe0024 	sw	s8,36(sp)
  404820:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/fdevent.c:251
    FD_ZERO(&read_fds);
  404824:	3c020042 	lui	v0,0x42
  404828:	24425828 	addiu	v0,v0,22568
  40482c:	afc20014 	sw	v0,20(s8)
  404830:	afc00008 	sw	zero,8(s8)
  404834:	10000009 	b	40485c <fdevent_init+0x44>
  404838:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:251 (discriminator 2)
  40483c:	8fc30014 	lw	v1,20(s8)
  404840:	8fc20008 	lw	v0,8(s8)
  404844:	00021080 	sll	v0,v0,0x2
  404848:	00621021 	addu	v0,v1,v0
  40484c:	ac400000 	sw	zero,0(v0)
  404850:	8fc20008 	lw	v0,8(s8)
  404854:	24420001 	addiu	v0,v0,1
  404858:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/fdevent.c:251 (discriminator 1)
  40485c:	8fc20008 	lw	v0,8(s8)
  404860:	2c420020 	sltiu	v0,v0,32
  404864:	1440fff5 	bnez	v0,40483c <fdevent_init+0x24>
  404868:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:252
    FD_ZERO(&write_fds);
  40486c:	3c020042 	lui	v0,0x42
  404870:	244258a8 	addiu	v0,v0,22696
  404874:	afc20018 	sw	v0,24(s8)
  404878:	afc0000c 	sw	zero,12(s8)
  40487c:	10000009 	b	4048a4 <fdevent_init+0x8c>
  404880:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:252 (discriminator 2)
  404884:	8fc30018 	lw	v1,24(s8)
  404888:	8fc2000c 	lw	v0,12(s8)
  40488c:	00021080 	sll	v0,v0,0x2
  404890:	00621021 	addu	v0,v1,v0
  404894:	ac400000 	sw	zero,0(v0)
  404898:	8fc2000c 	lw	v0,12(s8)
  40489c:	24420001 	addiu	v0,v0,1
  4048a0:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/fdevent.c:252 (discriminator 1)
  4048a4:	8fc2000c 	lw	v0,12(s8)
  4048a8:	2c420020 	sltiu	v0,v0,32
  4048ac:	1440fff5 	bnez	v0,404884 <fdevent_init+0x6c>
  4048b0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:253
    FD_ZERO(&error_fds);
  4048b4:	3c020042 	lui	v0,0x42
  4048b8:	24425928 	addiu	v0,v0,22824
  4048bc:	afc2001c 	sw	v0,28(s8)
  4048c0:	afc00010 	sw	zero,16(s8)
  4048c4:	10000009 	b	4048ec <fdevent_init+0xd4>
  4048c8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:253 (discriminator 2)
  4048cc:	8fc3001c 	lw	v1,28(s8)
  4048d0:	8fc20010 	lw	v0,16(s8)
  4048d4:	00021080 	sll	v0,v0,0x2
  4048d8:	00621021 	addu	v0,v1,v0
  4048dc:	ac400000 	sw	zero,0(v0)
  4048e0:	8fc20010 	lw	v0,16(s8)
  4048e4:	24420001 	addiu	v0,v0,1
  4048e8:	afc20010 	sw	v0,16(s8)
/home_a/ppchen/adb/fdevent.c:253 (discriminator 1)
  4048ec:	8fc20010 	lw	v0,16(s8)
  4048f0:	2c420020 	sltiu	v0,v0,32
  4048f4:	1440fff5 	bnez	v0,4048cc <fdevent_init+0xb4>
  4048f8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:254
}
  4048fc:	03c0e821 	move	sp,s8
  404900:	8fbe0024 	lw	s8,36(sp)
  404904:	27bd0028 	addiu	sp,sp,40
  404908:	03e00008 	jr	ra
  40490c:	00000000 	nop

00404910 <fdevent_connect>:
fdevent_connect():
/home_a/ppchen/adb/fdevent.c:257

static void fdevent_connect(fdevent *fde)
{
  404910:	27bdfff8 	addiu	sp,sp,-8
  404914:	afbe0004 	sw	s8,4(sp)
  404918:	03a0f021 	move	s8,sp
  40491c:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/fdevent.c:258
    if(fde->fd >= select_n) {
  404920:	8fc20008 	lw	v0,8(s8)
  404924:	8c430008 	lw	v1,8(v0)
  404928:	3c020042 	lui	v0,0x42
  40492c:	8c4259a8 	lw	v0,22952(v0)
  404930:	0062102a 	slt	v0,v1,v0
  404934:	14400006 	bnez	v0,404950 <fdevent_connect+0x40>
  404938:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:259
        select_n = fde->fd + 1;
  40493c:	8fc20008 	lw	v0,8(s8)
  404940:	8c420008 	lw	v0,8(v0)
  404944:	24430001 	addiu	v1,v0,1
  404948:	3c020042 	lui	v0,0x42
  40494c:	ac4359a8 	sw	v1,22952(v0)
/home_a/ppchen/adb/fdevent.c:261
    }
}
  404950:	03c0e821 	move	sp,s8
  404954:	8fbe0004 	lw	s8,4(sp)
  404958:	27bd0008 	addiu	sp,sp,8
  40495c:	03e00008 	jr	ra
  404960:	00000000 	nop

00404964 <fdevent_disconnect>:
fdevent_disconnect():
/home_a/ppchen/adb/fdevent.c:264

static void fdevent_disconnect(fdevent *fde)
{
  404964:	27bdffe8 	addiu	sp,sp,-24
  404968:	afbe0014 	sw	s8,20(sp)
  40496c:	03a0f021 	move	s8,sp
  404970:	afc40018 	sw	a0,24(s8)
/home_a/ppchen/adb/fdevent.c:267
    int i, n;

    FD_CLR(fde->fd, &read_fds);
  404974:	8fc20018 	lw	v0,24(s8)
  404978:	8c420008 	lw	v0,8(v0)
  40497c:	00021142 	srl	v0,v0,0x5
  404980:	3c030042 	lui	v1,0x42
  404984:	00022080 	sll	a0,v0,0x2
  404988:	24635828 	addiu	v1,v1,22568
  40498c:	00831821 	addu	v1,a0,v1
  404990:	8c640000 	lw	a0,0(v1)
  404994:	8fc30018 	lw	v1,24(s8)
  404998:	8c630008 	lw	v1,8(v1)
  40499c:	3063001f 	andi	v1,v1,0x1f
  4049a0:	24050001 	li	a1,1
  4049a4:	00651804 	sllv	v1,a1,v1
  4049a8:	00031827 	nor	v1,zero,v1
  4049ac:	00831824 	and	v1,a0,v1
  4049b0:	3c050042 	lui	a1,0x42
  4049b4:	00022080 	sll	a0,v0,0x2
  4049b8:	24a25828 	addiu	v0,a1,22568
  4049bc:	00821021 	addu	v0,a0,v0
  4049c0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:268
    FD_CLR(fde->fd, &write_fds);
  4049c4:	8fc20018 	lw	v0,24(s8)
  4049c8:	8c420008 	lw	v0,8(v0)
  4049cc:	00021142 	srl	v0,v0,0x5
  4049d0:	3c030042 	lui	v1,0x42
  4049d4:	00022080 	sll	a0,v0,0x2
  4049d8:	246358a8 	addiu	v1,v1,22696
  4049dc:	00831821 	addu	v1,a0,v1
  4049e0:	8c640000 	lw	a0,0(v1)
  4049e4:	8fc30018 	lw	v1,24(s8)
  4049e8:	8c630008 	lw	v1,8(v1)
  4049ec:	3063001f 	andi	v1,v1,0x1f
  4049f0:	24050001 	li	a1,1
  4049f4:	00651804 	sllv	v1,a1,v1
  4049f8:	00031827 	nor	v1,zero,v1
  4049fc:	00831824 	and	v1,a0,v1
  404a00:	3c050042 	lui	a1,0x42
  404a04:	00022080 	sll	a0,v0,0x2
  404a08:	24a258a8 	addiu	v0,a1,22696
  404a0c:	00821021 	addu	v0,a0,v0
  404a10:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:269
    FD_CLR(fde->fd, &error_fds);
  404a14:	8fc20018 	lw	v0,24(s8)
  404a18:	8c420008 	lw	v0,8(v0)
  404a1c:	00021142 	srl	v0,v0,0x5
  404a20:	3c030042 	lui	v1,0x42
  404a24:	00022080 	sll	a0,v0,0x2
  404a28:	24635928 	addiu	v1,v1,22824
  404a2c:	00831821 	addu	v1,a0,v1
  404a30:	8c640000 	lw	a0,0(v1)
  404a34:	8fc30018 	lw	v1,24(s8)
  404a38:	8c630008 	lw	v1,8(v1)
  404a3c:	3063001f 	andi	v1,v1,0x1f
  404a40:	24050001 	li	a1,1
  404a44:	00651804 	sllv	v1,a1,v1
  404a48:	00031827 	nor	v1,zero,v1
  404a4c:	00831824 	and	v1,a0,v1
  404a50:	3c050042 	lui	a1,0x42
  404a54:	00022080 	sll	a0,v0,0x2
  404a58:	24a25928 	addiu	v0,a1,22824
  404a5c:	00821021 	addu	v0,a0,v0
  404a60:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:271

    for(n = 0, i = 0; i < select_n; i++) {
  404a64:	afc0000c 	sw	zero,12(s8)
  404a68:	afc00008 	sw	zero,8(s8)
  404a6c:	1000000e 	b	404aa8 <fdevent_disconnect+0x144>
  404a70:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:272
        if(fd_table[i] != 0) n = i;
  404a74:	3c020042 	lui	v0,0x42
  404a78:	8c435820 	lw	v1,22560(v0)
  404a7c:	8fc20008 	lw	v0,8(s8)
  404a80:	00021080 	sll	v0,v0,0x2
  404a84:	00621021 	addu	v0,v1,v0
  404a88:	8c420000 	lw	v0,0(v0)
  404a8c:	10400003 	beqz	v0,404a9c <fdevent_disconnect+0x138>
  404a90:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:272 (discriminator 1)
  404a94:	8fc20008 	lw	v0,8(s8)
  404a98:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/fdevent.c:271

    FD_CLR(fde->fd, &read_fds);
    FD_CLR(fde->fd, &write_fds);
    FD_CLR(fde->fd, &error_fds);

    for(n = 0, i = 0; i < select_n; i++) {
  404a9c:	8fc20008 	lw	v0,8(s8)
  404aa0:	24420001 	addiu	v0,v0,1
  404aa4:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/fdevent.c:271 (discriminator 1)
  404aa8:	3c020042 	lui	v0,0x42
  404aac:	8c4259a8 	lw	v0,22952(v0)
  404ab0:	8fc30008 	lw	v1,8(s8)
  404ab4:	0062102a 	slt	v0,v1,v0
  404ab8:	1440ffee 	bnez	v0,404a74 <fdevent_disconnect+0x110>
  404abc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:274
        if(fd_table[i] != 0) n = i;
    }
    select_n = n + 1;
  404ac0:	8fc2000c 	lw	v0,12(s8)
  404ac4:	24430001 	addiu	v1,v0,1
  404ac8:	3c020042 	lui	v0,0x42
  404acc:	ac4359a8 	sw	v1,22952(v0)
/home_a/ppchen/adb/fdevent.c:275
}
  404ad0:	03c0e821 	move	sp,s8
  404ad4:	8fbe0014 	lw	s8,20(sp)
  404ad8:	27bd0018 	addiu	sp,sp,24
  404adc:	03e00008 	jr	ra
  404ae0:	00000000 	nop

00404ae4 <fdevent_update>:
fdevent_update():
/home_a/ppchen/adb/fdevent.c:278

static void fdevent_update(fdevent *fde, unsigned events)
{
  404ae4:	27bdfff8 	addiu	sp,sp,-8
  404ae8:	afbe0004 	sw	s8,4(sp)
  404aec:	03a0f021 	move	s8,sp
  404af0:	afc40008 	sw	a0,8(s8)
  404af4:	afc5000c 	sw	a1,12(s8)
/home_a/ppchen/adb/fdevent.c:279
    if(events & FDE_READ) {
  404af8:	8fc2000c 	lw	v0,12(s8)
  404afc:	30420001 	andi	v0,v0,0x1
  404b00:	10400016 	beqz	v0,404b5c <fdevent_update+0x78>
  404b04:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:280
        FD_SET(fde->fd, &read_fds);
  404b08:	8fc20008 	lw	v0,8(s8)
  404b0c:	8c420008 	lw	v0,8(v0)
  404b10:	00021142 	srl	v0,v0,0x5
  404b14:	3c030042 	lui	v1,0x42
  404b18:	00022080 	sll	a0,v0,0x2
  404b1c:	24635828 	addiu	v1,v1,22568
  404b20:	00831821 	addu	v1,a0,v1
  404b24:	8c640000 	lw	a0,0(v1)
  404b28:	8fc30008 	lw	v1,8(s8)
  404b2c:	8c630008 	lw	v1,8(v1)
  404b30:	3063001f 	andi	v1,v1,0x1f
  404b34:	24050001 	li	a1,1
  404b38:	00651804 	sllv	v1,a1,v1
  404b3c:	00831825 	or	v1,a0,v1
  404b40:	3c050042 	lui	a1,0x42
  404b44:	00022080 	sll	a0,v0,0x2
  404b48:	24a25828 	addiu	v0,a1,22568
  404b4c:	00821021 	addu	v0,a0,v0
  404b50:	ac430000 	sw	v1,0(v0)
  404b54:	10000015 	b	404bac <fdevent_update+0xc8>
  404b58:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:282
    } else {
        FD_CLR(fde->fd, &read_fds);
  404b5c:	8fc20008 	lw	v0,8(s8)
  404b60:	8c420008 	lw	v0,8(v0)
  404b64:	00021142 	srl	v0,v0,0x5
  404b68:	3c030042 	lui	v1,0x42
  404b6c:	00022080 	sll	a0,v0,0x2
  404b70:	24635828 	addiu	v1,v1,22568
  404b74:	00831821 	addu	v1,a0,v1
  404b78:	8c640000 	lw	a0,0(v1)
  404b7c:	8fc30008 	lw	v1,8(s8)
  404b80:	8c630008 	lw	v1,8(v1)
  404b84:	3063001f 	andi	v1,v1,0x1f
  404b88:	24050001 	li	a1,1
  404b8c:	00651804 	sllv	v1,a1,v1
  404b90:	00031827 	nor	v1,zero,v1
  404b94:	00831824 	and	v1,a0,v1
  404b98:	3c050042 	lui	a1,0x42
  404b9c:	00022080 	sll	a0,v0,0x2
  404ba0:	24a25828 	addiu	v0,a1,22568
  404ba4:	00821021 	addu	v0,a0,v0
  404ba8:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:284
    }
    if(events & FDE_WRITE) {
  404bac:	8fc2000c 	lw	v0,12(s8)
  404bb0:	30420002 	andi	v0,v0,0x2
  404bb4:	10400016 	beqz	v0,404c10 <fdevent_update+0x12c>
  404bb8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:285
        FD_SET(fde->fd, &write_fds);
  404bbc:	8fc20008 	lw	v0,8(s8)
  404bc0:	8c420008 	lw	v0,8(v0)
  404bc4:	00021142 	srl	v0,v0,0x5
  404bc8:	3c030042 	lui	v1,0x42
  404bcc:	00022080 	sll	a0,v0,0x2
  404bd0:	246358a8 	addiu	v1,v1,22696
  404bd4:	00831821 	addu	v1,a0,v1
  404bd8:	8c640000 	lw	a0,0(v1)
  404bdc:	8fc30008 	lw	v1,8(s8)
  404be0:	8c630008 	lw	v1,8(v1)
  404be4:	3063001f 	andi	v1,v1,0x1f
  404be8:	24050001 	li	a1,1
  404bec:	00651804 	sllv	v1,a1,v1
  404bf0:	00831825 	or	v1,a0,v1
  404bf4:	3c050042 	lui	a1,0x42
  404bf8:	00022080 	sll	a0,v0,0x2
  404bfc:	24a258a8 	addiu	v0,a1,22696
  404c00:	00821021 	addu	v0,a0,v0
  404c04:	ac430000 	sw	v1,0(v0)
  404c08:	10000015 	b	404c60 <fdevent_update+0x17c>
  404c0c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:287
    } else {
        FD_CLR(fde->fd, &write_fds);
  404c10:	8fc20008 	lw	v0,8(s8)
  404c14:	8c420008 	lw	v0,8(v0)
  404c18:	00021142 	srl	v0,v0,0x5
  404c1c:	3c030042 	lui	v1,0x42
  404c20:	00022080 	sll	a0,v0,0x2
  404c24:	246358a8 	addiu	v1,v1,22696
  404c28:	00831821 	addu	v1,a0,v1
  404c2c:	8c640000 	lw	a0,0(v1)
  404c30:	8fc30008 	lw	v1,8(s8)
  404c34:	8c630008 	lw	v1,8(v1)
  404c38:	3063001f 	andi	v1,v1,0x1f
  404c3c:	24050001 	li	a1,1
  404c40:	00651804 	sllv	v1,a1,v1
  404c44:	00031827 	nor	v1,zero,v1
  404c48:	00831824 	and	v1,a0,v1
  404c4c:	3c050042 	lui	a1,0x42
  404c50:	00022080 	sll	a0,v0,0x2
  404c54:	24a258a8 	addiu	v0,a1,22696
  404c58:	00821021 	addu	v0,a0,v0
  404c5c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:289
    }
    if(events & FDE_ERROR) {
  404c60:	8fc2000c 	lw	v0,12(s8)
  404c64:	30420004 	andi	v0,v0,0x4
  404c68:	10400016 	beqz	v0,404cc4 <fdevent_update+0x1e0>
  404c6c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:290
        FD_SET(fde->fd, &error_fds);
  404c70:	8fc20008 	lw	v0,8(s8)
  404c74:	8c420008 	lw	v0,8(v0)
  404c78:	00021142 	srl	v0,v0,0x5
  404c7c:	3c030042 	lui	v1,0x42
  404c80:	00022080 	sll	a0,v0,0x2
  404c84:	24635928 	addiu	v1,v1,22824
  404c88:	00831821 	addu	v1,a0,v1
  404c8c:	8c640000 	lw	a0,0(v1)
  404c90:	8fc30008 	lw	v1,8(s8)
  404c94:	8c630008 	lw	v1,8(v1)
  404c98:	3063001f 	andi	v1,v1,0x1f
  404c9c:	24050001 	li	a1,1
  404ca0:	00651804 	sllv	v1,a1,v1
  404ca4:	00831825 	or	v1,a0,v1
  404ca8:	3c050042 	lui	a1,0x42
  404cac:	00022080 	sll	a0,v0,0x2
  404cb0:	24a25928 	addiu	v0,a1,22824
  404cb4:	00821021 	addu	v0,a0,v0
  404cb8:	ac430000 	sw	v1,0(v0)
  404cbc:	10000015 	b	404d14 <fdevent_update+0x230>
  404cc0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:292
    } else {
        FD_CLR(fde->fd, &error_fds);
  404cc4:	8fc20008 	lw	v0,8(s8)
  404cc8:	8c420008 	lw	v0,8(v0)
  404ccc:	00021142 	srl	v0,v0,0x5
  404cd0:	3c030042 	lui	v1,0x42
  404cd4:	00022080 	sll	a0,v0,0x2
  404cd8:	24635928 	addiu	v1,v1,22824
  404cdc:	00831821 	addu	v1,a0,v1
  404ce0:	8c640000 	lw	a0,0(v1)
  404ce4:	8fc30008 	lw	v1,8(s8)
  404ce8:	8c630008 	lw	v1,8(v1)
  404cec:	3063001f 	andi	v1,v1,0x1f
  404cf0:	24050001 	li	a1,1
  404cf4:	00651804 	sllv	v1,a1,v1
  404cf8:	00031827 	nor	v1,zero,v1
  404cfc:	00831824 	and	v1,a0,v1
  404d00:	3c050042 	lui	a1,0x42
  404d04:	00022080 	sll	a0,v0,0x2
  404d08:	24a25928 	addiu	v0,a1,22824
  404d0c:	00821021 	addu	v0,a0,v0
  404d10:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:295
    }

    fde->state = (fde->state & FDE_STATEMASK) | events;
  404d14:	8fc20008 	lw	v0,8(s8)
  404d18:	94430010 	lhu	v1,16(v0)
  404d1c:	2402ff00 	li	v0,-256
  404d20:	00621024 	and	v0,v1,v0
  404d24:	3043ffff 	andi	v1,v0,0xffff
  404d28:	8fc2000c 	lw	v0,12(s8)
  404d2c:	3042ffff 	andi	v0,v0,0xffff
  404d30:	00621025 	or	v0,v1,v0
  404d34:	3043ffff 	andi	v1,v0,0xffff
  404d38:	8fc20008 	lw	v0,8(s8)
  404d3c:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:296
}
  404d40:	03c0e821 	move	sp,s8
  404d44:	8fbe0004 	lw	s8,4(sp)
  404d48:	27bd0008 	addiu	sp,sp,8
  404d4c:	03e00008 	jr	ra
  404d50:	00000000 	nop

00404d54 <fdevent_fd_check>:
fdevent_fd_check():
/home_a/ppchen/adb/fdevent.c:302

/* Looks at fd_table[] for bad FDs and sets bit in fds.
** Returns the number of bad FDs.
*/
static int fdevent_fd_check(fd_set *fds)
{
  404d54:	27bdffd0 	addiu	sp,sp,-48
  404d58:	afbf002c 	sw	ra,44(sp)
  404d5c:	afbe0028 	sw	s8,40(sp)
  404d60:	03a0f021 	move	s8,sp
  404d64:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/fdevent.c:303
    int i, n = 0;
  404d68:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/fdevent.c:306
    fdevent *fde;

    for(i = 0; i < select_n; i++) {
  404d6c:	afc00018 	sw	zero,24(s8)
  404d70:	1000002a 	b	404e1c <fdevent_fd_check+0xc8>
  404d74:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:307
        fde = fd_table[i];
  404d78:	3c020042 	lui	v0,0x42
  404d7c:	8c435820 	lw	v1,22560(v0)
  404d80:	8fc20018 	lw	v0,24(s8)
  404d84:	00021080 	sll	v0,v0,0x2
  404d88:	00621021 	addu	v0,v1,v0
  404d8c:	8c420000 	lw	v0,0(v0)
  404d90:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/fdevent.c:308
        if(fde == 0) continue;
  404d94:	8fc20020 	lw	v0,32(s8)
  404d98:	1040001c 	beqz	v0,404e0c <fdevent_fd_check+0xb8>
  404d9c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:309
        if(fcntl(i, F_GETFL, NULL) < 0) {
  404da0:	8fc40018 	lw	a0,24(s8)
  404da4:	24050003 	li	a1,3
  404da8:	00003021 	move	a2,zero
  404dac:	0c10532c 	jal	414cb0 <fcntl@plt>
  404db0:	00000000 	nop
  404db4:	04410016 	bgez	v0,404e10 <fdevent_fd_check+0xbc>
  404db8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:310
            FD_SET(i, fds);
  404dbc:	8fc20018 	lw	v0,24(s8)
  404dc0:	00021142 	srl	v0,v0,0x5
  404dc4:	8fc40030 	lw	a0,48(s8)
  404dc8:	00021880 	sll	v1,v0,0x2
  404dcc:	00831821 	addu	v1,a0,v1
  404dd0:	8c640000 	lw	a0,0(v1)
  404dd4:	8fc30018 	lw	v1,24(s8)
  404dd8:	3063001f 	andi	v1,v1,0x1f
  404ddc:	24050001 	li	a1,1
  404de0:	00651804 	sllv	v1,a1,v1
  404de4:	00831825 	or	v1,a0,v1
  404de8:	8fc40030 	lw	a0,48(s8)
  404dec:	00021080 	sll	v0,v0,0x2
  404df0:	00821021 	addu	v0,a0,v0
  404df4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:311
            n++;
  404df8:	8fc2001c 	lw	v0,28(s8)
  404dfc:	24420001 	addiu	v0,v0,1
  404e00:	afc2001c 	sw	v0,28(s8)
  404e04:	10000002 	b	404e10 <fdevent_fd_check+0xbc>
  404e08:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:308
    int i, n = 0;
    fdevent *fde;

    for(i = 0; i < select_n; i++) {
        fde = fd_table[i];
        if(fde == 0) continue;
  404e0c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:306
static int fdevent_fd_check(fd_set *fds)
{
    int i, n = 0;
    fdevent *fde;

    for(i = 0; i < select_n; i++) {
  404e10:	8fc20018 	lw	v0,24(s8)
  404e14:	24420001 	addiu	v0,v0,1
  404e18:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:306 (discriminator 1)
  404e1c:	3c020042 	lui	v0,0x42
  404e20:	8c4259a8 	lw	v0,22952(v0)
  404e24:	8fc30018 	lw	v1,24(s8)
  404e28:	0062102a 	slt	v0,v1,v0
  404e2c:	1440ffd2 	bnez	v0,404d78 <fdevent_fd_check+0x24>
  404e30:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:316
            n++;
            // fde->state |= FDE_DONT_CLOSE;

        }
    }
    return n;
  404e34:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/fdevent.c:317
}
  404e38:	03c0e821 	move	sp,s8
  404e3c:	8fbf002c 	lw	ra,44(sp)
  404e40:	8fbe0028 	lw	s8,40(sp)
  404e44:	27bd0030 	addiu	sp,sp,48
  404e48:	03e00008 	jr	ra
  404e4c:	00000000 	nop

00404e50 <dump_all_fds>:
dump_all_fds():
/home_a/ppchen/adb/fdevent.c:320

#if !DEBUG
static inline void dump_all_fds(const char *extra_msg) {}
  404e50:	27bdfff8 	addiu	sp,sp,-8
  404e54:	afbe0004 	sw	s8,4(sp)
  404e58:	03a0f021 	move	s8,sp
  404e5c:	afc40008 	sw	a0,8(s8)
  404e60:	03c0e821 	move	sp,s8
  404e64:	8fbe0004 	lw	s8,4(sp)
  404e68:	27bd0008 	addiu	sp,sp,8
  404e6c:	03e00008 	jr	ra
  404e70:	00000000 	nop

00404e74 <fdevent_process>:
fdevent_process():
/home_a/ppchen/adb/fdevent.c:362
 
}
#endif

static void fdevent_process()
{
  404e74:	27bdfe28 	addiu	sp,sp,-472
  404e78:	afbf01d4 	sw	ra,468(sp)
  404e7c:	afbe01d0 	sw	s8,464(sp)
  404e80:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/fdevent.c:368
    int i, n;
    fdevent *fde;
    unsigned events;
    fd_set rfd, wfd, efd;

    memcpy(&rfd, &read_fds, sizeof(fd_set));
  404e84:	3c020042 	lui	v0,0x42
  404e88:	27c4004c 	addiu	a0,s8,76
  404e8c:	24435828 	addiu	v1,v0,22568
  404e90:	24020080 	li	v0,128
  404e94:	00602821 	move	a1,v1
  404e98:	00403021 	move	a2,v0
  404e9c:	0c1052d8 	jal	414b60 <memcpy@plt>
  404ea0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:369
    memcpy(&wfd, &write_fds, sizeof(fd_set));
  404ea4:	3c020042 	lui	v0,0x42
  404ea8:	27c400cc 	addiu	a0,s8,204
  404eac:	244358a8 	addiu	v1,v0,22696
  404eb0:	24020080 	li	v0,128
  404eb4:	00602821 	move	a1,v1
  404eb8:	00403021 	move	a2,v0
  404ebc:	0c1052d8 	jal	414b60 <memcpy@plt>
  404ec0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:370
    memcpy(&efd, &error_fds, sizeof(fd_set));
  404ec4:	3c020042 	lui	v0,0x42
  404ec8:	27c4014c 	addiu	a0,s8,332
  404ecc:	24435928 	addiu	v1,v0,22824
  404ed0:	24020080 	li	v0,128
  404ed4:	00602821 	move	a1,v1
  404ed8:	00403021 	move	a2,v0
  404edc:	0c1052d8 	jal	414b60 <memcpy@plt>
  404ee0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:372

    dump_all_fds("pre select()");
  404ee4:	3c020041 	lui	v0,0x41
  404ee8:	244433d4 	addiu	a0,v0,13268
  404eec:	0c101394 	jal	404e50 <dump_all_fds>
  404ef0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:374

    n = select(select_n, &rfd, &wfd, &efd, NULL);
  404ef4:	3c020042 	lui	v0,0x42
  404ef8:	8c4459a8 	lw	a0,22952(v0)
  404efc:	27c5004c 	addiu	a1,s8,76
  404f00:	27c300cc 	addiu	v1,s8,204
  404f04:	27c2014c 	addiu	v0,s8,332
  404f08:	afa00010 	sw	zero,16(sp)
  404f0c:	00603021 	move	a2,v1
  404f10:	00403821 	move	a3,v0
  404f14:	0c105348 	jal	414d20 <select@plt>
  404f18:	00000000 	nop
  404f1c:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:375
    int saved_errno = errno;
  404f20:	0c1052c0 	jal	414b00 <__errno_location@plt>
  404f24:	00000000 	nop
  404f28:	8c420000 	lw	v0,0(v0)
  404f2c:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/fdevent.c:378
 

    dump_all_fds("post select()");
  404f30:	3c020041 	lui	v0,0x41
  404f34:	244433e4 	addiu	a0,v0,13284
  404f38:	0c101394 	jal	404e50 <dump_all_fds>
  404f3c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:380

    if(n < 0) {
  404f40:	8fc20024 	lw	v0,36(s8)
  404f44:	04410039 	bgez	v0,40502c <fdevent_process+0x1b8>
  404f48:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:381
        switch(saved_errno) {
  404f4c:	8fc30038 	lw	v1,56(s8)
  404f50:	24020009 	li	v0,9
  404f54:	146200b0 	bne	v1,v0,405218 <fdevent_process+0x3a4>
  404f58:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:385
        case EINTR: return;
        case EBADF:
            // Can't trust the FD sets after an error.
            FD_ZERO(&wfd);
  404f5c:	27c200cc 	addiu	v0,s8,204
  404f60:	afc2003c 	sw	v0,60(s8)
  404f64:	afc0002c 	sw	zero,44(s8)
  404f68:	10000009 	b	404f90 <fdevent_process+0x11c>
  404f6c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:385 (discriminator 2)
  404f70:	8fc3003c 	lw	v1,60(s8)
  404f74:	8fc2002c 	lw	v0,44(s8)
  404f78:	00021080 	sll	v0,v0,0x2
  404f7c:	00621021 	addu	v0,v1,v0
  404f80:	ac400000 	sw	zero,0(v0)
  404f84:	8fc2002c 	lw	v0,44(s8)
  404f88:	24420001 	addiu	v0,v0,1
  404f8c:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/fdevent.c:385 (discriminator 1)
  404f90:	8fc2002c 	lw	v0,44(s8)
  404f94:	2c420020 	sltiu	v0,v0,32
  404f98:	1440fff5 	bnez	v0,404f70 <fdevent_process+0xfc>
  404f9c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:386
            FD_ZERO(&efd);
  404fa0:	27c2014c 	addiu	v0,s8,332
  404fa4:	afc20040 	sw	v0,64(s8)
  404fa8:	afc00030 	sw	zero,48(s8)
  404fac:	10000009 	b	404fd4 <fdevent_process+0x160>
  404fb0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:386 (discriminator 2)
  404fb4:	8fc30040 	lw	v1,64(s8)
  404fb8:	8fc20030 	lw	v0,48(s8)
  404fbc:	00021080 	sll	v0,v0,0x2
  404fc0:	00621021 	addu	v0,v1,v0
  404fc4:	ac400000 	sw	zero,0(v0)
  404fc8:	8fc20030 	lw	v0,48(s8)
  404fcc:	24420001 	addiu	v0,v0,1
  404fd0:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/fdevent.c:386 (discriminator 1)
  404fd4:	8fc20030 	lw	v0,48(s8)
  404fd8:	2c420020 	sltiu	v0,v0,32
  404fdc:	1440fff5 	bnez	v0,404fb4 <fdevent_process+0x140>
  404fe0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:387
            FD_ZERO(&rfd);
  404fe4:	27c2004c 	addiu	v0,s8,76
  404fe8:	afc20044 	sw	v0,68(s8)
  404fec:	afc00034 	sw	zero,52(s8)
  404ff0:	10000009 	b	405018 <fdevent_process+0x1a4>
  404ff4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:387 (discriminator 2)
  404ff8:	8fc30044 	lw	v1,68(s8)
  404ffc:	8fc20034 	lw	v0,52(s8)
  405000:	00021080 	sll	v0,v0,0x2
  405004:	00621021 	addu	v0,v1,v0
  405008:	ac400000 	sw	zero,0(v0)
  40500c:	8fc20034 	lw	v0,52(s8)
  405010:	24420001 	addiu	v0,v0,1
  405014:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/fdevent.c:387 (discriminator 1)
  405018:	8fc20034 	lw	v0,52(s8)
  40501c:	2c420020 	sltiu	v0,v0,32
  405020:	1440fff5 	bnez	v0,404ff8 <fdevent_process+0x184>
  405024:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:388
            break;
  405028:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:394
        default:
           
            return;
        }
    }
    if(n <= 0) {
  40502c:	8fc20024 	lw	v0,36(s8)
  405030:	1c400006 	bgtz	v0,40504c <fdevent_process+0x1d8>
  405034:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:397
        // We fake a read, as the rest of the code assumes
        // that errors will be detected at that point.
        n = fdevent_fd_check(&rfd);
  405038:	27c2004c 	addiu	v0,s8,76
  40503c:	00402021 	move	a0,v0
  405040:	0c101355 	jal	404d54 <fdevent_fd_check>
  405044:	00000000 	nop
  405048:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:400
    }

    for(i = 0; (i < select_n) && (n > 0); i++) {
  40504c:	afc00020 	sw	zero,32(s8)
  405050:	10000068 	b	4051f4 <fdevent_process+0x380>
  405054:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:401
        events = 0;
  405058:	afc00028 	sw	zero,40(s8)
/home_a/ppchen/adb/fdevent.c:402
        if(FD_ISSET(i, &rfd)) { events |= FDE_READ; n--; }
  40505c:	8fc20020 	lw	v0,32(s8)
  405060:	00021142 	srl	v0,v0,0x5
  405064:	00021080 	sll	v0,v0,0x2
  405068:	27c30020 	addiu	v1,s8,32
  40506c:	00621021 	addu	v0,v1,v0
  405070:	8c43002c 	lw	v1,44(v0)
  405074:	8fc20020 	lw	v0,32(s8)
  405078:	3042001f 	andi	v0,v0,0x1f
  40507c:	00431007 	srav	v0,v1,v0
  405080:	30420001 	andi	v0,v0,0x1
  405084:	10400007 	beqz	v0,4050a4 <fdevent_process+0x230>
  405088:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:402 (discriminator 1)
  40508c:	8fc20028 	lw	v0,40(s8)
  405090:	34420001 	ori	v0,v0,0x1
  405094:	afc20028 	sw	v0,40(s8)
  405098:	8fc20024 	lw	v0,36(s8)
  40509c:	2442ffff 	addiu	v0,v0,-1
  4050a0:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:403
        if(FD_ISSET(i, &wfd)) { events |= FDE_WRITE; n--; }
  4050a4:	8fc20020 	lw	v0,32(s8)
  4050a8:	00021142 	srl	v0,v0,0x5
  4050ac:	00021080 	sll	v0,v0,0x2
  4050b0:	27c30020 	addiu	v1,s8,32
  4050b4:	00621021 	addu	v0,v1,v0
  4050b8:	8c4300ac 	lw	v1,172(v0)
  4050bc:	8fc20020 	lw	v0,32(s8)
  4050c0:	3042001f 	andi	v0,v0,0x1f
  4050c4:	00431007 	srav	v0,v1,v0
  4050c8:	30420001 	andi	v0,v0,0x1
  4050cc:	10400007 	beqz	v0,4050ec <fdevent_process+0x278>
  4050d0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:403 (discriminator 1)
  4050d4:	8fc20028 	lw	v0,40(s8)
  4050d8:	34420002 	ori	v0,v0,0x2
  4050dc:	afc20028 	sw	v0,40(s8)
  4050e0:	8fc20024 	lw	v0,36(s8)
  4050e4:	2442ffff 	addiu	v0,v0,-1
  4050e8:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:404
        if(FD_ISSET(i, &efd)) { events |= FDE_ERROR; n--; }
  4050ec:	8fc20020 	lw	v0,32(s8)
  4050f0:	00021142 	srl	v0,v0,0x5
  4050f4:	00021080 	sll	v0,v0,0x2
  4050f8:	27c30020 	addiu	v1,s8,32
  4050fc:	00621021 	addu	v0,v1,v0
  405100:	8c43012c 	lw	v1,300(v0)
  405104:	8fc20020 	lw	v0,32(s8)
  405108:	3042001f 	andi	v0,v0,0x1f
  40510c:	00431007 	srav	v0,v1,v0
  405110:	30420001 	andi	v0,v0,0x1
  405114:	10400007 	beqz	v0,405134 <fdevent_process+0x2c0>
  405118:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:404 (discriminator 1)
  40511c:	8fc20028 	lw	v0,40(s8)
  405120:	34420004 	ori	v0,v0,0x4
  405124:	afc20028 	sw	v0,40(s8)
  405128:	8fc20024 	lw	v0,36(s8)
  40512c:	2442ffff 	addiu	v0,v0,-1
  405130:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:406

        if(events) {
  405134:	8fc20028 	lw	v0,40(s8)
  405138:	1040002b 	beqz	v0,4051e8 <fdevent_process+0x374>
  40513c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:407
            fde = fd_table[i];
  405140:	3c020042 	lui	v0,0x42
  405144:	8c435820 	lw	v1,22560(v0)
  405148:	8fc20020 	lw	v0,32(s8)
  40514c:	00021080 	sll	v0,v0,0x2
  405150:	00621021 	addu	v0,v1,v0
  405154:	8c420000 	lw	v0,0(v0)
  405158:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/fdevent.c:408
            if(fde == 0)
  40515c:	8fc20048 	lw	v0,72(s8)
  405160:	14400008 	bnez	v0,405184 <fdevent_process+0x310>
  405164:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:409
              FATAL("missing fde for fd %d\n", i);
  405168:	3c020041 	lui	v0,0x41
  40516c:	24443608 	addiu	a0,v0,13832
  405170:	3c020041 	lui	v0,0x41
  405174:	244533f4 	addiu	a1,v0,13300
  405178:	8fc60020 	lw	a2,32(s8)
  40517c:	0c1011d6 	jal	404758 <fatal>
  405180:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:411

            fde->events |= events;
  405184:	8fc20048 	lw	v0,72(s8)
  405188:	94430012 	lhu	v1,18(v0)
  40518c:	8fc20028 	lw	v0,40(s8)
  405190:	3042ffff 	andi	v0,v0,0xffff
  405194:	00621025 	or	v0,v1,v0
  405198:	3043ffff 	andi	v1,v0,0xffff
  40519c:	8fc20048 	lw	v0,72(s8)
  4051a0:	a4430012 	sh	v1,18(v0)
/home_a/ppchen/adb/fdevent.c:413

            if(fde->state & FDE_PENDING) continue;
  4051a4:	8fc20048 	lw	v0,72(s8)
  4051a8:	94420010 	lhu	v0,16(v0)
  4051ac:	30420200 	andi	v0,v0,0x200
  4051b0:	1440000c 	bnez	v0,4051e4 <fdevent_process+0x370>
  4051b4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:414
            fde->state |= FDE_PENDING;
  4051b8:	8fc20048 	lw	v0,72(s8)
  4051bc:	94420010 	lhu	v0,16(v0)
  4051c0:	34420200 	ori	v0,v0,0x200
  4051c4:	3043ffff 	andi	v1,v0,0xffff
  4051c8:	8fc20048 	lw	v0,72(s8)
  4051cc:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:415
            fdevent_plist_enqueue(fde);
  4051d0:	8fc40048 	lw	a0,72(s8)
  4051d4:	0c10154e 	jal	405538 <fdevent_plist_enqueue>
  4051d8:	00000000 	nop
  4051dc:	10000002 	b	4051e8 <fdevent_process+0x374>
  4051e0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:413
            if(fde == 0)
              FATAL("missing fde for fd %d\n", i);

            fde->events |= events;

            if(fde->state & FDE_PENDING) continue;
  4051e4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:400
        // We fake a read, as the rest of the code assumes
        // that errors will be detected at that point.
        n = fdevent_fd_check(&rfd);
    }

    for(i = 0; (i < select_n) && (n > 0); i++) {
  4051e8:	8fc20020 	lw	v0,32(s8)
  4051ec:	24420001 	addiu	v0,v0,1
  4051f0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/fdevent.c:400 (discriminator 1)
  4051f4:	3c020042 	lui	v0,0x42
  4051f8:	8c4259a8 	lw	v0,22952(v0)
  4051fc:	8fc30020 	lw	v1,32(s8)
  405200:	0062102a 	slt	v0,v1,v0
  405204:	10400004 	beqz	v0,405218 <fdevent_process+0x3a4>
  405208:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:400 (discriminator 2)
  40520c:	8fc20024 	lw	v0,36(s8)
  405210:	1c40ff91 	bgtz	v0,405058 <fdevent_process+0x1e4>
  405214:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:418
            if(fde->state & FDE_PENDING) continue;
            fde->state |= FDE_PENDING;
            fdevent_plist_enqueue(fde);
        }
    }
}
  405218:	03c0e821 	move	sp,s8
  40521c:	8fbf01d4 	lw	ra,468(sp)
  405220:	8fbe01d0 	lw	s8,464(sp)
  405224:	27bd01d8 	addiu	sp,sp,472
  405228:	03e00008 	jr	ra
  40522c:	00000000 	nop

00405230 <fdevent_register>:
fdevent_register():
/home_a/ppchen/adb/fdevent.c:423

#endif

static void fdevent_register(fdevent *fde)
{
  405230:	27bdffd8 	addiu	sp,sp,-40
  405234:	afbf0024 	sw	ra,36(sp)
  405238:	afbe0020 	sw	s8,32(sp)
  40523c:	03a0f021 	move	s8,sp
  405240:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/fdevent.c:424
    if(fde->fd < 0) {
  405244:	8fc20028 	lw	v0,40(s8)
  405248:	8c420008 	lw	v0,8(v0)
  40524c:	0441000a 	bgez	v0,405278 <fdevent_register+0x48>
  405250:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:425
        FATAL("bogus negative fd (%d)\n", fde->fd);
  405254:	8fc20028 	lw	v0,40(s8)
  405258:	8c420008 	lw	v0,8(v0)
  40525c:	3c030041 	lui	v1,0x41
  405260:	246435f4 	addiu	a0,v1,13812
  405264:	3c030041 	lui	v1,0x41
  405268:	2465340c 	addiu	a1,v1,13324
  40526c:	00403021 	move	a2,v0
  405270:	0c1011d6 	jal	404758 <fatal>
  405274:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:428
    }

    if(fde->fd >= fd_table_max) {
  405278:	8fc20028 	lw	v0,40(s8)
  40527c:	8c430008 	lw	v1,8(v0)
  405280:	3c020042 	lui	v0,0x42
  405284:	8c425824 	lw	v0,22564(v0)
  405288:	0062102a 	slt	v0,v1,v0
  40528c:	14400054 	bnez	v0,4053e0 <fdevent_register+0x1b0>
  405290:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:429
        int oldmax = fd_table_max;
  405294:	3c020042 	lui	v0,0x42
  405298:	8c425824 	lw	v0,22564(v0)
  40529c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:430
        if(fde->fd > 32000) {
  4052a0:	8fc20028 	lw	v0,40(s8)
  4052a4:	8c420008 	lw	v0,8(v0)
  4052a8:	28427d01 	slti	v0,v0,32001
  4052ac:	1440000a 	bnez	v0,4052d8 <fdevent_register+0xa8>
  4052b0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:431
            FATAL("bogus huuuuge fd (%d)\n", fde->fd);
  4052b4:	8fc20028 	lw	v0,40(s8)
  4052b8:	8c420008 	lw	v0,8(v0)
  4052bc:	3c030041 	lui	v1,0x41
  4052c0:	246435f4 	addiu	a0,v1,13812
  4052c4:	3c030041 	lui	v1,0x41
  4052c8:	24653424 	addiu	a1,v1,13348
  4052cc:	00403021 	move	a2,v0
  4052d0:	0c1011d6 	jal	404758 <fatal>
  4052d4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:433
        }
        if(fd_table_max == 0) {
  4052d8:	3c020042 	lui	v0,0x42
  4052dc:	8c425824 	lw	v0,22564(v0)
  4052e0:	1440000f 	bnez	v0,405320 <fdevent_register+0xf0>
  4052e4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:434
            fdevent_init();
  4052e8:	0c101206 	jal	404818 <fdevent_init>
  4052ec:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:435
            fd_table_max = 256;
  4052f0:	3c020042 	lui	v0,0x42
  4052f4:	24030100 	li	v1,256
  4052f8:	ac435824 	sw	v1,22564(v0)
/home_a/ppchen/adb/fdevent.c:437
        }
        while(fd_table_max <= fde->fd) {
  4052fc:	10000008 	b	405320 <fdevent_register+0xf0>
  405300:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:438
            fd_table_max *= 2;
  405304:	3c020042 	lui	v0,0x42
  405308:	8c425824 	lw	v0,22564(v0)
  40530c:	00021840 	sll	v1,v0,0x1
  405310:	3c020042 	lui	v0,0x42
  405314:	ac435824 	sw	v1,22564(v0)
  405318:	10000002 	b	405324 <fdevent_register+0xf4>
  40531c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:437
        }
        if(fd_table_max == 0) {
            fdevent_init();
            fd_table_max = 256;
        }
        while(fd_table_max <= fde->fd) {
  405320:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:437 (discriminator 1)
  405324:	8fc20028 	lw	v0,40(s8)
  405328:	8c430008 	lw	v1,8(v0)
  40532c:	3c020042 	lui	v0,0x42
  405330:	8c425824 	lw	v0,22564(v0)
  405334:	0062102a 	slt	v0,v1,v0
  405338:	1040fff2 	beqz	v0,405304 <fdevent_register+0xd4>
  40533c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:440
            fd_table_max *= 2;
        }
        fd_table = realloc(fd_table, sizeof(fdevent*) * fd_table_max);
  405340:	3c020042 	lui	v0,0x42
  405344:	8c435820 	lw	v1,22560(v0)
  405348:	3c020042 	lui	v0,0x42
  40534c:	8c425824 	lw	v0,22564(v0)
  405350:	00021080 	sll	v0,v0,0x2
  405354:	00602021 	move	a0,v1
  405358:	00402821 	move	a1,v0
  40535c:	0c1052e0 	jal	414b80 <realloc@plt>
  405360:	00000000 	nop
  405364:	00401821 	move	v1,v0
  405368:	3c020042 	lui	v0,0x42
  40536c:	ac435820 	sw	v1,22560(v0)
/home_a/ppchen/adb/fdevent.c:441
        if(fd_table == 0) {
  405370:	3c020042 	lui	v0,0x42
  405374:	8c425820 	lw	v0,22560(v0)
  405378:	1440000a 	bnez	v0,4053a4 <fdevent_register+0x174>
  40537c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:442
            FATAL("could not expand fd_table to %d entries\n", fd_table_max);
  405380:	3c020042 	lui	v0,0x42
  405384:	8c425824 	lw	v0,22564(v0)
  405388:	3c030041 	lui	v1,0x41
  40538c:	246435f4 	addiu	a0,v1,13812
  405390:	3c030041 	lui	v1,0x41
  405394:	2465343c 	addiu	a1,v1,13372
  405398:	00403021 	move	a2,v0
  40539c:	0c1011d6 	jal	404758 <fatal>
  4053a0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:444
        }
        memset(fd_table + oldmax, 0, sizeof(int) * (fd_table_max - oldmax));
  4053a4:	3c020042 	lui	v0,0x42
  4053a8:	8c435820 	lw	v1,22560(v0)
  4053ac:	8fc20018 	lw	v0,24(s8)
  4053b0:	00021080 	sll	v0,v0,0x2
  4053b4:	00621821 	addu	v1,v1,v0
  4053b8:	3c020042 	lui	v0,0x42
  4053bc:	8c445824 	lw	a0,22564(v0)
  4053c0:	8fc20018 	lw	v0,24(s8)
  4053c4:	00821023 	subu	v0,a0,v0
  4053c8:	00021080 	sll	v0,v0,0x2
  4053cc:	00602021 	move	a0,v1
  4053d0:	00002821 	move	a1,zero
  4053d4:	00403021 	move	a2,v0
  4053d8:	0c1053ac 	jal	414eb0 <memset@plt>
  4053dc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:447
    }

    fd_table[fde->fd] = fde;
  4053e0:	3c020042 	lui	v0,0x42
  4053e4:	8c435820 	lw	v1,22560(v0)
  4053e8:	8fc20028 	lw	v0,40(s8)
  4053ec:	8c420008 	lw	v0,8(v0)
  4053f0:	00021080 	sll	v0,v0,0x2
  4053f4:	00621021 	addu	v0,v1,v0
  4053f8:	8fc30028 	lw	v1,40(s8)
  4053fc:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:448
}
  405400:	03c0e821 	move	sp,s8
  405404:	8fbf0024 	lw	ra,36(sp)
  405408:	8fbe0020 	lw	s8,32(sp)
  40540c:	27bd0028 	addiu	sp,sp,40
  405410:	03e00008 	jr	ra
  405414:	00000000 	nop

00405418 <fdevent_unregister>:
fdevent_unregister():
/home_a/ppchen/adb/fdevent.c:451

static void fdevent_unregister(fdevent *fde)
{
  405418:	27bdffe0 	addiu	sp,sp,-32
  40541c:	afbf001c 	sw	ra,28(sp)
  405420:	afbe0018 	sw	s8,24(sp)
  405424:	03a0f021 	move	s8,sp
  405428:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/fdevent.c:452
    if((fde->fd < 0) || (fde->fd >= fd_table_max)) {
  40542c:	8fc20020 	lw	v0,32(s8)
  405430:	8c420008 	lw	v0,8(v0)
  405434:	04400008 	bltz	v0,405458 <fdevent_unregister+0x40>
  405438:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:452 (discriminator 1)
  40543c:	8fc20020 	lw	v0,32(s8)
  405440:	8c430008 	lw	v1,8(v0)
  405444:	3c020042 	lui	v0,0x42
  405448:	8c425824 	lw	v0,22564(v0)
  40544c:	0062102a 	slt	v0,v1,v0
  405450:	1440000a 	bnez	v0,40547c <fdevent_unregister+0x64>
  405454:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:453
        FATAL("fd out of range (%d)\n", fde->fd);
  405458:	8fc20020 	lw	v0,32(s8)
  40545c:	8c420008 	lw	v0,8(v0)
  405460:	3c030041 	lui	v1,0x41
  405464:	246435e0 	addiu	a0,v1,13792
  405468:	3c030041 	lui	v1,0x41
  40546c:	24653468 	addiu	a1,v1,13416
  405470:	00403021 	move	a2,v0
  405474:	0c1011d6 	jal	404758 <fatal>
  405478:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:456
    }

    if(fd_table[fde->fd] != fde) {
  40547c:	3c020042 	lui	v0,0x42
  405480:	8c435820 	lw	v1,22560(v0)
  405484:	8fc20020 	lw	v0,32(s8)
  405488:	8c420008 	lw	v0,8(v0)
  40548c:	00021080 	sll	v0,v0,0x2
  405490:	00621021 	addu	v0,v1,v0
  405494:	8c430000 	lw	v1,0(v0)
  405498:	8fc20020 	lw	v0,32(s8)
  40549c:	1062000a 	beq	v1,v0,4054c8 <fdevent_unregister+0xb0>
  4054a0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:457
        FATAL("fd_table out of sync [%d]\n", fde->fd);
  4054a4:	8fc20020 	lw	v0,32(s8)
  4054a8:	8c420008 	lw	v0,8(v0)
  4054ac:	3c030041 	lui	v1,0x41
  4054b0:	246435e0 	addiu	a0,v1,13792
  4054b4:	3c030041 	lui	v1,0x41
  4054b8:	24653480 	addiu	a1,v1,13440
  4054bc:	00403021 	move	a2,v0
  4054c0:	0c1011d6 	jal	404758 <fatal>
  4054c4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:460
    }

    fd_table[fde->fd] = 0;
  4054c8:	3c020042 	lui	v0,0x42
  4054cc:	8c435820 	lw	v1,22560(v0)
  4054d0:	8fc20020 	lw	v0,32(s8)
  4054d4:	8c420008 	lw	v0,8(v0)
  4054d8:	00021080 	sll	v0,v0,0x2
  4054dc:	00621021 	addu	v0,v1,v0
  4054e0:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/fdevent.c:462

    if(!(fde->state & FDE_DONT_CLOSE)) {
  4054e4:	8fc20020 	lw	v0,32(s8)
  4054e8:	94420010 	lhu	v0,16(v0)
  4054ec:	30420080 	andi	v0,v0,0x80
  4054f0:	1440000b 	bnez	v0,405520 <fdevent_unregister+0x108>
  4054f4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:463
        dump_fde(fde, "close");
  4054f8:	8fc40020 	lw	a0,32(s8)
  4054fc:	3c020041 	lui	v0,0x41
  405500:	2445349c 	addiu	a1,v0,13468
  405504:	0c1011f2 	jal	4047c8 <dump_fde>
  405508:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:465

        adb_close(fde->fd);
  40550c:	8fc20020 	lw	v0,32(s8)
  405510:	8c420008 	lw	v0,8(v0)
  405514:	00402021 	move	a0,v0
  405518:	0c101190 	jal	404640 <adb_close>
  40551c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:467
    }
}
  405520:	03c0e821 	move	sp,s8
  405524:	8fbf001c 	lw	ra,28(sp)
  405528:	8fbe0018 	lw	s8,24(sp)
  40552c:	27bd0020 	addiu	sp,sp,32
  405530:	03e00008 	jr	ra
  405534:	00000000 	nop

00405538 <fdevent_plist_enqueue>:
fdevent_plist_enqueue():
/home_a/ppchen/adb/fdevent.c:470

static void fdevent_plist_enqueue(fdevent *node)
{
  405538:	27bdffe8 	addiu	sp,sp,-24
  40553c:	afbe0014 	sw	s8,20(sp)
  405540:	03a0f021 	move	s8,sp
  405544:	afc40018 	sw	a0,24(s8)
/home_a/ppchen/adb/fdevent.c:471
    fdevent *list = &list_pending;
  405548:	3c020042 	lui	v0,0x42
  40554c:	24425634 	addiu	v0,v0,22068
  405550:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/fdevent.c:473

    node->next = list;
  405554:	8fc20018 	lw	v0,24(s8)
  405558:	8fc30008 	lw	v1,8(s8)
  40555c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:474
    node->prev = list->prev;
  405560:	8fc20008 	lw	v0,8(s8)
  405564:	8c430004 	lw	v1,4(v0)
  405568:	8fc20018 	lw	v0,24(s8)
  40556c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/fdevent.c:475
    node->prev->next = node;
  405570:	8fc20018 	lw	v0,24(s8)
  405574:	8c420004 	lw	v0,4(v0)
  405578:	8fc30018 	lw	v1,24(s8)
  40557c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:476
    list->prev = node;
  405580:	8fc20008 	lw	v0,8(s8)
  405584:	8fc30018 	lw	v1,24(s8)
  405588:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/fdevent.c:477
}
  40558c:	03c0e821 	move	sp,s8
  405590:	8fbe0014 	lw	s8,20(sp)
  405594:	27bd0018 	addiu	sp,sp,24
  405598:	03e00008 	jr	ra
  40559c:	00000000 	nop

004055a0 <fdevent_plist_remove>:
fdevent_plist_remove():
/home_a/ppchen/adb/fdevent.c:480

static void fdevent_plist_remove(fdevent *node)
{
  4055a0:	27bdfff8 	addiu	sp,sp,-8
  4055a4:	afbe0004 	sw	s8,4(sp)
  4055a8:	03a0f021 	move	s8,sp
  4055ac:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/fdevent.c:481
    node->prev->next = node->next;
  4055b0:	8fc20008 	lw	v0,8(s8)
  4055b4:	8c420004 	lw	v0,4(v0)
  4055b8:	8fc30008 	lw	v1,8(s8)
  4055bc:	8c630000 	lw	v1,0(v1)
  4055c0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:482
    node->next->prev = node->prev;
  4055c4:	8fc20008 	lw	v0,8(s8)
  4055c8:	8c420000 	lw	v0,0(v0)
  4055cc:	8fc30008 	lw	v1,8(s8)
  4055d0:	8c630004 	lw	v1,4(v1)
  4055d4:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/fdevent.c:483
    node->next = 0;
  4055d8:	8fc20008 	lw	v0,8(s8)
  4055dc:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/fdevent.c:484
    node->prev = 0;
  4055e0:	8fc20008 	lw	v0,8(s8)
  4055e4:	ac400004 	sw	zero,4(v0)
/home_a/ppchen/adb/fdevent.c:485
}
  4055e8:	03c0e821 	move	sp,s8
  4055ec:	8fbe0004 	lw	s8,4(sp)
  4055f0:	27bd0008 	addiu	sp,sp,8
  4055f4:	03e00008 	jr	ra
  4055f8:	00000000 	nop

004055fc <fdevent_plist_dequeue>:
fdevent_plist_dequeue():
/home_a/ppchen/adb/fdevent.c:488

static fdevent *fdevent_plist_dequeue(void)
{
  4055fc:	27bdffe8 	addiu	sp,sp,-24
  405600:	afbe0014 	sw	s8,20(sp)
  405604:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/fdevent.c:489
    fdevent *list = &list_pending;
  405608:	3c020042 	lui	v0,0x42
  40560c:	24425634 	addiu	v0,v0,22068
  405610:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/fdevent.c:490
    fdevent *node = list->next;
  405614:	8fc20008 	lw	v0,8(s8)
  405618:	8c420000 	lw	v0,0(v0)
  40561c:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/fdevent.c:492

    if(node == list) return 0;
  405620:	8fc3000c 	lw	v1,12(s8)
  405624:	8fc20008 	lw	v0,8(s8)
  405628:	14620004 	bne	v1,v0,40563c <fdevent_plist_dequeue+0x40>
  40562c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:492 (discriminator 1)
  405630:	00001021 	move	v0,zero
  405634:	1000000e 	b	405670 <fdevent_plist_dequeue+0x74>
  405638:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:494

    list->next = node->next;
  40563c:	8fc2000c 	lw	v0,12(s8)
  405640:	8c430000 	lw	v1,0(v0)
  405644:	8fc20008 	lw	v0,8(s8)
  405648:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/fdevent.c:495
    list->next->prev = list;
  40564c:	8fc20008 	lw	v0,8(s8)
  405650:	8c420000 	lw	v0,0(v0)
  405654:	8fc30008 	lw	v1,8(s8)
  405658:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/fdevent.c:496
    node->next = 0;
  40565c:	8fc2000c 	lw	v0,12(s8)
  405660:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/fdevent.c:497
    node->prev = 0;
  405664:	8fc2000c 	lw	v0,12(s8)
  405668:	ac400004 	sw	zero,4(v0)
/home_a/ppchen/adb/fdevent.c:499

    return node;
  40566c:	8fc2000c 	lw	v0,12(s8)
/home_a/ppchen/adb/fdevent.c:500
}
  405670:	03c0e821 	move	sp,s8
  405674:	8fbe0014 	lw	s8,20(sp)
  405678:	27bd0018 	addiu	sp,sp,24
  40567c:	03e00008 	jr	ra
  405680:	00000000 	nop

00405684 <fdevent_call_fdfunc>:
fdevent_call_fdfunc():
/home_a/ppchen/adb/fdevent.c:503

static void fdevent_call_fdfunc(fdevent* fde)
{
  405684:	27bdffd8 	addiu	sp,sp,-40
  405688:	afbf0024 	sw	ra,36(sp)
  40568c:	afbe0020 	sw	s8,32(sp)
  405690:	03a0f021 	move	s8,sp
  405694:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/fdevent.c:504
    unsigned events = fde->events;
  405698:	8fc20028 	lw	v0,40(s8)
  40569c:	94420012 	lhu	v0,18(v0)
  4056a0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:505
    fde->events = 0;
  4056a4:	8fc20028 	lw	v0,40(s8)
  4056a8:	a4400012 	sh	zero,18(v0)
/home_a/ppchen/adb/fdevent.c:506
    if(!(fde->state & FDE_PENDING)) return;
  4056ac:	8fc20028 	lw	v0,40(s8)
  4056b0:	94420010 	lhu	v0,16(v0)
  4056b4:	30420200 	andi	v0,v0,0x200
  4056b8:	1040001a 	beqz	v0,405724 <fdevent_call_fdfunc+0xa0>
  4056bc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:507
    fde->state &= (~FDE_PENDING);
  4056c0:	8fc20028 	lw	v0,40(s8)
  4056c4:	94430010 	lhu	v1,16(v0)
  4056c8:	2402fdff 	li	v0,-513
  4056cc:	00621024 	and	v0,v1,v0
  4056d0:	3043ffff 	andi	v1,v0,0xffff
  4056d4:	8fc20028 	lw	v0,40(s8)
  4056d8:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:508
    dump_fde(fde, "callback");
  4056dc:	8fc40028 	lw	a0,40(s8)
  4056e0:	3c020041 	lui	v0,0x41
  4056e4:	244534a4 	addiu	a1,v0,13476
  4056e8:	0c1011f2 	jal	4047c8 <dump_fde>
  4056ec:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:509
    fde->func(fde->fd, events, fde->arg);
  4056f0:	8fc20028 	lw	v0,40(s8)
  4056f4:	8c420014 	lw	v0,20(v0)
  4056f8:	8fc30028 	lw	v1,40(s8)
  4056fc:	8c640008 	lw	a0,8(v1)
  405700:	8fc30028 	lw	v1,40(s8)
  405704:	8c630018 	lw	v1,24(v1)
  405708:	8fc50018 	lw	a1,24(s8)
  40570c:	00603021 	move	a2,v1
  405710:	0040c821 	move	t9,v0
  405714:	0320f809 	jalr	t9
  405718:	00000000 	nop
  40571c:	10000002 	b	405728 <fdevent_call_fdfunc+0xa4>
  405720:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:506

static void fdevent_call_fdfunc(fdevent* fde)
{
    unsigned events = fde->events;
    fde->events = 0;
    if(!(fde->state & FDE_PENDING)) return;
  405724:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:510
    fde->state &= (~FDE_PENDING);
    dump_fde(fde, "callback");
    fde->func(fde->fd, events, fde->arg);
}
  405728:	03c0e821 	move	sp,s8
  40572c:	8fbf0024 	lw	ra,36(sp)
  405730:	8fbe0020 	lw	s8,32(sp)
  405734:	27bd0028 	addiu	sp,sp,40
  405738:	03e00008 	jr	ra
  40573c:	00000000 	nop

00405740 <fdevent_subproc_event_func>:
fdevent_subproc_event_func():
/home_a/ppchen/adb/fdevent.c:513

static void fdevent_subproc_event_func(int fd, unsigned ev, void *userdata)
{
  405740:	27bdffd0 	addiu	sp,sp,-48
  405744:	afbf002c 	sw	ra,44(sp)
  405748:	afbe0028 	sw	s8,40(sp)
  40574c:	03a0f021 	move	s8,sp
  405750:	afc40030 	sw	a0,48(s8)
  405754:	afc50034 	sw	a1,52(s8)
  405758:	afc60038 	sw	a2,56(s8)
/home_a/ppchen/adb/fdevent.c:518



    // Hook oneself back into the fde's suitable for select() on read.
    if((fd < 0) || (fd >= fd_table_max)) {
  40575c:	8fc20030 	lw	v0,48(s8)
  405760:	04400007 	bltz	v0,405780 <fdevent_subproc_event_func+0x40>
  405764:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:518 (discriminator 1)
  405768:	3c020042 	lui	v0,0x42
  40576c:	8c425824 	lw	v0,22564(v0)
  405770:	8fc30030 	lw	v1,48(s8)
  405774:	0062102a 	slt	v0,v1,v0
  405778:	14400008 	bnez	v0,40579c <fdevent_subproc_event_func+0x5c>
  40577c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:519
        FATAL("fd %d out of range for fd_table \n", fd);
  405780:	3c020041 	lui	v0,0x41
  405784:	244435c4 	addiu	a0,v0,13764
  405788:	3c020041 	lui	v0,0x41
  40578c:	244534b0 	addiu	a1,v0,13488
  405790:	8fc60030 	lw	a2,48(s8)
  405794:	0c1011d6 	jal	404758 <fatal>
  405798:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:521
    }
    fdevent *fde = fd_table[fd];
  40579c:	3c020042 	lui	v0,0x42
  4057a0:	8c435820 	lw	v1,22560(v0)
  4057a4:	8fc20030 	lw	v0,48(s8)
  4057a8:	00021080 	sll	v0,v0,0x2
  4057ac:	00621021 	addu	v0,v1,v0
  4057b0:	8c420000 	lw	v0,0(v0)
  4057b4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:522
    fdevent_add(fde, FDE_READ);
  4057b8:	8fc40018 	lw	a0,24(s8)
  4057bc:	24050001 	li	a1,1
  4057c0:	0c101735 	jal	405cd4 <fdevent_add>
  4057c4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:524

    if(ev & FDE_READ){
  4057c8:	8fc20034 	lw	v0,52(s8)
  4057cc:	30420001 	andi	v0,v0,0x1
  4057d0:	1040004a 	beqz	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  4057d4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:527
      int subproc_fd;

      if(readx(fd, &subproc_fd, sizeof(subproc_fd))) {
  4057d8:	27c20020 	addiu	v0,s8,32
  4057dc:	8fc40030 	lw	a0,48(s8)
  4057e0:	00402821 	move	a1,v0
  4057e4:	24060004 	li	a2,4
  4057e8:	0c101f12 	jal	407c48 <readx>
  4057ec:	00000000 	nop
  4057f0:	10400008 	beqz	v0,405814 <fdevent_subproc_event_func+0xd4>
  4057f4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:528
          FATAL("Failed to read the subproc's fd from fd=%d\n", fd);
  4057f8:	3c020041 	lui	v0,0x41
  4057fc:	244435c4 	addiu	a0,v0,13764
  405800:	3c020041 	lui	v0,0x41
  405804:	244534d4 	addiu	a1,v0,13524
  405808:	8fc60030 	lw	a2,48(s8)
  40580c:	0c1011d6 	jal	404758 <fatal>
  405810:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:530
      }
      if((subproc_fd < 0) || (subproc_fd >= fd_table_max)) {
  405814:	8fc20020 	lw	v0,32(s8)
  405818:	04400038 	bltz	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  40581c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:530 (discriminator 1)
  405820:	8fc30020 	lw	v1,32(s8)
  405824:	3c020042 	lui	v0,0x42
  405828:	8c425824 	lw	v0,22564(v0)
  40582c:	0062102a 	slt	v0,v1,v0
  405830:	10400032 	beqz	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  405834:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:534

          return;
      }
      fdevent *subproc_fde = fd_table[subproc_fd];
  405838:	3c020042 	lui	v0,0x42
  40583c:	8c435820 	lw	v1,22560(v0)
  405840:	8fc20020 	lw	v0,32(s8)
  405844:	00021080 	sll	v0,v0,0x2
  405848:	00621021 	addu	v0,v1,v0
  40584c:	8c420000 	lw	v0,0(v0)
  405850:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/fdevent.c:535
      if(!subproc_fde) {
  405854:	8fc2001c 	lw	v0,28(s8)
  405858:	10400028 	beqz	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  40585c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:539
        
          return;
      }
      if(subproc_fde->fd != subproc_fd) {
  405860:	8fc2001c 	lw	v0,28(s8)
  405864:	8c430008 	lw	v1,8(v0)
  405868:	8fc20020 	lw	v0,32(s8)
  40586c:	14620023 	bne	v1,v0,4058fc <fdevent_subproc_event_func+0x1bc>
  405870:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:545
          // Already reallocated?
       
          return;
      }

      subproc_fde->force_eof = 1;
  405874:	8fc2001c 	lw	v0,28(s8)
  405878:	24030001 	li	v1,1
  40587c:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/fdevent.c:547

      int rcount = 0;
  405880:	afc00024 	sw	zero,36(s8)
/home_a/ppchen/adb/fdevent.c:548
      ioctl(subproc_fd, FIONREAD, &rcount);
  405884:	8fc30020 	lw	v1,32(s8)
  405888:	27c20024 	addiu	v0,s8,36
  40588c:	00602021 	move	a0,v1
  405890:	2405467f 	li	a1,18047
  405894:	00403021 	move	a2,v0
  405898:	0c105310 	jal	414c40 <ioctl@plt>
  40589c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:551


      if(rcount) {
  4058a0:	8fc20024 	lw	v0,36(s8)
  4058a4:	14400015 	bnez	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  4058a8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:559
        // data when in this fd_func().
        return;
      }

 
      subproc_fde->events |= FDE_READ;
  4058ac:	8fc2001c 	lw	v0,28(s8)
  4058b0:	94420012 	lhu	v0,18(v0)
  4058b4:	34420001 	ori	v0,v0,0x1
  4058b8:	3043ffff 	andi	v1,v0,0xffff
  4058bc:	8fc2001c 	lw	v0,28(s8)
  4058c0:	a4430012 	sh	v1,18(v0)
/home_a/ppchen/adb/fdevent.c:560
      if(subproc_fde->state & FDE_PENDING) {
  4058c4:	8fc2001c 	lw	v0,28(s8)
  4058c8:	94420010 	lhu	v0,16(v0)
  4058cc:	30420200 	andi	v0,v0,0x200
  4058d0:	1440000a 	bnez	v0,4058fc <fdevent_subproc_event_func+0x1bc>
  4058d4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:563
        return;
      }
      subproc_fde->state |= FDE_PENDING;
  4058d8:	8fc2001c 	lw	v0,28(s8)
  4058dc:	94420010 	lhu	v0,16(v0)
  4058e0:	34420200 	ori	v0,v0,0x200
  4058e4:	3043ffff 	andi	v1,v0,0xffff
  4058e8:	8fc2001c 	lw	v0,28(s8)
  4058ec:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:565

      fdevent_call_fdfunc(subproc_fde);
  4058f0:	8fc4001c 	lw	a0,28(s8)
  4058f4:	0c1015a1 	jal	405684 <fdevent_call_fdfunc>
  4058f8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:567
    }
}
  4058fc:	03c0e821 	move	sp,s8
  405900:	8fbf002c 	lw	ra,44(sp)
  405904:	8fbe0028 	lw	s8,40(sp)
  405908:	27bd0030 	addiu	sp,sp,48
  40590c:	03e00008 	jr	ra
  405910:	00000000 	nop

00405914 <fdevent_create>:
fdevent_create():
/home_a/ppchen/adb/fdevent.c:570

fdevent *fdevent_create(int fd, fd_func func, void *arg)
{
  405914:	27bdffd8 	addiu	sp,sp,-40
  405918:	afbf0024 	sw	ra,36(sp)
  40591c:	afbe0020 	sw	s8,32(sp)
  405920:	03a0f021 	move	s8,sp
  405924:	afc40028 	sw	a0,40(s8)
  405928:	afc5002c 	sw	a1,44(s8)
  40592c:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/fdevent.c:571
    fdevent *fde = (fdevent*) malloc(sizeof(fdevent));
  405930:	2404001c 	li	a0,28
  405934:	0c105300 	jal	414c00 <malloc@plt>
  405938:	00000000 	nop
  40593c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:572
    if(fde == 0) return 0;
  405940:	8fc20018 	lw	v0,24(s8)
  405944:	14400004 	bnez	v0,405958 <fdevent_create+0x44>
  405948:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:572 (discriminator 1)
  40594c:	00001021 	move	v0,zero
  405950:	1000000e 	b	40598c <fdevent_create+0x78>
  405954:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:573
    fdevent_install(fde, fd, func, arg);
  405958:	8fc40018 	lw	a0,24(s8)
  40595c:	8fc50028 	lw	a1,40(s8)
  405960:	8fc6002c 	lw	a2,44(s8)
  405964:	8fc70030 	lw	a3,48(s8)
  405968:	0c101689 	jal	405a24 <fdevent_install>
  40596c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:574
    fde->state |= FDE_CREATED;
  405970:	8fc20018 	lw	v0,24(s8)
  405974:	94420010 	lhu	v0,16(v0)
  405978:	34420400 	ori	v0,v0,0x400
  40597c:	3043ffff 	andi	v1,v0,0xffff
  405980:	8fc20018 	lw	v0,24(s8)
  405984:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:575
    return fde;
  405988:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:576
}
  40598c:	03c0e821 	move	sp,s8
  405990:	8fbf0024 	lw	ra,36(sp)
  405994:	8fbe0020 	lw	s8,32(sp)
  405998:	27bd0028 	addiu	sp,sp,40
  40599c:	03e00008 	jr	ra
  4059a0:	00000000 	nop

004059a4 <fdevent_destroy>:
fdevent_destroy():
/home_a/ppchen/adb/fdevent.c:579

void fdevent_destroy(fdevent *fde)
{
  4059a4:	27bdffe0 	addiu	sp,sp,-32
  4059a8:	afbf001c 	sw	ra,28(sp)
  4059ac:	afbe0018 	sw	s8,24(sp)
  4059b0:	03a0f021 	move	s8,sp
  4059b4:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/fdevent.c:580
    if(fde == 0) return;
  4059b8:	8fc20020 	lw	v0,32(s8)
  4059bc:	10400012 	beqz	v0,405a08 <fdevent_destroy+0x64>
  4059c0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:581
    if(!(fde->state & FDE_CREATED)) {
  4059c4:	8fc20020 	lw	v0,32(s8)
  4059c8:	94420010 	lhu	v0,16(v0)
  4059cc:	30420400 	andi	v0,v0,0x400
  4059d0:	14400008 	bnez	v0,4059f4 <fdevent_destroy+0x50>
  4059d4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:582
        FATAL("fde %p not created by fdevent_create()\n", fde);
  4059d8:	3c020041 	lui	v0,0x41
  4059dc:	244435b4 	addiu	a0,v0,13748
  4059e0:	3c020041 	lui	v0,0x41
  4059e4:	24453500 	addiu	a1,v0,13568
  4059e8:	8fc60020 	lw	a2,32(s8)
  4059ec:	0c1011d6 	jal	404758 <fatal>
  4059f0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:584
    }
    fdevent_remove(fde);
  4059f4:	8fc40020 	lw	a0,32(s8)
  4059f8:	0c1016c0 	jal	405b00 <fdevent_remove>
  4059fc:	00000000 	nop
  405a00:	10000002 	b	405a0c <fdevent_destroy+0x68>
  405a04:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:580
    return fde;
}

void fdevent_destroy(fdevent *fde)
{
    if(fde == 0) return;
  405a08:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:585
    if(!(fde->state & FDE_CREATED)) {
        FATAL("fde %p not created by fdevent_create()\n", fde);
    }
    fdevent_remove(fde);
}
  405a0c:	03c0e821 	move	sp,s8
  405a10:	8fbf001c 	lw	ra,28(sp)
  405a14:	8fbe0018 	lw	s8,24(sp)
  405a18:	27bd0020 	addiu	sp,sp,32
  405a1c:	03e00008 	jr	ra
  405a20:	00000000 	nop

00405a24 <fdevent_install>:
fdevent_install():
/home_a/ppchen/adb/fdevent.c:588

void fdevent_install(fdevent *fde, int fd, fd_func func, void *arg)
{
  405a24:	27bdffe0 	addiu	sp,sp,-32
  405a28:	afbf001c 	sw	ra,28(sp)
  405a2c:	afbe0018 	sw	s8,24(sp)
  405a30:	03a0f021 	move	s8,sp
  405a34:	afc40020 	sw	a0,32(s8)
  405a38:	afc50024 	sw	a1,36(s8)
  405a3c:	afc60028 	sw	a2,40(s8)
  405a40:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/fdevent.c:589
    memset(fde, 0, sizeof(fdevent));
  405a44:	8fc40020 	lw	a0,32(s8)
  405a48:	00002821 	move	a1,zero
  405a4c:	2406001c 	li	a2,28
  405a50:	0c1053ac 	jal	414eb0 <memset@plt>
  405a54:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:590
    fde->state = FDE_ACTIVE;
  405a58:	8fc20020 	lw	v0,32(s8)
  405a5c:	24030100 	li	v1,256
  405a60:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:591
    fde->fd = fd;
  405a64:	8fc20020 	lw	v0,32(s8)
  405a68:	8fc30024 	lw	v1,36(s8)
  405a6c:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/fdevent.c:592
    fde->force_eof = 0;
  405a70:	8fc20020 	lw	v0,32(s8)
  405a74:	ac40000c 	sw	zero,12(v0)
/home_a/ppchen/adb/fdevent.c:593
    fde->func = func;
  405a78:	8fc20020 	lw	v0,32(s8)
  405a7c:	8fc30028 	lw	v1,40(s8)
  405a80:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/fdevent.c:594
    fde->arg = arg;
  405a84:	8fc20020 	lw	v0,32(s8)
  405a88:	8fc3002c 	lw	v1,44(s8)
  405a8c:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/fdevent.c:597

#ifndef HAVE_WINSOCK
    fcntl(fd, F_SETFL, O_NONBLOCK);
  405a90:	8fc40024 	lw	a0,36(s8)
  405a94:	24050004 	li	a1,4
  405a98:	24060080 	li	a2,128
  405a9c:	0c10532c 	jal	414cb0 <fcntl@plt>
  405aa0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:599
#endif
    fdevent_register(fde);
  405aa4:	8fc40020 	lw	a0,32(s8)
  405aa8:	0c10148c 	jal	405230 <fdevent_register>
  405aac:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:600
    dump_fde(fde, "connect");
  405ab0:	8fc40020 	lw	a0,32(s8)
  405ab4:	3c020041 	lui	v0,0x41
  405ab8:	24453528 	addiu	a1,v0,13608
  405abc:	0c1011f2 	jal	4047c8 <dump_fde>
  405ac0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:601
    fdevent_connect(fde);
  405ac4:	8fc40020 	lw	a0,32(s8)
  405ac8:	0c101244 	jal	404910 <fdevent_connect>
  405acc:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:602
    fde->state |= FDE_ACTIVE;
  405ad0:	8fc20020 	lw	v0,32(s8)
  405ad4:	94420010 	lhu	v0,16(v0)
  405ad8:	34420100 	ori	v0,v0,0x100
  405adc:	3043ffff 	andi	v1,v0,0xffff
  405ae0:	8fc20020 	lw	v0,32(s8)
  405ae4:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:603
}
  405ae8:	03c0e821 	move	sp,s8
  405aec:	8fbf001c 	lw	ra,28(sp)
  405af0:	8fbe0018 	lw	s8,24(sp)
  405af4:	27bd0020 	addiu	sp,sp,32
  405af8:	03e00008 	jr	ra
  405afc:	00000000 	nop

00405b00 <fdevent_remove>:
fdevent_remove():
/home_a/ppchen/adb/fdevent.c:606

void fdevent_remove(fdevent *fde)
{
  405b00:	27bdffe0 	addiu	sp,sp,-32
  405b04:	afbf001c 	sw	ra,28(sp)
  405b08:	afbe0018 	sw	s8,24(sp)
  405b0c:	03a0f021 	move	s8,sp
  405b10:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/fdevent.c:607
    if(fde->state & FDE_PENDING) {
  405b14:	8fc20020 	lw	v0,32(s8)
  405b18:	94420010 	lhu	v0,16(v0)
  405b1c:	30420200 	andi	v0,v0,0x200
  405b20:	10400004 	beqz	v0,405b34 <fdevent_remove+0x34>
  405b24:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:608
        fdevent_plist_remove(fde);
  405b28:	8fc40020 	lw	a0,32(s8)
  405b2c:	0c101568 	jal	4055a0 <fdevent_plist_remove>
  405b30:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:611
    }

    if(fde->state & FDE_ACTIVE) {
  405b34:	8fc20020 	lw	v0,32(s8)
  405b38:	94420010 	lhu	v0,16(v0)
  405b3c:	30420100 	andi	v0,v0,0x100
  405b40:	1040000c 	beqz	v0,405b74 <fdevent_remove+0x74>
  405b44:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:612
        fdevent_disconnect(fde);
  405b48:	8fc40020 	lw	a0,32(s8)
  405b4c:	0c101259 	jal	404964 <fdevent_disconnect>
  405b50:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:613
        dump_fde(fde, "disconnect");
  405b54:	8fc40020 	lw	a0,32(s8)
  405b58:	3c020041 	lui	v0,0x41
  405b5c:	24453530 	addiu	a1,v0,13616
  405b60:	0c1011f2 	jal	4047c8 <dump_fde>
  405b64:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:614
        fdevent_unregister(fde);
  405b68:	8fc40020 	lw	a0,32(s8)
  405b6c:	0c101506 	jal	405418 <fdevent_unregister>
  405b70:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:617
    }

    fde->state = 0;
  405b74:	8fc20020 	lw	v0,32(s8)
  405b78:	a4400010 	sh	zero,16(v0)
/home_a/ppchen/adb/fdevent.c:618
    fde->events = 0;
  405b7c:	8fc20020 	lw	v0,32(s8)
  405b80:	a4400012 	sh	zero,18(v0)
/home_a/ppchen/adb/fdevent.c:619
}
  405b84:	03c0e821 	move	sp,s8
  405b88:	8fbf001c 	lw	ra,28(sp)
  405b8c:	8fbe0018 	lw	s8,24(sp)
  405b90:	27bd0020 	addiu	sp,sp,32
  405b94:	03e00008 	jr	ra
  405b98:	00000000 	nop

00405b9c <fdevent_set>:
fdevent_set():
/home_a/ppchen/adb/fdevent.c:623


void fdevent_set(fdevent *fde, unsigned events)
{
  405b9c:	27bdffe0 	addiu	sp,sp,-32
  405ba0:	afbf001c 	sw	ra,28(sp)
  405ba4:	afbe0018 	sw	s8,24(sp)
  405ba8:	03a0f021 	move	s8,sp
  405bac:	afc40020 	sw	a0,32(s8)
  405bb0:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/fdevent.c:624
    events &= FDE_EVENTMASK;
  405bb4:	8fc20024 	lw	v0,36(s8)
  405bb8:	304200ff 	andi	v0,v0,0xff
  405bbc:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/fdevent.c:626

    if((fde->state & FDE_EVENTMASK) == events) return;
  405bc0:	8fc20020 	lw	v0,32(s8)
  405bc4:	94420010 	lhu	v0,16(v0)
  405bc8:	304300ff 	andi	v1,v0,0xff
  405bcc:	8fc20024 	lw	v0,36(s8)
  405bd0:	10620039 	beq	v1,v0,405cb8 <fdevent_set+0x11c>
  405bd4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:628

    if(fde->state & FDE_ACTIVE) {
  405bd8:	8fc20020 	lw	v0,32(s8)
  405bdc:	94420010 	lhu	v0,16(v0)
  405be0:	30420100 	andi	v0,v0,0x100
  405be4:	1040000a 	beqz	v0,405c10 <fdevent_set+0x74>
  405be8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:629
        fdevent_update(fde, events);
  405bec:	8fc40020 	lw	a0,32(s8)
  405bf0:	8fc50024 	lw	a1,36(s8)
  405bf4:	0c1012b9 	jal	404ae4 <fdevent_update>
  405bf8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:630
        dump_fde(fde, "update");
  405bfc:	8fc40020 	lw	a0,32(s8)
  405c00:	3c020041 	lui	v0,0x41
  405c04:	2445353c 	addiu	a1,v0,13628
  405c08:	0c1011f2 	jal	4047c8 <dump_fde>
  405c0c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:633
    }

    fde->state = (fde->state & FDE_STATEMASK) | events;
  405c10:	8fc20020 	lw	v0,32(s8)
  405c14:	94430010 	lhu	v1,16(v0)
  405c18:	2402ff00 	li	v0,-256
  405c1c:	00621024 	and	v0,v1,v0
  405c20:	3043ffff 	andi	v1,v0,0xffff
  405c24:	8fc20024 	lw	v0,36(s8)
  405c28:	3042ffff 	andi	v0,v0,0xffff
  405c2c:	00621025 	or	v0,v1,v0
  405c30:	3043ffff 	andi	v1,v0,0xffff
  405c34:	8fc20020 	lw	v0,32(s8)
  405c38:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/fdevent.c:635

    if(fde->state & FDE_PENDING) {
  405c3c:	8fc20020 	lw	v0,32(s8)
  405c40:	94420010 	lhu	v0,16(v0)
  405c44:	30420200 	andi	v0,v0,0x200
  405c48:	1040001c 	beqz	v0,405cbc <fdevent_set+0x120>
  405c4c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:640
            /* if we're pending, make sure
            ** we don't signal an event that
            ** is no longer wanted.
            */
        fde->events &= (~events);
  405c50:	8fc20020 	lw	v0,32(s8)
  405c54:	94430012 	lhu	v1,18(v0)
  405c58:	8fc20024 	lw	v0,36(s8)
  405c5c:	3042ffff 	andi	v0,v0,0xffff
  405c60:	00021027 	nor	v0,zero,v0
  405c64:	3042ffff 	andi	v0,v0,0xffff
  405c68:	00621024 	and	v0,v1,v0
  405c6c:	3043ffff 	andi	v1,v0,0xffff
  405c70:	8fc20020 	lw	v0,32(s8)
  405c74:	a4430012 	sh	v1,18(v0)
/home_a/ppchen/adb/fdevent.c:641
        if(fde->events == 0) {
  405c78:	8fc20020 	lw	v0,32(s8)
  405c7c:	94420012 	lhu	v0,18(v0)
  405c80:	1440000e 	bnez	v0,405cbc <fdevent_set+0x120>
  405c84:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:642
            fdevent_plist_remove(fde);
  405c88:	8fc40020 	lw	a0,32(s8)
  405c8c:	0c101568 	jal	4055a0 <fdevent_plist_remove>
  405c90:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:643
            fde->state &= (~FDE_PENDING);
  405c94:	8fc20020 	lw	v0,32(s8)
  405c98:	94430010 	lhu	v1,16(v0)
  405c9c:	2402fdff 	li	v0,-513
  405ca0:	00621024 	and	v0,v1,v0
  405ca4:	3043ffff 	andi	v1,v0,0xffff
  405ca8:	8fc20020 	lw	v0,32(s8)
  405cac:	a4430010 	sh	v1,16(v0)
  405cb0:	10000002 	b	405cbc <fdevent_set+0x120>
  405cb4:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:626

void fdevent_set(fdevent *fde, unsigned events)
{
    events &= FDE_EVENTMASK;

    if((fde->state & FDE_EVENTMASK) == events) return;
  405cb8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:646
        if(fde->events == 0) {
            fdevent_plist_remove(fde);
            fde->state &= (~FDE_PENDING);
        }
    }
}
  405cbc:	03c0e821 	move	sp,s8
  405cc0:	8fbf001c 	lw	ra,28(sp)
  405cc4:	8fbe0018 	lw	s8,24(sp)
  405cc8:	27bd0020 	addiu	sp,sp,32
  405ccc:	03e00008 	jr	ra
  405cd0:	00000000 	nop

00405cd4 <fdevent_add>:
fdevent_add():
/home_a/ppchen/adb/fdevent.c:649

void fdevent_add(fdevent *fde, unsigned events)
{
  405cd4:	27bdffe0 	addiu	sp,sp,-32
  405cd8:	afbf001c 	sw	ra,28(sp)
  405cdc:	afbe0018 	sw	s8,24(sp)
  405ce0:	03a0f021 	move	s8,sp
  405ce4:	afc40020 	sw	a0,32(s8)
  405ce8:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/fdevent.c:651
    fdevent_set(
        fde, (fde->state & FDE_EVENTMASK) | (events & FDE_EVENTMASK));
  405cec:	8fc20020 	lw	v0,32(s8)
  405cf0:	94420010 	lhu	v0,16(v0)
  405cf4:	00401821 	move	v1,v0
  405cf8:	8fc20024 	lw	v0,36(s8)
  405cfc:	00621025 	or	v0,v1,v0
/home_a/ppchen/adb/fdevent.c:650
    }
}

void fdevent_add(fdevent *fde, unsigned events)
{
    fdevent_set(
  405d00:	304200ff 	andi	v0,v0,0xff
  405d04:	8fc40020 	lw	a0,32(s8)
  405d08:	00402821 	move	a1,v0
  405d0c:	0c1016e7 	jal	405b9c <fdevent_set>
  405d10:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:652
        fde, (fde->state & FDE_EVENTMASK) | (events & FDE_EVENTMASK));
}
  405d14:	03c0e821 	move	sp,s8
  405d18:	8fbf001c 	lw	ra,28(sp)
  405d1c:	8fbe0018 	lw	s8,24(sp)
  405d20:	27bd0020 	addiu	sp,sp,32
  405d24:	03e00008 	jr	ra
  405d28:	00000000 	nop

00405d2c <fdevent_del>:
fdevent_del():
/home_a/ppchen/adb/fdevent.c:655

void fdevent_del(fdevent *fde, unsigned events)
{
  405d2c:	27bdffe0 	addiu	sp,sp,-32
  405d30:	afbf001c 	sw	ra,28(sp)
  405d34:	afbe0018 	sw	s8,24(sp)
  405d38:	03a0f021 	move	s8,sp
  405d3c:	afc40020 	sw	a0,32(s8)
  405d40:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/fdevent.c:657
    fdevent_set(
        fde, (fde->state & FDE_EVENTMASK) & (~(events & FDE_EVENTMASK)));
  405d44:	8fc20020 	lw	v0,32(s8)
  405d48:	94420010 	lhu	v0,16(v0)
  405d4c:	00401821 	move	v1,v0
  405d50:	8fc20024 	lw	v0,36(s8)
  405d54:	304200ff 	andi	v0,v0,0xff
  405d58:	00021027 	nor	v0,zero,v0
  405d5c:	00621024 	and	v0,v1,v0
/home_a/ppchen/adb/fdevent.c:656
        fde, (fde->state & FDE_EVENTMASK) | (events & FDE_EVENTMASK));
}

void fdevent_del(fdevent *fde, unsigned events)
{
    fdevent_set(
  405d60:	304200ff 	andi	v0,v0,0xff
  405d64:	8fc40020 	lw	a0,32(s8)
  405d68:	00402821 	move	a1,v0
  405d6c:	0c1016e7 	jal	405b9c <fdevent_set>
  405d70:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:658
        fde, (fde->state & FDE_EVENTMASK) & (~(events & FDE_EVENTMASK)));
}
  405d74:	03c0e821 	move	sp,s8
  405d78:	8fbf001c 	lw	ra,28(sp)
  405d7c:	8fbe0018 	lw	s8,24(sp)
  405d80:	27bd0020 	addiu	sp,sp,32
  405d84:	03e00008 	jr	ra
  405d88:	00000000 	nop

00405d8c <fdevent_subproc_setup>:
fdevent_subproc_setup():
/home_a/ppchen/adb/fdevent.c:661

void fdevent_subproc_setup()
{
  405d8c:	27bdffd0 	addiu	sp,sp,-48
  405d90:	afbf002c 	sw	ra,44(sp)
  405d94:	afbe0028 	sw	s8,40(sp)
  405d98:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/fdevent.c:663
    int s[2];
    if(adb_socketpair(s)) {
  405d9c:	27c2001c 	addiu	v0,s8,28
  405da0:	00402021 	move	a0,v0
  405da4:	0c1011b2 	jal	4046c8 <adb_socketpair>
  405da8:	00000000 	nop
  405dac:	10400007 	beqz	v0,405dcc <fdevent_subproc_setup+0x40>
  405db0:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:664
        FATAL("cannot create shell-exit socket-pair\n");
  405db4:	3c020041 	lui	v0,0x41
  405db8:	2444359c 	addiu	a0,v0,13724
  405dbc:	3c020041 	lui	v0,0x41
  405dc0:	24453544 	addiu	a1,v0,13636
  405dc4:	0c1011d6 	jal	404758 <fatal>
  405dc8:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:666
    }
    SHELL_EXIT_NOTIFY_FD = s[0];
  405dcc:	8fc3001c 	lw	v1,28(s8)
  405dd0:	3c020042 	lui	v0,0x42
  405dd4:	ac435630 	sw	v1,22064(v0)
/home_a/ppchen/adb/fdevent.c:668
    fdevent *fde;
    fde = fdevent_create(s[1], fdevent_subproc_event_func, NULL);
  405dd8:	8fc20020 	lw	v0,32(s8)
  405ddc:	00402021 	move	a0,v0
  405de0:	3c020040 	lui	v0,0x40
  405de4:	24455740 	addiu	a1,v0,22336
  405de8:	00003021 	move	a2,zero
  405dec:	0c101645 	jal	405914 <fdevent_create>
  405df0:	00000000 	nop
  405df4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/fdevent.c:669
    if(!fde)
  405df8:	8fc20018 	lw	v0,24(s8)
  405dfc:	14400007 	bnez	v0,405e1c <fdevent_subproc_setup+0x90>
  405e00:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:670
      FATAL("cannot create fdevent for shell-exit handler\n");
  405e04:	3c020041 	lui	v0,0x41
  405e08:	2444359c 	addiu	a0,v0,13724
  405e0c:	3c020041 	lui	v0,0x41
  405e10:	2445356c 	addiu	a1,v0,13676
  405e14:	0c1011d6 	jal	404758 <fatal>
  405e18:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:671
    fdevent_add(fde, FDE_READ);
  405e1c:	8fc40018 	lw	a0,24(s8)
  405e20:	24050001 	li	a1,1
  405e24:	0c101735 	jal	405cd4 <fdevent_add>
  405e28:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:672
}
  405e2c:	03c0e821 	move	sp,s8
  405e30:	8fbf002c 	lw	ra,44(sp)
  405e34:	8fbe0028 	lw	s8,40(sp)
  405e38:	27bd0030 	addiu	sp,sp,48
  405e3c:	03e00008 	jr	ra
  405e40:	00000000 	nop

00405e44 <fdevent_loop>:
fdevent_loop():
/home_a/ppchen/adb/fdevent.c:675

void fdevent_loop()
{
  405e44:	27bdffd8 	addiu	sp,sp,-40
  405e48:	afbf0024 	sw	ra,36(sp)
  405e4c:	afbe0020 	sw	s8,32(sp)
  405e50:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/fdevent.c:677
    fdevent *fde;
    fdevent_subproc_setup();
  405e54:	0c101763 	jal	405d8c <fdevent_subproc_setup>
  405e58:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:682

    for(;;) {
   

        fdevent_process();
  405e5c:	0c10139d 	jal	404e74 <fdevent_process>
  405e60:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:684

        while((fde = fdevent_plist_dequeue())) {
  405e64:	10000004 	b	405e78 <fdevent_loop+0x34>
  405e68:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:685
            fdevent_call_fdfunc(fde);
  405e6c:	8fc40018 	lw	a0,24(s8)
  405e70:	0c1015a1 	jal	405684 <fdevent_call_fdfunc>
  405e74:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:684 (discriminator 1)
    for(;;) {
   

        fdevent_process();

        while((fde = fdevent_plist_dequeue())) {
  405e78:	0c10157f 	jal	4055fc <fdevent_plist_dequeue>
  405e7c:	00000000 	nop
  405e80:	afc20018 	sw	v0,24(s8)
  405e84:	8fc20018 	lw	v0,24(s8)
  405e88:	1440fff8 	bnez	v0,405e6c <fdevent_loop+0x28>
  405e8c:	00000000 	nop
/home_a/ppchen/adb/fdevent.c:687
            fdevent_call_fdfunc(fde);
        }
    }
  405e90:	1000fff2 	b	405e5c <fdevent_loop+0x18>
  405e94:	00000000 	nop
	...

00405ea0 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  405ea0:	27bdffe0 	addiu	sp,sp,-32
  405ea4:	afbf001c 	sw	ra,28(sp)
  405ea8:	afbe0018 	sw	s8,24(sp)
  405eac:	03a0f021 	move	s8,sp
  405eb0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  405eb4:	8fc40020 	lw	a0,32(s8)
  405eb8:	24050002 	li	a1,2
  405ebc:	24060001 	li	a2,1
  405ec0:	0c10532c 	jal	414cb0 <fcntl@plt>
  405ec4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  405ec8:	03c0e821 	move	sp,s8
  405ecc:	8fbf001c 	lw	ra,28(sp)
  405ed0:	8fbe0018 	lw	s8,24(sp)
  405ed4:	27bd0020 	addiu	sp,sp,32
  405ed8:	03e00008 	jr	ra
  405edc:	00000000 	nop

00405ee0 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  405ee0:	27bdffe0 	addiu	sp,sp,-32
  405ee4:	afbf001c 	sw	ra,28(sp)
  405ee8:	afbe0018 	sw	s8,24(sp)
  405eec:	03a0f021 	move	s8,sp
  405ef0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  405ef4:	8fc40020 	lw	a0,32(s8)
  405ef8:	0c105378 	jal	414de0 <close@plt>
  405efc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  405f00:	03c0e821 	move	sp,s8
  405f04:	8fbf001c 	lw	ra,28(sp)
  405f08:	8fbe0018 	lw	s8,24(sp)
  405f0c:	27bd0020 	addiu	sp,sp,32
  405f10:	03e00008 	jr	ra
  405f14:	00000000 	nop

00405f18 <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  405f18:	27bdffe0 	addiu	sp,sp,-32
  405f1c:	afbf001c 	sw	ra,28(sp)
  405f20:	afbe0018 	sw	s8,24(sp)
  405f24:	03a0f021 	move	s8,sp
  405f28:	afc40020 	sw	a0,32(s8)
  405f2c:	afc50024 	sw	a1,36(s8)
  405f30:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  405f34:	8fc40020 	lw	a0,32(s8)
  405f38:	8fc50024 	lw	a1,36(s8)
  405f3c:	8fc60028 	lw	a2,40(s8)
  405f40:	0c105340 	jal	414d00 <read@plt>
  405f44:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  405f48:	03c0e821 	move	sp,s8
  405f4c:	8fbf001c 	lw	ra,28(sp)
  405f50:	8fbe0018 	lw	s8,24(sp)
  405f54:	27bd0020 	addiu	sp,sp,32
  405f58:	03e00008 	jr	ra
  405f5c:	00000000 	nop

00405f60 <adb_write>:
adb_write():
/home_a/ppchen/adb/sysdeps.h:367

#undef   read
#define  read  ___xxx_read

static __inline__ int  adb_write(int  fd, const void*  buf, size_t  len)
{
  405f60:	27bdffe0 	addiu	sp,sp,-32
  405f64:	afbf001c 	sw	ra,28(sp)
  405f68:	afbe0018 	sw	s8,24(sp)
  405f6c:	03a0f021 	move	s8,sp
  405f70:	afc40020 	sw	a0,32(s8)
  405f74:	afc50024 	sw	a1,36(s8)
  405f78:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:368
    return write(fd, buf, len);
  405f7c:	8fc40020 	lw	a0,32(s8)
  405f80:	8fc50024 	lw	a1,36(s8)
  405f84:	8fc60028 	lw	a2,40(s8)
  405f88:	0c10536c 	jal	414db0 <write@plt>
  405f8c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:369
}
  405f90:	03c0e821 	move	sp,s8
  405f94:	8fbf001c 	lw	ra,28(sp)
  405f98:	8fbe0018 	lw	s8,24(sp)
  405f9c:	27bd0020 	addiu	sp,sp,32
  405fa0:	03e00008 	jr	ra
  405fa4:	00000000 	nop

00405fa8 <adb_thread_create>:
adb_thread_create():
/home_a/ppchen/adb/sysdeps.h:424
typedef  pthread_t                 adb_thread_t;

typedef void*  (*adb_thread_func_t)( void*  arg );

static __inline__ int  adb_thread_create( adb_thread_t  *pthread, adb_thread_func_t  start, void*  arg )
{
  405fa8:	27bdffb8 	addiu	sp,sp,-72
  405fac:	afbf0044 	sw	ra,68(sp)
  405fb0:	afbe0040 	sw	s8,64(sp)
  405fb4:	03a0f021 	move	s8,sp
  405fb8:	afc40048 	sw	a0,72(s8)
  405fbc:	afc5004c 	sw	a1,76(s8)
  405fc0:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sysdeps.h:429
    pthread_attr_t   attr;


    //pthread_detach(pthread_self());
    pthread_attr_init (&attr);
  405fc4:	27c2001c 	addiu	v0,s8,28
  405fc8:	00402021 	move	a0,v0
  405fcc:	0c1052ec 	jal	414bb0 <pthread_attr_init@plt>
  405fd0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:430
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
  405fd4:	27c2001c 	addiu	v0,s8,28
  405fd8:	00402021 	move	a0,v0
  405fdc:	24050001 	li	a1,1
  405fe0:	0c1052c8 	jal	414b20 <pthread_attr_setdetachstate@plt>
  405fe4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:431
    pthread_attr_setstacksize(&attr, 64*1024);
  405fe8:	27c2001c 	addiu	v0,s8,28
  405fec:	00402021 	move	a0,v0
  405ff0:	3c050001 	lui	a1,0x1
  405ff4:	0c105314 	jal	414c50 <pthread_attr_setstacksize@plt>
  405ff8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:434
   

    int ret =  pthread_create( pthread, &attr, start, arg );
  405ffc:	27c2001c 	addiu	v0,s8,28
  406000:	8fc40048 	lw	a0,72(s8)
  406004:	00402821 	move	a1,v0
  406008:	8fc6004c 	lw	a2,76(s8)
  40600c:	8fc70050 	lw	a3,80(s8)
  406010:	0c105368 	jal	414da0 <pthread_create@plt>
  406014:	00000000 	nop
  406018:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:436

    return ret;
  40601c:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:437
}
  406020:	03c0e821 	move	sp,s8
  406024:	8fbf0044 	lw	ra,68(sp)
  406028:	8fbe0040 	lw	s8,64(sp)
  40602c:	27bd0048 	addiu	sp,sp,72
  406030:	03e00008 	jr	ra
  406034:	00000000 	nop

00406038 <unix_socketpair>:
unix_socketpair():
/home_a/ppchen/adb/sysdeps.h:453
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
}


static __inline__ int  unix_socketpair( int  d, int  type, int  protocol, int sv[2] )
{
  406038:	27bdffe0 	addiu	sp,sp,-32
  40603c:	afbf001c 	sw	ra,28(sp)
  406040:	afbe0018 	sw	s8,24(sp)
  406044:	03a0f021 	move	s8,sp
  406048:	afc40020 	sw	a0,32(s8)
  40604c:	afc50024 	sw	a1,36(s8)
  406050:	afc60028 	sw	a2,40(s8)
  406054:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/sysdeps.h:454
    return socketpair( d, type, protocol, sv );
  406058:	8fc40020 	lw	a0,32(s8)
  40605c:	8fc50024 	lw	a1,36(s8)
  406060:	8fc60028 	lw	a2,40(s8)
  406064:	8fc7002c 	lw	a3,44(s8)
  406068:	0c105394 	jal	414e50 <socketpair@plt>
  40606c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:455
}
  406070:	03c0e821 	move	sp,s8
  406074:	8fbf001c 	lw	ra,28(sp)
  406078:	8fbe0018 	lw	s8,24(sp)
  40607c:	27bd0020 	addiu	sp,sp,32
  406080:	03e00008 	jr	ra
  406084:	00000000 	nop

00406088 <adb_socketpair>:
adb_socketpair():
/home_a/ppchen/adb/sysdeps.h:458

static __inline__ int  adb_socketpair( int  sv[2] )
{
  406088:	27bdffd8 	addiu	sp,sp,-40
  40608c:	afbf0024 	sw	ra,36(sp)
  406090:	afbe0020 	sw	s8,32(sp)
  406094:	03a0f021 	move	s8,sp
  406098:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sysdeps.h:463
    int  rc;



    rc = unix_socketpair( AF_UNIX, SOCK_STREAM, 0, sv );
  40609c:	24040001 	li	a0,1
  4060a0:	24050002 	li	a1,2
  4060a4:	00003021 	move	a2,zero
  4060a8:	8fc70028 	lw	a3,40(s8)
  4060ac:	0c10180e 	jal	406038 <unix_socketpair>
  4060b0:	00000000 	nop
  4060b4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:467



    if (rc < 0)
  4060b8:	8fc20018 	lw	v0,24(s8)
  4060bc:	04410004 	bgez	v0,4060d0 <adb_socketpair+0x48>
  4060c0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:468
        return -1;
  4060c4:	2402ffff 	li	v0,-1
  4060c8:	1000000d 	b	406100 <adb_socketpair+0x78>
  4060cc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:470

    close_on_exec( sv[0] );
  4060d0:	8fc20028 	lw	v0,40(s8)
  4060d4:	8c420000 	lw	v0,0(v0)
  4060d8:	00402021 	move	a0,v0
  4060dc:	0c1017a8 	jal	405ea0 <close_on_exec>
  4060e0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:471
    close_on_exec( sv[1] );
  4060e4:	8fc20028 	lw	v0,40(s8)
  4060e8:	24420004 	addiu	v0,v0,4
  4060ec:	8c420000 	lw	v0,0(v0)
  4060f0:	00402021 	move	a0,v0
  4060f4:	0c1017a8 	jal	405ea0 <close_on_exec>
  4060f8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:472
    return 0;
  4060fc:	00001021 	move	v0,zero
/home_a/ppchen/adb/sysdeps.h:473
}
  406100:	03c0e821 	move	sp,s8
  406104:	8fbf0024 	lw	ra,36(sp)
  406108:	8fbe0020 	lw	s8,32(sp)
  40610c:	27bd0028 	addiu	sp,sp,40
  406110:	03e00008 	jr	ra
  406114:	00000000 	nop

00406118 <adb_sleep_ms>:
adb_sleep_ms():
/home_a/ppchen/adb/sysdeps.h:479

#undef   socketpair
#define  socketpair   ___xxx_socketpair

static __inline__ void  adb_sleep_ms( int  mseconds )
{
  406118:	27bdffe0 	addiu	sp,sp,-32
  40611c:	afbf001c 	sw	ra,28(sp)
  406120:	afbe0018 	sw	s8,24(sp)
  406124:	03a0f021 	move	s8,sp
  406128:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:480
    usleep( mseconds*1000 );
  40612c:	8fc40020 	lw	a0,32(s8)
  406130:	00801821 	move	v1,a0
  406134:	00031080 	sll	v0,v1,0x2
  406138:	00401821 	move	v1,v0
  40613c:	00031140 	sll	v0,v1,0x5
  406140:	00431023 	subu	v0,v0,v1
  406144:	00441021 	addu	v0,v0,a0
  406148:	000210c0 	sll	v0,v0,0x3
  40614c:	00402021 	move	a0,v0
  406150:	0c1052d4 	jal	414b50 <usleep@plt>
  406154:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:481
}
  406158:	03c0e821 	move	sp,s8
  40615c:	8fbf001c 	lw	ra,28(sp)
  406160:	8fbe0018 	lw	s8,24(sp)
  406164:	27bd0020 	addiu	sp,sp,32
  406168:	03e00008 	jr	ra
  40616c:	00000000 	nop

00406170 <dump_hex>:
dump_hex():
/home_a/ppchen/adb/transport.c:40
ADB_MUTEX_DEFINE( transport_lock );

#if ADB_TRACE
#define MAX_DUMP_HEX_LEN 16
static void  dump_hex( const unsigned char*  ptr, size_t  len )
{
  406170:	27bdff98 	addiu	sp,sp,-104
  406174:	afbf0064 	sw	ra,100(sp)
  406178:	afbe0060 	sw	s8,96(sp)
  40617c:	03a0f021 	move	s8,sp
  406180:	afc40068 	sw	a0,104(s8)
  406184:	afc5006c 	sw	a1,108(s8)
/home_a/ppchen/adb/transport.c:41
    int  nn, len2 = len;
  406188:	8fc2006c 	lw	v0,108(s8)
  40618c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:44
    // Build a string instead of logging each character.
    // MAX chars in 2 digit hex, one space, MAX chars, one '\0'.
    char buffer[MAX_DUMP_HEX_LEN *2 + 1 + MAX_DUMP_HEX_LEN + 1 ], *pb = buffer;
  406190:	27c2002c 	addiu	v0,s8,44
  406194:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:46

    if (len2 > MAX_DUMP_HEX_LEN) len2 = MAX_DUMP_HEX_LEN;
  406198:	8fc2001c 	lw	v0,28(s8)
  40619c:	28420011 	slti	v0,v0,17
  4061a0:	14400003 	bnez	v0,4061b0 <dump_hex+0x40>
  4061a4:	00000000 	nop
/home_a/ppchen/adb/transport.c:46 (discriminator 1)
  4061a8:	24020010 	li	v0,16
  4061ac:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:48

    for (nn = 0; nn < len2; nn++) {
  4061b0:	afc00018 	sw	zero,24(s8)
  4061b4:	10000011 	b	4061fc <dump_hex+0x8c>
  4061b8:	00000000 	nop
/home_a/ppchen/adb/transport.c:49 (discriminator 2)
        sprintf(pb, "%02x", ptr[nn]);
  4061bc:	8fc20018 	lw	v0,24(s8)
  4061c0:	8fc30068 	lw	v1,104(s8)
  4061c4:	00621021 	addu	v0,v1,v0
  4061c8:	90420000 	lbu	v0,0(v0)
  4061cc:	8fc40020 	lw	a0,32(s8)
  4061d0:	3c030041 	lui	v1,0x41
  4061d4:	24653620 	addiu	a1,v1,13856
  4061d8:	00403021 	move	a2,v0
  4061dc:	0c1053c0 	jal	414f00 <sprintf@plt>
  4061e0:	00000000 	nop
/home_a/ppchen/adb/transport.c:50 (discriminator 2)
        pb += 2;
  4061e4:	8fc20020 	lw	v0,32(s8)
  4061e8:	24420002 	addiu	v0,v0,2
  4061ec:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:48 (discriminator 2)
    // MAX chars in 2 digit hex, one space, MAX chars, one '\0'.
    char buffer[MAX_DUMP_HEX_LEN *2 + 1 + MAX_DUMP_HEX_LEN + 1 ], *pb = buffer;

    if (len2 > MAX_DUMP_HEX_LEN) len2 = MAX_DUMP_HEX_LEN;

    for (nn = 0; nn < len2; nn++) {
  4061f0:	8fc20018 	lw	v0,24(s8)
  4061f4:	24420001 	addiu	v0,v0,1
  4061f8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:48 (discriminator 1)
  4061fc:	8fc30018 	lw	v1,24(s8)
  406200:	8fc2001c 	lw	v0,28(s8)
  406204:	0062102a 	slt	v0,v1,v0
  406208:	1440ffec 	bnez	v0,4061bc <dump_hex+0x4c>
  40620c:	00000000 	nop
/home_a/ppchen/adb/transport.c:52
        sprintf(pb, "%02x", ptr[nn]);
        pb += 2;
    }
    sprintf(pb++, " ");
  406210:	8fc20020 	lw	v0,32(s8)
  406214:	8fc30020 	lw	v1,32(s8)
  406218:	24630001 	addiu	v1,v1,1
  40621c:	afc30020 	sw	v1,32(s8)
  406220:	24030020 	li	v1,32
  406224:	a0430000 	sb	v1,0(v0)
  406228:	a0400001 	sb	zero,1(v0)
/home_a/ppchen/adb/transport.c:54

    for (nn = 0; nn < len2; nn++) {
  40622c:	afc00018 	sw	zero,24(s8)
  406230:	1000001a 	b	40629c <dump_hex+0x12c>
  406234:	00000000 	nop
/home_a/ppchen/adb/transport.c:55
        int  c = ptr[nn];
  406238:	8fc20018 	lw	v0,24(s8)
  40623c:	8fc30068 	lw	v1,104(s8)
  406240:	00621021 	addu	v0,v1,v0
  406244:	90420000 	lbu	v0,0(v0)
  406248:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/transport.c:56
        if (c < 32 || c > 127)
  40624c:	8fc20024 	lw	v0,36(s8)
  406250:	28420020 	slti	v0,v0,32
  406254:	14400005 	bnez	v0,40626c <dump_hex+0xfc>
  406258:	00000000 	nop
/home_a/ppchen/adb/transport.c:56 (discriminator 1)
  40625c:	8fc20024 	lw	v0,36(s8)
  406260:	28420080 	slti	v0,v0,128
  406264:	14400003 	bnez	v0,406274 <dump_hex+0x104>
  406268:	00000000 	nop
/home_a/ppchen/adb/transport.c:57
            c = '.';
  40626c:	2402002e 	li	v0,46
  406270:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/transport.c:58
        *pb++ =  c;
  406274:	8fc20024 	lw	v0,36(s8)
  406278:	7c021c20 	seb	v1,v0
  40627c:	8fc20020 	lw	v0,32(s8)
  406280:	a0430000 	sb	v1,0(v0)
  406284:	8fc20020 	lw	v0,32(s8)
  406288:	24420001 	addiu	v0,v0,1
  40628c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:54
        sprintf(pb, "%02x", ptr[nn]);
        pb += 2;
    }
    sprintf(pb++, " ");

    for (nn = 0; nn < len2; nn++) {
  406290:	8fc20018 	lw	v0,24(s8)
  406294:	24420001 	addiu	v0,v0,1
  406298:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:54 (discriminator 1)
  40629c:	8fc30018 	lw	v1,24(s8)
  4062a0:	8fc2001c 	lw	v0,28(s8)
  4062a4:	0062102a 	slt	v0,v1,v0
  4062a8:	1440ffe3 	bnez	v0,406238 <dump_hex+0xc8>
  4062ac:	00000000 	nop
/home_a/ppchen/adb/transport.c:60
        int  c = ptr[nn];
        if (c < 32 || c > 127)
            c = '.';
        *pb++ =  c;
    }
    *pb++ = '\0';
  4062b0:	8fc20020 	lw	v0,32(s8)
  4062b4:	a0400000 	sb	zero,0(v0)
  4062b8:	8fc20020 	lw	v0,32(s8)
  4062bc:	24420001 	addiu	v0,v0,1
  4062c0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:61
    DR("%s\n", buffer);
  4062c4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4062c8:	00000000 	nop
  4062cc:	8c420000 	lw	v0,0(v0)
  4062d0:	afc20028 	sw	v0,40(s8)
  4062d4:	3c020042 	lui	v0,0x42
  4062d8:	244457f0 	addiu	a0,v0,22512
  4062dc:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4062e0:	00000000 	nop
  4062e4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4062e8:	00000000 	nop
  4062ec:	8fc30028 	lw	v1,40(s8)
  4062f0:	ac430000 	sw	v1,0(v0)
  4062f4:	3c020042 	lui	v0,0x42
  4062f8:	8c4357c4 	lw	v1,22468(v0)
  4062fc:	27c2002c 	addiu	v0,s8,44
  406300:	00602021 	move	a0,v1
  406304:	3c030041 	lui	v1,0x41
  406308:	24653628 	addiu	a1,v1,13864
  40630c:	00403021 	move	a2,v0
  406310:	0c1053b4 	jal	414ed0 <fprintf@plt>
  406314:	00000000 	nop
  406318:	3c020042 	lui	v0,0x42
  40631c:	8c4257c4 	lw	v0,22468(v0)
  406320:	00402021 	move	a0,v0
  406324:	0c1053a8 	jal	414ea0 <fflush@plt>
  406328:	00000000 	nop
  40632c:	3c020042 	lui	v0,0x42
  406330:	244457f0 	addiu	a0,v0,22512
  406334:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  406338:	00000000 	nop
  40633c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  406340:	00000000 	nop
  406344:	8fc30028 	lw	v1,40(s8)
  406348:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:62
}
  40634c:	03c0e821 	move	sp,s8
  406350:	8fbf0064 	lw	ra,100(sp)
  406354:	8fbe0060 	lw	s8,96(sp)
  406358:	27bd0068 	addiu	sp,sp,104
  40635c:	03e00008 	jr	ra
  406360:	00000000 	nop

00406364 <kick_transport>:
kick_transport():
/home_a/ppchen/adb/transport.c:67
#endif

void
kick_transport(atransport*  t)
{
  406364:	27bdffd8 	addiu	sp,sp,-40
  406368:	afbf0024 	sw	ra,36(sp)
  40636c:	afbe0020 	sw	s8,32(sp)
  406370:	03a0f021 	move	s8,sp
  406374:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:68
    if (t && !t->kicked)
  406378:	8fc20028 	lw	v0,40(s8)
  40637c:	1040001f 	beqz	v0,4063fc <kick_transport+0x98>
  406380:	00000000 	nop
/home_a/ppchen/adb/transport.c:68 (discriminator 1)
  406384:	8fc20028 	lw	v0,40(s8)
  406388:	8c420060 	lw	v0,96(v0)
  40638c:	1440001b 	bnez	v0,4063fc <kick_transport+0x98>
  406390:	00000000 	nop
/home_a/ppchen/adb/transport.c:72
    {
        int  kicked;

        adb_mutex_lock(&transport_lock);
  406394:	3c020042 	lui	v0,0x42
  406398:	244459b0 	addiu	a0,v0,22960
  40639c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4063a0:	00000000 	nop
/home_a/ppchen/adb/transport.c:73
        kicked = t->kicked;
  4063a4:	8fc20028 	lw	v0,40(s8)
  4063a8:	8c420060 	lw	v0,96(v0)
  4063ac:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:74
        if (!kicked)
  4063b0:	8fc20018 	lw	v0,24(s8)
  4063b4:	14400004 	bnez	v0,4063c8 <kick_transport+0x64>
  4063b8:	00000000 	nop
/home_a/ppchen/adb/transport.c:75
            t->kicked = 1;
  4063bc:	8fc20028 	lw	v0,40(s8)
  4063c0:	24030001 	li	v1,1
  4063c4:	ac430060 	sw	v1,96(v0)
/home_a/ppchen/adb/transport.c:76
        adb_mutex_unlock(&transport_lock);
  4063c8:	3c020042 	lui	v0,0x42
  4063cc:	244459b0 	addiu	a0,v0,22960
  4063d0:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4063d4:	00000000 	nop
/home_a/ppchen/adb/transport.c:78

        if (!kicked)
  4063d8:	8fc20018 	lw	v0,24(s8)
  4063dc:	14400007 	bnez	v0,4063fc <kick_transport+0x98>
  4063e0:	00000000 	nop
/home_a/ppchen/adb/transport.c:79
            t->kick(t);
  4063e4:	8fc20028 	lw	v0,40(s8)
  4063e8:	8c420014 	lw	v0,20(v0)
  4063ec:	8fc40028 	lw	a0,40(s8)
  4063f0:	0040c821 	move	t9,v0
  4063f4:	0320f809 	jalr	t9
  4063f8:	00000000 	nop
/home_a/ppchen/adb/transport.c:81
    }
}
  4063fc:	03c0e821 	move	sp,s8
  406400:	8fbf0024 	lw	ra,36(sp)
  406404:	8fbe0020 	lw	s8,32(sp)
  406408:	27bd0028 	addiu	sp,sp,40
  40640c:	03e00008 	jr	ra
  406410:	00000000 	nop

00406414 <run_transport_disconnects>:
run_transport_disconnects():
/home_a/ppchen/adb/transport.c:85

void
run_transport_disconnects(atransport*  t)
{
  406414:	27bdffd8 	addiu	sp,sp,-40
  406418:	afbf0024 	sw	ra,36(sp)
  40641c:	afbe0020 	sw	s8,32(sp)
  406420:	03a0f021 	move	s8,sp
  406424:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:86
    adisconnect*  dis = t->disconnects.next;
  406428:	8fc20028 	lw	v0,40(s8)
  40642c:	8c42006c 	lw	v0,108(v0)
  406430:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:89


    while (dis != &t->disconnects) {
  406434:	1000000f 	b	406474 <run_transport_disconnects+0x60>
  406438:	00000000 	nop
/home_a/ppchen/adb/transport.c:90
        adisconnect*  next = dis->next;
  40643c:	8fc20018 	lw	v0,24(s8)
  406440:	8c420008 	lw	v0,8(v0)
  406444:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:91
        dis->func( dis->opaque, t );
  406448:	8fc20018 	lw	v0,24(s8)
  40644c:	8c420000 	lw	v0,0(v0)
  406450:	8fc30018 	lw	v1,24(s8)
  406454:	8c630004 	lw	v1,4(v1)
  406458:	00602021 	move	a0,v1
  40645c:	8fc50028 	lw	a1,40(s8)
  406460:	0040c821 	move	t9,v0
  406464:	0320f809 	jalr	t9
  406468:	00000000 	nop
/home_a/ppchen/adb/transport.c:92
        dis = next;
  40646c:	8fc2001c 	lw	v0,28(s8)
  406470:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:89 (discriminator 1)
run_transport_disconnects(atransport*  t)
{
    adisconnect*  dis = t->disconnects.next;


    while (dis != &t->disconnects) {
  406474:	8fc20028 	lw	v0,40(s8)
  406478:	24430064 	addiu	v1,v0,100
  40647c:	8fc20018 	lw	v0,24(s8)
  406480:	1462ffee 	bne	v1,v0,40643c <run_transport_disconnects+0x28>
  406484:	00000000 	nop
/home_a/ppchen/adb/transport.c:94
        adisconnect*  next = dis->next;
        dis->func( dis->opaque, t );
        dis = next;
    }
}
  406488:	03c0e821 	move	sp,s8
  40648c:	8fbf0024 	lw	ra,36(sp)
  406490:	8fbe0020 	lw	s8,32(sp)
  406494:	27bd0028 	addiu	sp,sp,40
  406498:	03e00008 	jr	ra
  40649c:	00000000 	nop

004064a0 <dump_packet>:
dump_packet():
/home_a/ppchen/adb/transport.c:99

#if ADB_TRACE
static void
dump_packet(const char* name, const char* func, apacket* p)
{
  4064a0:	27bdffa8 	addiu	sp,sp,-88
  4064a4:	afbf0054 	sw	ra,84(sp)
  4064a8:	afbe0050 	sw	s8,80(sp)
  4064ac:	03a0f021 	move	s8,sp
  4064b0:	afc40058 	sw	a0,88(s8)
  4064b4:	afc5005c 	sw	a1,92(s8)
  4064b8:	afc60060 	sw	a2,96(s8)
/home_a/ppchen/adb/transport.c:100
    unsigned  command = p->msg.command;
  4064bc:	8fc20060 	lw	v0,96(s8)
  4064c0:	8c42000c 	lw	v0,12(v0)
  4064c4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:101
    int       len     = p->msg.data_length;
  4064c8:	8fc20060 	lw	v0,96(s8)
  4064cc:	8c420018 	lw	v0,24(v0)
  4064d0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:106
    char      cmd[9];
    char      arg0[12], arg1[12];
    int       n;

    for (n = 0; n < 4; n++) {
  4064d4:	afc00018 	sw	zero,24(s8)
  4064d8:	10000018 	b	40653c <dump_packet+0x9c>
  4064dc:	00000000 	nop
/home_a/ppchen/adb/transport.c:107
        int  b = (command >> (n*8)) & 255;
  4064e0:	8fc20018 	lw	v0,24(s8)
  4064e4:	000210c0 	sll	v0,v0,0x3
  4064e8:	8fc3001c 	lw	v1,28(s8)
  4064ec:	00431006 	srlv	v0,v1,v0
  4064f0:	304200ff 	andi	v0,v0,0xff
  4064f4:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/transport.c:108
        if (b < 32 || b >= 127)
  4064f8:	8fc20024 	lw	v0,36(s8)
  4064fc:	28420020 	slti	v0,v0,32
  406500:	14400012 	bnez	v0,40654c <dump_packet+0xac>
  406504:	00000000 	nop
/home_a/ppchen/adb/transport.c:108 (discriminator 1)
  406508:	8fc20024 	lw	v0,36(s8)
  40650c:	2842007f 	slti	v0,v0,127
  406510:	1040000e 	beqz	v0,40654c <dump_packet+0xac>
  406514:	00000000 	nop
/home_a/ppchen/adb/transport.c:110
            break;
        cmd[n] = (char)b;
  406518:	8fc20024 	lw	v0,36(s8)
  40651c:	7c021c20 	seb	v1,v0
  406520:	8fc20018 	lw	v0,24(s8)
  406524:	27c40018 	addiu	a0,s8,24
  406528:	00821021 	addu	v0,a0,v0
  40652c:	a0430010 	sb	v1,16(v0)
/home_a/ppchen/adb/transport.c:106
    int       len     = p->msg.data_length;
    char      cmd[9];
    char      arg0[12], arg1[12];
    int       n;

    for (n = 0; n < 4; n++) {
  406530:	8fc20018 	lw	v0,24(s8)
  406534:	24420001 	addiu	v0,v0,1
  406538:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:106 (discriminator 1)
  40653c:	8fc20018 	lw	v0,24(s8)
  406540:	28420004 	slti	v0,v0,4
  406544:	1440ffe6 	bnez	v0,4064e0 <dump_packet+0x40>
  406548:	00000000 	nop
/home_a/ppchen/adb/transport.c:112
        int  b = (command >> (n*8)) & 255;
        if (b < 32 || b >= 127)
            break;
        cmd[n] = (char)b;
    }
    if (n == 4) {
  40654c:	8fc30018 	lw	v1,24(s8)
  406550:	24020004 	li	v0,4
  406554:	14620004 	bne	v1,v0,406568 <dump_packet+0xc8>
  406558:	00000000 	nop
/home_a/ppchen/adb/transport.c:113
        cmd[4] = 0;
  40655c:	a3c0002c 	sb	zero,44(s8)
  406560:	10000009 	b	406588 <dump_packet+0xe8>
  406564:	00000000 	nop
/home_a/ppchen/adb/transport.c:117
    } else {
        /* There is some non-ASCII name in the command, so dump
            * the hexadecimal value instead */
        snprintf(cmd, sizeof cmd, "%08x", command);
  406568:	27c20028 	addiu	v0,s8,40
  40656c:	00402021 	move	a0,v0
  406570:	24050009 	li	a1,9
  406574:	3c020041 	lui	v0,0x41
  406578:	2446362c 	addiu	a2,v0,13868
  40657c:	8fc7001c 	lw	a3,28(s8)
  406580:	0c105334 	jal	414cd0 <snprintf@plt>
  406584:	00000000 	nop
/home_a/ppchen/adb/transport.c:120
    }

    if (p->msg.arg0 < 256U)
  406588:	8fc20060 	lw	v0,96(s8)
  40658c:	8c420010 	lw	v0,16(v0)
  406590:	2c420100 	sltiu	v0,v0,256
  406594:	1040000d 	beqz	v0,4065cc <dump_packet+0x12c>
  406598:	00000000 	nop
/home_a/ppchen/adb/transport.c:121
        snprintf(arg0, sizeof arg0, "%d", p->msg.arg0);
  40659c:	8fc20060 	lw	v0,96(s8)
  4065a0:	8c420010 	lw	v0,16(v0)
  4065a4:	27c30034 	addiu	v1,s8,52
  4065a8:	00602021 	move	a0,v1
  4065ac:	2405000c 	li	a1,12
  4065b0:	3c030041 	lui	v1,0x41
  4065b4:	24663634 	addiu	a2,v1,13876
  4065b8:	00403821 	move	a3,v0
  4065bc:	0c105334 	jal	414cd0 <snprintf@plt>
  4065c0:	00000000 	nop
  4065c4:	1000000b 	b	4065f4 <dump_packet+0x154>
  4065c8:	00000000 	nop
/home_a/ppchen/adb/transport.c:123
    else
        snprintf(arg0, sizeof arg0, "0x%x", p->msg.arg0);
  4065cc:	8fc20060 	lw	v0,96(s8)
  4065d0:	8c420010 	lw	v0,16(v0)
  4065d4:	27c30034 	addiu	v1,s8,52
  4065d8:	00602021 	move	a0,v1
  4065dc:	2405000c 	li	a1,12
  4065e0:	3c030041 	lui	v1,0x41
  4065e4:	24663638 	addiu	a2,v1,13880
  4065e8:	00403821 	move	a3,v0
  4065ec:	0c105334 	jal	414cd0 <snprintf@plt>
  4065f0:	00000000 	nop
/home_a/ppchen/adb/transport.c:125

    if (p->msg.arg1 < 256U)
  4065f4:	8fc20060 	lw	v0,96(s8)
  4065f8:	8c420014 	lw	v0,20(v0)
  4065fc:	2c420100 	sltiu	v0,v0,256
  406600:	1040000d 	beqz	v0,406638 <dump_packet+0x198>
  406604:	00000000 	nop
/home_a/ppchen/adb/transport.c:126
        snprintf(arg1, sizeof arg1, "%d", p->msg.arg1);
  406608:	8fc20060 	lw	v0,96(s8)
  40660c:	8c420014 	lw	v0,20(v0)
  406610:	27c30040 	addiu	v1,s8,64
  406614:	00602021 	move	a0,v1
  406618:	2405000c 	li	a1,12
  40661c:	3c030041 	lui	v1,0x41
  406620:	24663634 	addiu	a2,v1,13876
  406624:	00403821 	move	a3,v0
  406628:	0c105334 	jal	414cd0 <snprintf@plt>
  40662c:	00000000 	nop
  406630:	1000000b 	b	406660 <dump_packet+0x1c0>
  406634:	00000000 	nop
/home_a/ppchen/adb/transport.c:128
    else
        snprintf(arg1, sizeof arg1, "0x%x", p->msg.arg1);
  406638:	8fc20060 	lw	v0,96(s8)
  40663c:	8c420014 	lw	v0,20(v0)
  406640:	27c30040 	addiu	v1,s8,64
  406644:	00602021 	move	a0,v1
  406648:	2405000c 	li	a1,12
  40664c:	3c030041 	lui	v1,0x41
  406650:	24663638 	addiu	a2,v1,13880
  406654:	00403821 	move	a3,v0
  406658:	0c105334 	jal	414cd0 <snprintf@plt>
  40665c:	00000000 	nop
/home_a/ppchen/adb/transport.c:131


    dump_hex(p->data, len);
  406660:	8fc20060 	lw	v0,96(s8)
  406664:	24430024 	addiu	v1,v0,36
  406668:	8fc20020 	lw	v0,32(s8)
  40666c:	00602021 	move	a0,v1
  406670:	00402821 	move	a1,v0
  406674:	0c10185c 	jal	406170 <dump_hex>
  406678:	00000000 	nop
/home_a/ppchen/adb/transport.c:132
}
  40667c:	03c0e821 	move	sp,s8
  406680:	8fbf0054 	lw	ra,84(sp)
  406684:	8fbe0050 	lw	s8,80(sp)
  406688:	27bd0058 	addiu	sp,sp,88
  40668c:	03e00008 	jr	ra
  406690:	00000000 	nop

00406694 <read_packet>:
read_packet():
/home_a/ppchen/adb/transport.c:137
#endif /* ADB_TRACE */

static int
read_packet(int  fd, const char* name, apacket** ppacket)
{
  406694:	27bdffc8 	addiu	sp,sp,-56
  406698:	afbf0034 	sw	ra,52(sp)
  40669c:	afbe0030 	sw	s8,48(sp)
  4066a0:	03a0f021 	move	s8,sp
  4066a4:	afc40038 	sw	a0,56(s8)
  4066a8:	afc5003c 	sw	a1,60(s8)
  4066ac:	afc60040 	sw	a2,64(s8)
/home_a/ppchen/adb/transport.c:138
    char *p = (char*)ppacket;  /* really read a packet address */
  4066b0:	8fc20040 	lw	v0,64(s8)
  4066b4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:140
    int   r;
    int   len = sizeof(*ppacket);
  4066b8:	24020004 	li	v0,4
  4066bc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:143
    char  buff[8];

    if (!name) {
  4066c0:	8fc2003c 	lw	v0,60(s8)
  4066c4:	1440002e 	bnez	v0,406780 <read_packet+0xec>
  4066c8:	00000000 	nop
/home_a/ppchen/adb/transport.c:144
        snprintf(buff, sizeof buff, "fd=%d", fd);
  4066cc:	27c20024 	addiu	v0,s8,36
  4066d0:	00402021 	move	a0,v0
  4066d4:	24050008 	li	a1,8
  4066d8:	3c020041 	lui	v0,0x41
  4066dc:	24463640 	addiu	a2,v0,13888
  4066e0:	8fc70038 	lw	a3,56(s8)
  4066e4:	0c105334 	jal	414cd0 <snprintf@plt>
  4066e8:	00000000 	nop
/home_a/ppchen/adb/transport.c:145
        name = buff;
  4066ec:	27c20024 	addiu	v0,s8,36
  4066f0:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/transport.c:147
    }
    while(len > 0) {
  4066f4:	10000022 	b	406780 <read_packet+0xec>
  4066f8:	00000000 	nop
/home_a/ppchen/adb/transport.c:149

        r = adb_read(fd, p, len);
  4066fc:	8fc2001c 	lw	v0,28(s8)
  406700:	8fc40038 	lw	a0,56(s8)
  406704:	8fc50018 	lw	a1,24(s8)
  406708:	00403021 	move	a2,v0
  40670c:	0c1017c6 	jal	405f18 <adb_read>
  406710:	00000000 	nop
  406714:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:150
        if(r > 0) {
  406718:	8fc20020 	lw	v0,32(s8)
  40671c:	1840000b 	blez	v0,40674c <read_packet+0xb8>
  406720:	00000000 	nop
/home_a/ppchen/adb/transport.c:152
	
            len -= r;
  406724:	8fc3001c 	lw	v1,28(s8)
  406728:	8fc20020 	lw	v0,32(s8)
  40672c:	00621023 	subu	v0,v1,v0
  406730:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:153
            p   += r;
  406734:	8fc20020 	lw	v0,32(s8)
  406738:	8fc30018 	lw	v1,24(s8)
  40673c:	00621021 	addu	v0,v1,v0
  406740:	afc20018 	sw	v0,24(s8)
  406744:	1000000e 	b	406780 <read_packet+0xec>
  406748:	00000000 	nop
/home_a/ppchen/adb/transport.c:156
        } else {
          
            if((r < 0) && (errno == EINTR)) continue;
  40674c:	8fc20020 	lw	v0,32(s8)
  406750:	04410007 	bgez	v0,406770 <read_packet+0xdc>
  406754:	00000000 	nop
/home_a/ppchen/adb/transport.c:156 (discriminator 1)
  406758:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40675c:	00000000 	nop
  406760:	8c430000 	lw	v1,0(v0)
  406764:	24020004 	li	v0,4
  406768:	10620004 	beq	v1,v0,40677c <read_packet+0xe8>
  40676c:	00000000 	nop
/home_a/ppchen/adb/transport.c:157
            return -1;
  406770:	2402ffff 	li	v0,-1
  406774:	10000013 	b	4067c4 <read_packet+0x130>
  406778:	00000000 	nop
/home_a/ppchen/adb/transport.c:156
	
            len -= r;
            p   += r;
        } else {
          
            if((r < 0) && (errno == EINTR)) continue;
  40677c:	00000000 	nop
/home_a/ppchen/adb/transport.c:147 (discriminator 1)

    if (!name) {
        snprintf(buff, sizeof buff, "fd=%d", fd);
        name = buff;
    }
    while(len > 0) {
  406780:	8fc2001c 	lw	v0,28(s8)
  406784:	1c40ffdd 	bgtz	v0,4066fc <read_packet+0x68>
  406788:	00000000 	nop
/home_a/ppchen/adb/transport.c:162
            return -1;
        }
    }

#if ADB_TRACE
    if (ADB_TRACING) {
  40678c:	3c020042 	lui	v0,0x42
  406790:	8c4257b4 	lw	v0,22452(v0)
  406794:	30420008 	andi	v0,v0,0x8
  406798:	10400009 	beqz	v0,4067c0 <read_packet+0x12c>
  40679c:	00000000 	nop
/home_a/ppchen/adb/transport.c:163
        dump_packet(name, "from remote", *ppacket);
  4067a0:	8fc20040 	lw	v0,64(s8)
  4067a4:	8c420000 	lw	v0,0(v0)
  4067a8:	8fc4003c 	lw	a0,60(s8)
  4067ac:	3c030041 	lui	v1,0x41
  4067b0:	24653648 	addiu	a1,v1,13896
  4067b4:	00403021 	move	a2,v0
  4067b8:	0c101928 	jal	4064a0 <dump_packet>
  4067bc:	00000000 	nop
/home_a/ppchen/adb/transport.c:166
    }
#endif
    return 0;
  4067c0:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:167
}
  4067c4:	03c0e821 	move	sp,s8
  4067c8:	8fbf0034 	lw	ra,52(sp)
  4067cc:	8fbe0030 	lw	s8,48(sp)
  4067d0:	27bd0038 	addiu	sp,sp,56
  4067d4:	03e00008 	jr	ra
  4067d8:	00000000 	nop

004067dc <write_packet>:
write_packet():
/home_a/ppchen/adb/transport.c:171

static int
write_packet(int  fd, const char* name, apacket** ppacket)
{
  4067dc:	27bdffc8 	addiu	sp,sp,-56
  4067e0:	afbf0034 	sw	ra,52(sp)
  4067e4:	afbe0030 	sw	s8,48(sp)
  4067e8:	03a0f021 	move	s8,sp
  4067ec:	afc40038 	sw	a0,56(s8)
  4067f0:	afc5003c 	sw	a1,60(s8)
  4067f4:	afc60040 	sw	a2,64(s8)
/home_a/ppchen/adb/transport.c:173

    char *p = (char*) ppacket;  /* we really write the packet address */
  4067f8:	8fc20040 	lw	v0,64(s8)
  4067fc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:174
    int r, len = sizeof(ppacket);
  406800:	24020004 	li	v0,4
  406804:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:177
    char buff[8];

    if (!name) {
  406808:	8fc2003c 	lw	v0,60(s8)
  40680c:	1440000b 	bnez	v0,40683c <write_packet+0x60>
  406810:	00000000 	nop
/home_a/ppchen/adb/transport.c:178
        snprintf(buff, sizeof buff, "fd=%d", fd);
  406814:	27c20024 	addiu	v0,s8,36
  406818:	00402021 	move	a0,v0
  40681c:	24050008 	li	a1,8
  406820:	3c020041 	lui	v0,0x41
  406824:	24463640 	addiu	a2,v0,13888
  406828:	8fc70038 	lw	a3,56(s8)
  40682c:	0c105334 	jal	414cd0 <snprintf@plt>
  406830:	00000000 	nop
/home_a/ppchen/adb/transport.c:179
        name = buff;
  406834:	27c20024 	addiu	v0,s8,36
  406838:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/transport.c:183
    }

#if ADB_TRACE
    if (ADB_TRACING) {
  40683c:	3c020042 	lui	v0,0x42
  406840:	8c4257b4 	lw	v0,22452(v0)
  406844:	30420008 	andi	v0,v0,0x8
  406848:	10400009 	beqz	v0,406870 <write_packet+0x94>
  40684c:	00000000 	nop
/home_a/ppchen/adb/transport.c:184
        dump_packet(name, "to remote", *ppacket);
  406850:	8fc20040 	lw	v0,64(s8)
  406854:	8c420000 	lw	v0,0(v0)
  406858:	8fc4003c 	lw	a0,60(s8)
  40685c:	3c030041 	lui	v1,0x41
  406860:	24653654 	addiu	a1,v1,13908
  406864:	00403021 	move	a2,v0
  406868:	0c101928 	jal	4064a0 <dump_packet>
  40686c:	00000000 	nop
/home_a/ppchen/adb/transport.c:187
    }
#endif
    len = sizeof(ppacket);
  406870:	24020004 	li	v0,4
  406874:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:188
    while(len > 0) {
  406878:	10000022 	b	406904 <write_packet+0x128>
  40687c:	00000000 	nop
/home_a/ppchen/adb/transport.c:190

        r = adb_write(fd, p, len);
  406880:	8fc2001c 	lw	v0,28(s8)
  406884:	8fc40038 	lw	a0,56(s8)
  406888:	8fc50018 	lw	a1,24(s8)
  40688c:	00403021 	move	a2,v0
  406890:	0c1017d8 	jal	405f60 <adb_write>
  406894:	00000000 	nop
  406898:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:192

        if(r > 0) {
  40689c:	8fc20020 	lw	v0,32(s8)
  4068a0:	1840000b 	blez	v0,4068d0 <write_packet+0xf4>
  4068a4:	00000000 	nop
/home_a/ppchen/adb/transport.c:193
            len -= r;
  4068a8:	8fc3001c 	lw	v1,28(s8)
  4068ac:	8fc20020 	lw	v0,32(s8)
  4068b0:	00621023 	subu	v0,v1,v0
  4068b4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:194
            p += r;
  4068b8:	8fc20020 	lw	v0,32(s8)
  4068bc:	8fc30018 	lw	v1,24(s8)
  4068c0:	00621021 	addu	v0,v1,v0
  4068c4:	afc20018 	sw	v0,24(s8)
  4068c8:	1000000e 	b	406904 <write_packet+0x128>
  4068cc:	00000000 	nop
/home_a/ppchen/adb/transport.c:197
        } else {
         
            if((r < 0) && (errno == EINTR)) continue;
  4068d0:	8fc20020 	lw	v0,32(s8)
  4068d4:	04410007 	bgez	v0,4068f4 <write_packet+0x118>
  4068d8:	00000000 	nop
/home_a/ppchen/adb/transport.c:197 (discriminator 1)
  4068dc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4068e0:	00000000 	nop
  4068e4:	8c430000 	lw	v1,0(v0)
  4068e8:	24020004 	li	v0,4
  4068ec:	10620004 	beq	v1,v0,406900 <write_packet+0x124>
  4068f0:	00000000 	nop
/home_a/ppchen/adb/transport.c:198
            return -1;
  4068f4:	2402ffff 	li	v0,-1
  4068f8:	10000006 	b	406914 <write_packet+0x138>
  4068fc:	00000000 	nop
/home_a/ppchen/adb/transport.c:197
        if(r > 0) {
            len -= r;
            p += r;
        } else {
         
            if((r < 0) && (errno == EINTR)) continue;
  406900:	00000000 	nop
/home_a/ppchen/adb/transport.c:188 (discriminator 1)
    if (ADB_TRACING) {
        dump_packet(name, "to remote", *ppacket);
    }
#endif
    len = sizeof(ppacket);
    while(len > 0) {
  406904:	8fc2001c 	lw	v0,28(s8)
  406908:	1c40ffdd 	bgtz	v0,406880 <write_packet+0xa4>
  40690c:	00000000 	nop
/home_a/ppchen/adb/transport.c:201
         
            if((r < 0) && (errno == EINTR)) continue;
            return -1;
        }
    }
    return 0;
  406910:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:202
}
  406914:	03c0e821 	move	sp,s8
  406918:	8fbf0034 	lw	ra,52(sp)
  40691c:	8fbe0030 	lw	s8,48(sp)
  406920:	27bd0038 	addiu	sp,sp,56
  406924:	03e00008 	jr	ra
  406928:	00000000 	nop

0040692c <transport_socket_events>:
transport_socket_events():
/home_a/ppchen/adb/transport.c:205

static void transport_socket_events(int fd, unsigned events, void *_t)
{
  40692c:	27bdffd8 	addiu	sp,sp,-40
  406930:	afbf0024 	sw	ra,36(sp)
  406934:	afbe0020 	sw	s8,32(sp)
  406938:	03a0f021 	move	s8,sp
  40693c:	afc40028 	sw	a0,40(s8)
  406940:	afc5002c 	sw	a1,44(s8)
  406944:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/transport.c:206
    atransport *t = _t;
  406948:	8fc20030 	lw	v0,48(s8)
  40694c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:208
 
    if(events & FDE_READ){
  406950:	8fc2002c 	lw	v0,44(s8)
  406954:	30420001 	andi	v0,v0,0x1
  406958:	10400011 	beqz	v0,4069a0 <transport_socket_events+0x74>
  40695c:	00000000 	nop
/home_a/ppchen/adb/transport.c:209
        apacket *p = 0;
  406960:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:210
        if(read_packet(fd, t->serial, &p)){
  406964:	8fc20018 	lw	v0,24(s8)
  406968:	8c430054 	lw	v1,84(v0)
  40696c:	27c2001c 	addiu	v0,s8,28
  406970:	8fc40028 	lw	a0,40(s8)
  406974:	00602821 	move	a1,v1
  406978:	00403021 	move	a2,v0
  40697c:	0c1019a5 	jal	406694 <read_packet>
  406980:	00000000 	nop
  406984:	14400006 	bnez	v0,4069a0 <transport_socket_events+0x74>
  406988:	00000000 	nop
/home_a/ppchen/adb/transport.c:213
          
        } else {
            handle_packet(p, (atransport *) _t);
  40698c:	8fc2001c 	lw	v0,28(s8)
  406990:	00402021 	move	a0,v0
  406994:	8fc50030 	lw	a1,48(s8)
  406998:	0c1008cf 	jal	40233c <handle_packet>
  40699c:	00000000 	nop
/home_a/ppchen/adb/transport.c:216
        }
    }
}
  4069a0:	03c0e821 	move	sp,s8
  4069a4:	8fbf0024 	lw	ra,36(sp)
  4069a8:	8fbe0020 	lw	s8,32(sp)
  4069ac:	27bd0028 	addiu	sp,sp,40
  4069b0:	03e00008 	jr	ra
  4069b4:	00000000 	nop

004069b8 <send_packet>:
send_packet():
/home_a/ppchen/adb/transport.c:219

void send_packet(apacket *p, atransport *t)
{
  4069b8:	27bdffd0 	addiu	sp,sp,-48
  4069bc:	afbf002c 	sw	ra,44(sp)
  4069c0:	afbe0028 	sw	s8,40(sp)
  4069c4:	03a0f021 	move	s8,sp
  4069c8:	afc40030 	sw	a0,48(s8)
  4069cc:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/transport.c:224
    unsigned char *x;
    unsigned sum;
    unsigned count;
 
    p->msg.magic = p->msg.command ^ 0xffffffff;
  4069d0:	8fc20030 	lw	v0,48(s8)
  4069d4:	8fc30030 	lw	v1,48(s8)
  4069d8:	8c63000c 	lw	v1,12(v1)
  4069dc:	00031827 	nor	v1,zero,v1
  4069e0:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport.c:226

    count = p->msg.data_length;
  4069e4:	8fc20030 	lw	v0,48(s8)
  4069e8:	8c420018 	lw	v0,24(v0)
  4069ec:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:227
    x = (unsigned char *) p->data;
  4069f0:	8fc20030 	lw	v0,48(s8)
  4069f4:	24420024 	addiu	v0,v0,36
  4069f8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:228
    sum = 0;
  4069fc:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:229
    while(count-- > 0){
  406a00:	10000009 	b	406a28 <send_packet+0x70>
  406a04:	00000000 	nop
/home_a/ppchen/adb/transport.c:230
        sum += *x++;
  406a08:	8fc20018 	lw	v0,24(s8)
  406a0c:	90420000 	lbu	v0,0(v0)
  406a10:	8fc3001c 	lw	v1,28(s8)
  406a14:	00621021 	addu	v0,v1,v0
  406a18:	afc2001c 	sw	v0,28(s8)
  406a1c:	8fc20018 	lw	v0,24(s8)
  406a20:	24420001 	addiu	v0,v0,1
  406a24:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:229 (discriminator 1)
    p->msg.magic = p->msg.command ^ 0xffffffff;

    count = p->msg.data_length;
    x = (unsigned char *) p->data;
    sum = 0;
    while(count-- > 0){
  406a28:	8fc20020 	lw	v0,32(s8)
  406a2c:	0002102b 	sltu	v0,zero,v0
  406a30:	304200ff 	andi	v0,v0,0xff
  406a34:	8fc30020 	lw	v1,32(s8)
  406a38:	2463ffff 	addiu	v1,v1,-1
  406a3c:	afc30020 	sw	v1,32(s8)
  406a40:	1440fff1 	bnez	v0,406a08 <send_packet+0x50>
  406a44:	00000000 	nop
/home_a/ppchen/adb/transport.c:232
        sum += *x++;
    }
    p->msg.data_check = sum;
  406a48:	8fc20030 	lw	v0,48(s8)
  406a4c:	8fc3001c 	lw	v1,28(s8)
  406a50:	ac43001c 	sw	v1,28(v0)
/home_a/ppchen/adb/transport.c:236

    print_packet("send", p);

    if (t == NULL) {
  406a54:	8fc20034 	lw	v0,52(s8)
  406a58:	14400008 	bnez	v0,406a7c <send_packet+0xc4>
  406a5c:	00000000 	nop
/home_a/ppchen/adb/transport.c:239
    
        // Zap errno because print_packet() and other stuff have errno effect.
        errno = 0;
  406a60:	0c1052c0 	jal	414b00 <__errno_location@plt>
  406a64:	00000000 	nop
  406a68:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/transport.c:240
        fatal_errno("Transport is null");
  406a6c:	3c020041 	lui	v0,0x41
  406a70:	24443660 	addiu	a0,v0,13920
  406a74:	0c1006cb 	jal	401b2c <fatal_errno>
  406a78:	00000000 	nop
/home_a/ppchen/adb/transport.c:243
    }

    if(write_packet(t->transport_socket, t->serial, &p)){
  406a7c:	8fc20034 	lw	v0,52(s8)
  406a80:	8c43001c 	lw	v1,28(v0)
  406a84:	8fc20034 	lw	v0,52(s8)
  406a88:	8c420054 	lw	v0,84(v0)
  406a8c:	00602021 	move	a0,v1
  406a90:	00402821 	move	a1,v0
  406a94:	27c60030 	addiu	a2,s8,48
  406a98:	0c1019f7 	jal	4067dc <write_packet>
  406a9c:	00000000 	nop
  406aa0:	10400005 	beqz	v0,406ab8 <send_packet+0x100>
  406aa4:	00000000 	nop
/home_a/ppchen/adb/transport.c:244
        fatal_errno("cannot enqueue packet on transport socket");
  406aa8:	3c020041 	lui	v0,0x41
  406aac:	24443674 	addiu	a0,v0,13940
  406ab0:	0c1006cb 	jal	401b2c <fatal_errno>
  406ab4:	00000000 	nop
/home_a/ppchen/adb/transport.c:246
    }
}
  406ab8:	03c0e821 	move	sp,s8
  406abc:	8fbf002c 	lw	ra,44(sp)
  406ac0:	8fbe0028 	lw	s8,40(sp)
  406ac4:	27bd0030 	addiu	sp,sp,48
  406ac8:	03e00008 	jr	ra
  406acc:	00000000 	nop

00406ad0 <output_thread>:
output_thread():
/home_a/ppchen/adb/transport.c:262
** threads exit, but the input thread will kick the transport
** on its way out to disconnect the underlying device.
*/

static void *output_thread(void *_t)
{
  406ad0:	27bdffd8 	addiu	sp,sp,-40
  406ad4:	afbf0024 	sw	ra,36(sp)
  406ad8:	afbe0020 	sw	s8,32(sp)
  406adc:	03a0f021 	move	s8,sp
  406ae0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:263
    atransport *t = _t;
  406ae4:	8fc20028 	lw	v0,40(s8)
  406ae8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:267
    apacket *p;
   

    p = get_apacket();
  406aec:	0c10076f 	jal	401dbc <get_apacket>
  406af0:	00000000 	nop
  406af4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:268
    p->msg.command = A_SYNC;
  406af8:	8fc2001c 	lw	v0,28(s8)
  406afc:	3c03434e 	lui	v1,0x434e
  406b00:	34635953 	ori	v1,v1,0x5953
  406b04:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:269
    p->msg.arg0 = 1;
  406b08:	8fc2001c 	lw	v0,28(s8)
  406b0c:	24030001 	li	v1,1
  406b10:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport.c:270
    p->msg.arg1 = ++(t->sync_token);
  406b14:	8fc2001c 	lw	v0,28(s8)
  406b18:	8fc30018 	lw	v1,24(s8)
  406b1c:	8c630040 	lw	v1,64(v1)
  406b20:	24640001 	addiu	a0,v1,1
  406b24:	8fc30018 	lw	v1,24(s8)
  406b28:	ac640040 	sw	a0,64(v1)
  406b2c:	8fc30018 	lw	v1,24(s8)
  406b30:	8c630040 	lw	v1,64(v1)
  406b34:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport.c:271
    p->msg.magic = A_SYNC ^ 0xffffffff;
  406b38:	8fc2001c 	lw	v0,28(s8)
  406b3c:	3c03bcb1 	lui	v1,0xbcb1
  406b40:	3463a6ac 	ori	v1,v1,0xa6ac
  406b44:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport.c:273
   
    if(write_packet(t->fd, t->serial, &p)) {
  406b48:	8fc20018 	lw	v0,24(s8)
  406b4c:	8c440018 	lw	a0,24(v0)
  406b50:	8fc20018 	lw	v0,24(s8)
  406b54:	8c430054 	lw	v1,84(v0)
  406b58:	27c2001c 	addiu	v0,s8,28
  406b5c:	00602821 	move	a1,v1
  406b60:	00403021 	move	a2,v0
  406b64:	0c1019f7 	jal	4067dc <write_packet>
  406b68:	00000000 	nop
  406b6c:	1040000f 	beqz	v0,406bac <output_thread+0xdc>
  406b70:	00000000 	nop
/home_a/ppchen/adb/transport.c:274
        put_apacket(p);
  406b74:	8fc2001c 	lw	v0,28(s8)
  406b78:	00402021 	move	a0,v0
  406b7c:	0c10078a 	jal	401e28 <put_apacket>
  406b80:	00000000 	nop
/home_a/ppchen/adb/transport.c:275
        printf("%s: failed to write SYNC packet\n", t->serial);
  406b84:	8fc20018 	lw	v0,24(s8)
  406b88:	8c420054 	lw	v0,84(v0)
  406b8c:	3c030041 	lui	v1,0x41
  406b90:	246436a0 	addiu	a0,v1,13984
  406b94:	00402821 	move	a1,v0
  406b98:	0c105400 	jal	415000 <printf@plt>
  406b9c:	00000000 	nop
/home_a/ppchen/adb/transport.c:276
        goto oops;
  406ba0:	10000043 	b	406cb0 <output_thread+0x1e0>
  406ba4:	00000000 	nop
/home_a/ppchen/adb/transport.c:296
        } else {
        
            put_apacket(p);
            break;
        }
    }
  406ba8:	00000000 	nop
/home_a/ppchen/adb/transport.c:281
        goto oops;
    }


    for(;;) {
        p = get_apacket();
  406bac:	0c10076f 	jal	401dbc <get_apacket>
  406bb0:	00000000 	nop
  406bb4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:284

    
        if(t->read_from_remote(p, t) == 0){
  406bb8:	8fc20018 	lw	v0,24(s8)
  406bbc:	8c420008 	lw	v0,8(v0)
  406bc0:	8fc3001c 	lw	v1,28(s8)
  406bc4:	00602021 	move	a0,v1
  406bc8:	8fc50018 	lw	a1,24(s8)
  406bcc:	0040c821 	move	t9,v0
  406bd0:	0320f809 	jalr	t9
  406bd4:	00000000 	nop
  406bd8:	14400012 	bnez	v0,406c24 <output_thread+0x154>
  406bdc:	00000000 	nop
/home_a/ppchen/adb/transport.c:286

            if(write_packet(t->fd, t->serial, &p)){
  406be0:	8fc20018 	lw	v0,24(s8)
  406be4:	8c440018 	lw	a0,24(v0)
  406be8:	8fc20018 	lw	v0,24(s8)
  406bec:	8c430054 	lw	v1,84(v0)
  406bf0:	27c2001c 	addiu	v0,s8,28
  406bf4:	00602821 	move	a1,v1
  406bf8:	00403021 	move	a2,v0
  406bfc:	0c1019f7 	jal	4067dc <write_packet>
  406c00:	00000000 	nop
  406c04:	1040ffe8 	beqz	v0,406ba8 <output_thread+0xd8>
  406c08:	00000000 	nop
/home_a/ppchen/adb/transport.c:287
                put_apacket(p);
  406c0c:	8fc2001c 	lw	v0,28(s8)
  406c10:	00402021 	move	a0,v0
  406c14:	0c10078a 	jal	401e28 <put_apacket>
  406c18:	00000000 	nop
/home_a/ppchen/adb/transport.c:289

                goto oops;
  406c1c:	10000024 	b	406cb0 <output_thread+0x1e0>
  406c20:	00000000 	nop
/home_a/ppchen/adb/transport.c:293
            }
        } else {
        
            put_apacket(p);
  406c24:	8fc2001c 	lw	v0,28(s8)
  406c28:	00402021 	move	a0,v0
  406c2c:	0c10078a 	jal	401e28 <put_apacket>
  406c30:	00000000 	nop
/home_a/ppchen/adb/transport.c:294
            break;
  406c34:	00000000 	nop
/home_a/ppchen/adb/transport.c:298
        }
    }

    p = get_apacket();
  406c38:	0c10076f 	jal	401dbc <get_apacket>
  406c3c:	00000000 	nop
  406c40:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:299
    p->msg.command = A_SYNC;
  406c44:	8fc2001c 	lw	v0,28(s8)
  406c48:	3c03434e 	lui	v1,0x434e
  406c4c:	34635953 	ori	v1,v1,0x5953
  406c50:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:300
    p->msg.arg0 = 0;
  406c54:	8fc2001c 	lw	v0,28(s8)
  406c58:	ac400010 	sw	zero,16(v0)
/home_a/ppchen/adb/transport.c:301
    p->msg.arg1 = 0;
  406c5c:	8fc2001c 	lw	v0,28(s8)
  406c60:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/transport.c:302
    p->msg.magic = A_SYNC ^ 0xffffffff;
  406c64:	8fc2001c 	lw	v0,28(s8)
  406c68:	3c03bcb1 	lui	v1,0xbcb1
  406c6c:	3463a6ac 	ori	v1,v1,0xa6ac
  406c70:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport.c:303
    if(write_packet(t->fd, t->serial, &p)) {
  406c74:	8fc20018 	lw	v0,24(s8)
  406c78:	8c440018 	lw	a0,24(v0)
  406c7c:	8fc20018 	lw	v0,24(s8)
  406c80:	8c430054 	lw	v1,84(v0)
  406c84:	27c2001c 	addiu	v0,s8,28
  406c88:	00602821 	move	a1,v1
  406c8c:	00403021 	move	a2,v0
  406c90:	0c1019f7 	jal	4067dc <write_packet>
  406c94:	00000000 	nop
  406c98:	10400005 	beqz	v0,406cb0 <output_thread+0x1e0>
  406c9c:	00000000 	nop
/home_a/ppchen/adb/transport.c:304
        put_apacket(p);
  406ca0:	8fc2001c 	lw	v0,28(s8)
  406ca4:	00402021 	move	a0,v0
  406ca8:	0c10078a 	jal	401e28 <put_apacket>
  406cac:	00000000 	nop
/home_a/ppchen/adb/transport.c:309
     
    }

oops:
    kick_transport(t);
  406cb0:	8fc40018 	lw	a0,24(s8)
  406cb4:	0c1018d9 	jal	406364 <kick_transport>
  406cb8:	00000000 	nop
/home_a/ppchen/adb/transport.c:310
    transport_unref(t);
  406cbc:	8fc40018 	lw	a0,24(s8)
  406cc0:	0c101d42 	jal	407508 <transport_unref>
  406cc4:	00000000 	nop
/home_a/ppchen/adb/transport.c:311
    return 0;
  406cc8:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:312
}
  406ccc:	03c0e821 	move	sp,s8
  406cd0:	8fbf0024 	lw	ra,36(sp)
  406cd4:	8fbe0020 	lw	s8,32(sp)
  406cd8:	27bd0028 	addiu	sp,sp,40
  406cdc:	03e00008 	jr	ra
  406ce0:	00000000 	nop

00406ce4 <input_thread>:
input_thread():
/home_a/ppchen/adb/transport.c:315

static void *input_thread(void *_t)
{
  406ce4:	27bdffd0 	addiu	sp,sp,-48
  406ce8:	afbf002c 	sw	ra,44(sp)
  406cec:	afbe0028 	sw	s8,40(sp)
  406cf0:	03a0f021 	move	s8,sp
  406cf4:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/transport.c:316
    atransport *t = _t;
  406cf8:	8fc20030 	lw	v0,48(s8)
  406cfc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:318
    apacket *p;
    int active = 0;
  406d00:	afc00018 	sw	zero,24(s8)
/home_a/ppchen/adb/transport.c:323



    for(;;){
        if(read_packet(t->fd, t->serial, &p)) {
  406d04:	8fc2001c 	lw	v0,28(s8)
  406d08:	8c440018 	lw	a0,24(v0)
  406d0c:	8fc2001c 	lw	v0,28(s8)
  406d10:	8c430054 	lw	v1,84(v0)
  406d14:	27c20020 	addiu	v0,s8,32
  406d18:	00602821 	move	a1,v1
  406d1c:	00403021 	move	a2,v0
  406d20:	0c1019a5 	jal	406694 <read_packet>
  406d24:	00000000 	nop
  406d28:	1440002c 	bnez	v0,406ddc <input_thread+0xf8>
  406d2c:	00000000 	nop
/home_a/ppchen/adb/transport.c:328
  
            break;
        }
		
        if(p->msg.command == A_SYNC){
  406d30:	8fc20020 	lw	v0,32(s8)
  406d34:	8c43000c 	lw	v1,12(v0)
  406d38:	3c02434e 	lui	v0,0x434e
  406d3c:	34425953 	ori	v0,v0,0x5953
  406d40:	14620015 	bne	v1,v0,406d98 <input_thread+0xb4>
  406d44:	00000000 	nop
/home_a/ppchen/adb/transport.c:330
	
            if(p->msg.arg0 == 0) {
  406d48:	8fc20020 	lw	v0,32(s8)
  406d4c:	8c420010 	lw	v0,16(v0)
  406d50:	14400007 	bnez	v0,406d70 <input_thread+0x8c>
  406d54:	00000000 	nop
/home_a/ppchen/adb/transport.c:332

                put_apacket(p);
  406d58:	8fc20020 	lw	v0,32(s8)
  406d5c:	00402021 	move	a0,v0
  406d60:	0c10078a 	jal	401e28 <put_apacket>
  406d64:	00000000 	nop
/home_a/ppchen/adb/transport.c:333
                break;
  406d68:	1000001d 	b	406de0 <input_thread+0xfc>
  406d6c:	00000000 	nop
/home_a/ppchen/adb/transport.c:335
            } else {
                if(p->msg.arg1 == t->sync_token) {
  406d70:	8fc20020 	lw	v0,32(s8)
  406d74:	8c430014 	lw	v1,20(v0)
  406d78:	8fc2001c 	lw	v0,28(s8)
  406d7c:	8c420040 	lw	v0,64(v0)
  406d80:	14620010 	bne	v1,v0,406dc4 <input_thread+0xe0>
  406d84:	00000000 	nop
/home_a/ppchen/adb/transport.c:337
                
                    active = 1;
  406d88:	24020001 	li	v0,1
  406d8c:	afc20018 	sw	v0,24(s8)
  406d90:	1000000c 	b	406dc4 <input_thread+0xe0>
  406d94:	00000000 	nop
/home_a/ppchen/adb/transport.c:344
              
                }
            }
        } else {
         
            if(active) {
  406d98:	8fc20018 	lw	v0,24(s8)
  406d9c:	10400009 	beqz	v0,406dc4 <input_thread+0xe0>
  406da0:	00000000 	nop
/home_a/ppchen/adb/transport.c:346
              
                t->write_to_remote(p, t);
  406da4:	8fc2001c 	lw	v0,28(s8)
  406da8:	8c42000c 	lw	v0,12(v0)
  406dac:	8fc30020 	lw	v1,32(s8)
  406db0:	00602021 	move	a0,v1
  406db4:	8fc5001c 	lw	a1,28(s8)
  406db8:	0040c821 	move	t9,v0
  406dbc:	0320f809 	jalr	t9
  406dc0:	00000000 	nop
/home_a/ppchen/adb/transport.c:352
            } else {
                
            }
        }

        put_apacket(p);
  406dc4:	8fc20020 	lw	v0,32(s8)
  406dc8:	00402021 	move	a0,v0
  406dcc:	0c10078a 	jal	401e28 <put_apacket>
  406dd0:	00000000 	nop
/home_a/ppchen/adb/transport.c:353
    }
  406dd4:	1000ffcb 	b	406d04 <input_thread+0x20>
  406dd8:	00000000 	nop
/home_a/ppchen/adb/transport.c:325


    for(;;){
        if(read_packet(t->fd, t->serial, &p)) {
  
            break;
  406ddc:	00000000 	nop
/home_a/ppchen/adb/transport.c:357
        put_apacket(p);
    }

    // this is necessary to avoid a race condition that occured when a transport closes
    // while a client socket is still active.
    close_all_sockets(t);
  406de0:	8fc4001c 	lw	a0,28(s8)
  406de4:	0c1025ed 	jal	4097b4 <close_all_sockets>
  406de8:	00000000 	nop
/home_a/ppchen/adb/transport.c:360

  
    kick_transport(t);
  406dec:	8fc4001c 	lw	a0,28(s8)
  406df0:	0c1018d9 	jal	406364 <kick_transport>
  406df4:	00000000 	nop
/home_a/ppchen/adb/transport.c:361
    transport_unref(t);
  406df8:	8fc4001c 	lw	a0,28(s8)
  406dfc:	0c101d42 	jal	407508 <transport_unref>
  406e00:	00000000 	nop
/home_a/ppchen/adb/transport.c:362
    return 0;
  406e04:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:363
}
  406e08:	03c0e821 	move	sp,s8
  406e0c:	8fbf002c 	lw	ra,44(sp)
  406e10:	8fbe0028 	lw	s8,40(sp)
  406e14:	27bd0030 	addiu	sp,sp,48
  406e18:	03e00008 	jr	ra
  406e1c:	00000000 	nop

00406e20 <update_transports>:
update_transports():
/home_a/ppchen/adb/transport.c:514
        tracker = next;
    }
}
#else
void  update_transports(void)
{
  406e20:	27bdfff8 	addiu	sp,sp,-8
  406e24:	afbe0004 	sw	s8,4(sp)
  406e28:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/transport.c:516
    // nothing to do on the device side
}
  406e2c:	03c0e821 	move	sp,s8
  406e30:	8fbe0004 	lw	s8,4(sp)
  406e34:	27bd0008 	addiu	sp,sp,8
  406e38:	03e00008 	jr	ra
  406e3c:	00000000 	nop

00406e40 <transport_read_action>:
transport_read_action():
/home_a/ppchen/adb/transport.c:528
    int         action;
};

static int
transport_read_action(int  fd, struct tmsg*  m)
{
  406e40:	27bdffd0 	addiu	sp,sp,-48
  406e44:	afbf002c 	sw	ra,44(sp)
  406e48:	afbe0028 	sw	s8,40(sp)
  406e4c:	03a0f021 	move	s8,sp
  406e50:	afc40030 	sw	a0,48(s8)
  406e54:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/transport.c:529
    char *p   = (char*)m;
  406e58:	8fc20034 	lw	v0,52(s8)
  406e5c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:530
    int   len = sizeof(*m);
  406e60:	24020008 	li	v0,8
  406e64:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:533
    int   r;

    while(len > 0) {
  406e68:	10000022 	b	406ef4 <transport_read_action+0xb4>
  406e6c:	00000000 	nop
/home_a/ppchen/adb/transport.c:535

        r = adb_read(fd, p, len);
  406e70:	8fc2001c 	lw	v0,28(s8)
  406e74:	8fc40030 	lw	a0,48(s8)
  406e78:	8fc50018 	lw	a1,24(s8)
  406e7c:	00403021 	move	a2,v0
  406e80:	0c1017c6 	jal	405f18 <adb_read>
  406e84:	00000000 	nop
  406e88:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:536
        if(r > 0) {
  406e8c:	8fc20020 	lw	v0,32(s8)
  406e90:	1840000b 	blez	v0,406ec0 <transport_read_action+0x80>
  406e94:	00000000 	nop
/home_a/ppchen/adb/transport.c:538

            len -= r;
  406e98:	8fc3001c 	lw	v1,28(s8)
  406e9c:	8fc20020 	lw	v0,32(s8)
  406ea0:	00621023 	subu	v0,v1,v0
  406ea4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:539
            p   += r;
  406ea8:	8fc20020 	lw	v0,32(s8)
  406eac:	8fc30018 	lw	v1,24(s8)
  406eb0:	00621021 	addu	v0,v1,v0
  406eb4:	afc20018 	sw	v0,24(s8)
  406eb8:	1000000e 	b	406ef4 <transport_read_action+0xb4>
  406ebc:	00000000 	nop
/home_a/ppchen/adb/transport.c:541
        } else {
            if((r < 0) && (errno == EINTR)) continue;
  406ec0:	8fc20020 	lw	v0,32(s8)
  406ec4:	04410007 	bgez	v0,406ee4 <transport_read_action+0xa4>
  406ec8:	00000000 	nop
/home_a/ppchen/adb/transport.c:541 (discriminator 1)
  406ecc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  406ed0:	00000000 	nop
  406ed4:	8c430000 	lw	v1,0(v0)
  406ed8:	24020004 	li	v0,4
  406edc:	10620004 	beq	v1,v0,406ef0 <transport_read_action+0xb0>
  406ee0:	00000000 	nop
/home_a/ppchen/adb/transport.c:543

            return -1;
  406ee4:	2402ffff 	li	v0,-1
  406ee8:	10000006 	b	406f04 <transport_read_action+0xc4>
  406eec:	00000000 	nop
/home_a/ppchen/adb/transport.c:541
        if(r > 0) {

            len -= r;
            p   += r;
        } else {
            if((r < 0) && (errno == EINTR)) continue;
  406ef0:	00000000 	nop
/home_a/ppchen/adb/transport.c:533 (discriminator 1)
{
    char *p   = (char*)m;
    int   len = sizeof(*m);
    int   r;

    while(len > 0) {
  406ef4:	8fc2001c 	lw	v0,28(s8)
  406ef8:	1c40ffdd 	bgtz	v0,406e70 <transport_read_action+0x30>
  406efc:	00000000 	nop
/home_a/ppchen/adb/transport.c:546
            if((r < 0) && (errno == EINTR)) continue;

            return -1;
        }
    }
    return 0;
  406f00:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:547
}
  406f04:	03c0e821 	move	sp,s8
  406f08:	8fbf002c 	lw	ra,44(sp)
  406f0c:	8fbe0028 	lw	s8,40(sp)
  406f10:	27bd0030 	addiu	sp,sp,48
  406f14:	03e00008 	jr	ra
  406f18:	00000000 	nop

00406f1c <transport_write_action>:
transport_write_action():
/home_a/ppchen/adb/transport.c:551

static int
transport_write_action(int  fd, struct tmsg*  m)
{
  406f1c:	27bdffd0 	addiu	sp,sp,-48
  406f20:	afbf002c 	sw	ra,44(sp)
  406f24:	afbe0028 	sw	s8,40(sp)
  406f28:	03a0f021 	move	s8,sp
  406f2c:	afc40030 	sw	a0,48(s8)
  406f30:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/transport.c:552
    char *p   = (char*)m;
  406f34:	8fc20034 	lw	v0,52(s8)
  406f38:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:553
    int   len = sizeof(*m);
  406f3c:	24020008 	li	v0,8
  406f40:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:556
    int   r;
  
    while(len > 0) {
  406f44:	10000022 	b	406fd0 <transport_write_action+0xb4>
  406f48:	00000000 	nop
/home_a/ppchen/adb/transport.c:558
	
        r = adb_write(fd, p, len);
  406f4c:	8fc2001c 	lw	v0,28(s8)
  406f50:	8fc40030 	lw	a0,48(s8)
  406f54:	8fc50018 	lw	a1,24(s8)
  406f58:	00403021 	move	a2,v0
  406f5c:	0c1017d8 	jal	405f60 <adb_write>
  406f60:	00000000 	nop
  406f64:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:559
        if(r > 0) {
  406f68:	8fc20020 	lw	v0,32(s8)
  406f6c:	1840000b 	blez	v0,406f9c <transport_write_action+0x80>
  406f70:	00000000 	nop
/home_a/ppchen/adb/transport.c:560
            len -= r;
  406f74:	8fc3001c 	lw	v1,28(s8)
  406f78:	8fc20020 	lw	v0,32(s8)
  406f7c:	00621023 	subu	v0,v1,v0
  406f80:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:561
            p   += r;
  406f84:	8fc20020 	lw	v0,32(s8)
  406f88:	8fc30018 	lw	v1,24(s8)
  406f8c:	00621021 	addu	v0,v1,v0
  406f90:	afc20018 	sw	v0,24(s8)
  406f94:	1000000e 	b	406fd0 <transport_write_action+0xb4>
  406f98:	00000000 	nop
/home_a/ppchen/adb/transport.c:563
        } else {
            if((r < 0) && (errno == EINTR)) continue;
  406f9c:	8fc20020 	lw	v0,32(s8)
  406fa0:	04410007 	bgez	v0,406fc0 <transport_write_action+0xa4>
  406fa4:	00000000 	nop
/home_a/ppchen/adb/transport.c:563 (discriminator 1)
  406fa8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  406fac:	00000000 	nop
  406fb0:	8c430000 	lw	v1,0(v0)
  406fb4:	24020004 	li	v0,4
  406fb8:	10620004 	beq	v1,v0,406fcc <transport_write_action+0xb0>
  406fbc:	00000000 	nop
/home_a/ppchen/adb/transport.c:565

            return -1;
  406fc0:	2402ffff 	li	v0,-1
  406fc4:	10000006 	b	406fe0 <transport_write_action+0xc4>
  406fc8:	00000000 	nop
/home_a/ppchen/adb/transport.c:563
        r = adb_write(fd, p, len);
        if(r > 0) {
            len -= r;
            p   += r;
        } else {
            if((r < 0) && (errno == EINTR)) continue;
  406fcc:	00000000 	nop
/home_a/ppchen/adb/transport.c:556 (discriminator 1)
{
    char *p   = (char*)m;
    int   len = sizeof(*m);
    int   r;
  
    while(len > 0) {
  406fd0:	8fc2001c 	lw	v0,28(s8)
  406fd4:	1c40ffdd 	bgtz	v0,406f4c <transport_write_action+0x30>
  406fd8:	00000000 	nop
/home_a/ppchen/adb/transport.c:568
            if((r < 0) && (errno == EINTR)) continue;

            return -1;
        }
    }
    return 0;
  406fdc:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:569
}
  406fe0:	03c0e821 	move	sp,s8
  406fe4:	8fbf002c 	lw	ra,44(sp)
  406fe8:	8fbe0028 	lw	s8,40(sp)
  406fec:	27bd0030 	addiu	sp,sp,48
  406ff0:	03e00008 	jr	ra
  406ff4:	00000000 	nop

00406ff8 <transport_registration_func>:
transport_registration_func():
/home_a/ppchen/adb/transport.c:572

static void transport_registration_func(int _fd, unsigned ev, void *data)
{
  406ff8:	27bdffc0 	addiu	sp,sp,-64
  406ffc:	afbf003c 	sw	ra,60(sp)
  407000:	afbe0038 	sw	s8,56(sp)
  407004:	03a0f021 	move	s8,sp
  407008:	afc40040 	sw	a0,64(s8)
  40700c:	afc50044 	sw	a1,68(s8)
  407010:	afc60048 	sw	a2,72(s8)
/home_a/ppchen/adb/transport.c:580
    adb_thread_t input_thread_ptr;
    int s[2];
    atransport *t;
 

    if(!(ev & FDE_READ)) {
  407014:	8fc20044 	lw	v0,68(s8)
  407018:	30420001 	andi	v0,v0,0x1
  40701c:	104000a8 	beqz	v0,4072c0 <transport_registration_func+0x2c8>
  407020:	00000000 	nop
/home_a/ppchen/adb/transport.c:584
        return;
    }

    if(transport_read_action(_fd, &m)) {
  407024:	27c2001c 	addiu	v0,s8,28
  407028:	8fc40040 	lw	a0,64(s8)
  40702c:	00402821 	move	a1,v0
  407030:	0c101b90 	jal	406e40 <transport_read_action>
  407034:	00000000 	nop
  407038:	10400005 	beqz	v0,407050 <transport_registration_func+0x58>
  40703c:	00000000 	nop
/home_a/ppchen/adb/transport.c:586

        fatal_errno("cannot read transport registration socket");
  407040:	3c020041 	lui	v0,0x41
  407044:	244436c4 	addiu	a0,v0,14020
  407048:	0c1006cb 	jal	401b2c <fatal_errno>
  40704c:	00000000 	nop
/home_a/ppchen/adb/transport.c:589
    }

    t = m.transport;
  407050:	8fc2001c 	lw	v0,28(s8)
  407054:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:591

    if(m.action == 0){
  407058:	8fc20020 	lw	v0,32(s8)
  40705c:	1440003e 	bnez	v0,407158 <transport_registration_func+0x160>
  407060:	00000000 	nop
/home_a/ppchen/adb/transport.c:598
   

            /* IMPORTANT: the remove closes one half of the
            ** socket pair.  The close closes the other half.
            */
        fdevent_remove(&(t->transport_fde));
  407064:	8fc20018 	lw	v0,24(s8)
  407068:	24420020 	addiu	v0,v0,32
  40706c:	00402021 	move	a0,v0
  407070:	0c1016c0 	jal	405b00 <fdevent_remove>
  407074:	00000000 	nop
/home_a/ppchen/adb/transport.c:599
        adb_close(t->fd);
  407078:	8fc20018 	lw	v0,24(s8)
  40707c:	8c420018 	lw	v0,24(v0)
  407080:	00402021 	move	a0,v0
  407084:	0c1017b8 	jal	405ee0 <adb_close>
  407088:	00000000 	nop
/home_a/ppchen/adb/transport.c:601

        adb_mutex_lock(&transport_lock);
  40708c:	3c020042 	lui	v0,0x42
  407090:	244459b0 	addiu	a0,v0,22960
  407094:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  407098:	00000000 	nop
/home_a/ppchen/adb/transport.c:602
        t->next->prev = t->prev;
  40709c:	8fc20018 	lw	v0,24(s8)
  4070a0:	8c420000 	lw	v0,0(v0)
  4070a4:	8fc30018 	lw	v1,24(s8)
  4070a8:	8c630004 	lw	v1,4(v1)
  4070ac:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/transport.c:603
        t->prev->next = t->next;
  4070b0:	8fc20018 	lw	v0,24(s8)
  4070b4:	8c420004 	lw	v0,4(v0)
  4070b8:	8fc30018 	lw	v1,24(s8)
  4070bc:	8c630000 	lw	v1,0(v1)
  4070c0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:604
        adb_mutex_unlock(&transport_lock);
  4070c4:	3c020042 	lui	v0,0x42
  4070c8:	244459b0 	addiu	a0,v0,22960
  4070cc:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4070d0:	00000000 	nop
/home_a/ppchen/adb/transport.c:606

        run_transport_disconnects(t);
  4070d4:	8fc40018 	lw	a0,24(s8)
  4070d8:	0c101905 	jal	406414 <run_transport_disconnects>
  4070dc:	00000000 	nop
/home_a/ppchen/adb/transport.c:608

        if (t->product)
  4070e0:	8fc20018 	lw	v0,24(s8)
  4070e4:	8c420058 	lw	v0,88(v0)
  4070e8:	10400006 	beqz	v0,407104 <transport_registration_func+0x10c>
  4070ec:	00000000 	nop
/home_a/ppchen/adb/transport.c:609
            free(t->product);
  4070f0:	8fc20018 	lw	v0,24(s8)
  4070f4:	8c420058 	lw	v0,88(v0)
  4070f8:	00402021 	move	a0,v0
  4070fc:	0c1053e4 	jal	414f90 <free@plt>
  407100:	00000000 	nop
/home_a/ppchen/adb/transport.c:610
        if (t->serial)
  407104:	8fc20018 	lw	v0,24(s8)
  407108:	8c420054 	lw	v0,84(v0)
  40710c:	10400006 	beqz	v0,407128 <transport_registration_func+0x130>
  407110:	00000000 	nop
/home_a/ppchen/adb/transport.c:611
            free(t->serial);
  407114:	8fc20018 	lw	v0,24(s8)
  407118:	8c420054 	lw	v0,84(v0)
  40711c:	00402021 	move	a0,v0
  407120:	0c1053e4 	jal	414f90 <free@plt>
  407124:	00000000 	nop
/home_a/ppchen/adb/transport.c:613

        memset(t,0xee,sizeof(atransport));
  407128:	8fc40018 	lw	a0,24(s8)
  40712c:	240500ee 	li	a1,238
  407130:	24060074 	li	a2,116
  407134:	0c1053ac 	jal	414eb0 <memset@plt>
  407138:	00000000 	nop
/home_a/ppchen/adb/transport.c:614
        free(t);
  40713c:	8fc40018 	lw	a0,24(s8)
  407140:	0c1053e4 	jal	414f90 <free@plt>
  407144:	00000000 	nop
/home_a/ppchen/adb/transport.c:616

        update_transports();
  407148:	0c101b88 	jal	406e20 <update_transports>
  40714c:	00000000 	nop
  407150:	1000005b 	b	4072c0 <transport_registration_func+0x2c8>
  407154:	00000000 	nop
/home_a/ppchen/adb/transport.c:621
        return;
    }

    /* don't create transport threads for inaccessible devices */
    if (t->connection_state != CS_NOPERM) {
  407158:	8fc20018 	lw	v0,24(s8)
  40715c:	8c430044 	lw	v1,68(v0)
  407160:	24020005 	li	v0,5
  407164:	10620033 	beq	v1,v0,407234 <transport_registration_func+0x23c>
  407168:	00000000 	nop
/home_a/ppchen/adb/transport.c:624
        /* initial references are the two threads */
	
        t->ref_count = 2;
  40716c:	8fc20018 	lw	v0,24(s8)
  407170:	24030002 	li	v1,2
  407174:	ac43003c 	sw	v1,60(v0)
/home_a/ppchen/adb/transport.c:626

        if(adb_socketpair(s)) {
  407178:	27c2002c 	addiu	v0,s8,44
  40717c:	00402021 	move	a0,v0
  407180:	0c101822 	jal	406088 <adb_socketpair>
  407184:	00000000 	nop
  407188:	10400005 	beqz	v0,4071a0 <transport_registration_func+0x1a8>
  40718c:	00000000 	nop
/home_a/ppchen/adb/transport.c:627
            fatal_errno("cannot open transport socketpair");
  407190:	3c020041 	lui	v0,0x41
  407194:	244436f0 	addiu	a0,v0,14064
  407198:	0c1006cb 	jal	401b2c <fatal_errno>
  40719c:	00000000 	nop
/home_a/ppchen/adb/transport.c:632
        }

   

        t->transport_socket = s[0];
  4071a0:	8fc3002c 	lw	v1,44(s8)
  4071a4:	8fc20018 	lw	v0,24(s8)
  4071a8:	ac43001c 	sw	v1,28(v0)
/home_a/ppchen/adb/transport.c:633
        t->fd = s[1];
  4071ac:	8fc30030 	lw	v1,48(s8)
  4071b0:	8fc20018 	lw	v0,24(s8)
  4071b4:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/transport.c:636

    
        fdevent_install(&(t->transport_fde),
  4071b8:	8fc20018 	lw	v0,24(s8)
  4071bc:	24430020 	addiu	v1,v0,32
/home_a/ppchen/adb/transport.c:637
                        t->transport_socket,
  4071c0:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/transport.c:636

        t->transport_socket = s[0];
        t->fd = s[1];

    
        fdevent_install(&(t->transport_fde),
  4071c4:	8c42001c 	lw	v0,28(v0)
  4071c8:	00602021 	move	a0,v1
  4071cc:	00402821 	move	a1,v0
  4071d0:	3c020040 	lui	v0,0x40
  4071d4:	2446692c 	addiu	a2,v0,26924
  4071d8:	8fc70018 	lw	a3,24(s8)
  4071dc:	0c101689 	jal	405a24 <fdevent_install>
  4071e0:	00000000 	nop
/home_a/ppchen/adb/transport.c:642
                        t->transport_socket,
                        transport_socket_events,
                        t);

    
        fdevent_set(&(t->transport_fde), FDE_READ);
  4071e4:	8fc20018 	lw	v0,24(s8)
  4071e8:	24420020 	addiu	v0,v0,32
  4071ec:	00402021 	move	a0,v0
  4071f0:	24050001 	li	a1,1
  4071f4:	0c1016e7 	jal	405b9c <fdevent_set>
  4071f8:	00000000 	nop
/home_a/ppchen/adb/transport.c:644

	 if(adb_thread_create(&output_thread_ptr, output_thread, t)){
  4071fc:	27c20024 	addiu	v0,s8,36
  407200:	00402021 	move	a0,v0
  407204:	3c020040 	lui	v0,0x40
  407208:	24456ad0 	addiu	a1,v0,27344
  40720c:	8fc60018 	lw	a2,24(s8)
  407210:	0c1017ea 	jal	405fa8 <adb_thread_create>
  407214:	00000000 	nop
/home_a/ppchen/adb/transport.c:648
         
	 }
	 
	 if(adb_thread_create(&input_thread_ptr, input_thread, t)){
  407218:	27c20028 	addiu	v0,s8,40
  40721c:	00402021 	move	a0,v0
  407220:	3c020040 	lui	v0,0x40
  407224:	24456ce4 	addiu	a1,v0,27876
  407228:	8fc60018 	lw	a2,24(s8)
  40722c:	0c1017ea 	jal	405fa8 <adb_thread_create>
  407230:	00000000 	nop
/home_a/ppchen/adb/transport.c:655
        }

    }

        /* put us on the master device list */
    adb_mutex_lock(&transport_lock);
  407234:	3c020042 	lui	v0,0x42
  407238:	244459b0 	addiu	a0,v0,22960
  40723c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  407240:	00000000 	nop
/home_a/ppchen/adb/transport.c:656
    t->next = &transport_list;
  407244:	8fc20018 	lw	v0,24(s8)
  407248:	3c030042 	lui	v1,0x42
  40724c:	24635650 	addiu	v1,v1,22096
  407250:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:657
    t->prev = transport_list.prev;
  407254:	3c020042 	lui	v0,0x42
  407258:	24425650 	addiu	v0,v0,22096
  40725c:	8c430004 	lw	v1,4(v0)
  407260:	8fc20018 	lw	v0,24(s8)
  407264:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/transport.c:658
    t->next->prev = t;
  407268:	8fc20018 	lw	v0,24(s8)
  40726c:	8c420000 	lw	v0,0(v0)
  407270:	8fc30018 	lw	v1,24(s8)
  407274:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/transport.c:659
    t->prev->next = t;
  407278:	8fc20018 	lw	v0,24(s8)
  40727c:	8c420004 	lw	v0,4(v0)
  407280:	8fc30018 	lw	v1,24(s8)
  407284:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:660
    adb_mutex_unlock(&transport_lock);
  407288:	3c020042 	lui	v0,0x42
  40728c:	244459b0 	addiu	a0,v0,22960
  407290:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  407294:	00000000 	nop
/home_a/ppchen/adb/transport.c:662

    t->disconnects.next = t->disconnects.prev = &t->disconnects;
  407298:	8fc20018 	lw	v0,24(s8)
  40729c:	24430064 	addiu	v1,v0,100
  4072a0:	8fc20018 	lw	v0,24(s8)
  4072a4:	ac430070 	sw	v1,112(v0)
  4072a8:	8fc20018 	lw	v0,24(s8)
  4072ac:	8c430070 	lw	v1,112(v0)
  4072b0:	8fc20018 	lw	v0,24(s8)
  4072b4:	ac43006c 	sw	v1,108(v0)
/home_a/ppchen/adb/transport.c:664

    update_transports();
  4072b8:	0c101b88 	jal	406e20 <update_transports>
  4072bc:	00000000 	nop
/home_a/ppchen/adb/transport.c:665
}
  4072c0:	03c0e821 	move	sp,s8
  4072c4:	8fbf003c 	lw	ra,60(sp)
  4072c8:	8fbe0038 	lw	s8,56(sp)
  4072cc:	27bd0040 	addiu	sp,sp,64
  4072d0:	03e00008 	jr	ra
  4072d4:	00000000 	nop

004072d8 <init_transport_registration>:
init_transport_registration():
/home_a/ppchen/adb/transport.c:668

void init_transport_registration(void)
{
  4072d8:	27bdffd0 	addiu	sp,sp,-48
  4072dc:	afbf002c 	sw	ra,44(sp)
  4072e0:	afbe0028 	sw	s8,40(sp)
  4072e4:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/transport.c:670
    int s[2];
    int ret = adb_socketpair(s);
  4072e8:	27c2001c 	addiu	v0,s8,28
  4072ec:	00402021 	move	a0,v0
  4072f0:	0c101822 	jal	406088 <adb_socketpair>
  4072f4:	00000000 	nop
  4072f8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:672

    if(ret){
  4072fc:	8fc20018 	lw	v0,24(s8)
  407300:	10400005 	beqz	v0,407318 <init_transport_registration+0x40>
  407304:	00000000 	nop
/home_a/ppchen/adb/transport.c:673
        fatal_errno("cannot open transport registration socketpair");
  407308:	3c020041 	lui	v0,0x41
  40730c:	24443714 	addiu	a0,v0,14100
  407310:	0c1006cb 	jal	401b2c <fatal_errno>
  407314:	00000000 	nop
/home_a/ppchen/adb/transport.c:678
    }

 

    transport_registration_send = s[0];
  407318:	8fc3001c 	lw	v1,28(s8)
  40731c:	3c020042 	lui	v0,0x42
  407320:	ac4356c4 	sw	v1,22212(v0)
/home_a/ppchen/adb/transport.c:679
    transport_registration_recv = s[1];
  407324:	8fc30020 	lw	v1,32(s8)
  407328:	3c020042 	lui	v0,0x42
  40732c:	ac4356c8 	sw	v1,22216(v0)
/home_a/ppchen/adb/transport.c:681

    fdevent_install(&transport_registration_fde,
  407330:	3c020042 	lui	v0,0x42
  407334:	8c4256c8 	lw	v0,22216(v0)
  407338:	3c030042 	lui	v1,0x42
  40733c:	246459c8 	addiu	a0,v1,22984
  407340:	00402821 	move	a1,v0
  407344:	3c020040 	lui	v0,0x40
  407348:	24466ff8 	addiu	a2,v0,28664
  40734c:	00003821 	move	a3,zero
  407350:	0c101689 	jal	405a24 <fdevent_install>
  407354:	00000000 	nop
/home_a/ppchen/adb/transport.c:686
                    transport_registration_recv,
                    transport_registration_func,
                    0);

    fdevent_set(&transport_registration_fde, FDE_READ);
  407358:	3c020042 	lui	v0,0x42
  40735c:	244459c8 	addiu	a0,v0,22984
  407360:	24050001 	li	a1,1
  407364:	0c1016e7 	jal	405b9c <fdevent_set>
  407368:	00000000 	nop
/home_a/ppchen/adb/transport.c:687
}
  40736c:	03c0e821 	move	sp,s8
  407370:	8fbf002c 	lw	ra,44(sp)
  407374:	8fbe0028 	lw	s8,40(sp)
  407378:	27bd0030 	addiu	sp,sp,48
  40737c:	03e00008 	jr	ra
  407380:	00000000 	nop

00407384 <register_transport>:
register_transport():
/home_a/ppchen/adb/transport.c:691

/* the fdevent select pump is single threaded */
static void register_transport(atransport *transport)
{
  407384:	27bdffd8 	addiu	sp,sp,-40
  407388:	afbf0024 	sw	ra,36(sp)
  40738c:	afbe0020 	sw	s8,32(sp)
  407390:	03a0f021 	move	s8,sp
  407394:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:693
    tmsg m;
    m.transport = transport;
  407398:	8fc20028 	lw	v0,40(s8)
  40739c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:694
    m.action = 1;
  4073a0:	24020001 	li	v0,1
  4073a4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:697


    if(transport_write_action(transport_registration_send, &m)) {
  4073a8:	3c020042 	lui	v0,0x42
  4073ac:	8c4256c4 	lw	v0,22212(v0)
  4073b0:	00402021 	move	a0,v0
  4073b4:	27c20018 	addiu	v0,s8,24
  4073b8:	00402821 	move	a1,v0
  4073bc:	0c101bc7 	jal	406f1c <transport_write_action>
  4073c0:	00000000 	nop
  4073c4:	10400005 	beqz	v0,4073dc <register_transport+0x58>
  4073c8:	00000000 	nop
/home_a/ppchen/adb/transport.c:698
        fatal_errno("cannot write transport registration socket\n");
  4073cc:	3c020041 	lui	v0,0x41
  4073d0:	24443744 	addiu	a0,v0,14148
  4073d4:	0c1006cb 	jal	401b2c <fatal_errno>
  4073d8:	00000000 	nop
/home_a/ppchen/adb/transport.c:700
    }
}
  4073dc:	03c0e821 	move	sp,s8
  4073e0:	8fbf0024 	lw	ra,36(sp)
  4073e4:	8fbe0020 	lw	s8,32(sp)
  4073e8:	27bd0028 	addiu	sp,sp,40
  4073ec:	03e00008 	jr	ra
  4073f0:	00000000 	nop

004073f4 <remove_transport>:
remove_transport():
/home_a/ppchen/adb/transport.c:703

static void remove_transport(atransport *transport)
{
  4073f4:	27bdffd8 	addiu	sp,sp,-40
  4073f8:	afbf0024 	sw	ra,36(sp)
  4073fc:	afbe0020 	sw	s8,32(sp)
  407400:	03a0f021 	move	s8,sp
  407404:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:705
    tmsg m;
    m.transport = transport;
  407408:	8fc20028 	lw	v0,40(s8)
  40740c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:706
    m.action = 0;
  407410:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:708

    if(transport_write_action(transport_registration_send, &m)) {
  407414:	3c020042 	lui	v0,0x42
  407418:	8c4256c4 	lw	v0,22212(v0)
  40741c:	00402021 	move	a0,v0
  407420:	27c20018 	addiu	v0,s8,24
  407424:	00402821 	move	a1,v0
  407428:	0c101bc7 	jal	406f1c <transport_write_action>
  40742c:	00000000 	nop
  407430:	10400005 	beqz	v0,407448 <remove_transport+0x54>
  407434:	00000000 	nop
/home_a/ppchen/adb/transport.c:709
        fatal_errno("cannot write transport registration socket\n");
  407438:	3c020041 	lui	v0,0x41
  40743c:	24443744 	addiu	a0,v0,14148
  407440:	0c1006cb 	jal	401b2c <fatal_errno>
  407444:	00000000 	nop
/home_a/ppchen/adb/transport.c:711
    }
}
  407448:	03c0e821 	move	sp,s8
  40744c:	8fbf0024 	lw	ra,36(sp)
  407450:	8fbe0020 	lw	s8,32(sp)
  407454:	27bd0028 	addiu	sp,sp,40
  407458:	03e00008 	jr	ra
  40745c:	00000000 	nop

00407460 <transport_unref_locked>:
transport_unref_locked():
/home_a/ppchen/adb/transport.c:715


static void transport_unref_locked(atransport *t)
{
  407460:	27bdffe0 	addiu	sp,sp,-32
  407464:	afbf001c 	sw	ra,28(sp)
  407468:	afbe0018 	sw	s8,24(sp)
  40746c:	03a0f021 	move	s8,sp
  407470:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport.c:716
    t->ref_count--;
  407474:	8fc20020 	lw	v0,32(s8)
  407478:	8c42003c 	lw	v0,60(v0)
  40747c:	2443ffff 	addiu	v1,v0,-1
  407480:	8fc20020 	lw	v0,32(s8)
  407484:	ac43003c 	sw	v1,60(v0)
/home_a/ppchen/adb/transport.c:717
    if (t->ref_count == 0) {
  407488:	8fc20020 	lw	v0,32(s8)
  40748c:	8c42003c 	lw	v0,60(v0)
  407490:	14400017 	bnez	v0,4074f0 <transport_unref_locked+0x90>
  407494:	00000000 	nop
/home_a/ppchen/adb/transport.c:719
     
        if (!t->kicked) {
  407498:	8fc20020 	lw	v0,32(s8)
  40749c:	8c420060 	lw	v0,96(v0)
  4074a0:	1440000a 	bnez	v0,4074cc <transport_unref_locked+0x6c>
  4074a4:	00000000 	nop
/home_a/ppchen/adb/transport.c:720
            t->kicked = 1;
  4074a8:	8fc20020 	lw	v0,32(s8)
  4074ac:	24030001 	li	v1,1
  4074b0:	ac430060 	sw	v1,96(v0)
/home_a/ppchen/adb/transport.c:721
            t->kick(t);
  4074b4:	8fc20020 	lw	v0,32(s8)
  4074b8:	8c420014 	lw	v0,20(v0)
  4074bc:	8fc40020 	lw	a0,32(s8)
  4074c0:	0040c821 	move	t9,v0
  4074c4:	0320f809 	jalr	t9
  4074c8:	00000000 	nop
/home_a/ppchen/adb/transport.c:723
        }
        t->close(t);
  4074cc:	8fc20020 	lw	v0,32(s8)
  4074d0:	8c420010 	lw	v0,16(v0)
  4074d4:	8fc40020 	lw	a0,32(s8)
  4074d8:	0040c821 	move	t9,v0
  4074dc:	0320f809 	jalr	t9
  4074e0:	00000000 	nop
/home_a/ppchen/adb/transport.c:724
        remove_transport(t);
  4074e4:	8fc40020 	lw	a0,32(s8)
  4074e8:	0c101cfd 	jal	4073f4 <remove_transport>
  4074ec:	00000000 	nop
/home_a/ppchen/adb/transport.c:728
    } else {
        
    }
}
  4074f0:	03c0e821 	move	sp,s8
  4074f4:	8fbf001c 	lw	ra,28(sp)
  4074f8:	8fbe0018 	lw	s8,24(sp)
  4074fc:	27bd0020 	addiu	sp,sp,32
  407500:	03e00008 	jr	ra
  407504:	00000000 	nop

00407508 <transport_unref>:
transport_unref():
/home_a/ppchen/adb/transport.c:731

static void transport_unref(atransport *t)
{
  407508:	27bdffe0 	addiu	sp,sp,-32
  40750c:	afbf001c 	sw	ra,28(sp)
  407510:	afbe0018 	sw	s8,24(sp)
  407514:	03a0f021 	move	s8,sp
  407518:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport.c:732
    if (t) {
  40751c:	8fc20020 	lw	v0,32(s8)
  407520:	1040000c 	beqz	v0,407554 <transport_unref+0x4c>
  407524:	00000000 	nop
/home_a/ppchen/adb/transport.c:733
        adb_mutex_lock(&transport_lock);
  407528:	3c020042 	lui	v0,0x42
  40752c:	244459b0 	addiu	a0,v0,22960
  407530:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  407534:	00000000 	nop
/home_a/ppchen/adb/transport.c:734
        transport_unref_locked(t);
  407538:	8fc40020 	lw	a0,32(s8)
  40753c:	0c101d18 	jal	407460 <transport_unref_locked>
  407540:	00000000 	nop
/home_a/ppchen/adb/transport.c:735
        adb_mutex_unlock(&transport_lock);
  407544:	3c020042 	lui	v0,0x42
  407548:	244459b0 	addiu	a0,v0,22960
  40754c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  407550:	00000000 	nop
/home_a/ppchen/adb/transport.c:737
    }
}
  407554:	03c0e821 	move	sp,s8
  407558:	8fbf001c 	lw	ra,28(sp)
  40755c:	8fbe0018 	lw	s8,24(sp)
  407560:	27bd0020 	addiu	sp,sp,32
  407564:	03e00008 	jr	ra
  407568:	00000000 	nop

0040756c <add_transport_disconnect>:
add_transport_disconnect():
/home_a/ppchen/adb/transport.c:740

void add_transport_disconnect(atransport*  t, adisconnect*  dis)
{
  40756c:	27bdffe0 	addiu	sp,sp,-32
  407570:	afbf001c 	sw	ra,28(sp)
  407574:	afbe0018 	sw	s8,24(sp)
  407578:	03a0f021 	move	s8,sp
  40757c:	afc40020 	sw	a0,32(s8)
  407580:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/transport.c:741
    adb_mutex_lock(&transport_lock);
  407584:	3c020042 	lui	v0,0x42
  407588:	244459b0 	addiu	a0,v0,22960
  40758c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  407590:	00000000 	nop
/home_a/ppchen/adb/transport.c:742
    dis->next       = &t->disconnects;
  407594:	8fc20020 	lw	v0,32(s8)
  407598:	24430064 	addiu	v1,v0,100
  40759c:	8fc20024 	lw	v0,36(s8)
  4075a0:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport.c:743
    dis->prev       = dis->next->prev;
  4075a4:	8fc20024 	lw	v0,36(s8)
  4075a8:	8c420008 	lw	v0,8(v0)
  4075ac:	8c43000c 	lw	v1,12(v0)
  4075b0:	8fc20024 	lw	v0,36(s8)
  4075b4:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:744
    dis->prev->next = dis;
  4075b8:	8fc20024 	lw	v0,36(s8)
  4075bc:	8c42000c 	lw	v0,12(v0)
  4075c0:	8fc30024 	lw	v1,36(s8)
  4075c4:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport.c:745
    dis->next->prev = dis;
  4075c8:	8fc20024 	lw	v0,36(s8)
  4075cc:	8c420008 	lw	v0,8(v0)
  4075d0:	8fc30024 	lw	v1,36(s8)
  4075d4:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:746
    adb_mutex_unlock(&transport_lock);
  4075d8:	3c020042 	lui	v0,0x42
  4075dc:	244459b0 	addiu	a0,v0,22960
  4075e0:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4075e4:	00000000 	nop
/home_a/ppchen/adb/transport.c:747
}
  4075e8:	03c0e821 	move	sp,s8
  4075ec:	8fbf001c 	lw	ra,28(sp)
  4075f0:	8fbe0018 	lw	s8,24(sp)
  4075f4:	27bd0020 	addiu	sp,sp,32
  4075f8:	03e00008 	jr	ra
  4075fc:	00000000 	nop

00407600 <remove_transport_disconnect>:
remove_transport_disconnect():
/home_a/ppchen/adb/transport.c:750

void remove_transport_disconnect(atransport*  t, adisconnect*  dis)
{
  407600:	27bdfff8 	addiu	sp,sp,-8
  407604:	afbe0004 	sw	s8,4(sp)
  407608:	03a0f021 	move	s8,sp
  40760c:	afc40008 	sw	a0,8(s8)
  407610:	afc5000c 	sw	a1,12(s8)
/home_a/ppchen/adb/transport.c:751
    dis->prev->next = dis->next;
  407614:	8fc2000c 	lw	v0,12(s8)
  407618:	8c42000c 	lw	v0,12(v0)
  40761c:	8fc3000c 	lw	v1,12(s8)
  407620:	8c630008 	lw	v1,8(v1)
  407624:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport.c:752
    dis->next->prev = dis->prev;
  407628:	8fc2000c 	lw	v0,12(s8)
  40762c:	8c420008 	lw	v0,8(v0)
  407630:	8fc3000c 	lw	v1,12(s8)
  407634:	8c63000c 	lw	v1,12(v1)
  407638:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:753
    dis->next = dis->prev = dis;
  40763c:	8fc2000c 	lw	v0,12(s8)
  407640:	8fc3000c 	lw	v1,12(s8)
  407644:	ac43000c 	sw	v1,12(v0)
  407648:	8fc2000c 	lw	v0,12(s8)
  40764c:	8c43000c 	lw	v1,12(v0)
  407650:	8fc2000c 	lw	v0,12(s8)
  407654:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport.c:754
}
  407658:	03c0e821 	move	sp,s8
  40765c:	8fbe0004 	lw	s8,4(sp)
  407660:	27bd0008 	addiu	sp,sp,8
  407664:	03e00008 	jr	ra
  407668:	00000000 	nop

0040766c <acquire_one_transport>:
acquire_one_transport():
/home_a/ppchen/adb/transport.c:758


atransport *acquire_one_transport(int state, transport_type ttype, const char* serial, char** error_out)
{
  40766c:	27bdffd0 	addiu	sp,sp,-48
  407670:	afbf002c 	sw	ra,44(sp)
  407674:	afbe0028 	sw	s8,40(sp)
  407678:	03a0f021 	move	s8,sp
  40767c:	afc40030 	sw	a0,48(s8)
  407680:	afc50034 	sw	a1,52(s8)
  407684:	afc60038 	sw	a2,56(s8)
  407688:	afc7003c 	sw	a3,60(s8)
/home_a/ppchen/adb/transport.c:760
    atransport *t;
    atransport *result = NULL;
  40768c:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:761
    int ambiguous = 0;
  407690:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/transport.c:764
   
retry:
    if (error_out)
  407694:	8fc2003c 	lw	v0,60(s8)
  407698:	10400005 	beqz	v0,4076b0 <acquire_one_transport+0x44>
  40769c:	00000000 	nop
/home_a/ppchen/adb/transport.c:765
        *error_out = "device not found";
  4076a0:	8fc2003c 	lw	v0,60(s8)
  4076a4:	3c030041 	lui	v1,0x41
  4076a8:	24633770 	addiu	v1,v1,14192
  4076ac:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:767

    adb_mutex_lock(&transport_lock);
  4076b0:	3c020042 	lui	v0,0x42
  4076b4:	244459b0 	addiu	a0,v0,22960
  4076b8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4076bc:	00000000 	nop
/home_a/ppchen/adb/transport.c:768
    for (t = transport_list.next; t != &transport_list; t = t->next) {
  4076c0:	3c020042 	lui	v0,0x42
  4076c4:	8c425650 	lw	v0,22096(v0)
  4076c8:	afc20018 	sw	v0,24(s8)
  4076cc:	10000073 	b	40789c <acquire_one_transport+0x230>
  4076d0:	00000000 	nop
/home_a/ppchen/adb/transport.c:769
        if (t->connection_state == CS_NOPERM) {
  4076d4:	8fc20018 	lw	v0,24(s8)
  4076d8:	8c430044 	lw	v1,68(v0)
  4076dc:	24020005 	li	v0,5
  4076e0:	1462000a 	bne	v1,v0,40770c <acquire_one_transport+0xa0>
  4076e4:	00000000 	nop
/home_a/ppchen/adb/transport.c:770
        if (error_out)
  4076e8:	8fc2003c 	lw	v0,60(s8)
  4076ec:	10400067 	beqz	v0,40788c <acquire_one_transport+0x220>
  4076f0:	00000000 	nop
/home_a/ppchen/adb/transport.c:771
            *error_out = "insufficient permissions for device";
  4076f4:	8fc2003c 	lw	v0,60(s8)
  4076f8:	3c030041 	lui	v1,0x41
  4076fc:	24633784 	addiu	v1,v1,14212
  407700:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:772
            continue;
  407704:	10000061 	b	40788c <acquire_one_transport+0x220>
  407708:	00000000 	nop
/home_a/ppchen/adb/transport.c:776
        }

        /* check for matching serial number */
        if (serial) {
  40770c:	8fc20038 	lw	v0,56(s8)
  407710:	10400011 	beqz	v0,407758 <acquire_one_transport+0xec>
  407714:	00000000 	nop
/home_a/ppchen/adb/transport.c:777
            if (t->serial && !strcmp(serial, t->serial)) {
  407718:	8fc20018 	lw	v0,24(s8)
  40771c:	8c420054 	lw	v0,84(v0)
  407720:	1040005b 	beqz	v0,407890 <acquire_one_transport+0x224>
  407724:	00000000 	nop
/home_a/ppchen/adb/transport.c:777 (discriminator 1)
  407728:	8fc20018 	lw	v0,24(s8)
  40772c:	8c420054 	lw	v0,84(v0)
  407730:	8fc40038 	lw	a0,56(s8)
  407734:	00402821 	move	a1,v0
  407738:	0c1053d8 	jal	414f60 <strcmp@plt>
  40773c:	00000000 	nop
  407740:	14400053 	bnez	v0,407890 <acquire_one_transport+0x224>
  407744:	00000000 	nop
/home_a/ppchen/adb/transport.c:778
                result = t;
  407748:	8fc20018 	lw	v0,24(s8)
  40774c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:779
                break;
  407750:	10000057 	b	4078b0 <acquire_one_transport+0x244>
  407754:	00000000 	nop
/home_a/ppchen/adb/transport.c:782
            }
        } else {
            if (ttype == kTransportUsb && t->type == kTransportUsb) {
  407758:	8fc20034 	lw	v0,52(s8)
  40775c:	14400018 	bnez	v0,4077c0 <acquire_one_transport+0x154>
  407760:	00000000 	nop
/home_a/ppchen/adb/transport.c:782 (discriminator 1)
  407764:	8fc20018 	lw	v0,24(s8)
  407768:	8c420048 	lw	v0,72(v0)
  40776c:	14400014 	bnez	v0,4077c0 <acquire_one_transport+0x154>
  407770:	00000000 	nop
/home_a/ppchen/adb/transport.c:783
                if (result) {
  407774:	8fc2001c 	lw	v0,28(s8)
  407778:	1040000d 	beqz	v0,4077b0 <acquire_one_transport+0x144>
  40777c:	00000000 	nop
/home_a/ppchen/adb/transport.c:784
                    if (error_out)
  407780:	8fc2003c 	lw	v0,60(s8)
  407784:	10400005 	beqz	v0,40779c <acquire_one_transport+0x130>
  407788:	00000000 	nop
/home_a/ppchen/adb/transport.c:785
                        *error_out = "more than one device";
  40778c:	8fc2003c 	lw	v0,60(s8)
  407790:	3c030041 	lui	v1,0x41
  407794:	246337a8 	addiu	v1,v1,14248
  407798:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:786
                    ambiguous = 1;
  40779c:	24020001 	li	v0,1
  4077a0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:787
                    result = NULL;
  4077a4:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:788
                    break;
  4077a8:	10000041 	b	4078b0 <acquire_one_transport+0x244>
  4077ac:	00000000 	nop
/home_a/ppchen/adb/transport.c:790
                }
                result = t;
  4077b0:	8fc20018 	lw	v0,24(s8)
  4077b4:	afc2001c 	sw	v0,28(s8)
  4077b8:	10000035 	b	407890 <acquire_one_transport+0x224>
  4077bc:	00000000 	nop
/home_a/ppchen/adb/transport.c:791
            } else if (ttype == kTransportLocal && t->type == kTransportLocal) {
  4077c0:	8fc30034 	lw	v1,52(s8)
  4077c4:	24020001 	li	v0,1
  4077c8:	14620019 	bne	v1,v0,407830 <acquire_one_transport+0x1c4>
  4077cc:	00000000 	nop
/home_a/ppchen/adb/transport.c:791 (discriminator 1)
  4077d0:	8fc20018 	lw	v0,24(s8)
  4077d4:	8c430048 	lw	v1,72(v0)
  4077d8:	24020001 	li	v0,1
  4077dc:	14620014 	bne	v1,v0,407830 <acquire_one_transport+0x1c4>
  4077e0:	00000000 	nop
/home_a/ppchen/adb/transport.c:792
                if (result) {
  4077e4:	8fc2001c 	lw	v0,28(s8)
  4077e8:	1040000d 	beqz	v0,407820 <acquire_one_transport+0x1b4>
  4077ec:	00000000 	nop
/home_a/ppchen/adb/transport.c:793
                    if (error_out)
  4077f0:	8fc2003c 	lw	v0,60(s8)
  4077f4:	10400005 	beqz	v0,40780c <acquire_one_transport+0x1a0>
  4077f8:	00000000 	nop
/home_a/ppchen/adb/transport.c:794
                        *error_out = "more than one emulator";
  4077fc:	8fc2003c 	lw	v0,60(s8)
  407800:	3c030041 	lui	v1,0x41
  407804:	246337c0 	addiu	v1,v1,14272
  407808:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:795
                    ambiguous = 1;
  40780c:	24020001 	li	v0,1
  407810:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:796
                    result = NULL;
  407814:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:797
                    break;
  407818:	10000025 	b	4078b0 <acquire_one_transport+0x244>
  40781c:	00000000 	nop
/home_a/ppchen/adb/transport.c:799
                }
                result = t;
  407820:	8fc20018 	lw	v0,24(s8)
  407824:	afc2001c 	sw	v0,28(s8)
  407828:	10000019 	b	407890 <acquire_one_transport+0x224>
  40782c:	00000000 	nop
/home_a/ppchen/adb/transport.c:800
            } else if (ttype == kTransportAny) {
  407830:	8fc30034 	lw	v1,52(s8)
  407834:	24020002 	li	v0,2
  407838:	14620015 	bne	v1,v0,407890 <acquire_one_transport+0x224>
  40783c:	00000000 	nop
/home_a/ppchen/adb/transport.c:801
                if (result) {
  407840:	8fc2001c 	lw	v0,28(s8)
  407844:	1040000d 	beqz	v0,40787c <acquire_one_transport+0x210>
  407848:	00000000 	nop
/home_a/ppchen/adb/transport.c:802
                    if (error_out)
  40784c:	8fc2003c 	lw	v0,60(s8)
  407850:	10400005 	beqz	v0,407868 <acquire_one_transport+0x1fc>
  407854:	00000000 	nop
/home_a/ppchen/adb/transport.c:803
                        *error_out = "more than one device and emulator";
  407858:	8fc2003c 	lw	v0,60(s8)
  40785c:	3c030041 	lui	v1,0x41
  407860:	246337d8 	addiu	v1,v1,14296
  407864:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:804
                    ambiguous = 1;
  407868:	24020001 	li	v0,1
  40786c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:805
                    result = NULL;
  407870:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:806
                    break;
  407874:	1000000e 	b	4078b0 <acquire_one_transport+0x244>
  407878:	00000000 	nop
/home_a/ppchen/adb/transport.c:808
                }
                result = t;
  40787c:	8fc20018 	lw	v0,24(s8)
  407880:	afc2001c 	sw	v0,28(s8)
  407884:	10000002 	b	407890 <acquire_one_transport+0x224>
  407888:	00000000 	nop
/home_a/ppchen/adb/transport.c:772
    adb_mutex_lock(&transport_lock);
    for (t = transport_list.next; t != &transport_list; t = t->next) {
        if (t->connection_state == CS_NOPERM) {
        if (error_out)
            *error_out = "insufficient permissions for device";
            continue;
  40788c:	00000000 	nop
/home_a/ppchen/adb/transport.c:768
retry:
    if (error_out)
        *error_out = "device not found";

    adb_mutex_lock(&transport_lock);
    for (t = transport_list.next; t != &transport_list; t = t->next) {
  407890:	8fc20018 	lw	v0,24(s8)
  407894:	8c420000 	lw	v0,0(v0)
  407898:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:768 (discriminator 1)
  40789c:	8fc30018 	lw	v1,24(s8)
  4078a0:	3c020042 	lui	v0,0x42
  4078a4:	24425650 	addiu	v0,v0,22096
  4078a8:	1462ff8a 	bne	v1,v0,4076d4 <acquire_one_transport+0x68>
  4078ac:	00000000 	nop
/home_a/ppchen/adb/transport.c:812
                }
                result = t;
            }
        }
    }
    adb_mutex_unlock(&transport_lock);
  4078b0:	3c020042 	lui	v0,0x42
  4078b4:	244459b0 	addiu	a0,v0,22960
  4078b8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  4078bc:	00000000 	nop
/home_a/ppchen/adb/transport.c:814

    if (result) {
  4078c0:	8fc2001c 	lw	v0,28(s8)
  4078c4:	10400024 	beqz	v0,407958 <acquire_one_transport+0x2ec>
  4078c8:	00000000 	nop
/home_a/ppchen/adb/transport.c:816
         /* offline devices are ignored -- they are either being born or dying */
        if (result && result->connection_state == CS_OFFLINE) {
  4078cc:	8fc2001c 	lw	v0,28(s8)
  4078d0:	1040000d 	beqz	v0,407908 <acquire_one_transport+0x29c>
  4078d4:	00000000 	nop
/home_a/ppchen/adb/transport.c:816 (discriminator 1)
  4078d8:	8fc2001c 	lw	v0,28(s8)
  4078dc:	8c420044 	lw	v0,68(v0)
  4078e0:	14400009 	bnez	v0,407908 <acquire_one_transport+0x29c>
  4078e4:	00000000 	nop
/home_a/ppchen/adb/transport.c:817
            if (error_out)
  4078e8:	8fc2003c 	lw	v0,60(s8)
  4078ec:	10400005 	beqz	v0,407904 <acquire_one_transport+0x298>
  4078f0:	00000000 	nop
/home_a/ppchen/adb/transport.c:818
                *error_out = "device offline";
  4078f4:	8fc2003c 	lw	v0,60(s8)
  4078f8:	3c030041 	lui	v1,0x41
  4078fc:	246337fc 	addiu	v1,v1,14332
  407900:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:819
            result = NULL;
  407904:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:822
        }
         /* check for required connection state */
        if (result && state != CS_ANY && result->connection_state != state) {
  407908:	8fc2001c 	lw	v0,28(s8)
  40790c:	10400012 	beqz	v0,407958 <acquire_one_transport+0x2ec>
  407910:	00000000 	nop
/home_a/ppchen/adb/transport.c:822 (discriminator 1)
  407914:	8fc30030 	lw	v1,48(s8)
  407918:	2402ffff 	li	v0,-1
  40791c:	1062000e 	beq	v1,v0,407958 <acquire_one_transport+0x2ec>
  407920:	00000000 	nop
  407924:	8fc2001c 	lw	v0,28(s8)
  407928:	8c430044 	lw	v1,68(v0)
  40792c:	8fc20030 	lw	v0,48(s8)
  407930:	10620009 	beq	v1,v0,407958 <acquire_one_transport+0x2ec>
  407934:	00000000 	nop
/home_a/ppchen/adb/transport.c:823
            if (error_out)
  407938:	8fc2003c 	lw	v0,60(s8)
  40793c:	10400005 	beqz	v0,407954 <acquire_one_transport+0x2e8>
  407940:	00000000 	nop
/home_a/ppchen/adb/transport.c:824
                *error_out = "invalid device state";
  407944:	8fc2003c 	lw	v0,60(s8)
  407948:	3c030041 	lui	v1,0x41
  40794c:	2463380c 	addiu	v1,v1,14348
  407950:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:825
            result = NULL;
  407954:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/transport.c:829
        }
    }

    if (result) {
  407958:	8fc2001c 	lw	v0,28(s8)
  40795c:	10400008 	beqz	v0,407980 <acquire_one_transport+0x314>
  407960:	00000000 	nop
/home_a/ppchen/adb/transport.c:831
        /* found one that we can take */
        if (error_out)
  407964:	8fc2003c 	lw	v0,60(s8)
  407968:	10400014 	beqz	v0,4079bc <acquire_one_transport+0x350>
  40796c:	00000000 	nop
/home_a/ppchen/adb/transport.c:832
            *error_out = NULL;
  407970:	8fc2003c 	lw	v0,60(s8)
  407974:	ac400000 	sw	zero,0(v0)
  407978:	10000010 	b	4079bc <acquire_one_transport+0x350>
  40797c:	00000000 	nop
/home_a/ppchen/adb/transport.c:833
    } else if (state != CS_ANY && (serial || !ambiguous)) {
  407980:	8fc30030 	lw	v1,48(s8)
  407984:	2402ffff 	li	v0,-1
  407988:	1062000c 	beq	v1,v0,4079bc <acquire_one_transport+0x350>
  40798c:	00000000 	nop
/home_a/ppchen/adb/transport.c:833 (discriminator 1)
  407990:	8fc20038 	lw	v0,56(s8)
  407994:	14400004 	bnez	v0,4079a8 <acquire_one_transport+0x33c>
  407998:	00000000 	nop
  40799c:	8fc20020 	lw	v0,32(s8)
  4079a0:	14400006 	bnez	v0,4079bc <acquire_one_transport+0x350>
  4079a4:	00000000 	nop
/home_a/ppchen/adb/transport.c:834
        adb_sleep_ms(1000);
  4079a8:	240403e8 	li	a0,1000
  4079ac:	0c101846 	jal	406118 <adb_sleep_ms>
  4079b0:	00000000 	nop
/home_a/ppchen/adb/transport.c:835
        goto retry;
  4079b4:	1000ff37 	b	407694 <acquire_one_transport+0x28>
  4079b8:	00000000 	nop
/home_a/ppchen/adb/transport.c:838
    }

    return result;
  4079bc:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/transport.c:839
}
  4079c0:	03c0e821 	move	sp,s8
  4079c4:	8fbf002c 	lw	ra,44(sp)
  4079c8:	8fbe0028 	lw	s8,40(sp)
  4079cc:	27bd0030 	addiu	sp,sp,48
  4079d0:	03e00008 	jr	ra
  4079d4:	00000000 	nop

004079d8 <register_socket_transport>:
register_socket_transport():
/home_a/ppchen/adb/transport.c:900
    adb_mutex_unlock(&transport_lock);
}
#endif // ADB_HOST

void register_socket_transport(int s, const char *serial, int port, int local)
{
  4079d8:	27bdffb8 	addiu	sp,sp,-72
  4079dc:	afbf0044 	sw	ra,68(sp)
  4079e0:	afbe0040 	sw	s8,64(sp)
  4079e4:	03a0f021 	move	s8,sp
  4079e8:	afc40048 	sw	a0,72(s8)
  4079ec:	afc5004c 	sw	a1,76(s8)
  4079f0:	afc60050 	sw	a2,80(s8)
  4079f4:	afc70054 	sw	a3,84(s8)
/home_a/ppchen/adb/transport.c:901
    atransport *t = calloc(1, sizeof(atransport));
  4079f8:	24040001 	li	a0,1
  4079fc:	24050074 	li	a1,116
  407a00:	0c1052b8 	jal	414ae0 <calloc@plt>
  407a04:	00000000 	nop
  407a08:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:904
    char buff[32];

    if (!serial) {
  407a0c:	8fc2004c 	lw	v0,76(s8)
  407a10:	1440000b 	bnez	v0,407a40 <register_socket_transport+0x68>
  407a14:	00000000 	nop
/home_a/ppchen/adb/transport.c:905
        snprintf(buff, sizeof buff, "T-%p", t);
  407a18:	27c2001c 	addiu	v0,s8,28
  407a1c:	00402021 	move	a0,v0
  407a20:	24050020 	li	a1,32
  407a24:	3c020041 	lui	v0,0x41
  407a28:	24463824 	addiu	a2,v0,14372
  407a2c:	8fc70018 	lw	a3,24(s8)
  407a30:	0c105334 	jal	414cd0 <snprintf@plt>
  407a34:	00000000 	nop
/home_a/ppchen/adb/transport.c:906
        serial = buff;
  407a38:	27c2001c 	addiu	v0,s8,28
  407a3c:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/transport.c:909
    }
   
    if ( init_socket_transport(t, s, port, local) < 0 ) {
  407a40:	8fc40018 	lw	a0,24(s8)
  407a44:	8fc50048 	lw	a1,72(s8)
  407a48:	8fc60050 	lw	a2,80(s8)
  407a4c:	8fc70054 	lw	a3,84(s8)
  407a50:	0c102384 	jal	408e10 <init_socket_transport>
  407a54:	00000000 	nop
  407a58:	04410009 	bgez	v0,407a80 <register_socket_transport+0xa8>
  407a5c:	00000000 	nop
/home_a/ppchen/adb/transport.c:910
        adb_close(s);
  407a60:	8fc40048 	lw	a0,72(s8)
  407a64:	0c1017b8 	jal	405ee0 <adb_close>
  407a68:	00000000 	nop
/home_a/ppchen/adb/transport.c:911
        free(t);
  407a6c:	8fc40018 	lw	a0,24(s8)
  407a70:	0c1053e4 	jal	414f90 <free@plt>
  407a74:	00000000 	nop
  407a78:	1000000d 	b	407ab0 <register_socket_transport+0xd8>
  407a7c:	00000000 	nop
/home_a/ppchen/adb/transport.c:914
        return;
    }
    if(serial) {
  407a80:	8fc2004c 	lw	v0,76(s8)
  407a84:	10400007 	beqz	v0,407aa4 <register_socket_transport+0xcc>
  407a88:	00000000 	nop
/home_a/ppchen/adb/transport.c:915
        t->serial = strdup(serial);
  407a8c:	8fc4004c 	lw	a0,76(s8)
  407a90:	0c105408 	jal	415020 <strdup@plt>
  407a94:	00000000 	nop
  407a98:	00401821 	move	v1,v0
  407a9c:	8fc20018 	lw	v0,24(s8)
  407aa0:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/transport.c:917
    }
    register_transport(t);
  407aa4:	8fc40018 	lw	a0,24(s8)
  407aa8:	0c101ce1 	jal	407384 <register_transport>
  407aac:	00000000 	nop
/home_a/ppchen/adb/transport.c:918
}
  407ab0:	03c0e821 	move	sp,s8
  407ab4:	8fbf0044 	lw	ra,68(sp)
  407ab8:	8fbe0040 	lw	s8,64(sp)
  407abc:	27bd0048 	addiu	sp,sp,72
  407ac0:	03e00008 	jr	ra
  407ac4:	00000000 	nop

00407ac8 <register_usb_transport>:
register_usb_transport():
/home_a/ppchen/adb/transport.c:976
}

#endif

void register_usb_transport(usb_handle *usb, const char *serial, unsigned writeable)
{
  407ac8:	27bdffd8 	addiu	sp,sp,-40
  407acc:	afbf0024 	sw	ra,36(sp)
  407ad0:	afbe0020 	sw	s8,32(sp)
  407ad4:	03a0f021 	move	s8,sp
  407ad8:	afc40028 	sw	a0,40(s8)
  407adc:	afc5002c 	sw	a1,44(s8)
  407ae0:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/transport.c:977
    atransport *t = calloc(1, sizeof(atransport));
  407ae4:	24040001 	li	a0,1
  407ae8:	24050074 	li	a1,116
  407aec:	0c1052b8 	jal	414ae0 <calloc@plt>
  407af0:	00000000 	nop
  407af4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:979

    init_usb_transport(t, usb, (writeable ? CS_OFFLINE : CS_NOPERM));
  407af8:	8fc20030 	lw	v0,48(s8)
  407afc:	10400004 	beqz	v0,407b10 <register_usb_transport+0x48>
  407b00:	00000000 	nop
/home_a/ppchen/adb/transport.c:979 (discriminator 1)
  407b04:	00001021 	move	v0,zero
  407b08:	10000002 	b	407b14 <register_usb_transport+0x4c>
  407b0c:	00000000 	nop
/home_a/ppchen/adb/transport.c:979 (discriminator 2)
  407b10:	24020005 	li	v0,5
/home_a/ppchen/adb/transport.c:979 (discriminator 3)
  407b14:	8fc40018 	lw	a0,24(s8)
  407b18:	8fc50028 	lw	a1,40(s8)
  407b1c:	00403021 	move	a2,v0
  407b20:	0c1024ec 	jal	4093b0 <init_usb_transport>
  407b24:	00000000 	nop
/home_a/ppchen/adb/transport.c:980 (discriminator 3)
    if(serial) {
  407b28:	8fc2002c 	lw	v0,44(s8)
  407b2c:	10400007 	beqz	v0,407b4c <register_usb_transport+0x84>
  407b30:	00000000 	nop
/home_a/ppchen/adb/transport.c:981
        t->serial = strdup(serial);
  407b34:	8fc4002c 	lw	a0,44(s8)
  407b38:	0c105408 	jal	415020 <strdup@plt>
  407b3c:	00000000 	nop
  407b40:	00401821 	move	v1,v0
  407b44:	8fc20018 	lw	v0,24(s8)
  407b48:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/transport.c:983
    }
    register_transport(t);
  407b4c:	8fc40018 	lw	a0,24(s8)
  407b50:	0c101ce1 	jal	407384 <register_transport>
  407b54:	00000000 	nop
/home_a/ppchen/adb/transport.c:984
}
  407b58:	03c0e821 	move	sp,s8
  407b5c:	8fbf0024 	lw	ra,36(sp)
  407b60:	8fbe0020 	lw	s8,32(sp)
  407b64:	27bd0028 	addiu	sp,sp,40
  407b68:	03e00008 	jr	ra
  407b6c:	00000000 	nop

00407b70 <unregister_usb_transport>:
unregister_usb_transport():
/home_a/ppchen/adb/transport.c:988

/* this should only be used for transports with connection_state == CS_NOPERM */
void unregister_usb_transport(usb_handle *usb)
{
  407b70:	27bdffd8 	addiu	sp,sp,-40
  407b74:	afbf0024 	sw	ra,36(sp)
  407b78:	afbe0020 	sw	s8,32(sp)
  407b7c:	03a0f021 	move	s8,sp
  407b80:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport.c:990
    atransport *t;
    adb_mutex_lock(&transport_lock);
  407b84:	3c020042 	lui	v0,0x42
  407b88:	244459b0 	addiu	a0,v0,22960
  407b8c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  407b90:	00000000 	nop
/home_a/ppchen/adb/transport.c:991
    for(t = transport_list.next; t != &transport_list; t = t->next) {
  407b94:	3c020042 	lui	v0,0x42
  407b98:	8c425650 	lw	v0,22096(v0)
  407b9c:	afc20018 	sw	v0,24(s8)
  407ba0:	1000001a 	b	407c0c <unregister_usb_transport+0x9c>
  407ba4:	00000000 	nop
/home_a/ppchen/adb/transport.c:992
        if (t->usb == usb && t->connection_state == CS_NOPERM) {
  407ba8:	8fc20018 	lw	v0,24(s8)
  407bac:	8c43004c 	lw	v1,76(v0)
  407bb0:	8fc20028 	lw	v0,40(s8)
  407bb4:	14620012 	bne	v1,v0,407c00 <unregister_usb_transport+0x90>
  407bb8:	00000000 	nop
/home_a/ppchen/adb/transport.c:992 (discriminator 1)
  407bbc:	8fc20018 	lw	v0,24(s8)
  407bc0:	8c430044 	lw	v1,68(v0)
  407bc4:	24020005 	li	v0,5
  407bc8:	1462000d 	bne	v1,v0,407c00 <unregister_usb_transport+0x90>
  407bcc:	00000000 	nop
/home_a/ppchen/adb/transport.c:993
            t->next->prev = t->prev;
  407bd0:	8fc20018 	lw	v0,24(s8)
  407bd4:	8c420000 	lw	v0,0(v0)
  407bd8:	8fc30018 	lw	v1,24(s8)
  407bdc:	8c630004 	lw	v1,4(v1)
  407be0:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/transport.c:994
            t->prev->next = t->next;
  407be4:	8fc20018 	lw	v0,24(s8)
  407be8:	8c420004 	lw	v0,4(v0)
  407bec:	8fc30018 	lw	v1,24(s8)
  407bf0:	8c630000 	lw	v1,0(v1)
  407bf4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport.c:995
            break;
  407bf8:	10000009 	b	407c20 <unregister_usb_transport+0xb0>
  407bfc:	00000000 	nop
/home_a/ppchen/adb/transport.c:991
/* this should only be used for transports with connection_state == CS_NOPERM */
void unregister_usb_transport(usb_handle *usb)
{
    atransport *t;
    adb_mutex_lock(&transport_lock);
    for(t = transport_list.next; t != &transport_list; t = t->next) {
  407c00:	8fc20018 	lw	v0,24(s8)
  407c04:	8c420000 	lw	v0,0(v0)
  407c08:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:991 (discriminator 1)
  407c0c:	8fc30018 	lw	v1,24(s8)
  407c10:	3c020042 	lui	v0,0x42
  407c14:	24425650 	addiu	v0,v0,22096
  407c18:	1462ffe3 	bne	v1,v0,407ba8 <unregister_usb_transport+0x38>
  407c1c:	00000000 	nop
/home_a/ppchen/adb/transport.c:998
            t->next->prev = t->prev;
            t->prev->next = t->next;
            break;
        }
     }
    adb_mutex_unlock(&transport_lock);
  407c20:	3c020042 	lui	v0,0x42
  407c24:	244459b0 	addiu	a0,v0,22960
  407c28:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  407c2c:	00000000 	nop
/home_a/ppchen/adb/transport.c:999
}
  407c30:	03c0e821 	move	sp,s8
  407c34:	8fbf0024 	lw	ra,36(sp)
  407c38:	8fbe0020 	lw	s8,32(sp)
  407c3c:	27bd0028 	addiu	sp,sp,40
  407c40:	03e00008 	jr	ra
  407c44:	00000000 	nop

00407c48 <readx>:
readx():
/home_a/ppchen/adb/transport.c:1005

#undef TRACE_TAG
#define TRACE_TAG  TRACE_RWX

int readx(int fd, void *ptr, size_t len)
{
  407c48:	27bdffd0 	addiu	sp,sp,-48
  407c4c:	afbf002c 	sw	ra,44(sp)
  407c50:	afbe0028 	sw	s8,40(sp)
  407c54:	03a0f021 	move	s8,sp
  407c58:	afc40030 	sw	a0,48(s8)
  407c5c:	afc50034 	sw	a1,52(s8)
  407c60:	afc60038 	sw	a2,56(s8)
/home_a/ppchen/adb/transport.c:1006
    char *p = ptr;
  407c64:	8fc20034 	lw	v0,52(s8)
  407c68:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:1009
    int r;
#if ADB_TRACE
    int  len0 = len;
  407c6c:	8fc20038 	lw	v0,56(s8)
  407c70:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:1012
#endif
 
    while(len > 0) {
  407c74:	10000021 	b	407cfc <readx+0xb4>
  407c78:	00000000 	nop
/home_a/ppchen/adb/transport.c:1013
        r = adb_read(fd, p, len);
  407c7c:	8fc40030 	lw	a0,48(s8)
  407c80:	8fc50018 	lw	a1,24(s8)
  407c84:	8fc60038 	lw	a2,56(s8)
  407c88:	0c1017c6 	jal	405f18 <adb_read>
  407c8c:	00000000 	nop
  407c90:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport.c:1014
        if(r > 0) {
  407c94:	8fc20020 	lw	v0,32(s8)
  407c98:	1840000b 	blez	v0,407cc8 <readx+0x80>
  407c9c:	00000000 	nop
/home_a/ppchen/adb/transport.c:1016
	 
            len -= r;
  407ca0:	8fc20020 	lw	v0,32(s8)
  407ca4:	8fc30038 	lw	v1,56(s8)
  407ca8:	00621023 	subu	v0,v1,v0
  407cac:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/transport.c:1017
            p += r;
  407cb0:	8fc20020 	lw	v0,32(s8)
  407cb4:	8fc30018 	lw	v1,24(s8)
  407cb8:	00621021 	addu	v0,v1,v0
  407cbc:	afc20018 	sw	v0,24(s8)
  407cc0:	1000000e 	b	407cfc <readx+0xb4>
  407cc4:	00000000 	nop
/home_a/ppchen/adb/transport.c:1019
        } else {
            if (r < 0) {
  407cc8:	8fc20020 	lw	v0,32(s8)
  407ccc:	04410007 	bgez	v0,407cec <readx+0xa4>
  407cd0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1022
          
		  
                if (errno == EINTR)
  407cd4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  407cd8:	00000000 	nop
  407cdc:	8c430000 	lw	v1,0(v0)
  407ce0:	24020004 	li	v0,4
  407ce4:	10620004 	beq	v1,v0,407cf8 <readx+0xb0>
  407ce8:	00000000 	nop
/home_a/ppchen/adb/transport.c:1027
                    continue;
            } else {
          
            }
            return -1;
  407cec:	2402ffff 	li	v0,-1
  407cf0:	1000000b 	b	407d20 <readx+0xd8>
  407cf4:	00000000 	nop
/home_a/ppchen/adb/transport.c:1023
        } else {
            if (r < 0) {
          
		  
                if (errno == EINTR)
                    continue;
  407cf8:	00000000 	nop
/home_a/ppchen/adb/transport.c:1012 (discriminator 1)
    int r;
#if ADB_TRACE
    int  len0 = len;
#endif
 
    while(len > 0) {
  407cfc:	8fc20038 	lw	v0,56(s8)
  407d00:	1440ffde 	bnez	v0,407c7c <readx+0x34>
  407d04:	00000000 	nop
/home_a/ppchen/adb/transport.c:1033
        }
    }

#if ADB_TRACE
   
    dump_hex( ptr, len0 );
  407d08:	8fc2001c 	lw	v0,28(s8)
  407d0c:	8fc40034 	lw	a0,52(s8)
  407d10:	00402821 	move	a1,v0
  407d14:	0c10185c 	jal	406170 <dump_hex>
  407d18:	00000000 	nop
/home_a/ppchen/adb/transport.c:1035
#endif
    return 0;
  407d1c:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:1036
}
  407d20:	03c0e821 	move	sp,s8
  407d24:	8fbf002c 	lw	ra,44(sp)
  407d28:	8fbe0028 	lw	s8,40(sp)
  407d2c:	27bd0030 	addiu	sp,sp,48
  407d30:	03e00008 	jr	ra
  407d34:	00000000 	nop

00407d38 <writex>:
writex():
/home_a/ppchen/adb/transport.c:1039

int writex(int fd, const void *ptr, size_t len)
{
  407d38:	27bdffd8 	addiu	sp,sp,-40
  407d3c:	afbf0024 	sw	ra,36(sp)
  407d40:	afbe0020 	sw	s8,32(sp)
  407d44:	03a0f021 	move	s8,sp
  407d48:	afc40028 	sw	a0,40(s8)
  407d4c:	afc5002c 	sw	a1,44(s8)
  407d50:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/transport.c:1040
    char *p = (char*) ptr;
  407d54:	8fc2002c 	lw	v0,44(s8)
  407d58:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport.c:1045
    int r;

#if ADB_TRACE

    dump_hex( ptr, len );
  407d5c:	8fc4002c 	lw	a0,44(s8)
  407d60:	8fc50030 	lw	a1,48(s8)
  407d64:	0c10185c 	jal	406170 <dump_hex>
  407d68:	00000000 	nop
/home_a/ppchen/adb/transport.c:1047
#endif
    while(len > 0) {
  407d6c:	10000021 	b	407df4 <writex+0xbc>
  407d70:	00000000 	nop
/home_a/ppchen/adb/transport.c:1049

        r = adb_write(fd, p, len);
  407d74:	8fc40028 	lw	a0,40(s8)
  407d78:	8fc50018 	lw	a1,24(s8)
  407d7c:	8fc60030 	lw	a2,48(s8)
  407d80:	0c1017d8 	jal	405f60 <adb_write>
  407d84:	00000000 	nop
  407d88:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport.c:1050
        if(r > 0) {
  407d8c:	8fc2001c 	lw	v0,28(s8)
  407d90:	1840000b 	blez	v0,407dc0 <writex+0x88>
  407d94:	00000000 	nop
/home_a/ppchen/adb/transport.c:1051
            len -= r;
  407d98:	8fc2001c 	lw	v0,28(s8)
  407d9c:	8fc30030 	lw	v1,48(s8)
  407da0:	00621023 	subu	v0,v1,v0
  407da4:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/transport.c:1052
            p += r;
  407da8:	8fc2001c 	lw	v0,28(s8)
  407dac:	8fc30018 	lw	v1,24(s8)
  407db0:	00621021 	addu	v0,v1,v0
  407db4:	afc20018 	sw	v0,24(s8)
  407db8:	1000000e 	b	407df4 <writex+0xbc>
  407dbc:	00000000 	nop
/home_a/ppchen/adb/transport.c:1054
        } else {
            if (r < 0) {
  407dc0:	8fc2001c 	lw	v0,28(s8)
  407dc4:	04410007 	bgez	v0,407de4 <writex+0xac>
  407dc8:	00000000 	nop
/home_a/ppchen/adb/transport.c:1056
              
                if (errno == EINTR)
  407dcc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  407dd0:	00000000 	nop
  407dd4:	8c430000 	lw	v1,0(v0)
  407dd8:	24020004 	li	v0,4
  407ddc:	10620004 	beq	v1,v0,407df0 <writex+0xb8>
  407de0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1061
                    continue;
            } else {
                
            }
            return -1;
  407de4:	2402ffff 	li	v0,-1
  407de8:	10000006 	b	407e04 <writex+0xcc>
  407dec:	00000000 	nop
/home_a/ppchen/adb/transport.c:1057
            p += r;
        } else {
            if (r < 0) {
              
                if (errno == EINTR)
                    continue;
  407df0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1047 (discriminator 1)

#if ADB_TRACE

    dump_hex( ptr, len );
#endif
    while(len > 0) {
  407df4:	8fc20030 	lw	v0,48(s8)
  407df8:	1440ffde 	bnez	v0,407d74 <writex+0x3c>
  407dfc:	00000000 	nop
/home_a/ppchen/adb/transport.c:1064
                
            }
            return -1;
        }
    }
    return 0;
  407e00:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:1065
}
  407e04:	03c0e821 	move	sp,s8
  407e08:	8fbf0024 	lw	ra,36(sp)
  407e0c:	8fbe0020 	lw	s8,32(sp)
  407e10:	27bd0028 	addiu	sp,sp,40
  407e14:	03e00008 	jr	ra
  407e18:	00000000 	nop

00407e1c <fix_endians>:
fix_endians():
/home_a/ppchen/adb/transport.c:1071

/* ADB:auto fix endian.[ */
extern int g_is_big_endian;
#define H4(x)	(((x) & 0xFF000000) >> 24) | (((x) & 0x00FF0000) >> 8) | (((x) & 0x0000FF00) << 8) | (((x) & 0x000000FF) << 24)
static inline void fix_endians(apacket *p)
{
  407e1c:	27bdfff8 	addiu	sp,sp,-8
  407e20:	afbe0004 	sw	s8,4(sp)
  407e24:	03a0f021 	move	s8,sp
  407e28:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/transport.c:1072
	if(g_is_big_endian){
  407e2c:	3c020042 	lui	v0,0x42
  407e30:	8c425808 	lw	v0,22536(v0)
  407e34:	10400079 	beqz	v0,40801c <fix_endians+0x200>
  407e38:	00000000 	nop
/home_a/ppchen/adb/transport.c:1073
        p->msg.command     = H4(p->msg.command);
  407e3c:	8fc20008 	lw	v0,8(s8)
  407e40:	8c42000c 	lw	v0,12(v0)
  407e44:	00021e02 	srl	v1,v0,0x18
  407e48:	8fc20008 	lw	v0,8(s8)
  407e4c:	8c44000c 	lw	a0,12(v0)
  407e50:	3c0200ff 	lui	v0,0xff
  407e54:	00821024 	and	v0,a0,v0
  407e58:	00021202 	srl	v0,v0,0x8
  407e5c:	00621825 	or	v1,v1,v0
  407e60:	8fc20008 	lw	v0,8(s8)
  407e64:	8c42000c 	lw	v0,12(v0)
  407e68:	3042ff00 	andi	v0,v0,0xff00
  407e6c:	00021200 	sll	v0,v0,0x8
  407e70:	00621825 	or	v1,v1,v0
  407e74:	8fc20008 	lw	v0,8(s8)
  407e78:	8c42000c 	lw	v0,12(v0)
  407e7c:	00021600 	sll	v0,v0,0x18
  407e80:	00621825 	or	v1,v1,v0
  407e84:	8fc20008 	lw	v0,8(s8)
  407e88:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport.c:1074
        p->msg.arg0        = H4(p->msg.arg0);
  407e8c:	8fc20008 	lw	v0,8(s8)
  407e90:	8c420010 	lw	v0,16(v0)
  407e94:	00021e02 	srl	v1,v0,0x18
  407e98:	8fc20008 	lw	v0,8(s8)
  407e9c:	8c440010 	lw	a0,16(v0)
  407ea0:	3c0200ff 	lui	v0,0xff
  407ea4:	00821024 	and	v0,a0,v0
  407ea8:	00021202 	srl	v0,v0,0x8
  407eac:	00621825 	or	v1,v1,v0
  407eb0:	8fc20008 	lw	v0,8(s8)
  407eb4:	8c420010 	lw	v0,16(v0)
  407eb8:	3042ff00 	andi	v0,v0,0xff00
  407ebc:	00021200 	sll	v0,v0,0x8
  407ec0:	00621825 	or	v1,v1,v0
  407ec4:	8fc20008 	lw	v0,8(s8)
  407ec8:	8c420010 	lw	v0,16(v0)
  407ecc:	00021600 	sll	v0,v0,0x18
  407ed0:	00621825 	or	v1,v1,v0
  407ed4:	8fc20008 	lw	v0,8(s8)
  407ed8:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport.c:1075
        p->msg.arg1        = H4(p->msg.arg1);
  407edc:	8fc20008 	lw	v0,8(s8)
  407ee0:	8c420014 	lw	v0,20(v0)
  407ee4:	00021e02 	srl	v1,v0,0x18
  407ee8:	8fc20008 	lw	v0,8(s8)
  407eec:	8c440014 	lw	a0,20(v0)
  407ef0:	3c0200ff 	lui	v0,0xff
  407ef4:	00821024 	and	v0,a0,v0
  407ef8:	00021202 	srl	v0,v0,0x8
  407efc:	00621825 	or	v1,v1,v0
  407f00:	8fc20008 	lw	v0,8(s8)
  407f04:	8c420014 	lw	v0,20(v0)
  407f08:	3042ff00 	andi	v0,v0,0xff00
  407f0c:	00021200 	sll	v0,v0,0x8
  407f10:	00621825 	or	v1,v1,v0
  407f14:	8fc20008 	lw	v0,8(s8)
  407f18:	8c420014 	lw	v0,20(v0)
  407f1c:	00021600 	sll	v0,v0,0x18
  407f20:	00621825 	or	v1,v1,v0
  407f24:	8fc20008 	lw	v0,8(s8)
  407f28:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport.c:1076
        p->msg.data_length = H4(p->msg.data_length);
  407f2c:	8fc20008 	lw	v0,8(s8)
  407f30:	8c420018 	lw	v0,24(v0)
  407f34:	00021e02 	srl	v1,v0,0x18
  407f38:	8fc20008 	lw	v0,8(s8)
  407f3c:	8c440018 	lw	a0,24(v0)
  407f40:	3c0200ff 	lui	v0,0xff
  407f44:	00821024 	and	v0,a0,v0
  407f48:	00021202 	srl	v0,v0,0x8
  407f4c:	00621825 	or	v1,v1,v0
  407f50:	8fc20008 	lw	v0,8(s8)
  407f54:	8c420018 	lw	v0,24(v0)
  407f58:	3042ff00 	andi	v0,v0,0xff00
  407f5c:	00021200 	sll	v0,v0,0x8
  407f60:	00621825 	or	v1,v1,v0
  407f64:	8fc20008 	lw	v0,8(s8)
  407f68:	8c420018 	lw	v0,24(v0)
  407f6c:	00021600 	sll	v0,v0,0x18
  407f70:	00621825 	or	v1,v1,v0
  407f74:	8fc20008 	lw	v0,8(s8)
  407f78:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/transport.c:1077
        p->msg.data_check  = H4(p->msg.data_check);
  407f7c:	8fc20008 	lw	v0,8(s8)
  407f80:	8c42001c 	lw	v0,28(v0)
  407f84:	00021e02 	srl	v1,v0,0x18
  407f88:	8fc20008 	lw	v0,8(s8)
  407f8c:	8c44001c 	lw	a0,28(v0)
  407f90:	3c0200ff 	lui	v0,0xff
  407f94:	00821024 	and	v0,a0,v0
  407f98:	00021202 	srl	v0,v0,0x8
  407f9c:	00621825 	or	v1,v1,v0
  407fa0:	8fc20008 	lw	v0,8(s8)
  407fa4:	8c42001c 	lw	v0,28(v0)
  407fa8:	3042ff00 	andi	v0,v0,0xff00
  407fac:	00021200 	sll	v0,v0,0x8
  407fb0:	00621825 	or	v1,v1,v0
  407fb4:	8fc20008 	lw	v0,8(s8)
  407fb8:	8c42001c 	lw	v0,28(v0)
  407fbc:	00021600 	sll	v0,v0,0x18
  407fc0:	00621825 	or	v1,v1,v0
  407fc4:	8fc20008 	lw	v0,8(s8)
  407fc8:	ac43001c 	sw	v1,28(v0)
/home_a/ppchen/adb/transport.c:1078
        p->msg.magic       = H4(p->msg.magic);
  407fcc:	8fc20008 	lw	v0,8(s8)
  407fd0:	8c420020 	lw	v0,32(v0)
  407fd4:	00021e02 	srl	v1,v0,0x18
  407fd8:	8fc20008 	lw	v0,8(s8)
  407fdc:	8c440020 	lw	a0,32(v0)
  407fe0:	3c0200ff 	lui	v0,0xff
  407fe4:	00821024 	and	v0,a0,v0
  407fe8:	00021202 	srl	v0,v0,0x8
  407fec:	00621825 	or	v1,v1,v0
  407ff0:	8fc20008 	lw	v0,8(s8)
  407ff4:	8c420020 	lw	v0,32(v0)
  407ff8:	3042ff00 	andi	v0,v0,0xff00
  407ffc:	00021200 	sll	v0,v0,0x8
  408000:	00621825 	or	v1,v1,v0
  408004:	8fc20008 	lw	v0,8(s8)
  408008:	8c420020 	lw	v0,32(v0)
  40800c:	00021600 	sll	v0,v0,0x18
  408010:	00621825 	or	v1,v1,v0
  408014:	8fc20008 	lw	v0,8(s8)
  408018:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport.c:1080
	}    
}
  40801c:	03c0e821 	move	sp,s8
  408020:	8fbe0004 	lw	s8,4(sp)
  408024:	27bd0008 	addiu	sp,sp,8
  408028:	03e00008 	jr	ra
  40802c:	00000000 	nop

00408030 <check_header>:
check_header():
/home_a/ppchen/adb/transport.c:1085
/* ADB:auto fix endian.] */


int check_header(apacket *p)
{
  408030:	27bdffe0 	addiu	sp,sp,-32
  408034:	afbf001c 	sw	ra,28(sp)
  408038:	afbe0018 	sw	s8,24(sp)
  40803c:	03a0f021 	move	s8,sp
  408040:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport.c:1087
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
  408044:	3c020042 	lui	v0,0x42
  408048:	8c425808 	lw	v0,22536(v0)
  40804c:	1440008f 	bnez	v0,40828c <check_header+0x25c>
  408050:	00000000 	nop
/home_a/ppchen/adb/transport.c:1088 (discriminator 1)
       (((H4(p->msg.command)) == A_SYNC) ||
  408054:	8fc20020 	lw	v0,32(s8)
  408058:	8c42000c 	lw	v0,12(v0)
  40805c:	00021e02 	srl	v1,v0,0x18
  408060:	8fc20020 	lw	v0,32(s8)
  408064:	8c44000c 	lw	a0,12(v0)
  408068:	3c0200ff 	lui	v0,0xff
  40806c:	00821024 	and	v0,a0,v0
  408070:	00021202 	srl	v0,v0,0x8
  408074:	00621825 	or	v1,v1,v0
  408078:	8fc20020 	lw	v0,32(s8)
  40807c:	8c42000c 	lw	v0,12(v0)
  408080:	3042ff00 	andi	v0,v0,0xff00
  408084:	00021200 	sll	v0,v0,0x8
  408088:	00621825 	or	v1,v1,v0
  40808c:	8fc20020 	lw	v0,32(s8)
  408090:	8c42000c 	lw	v0,12(v0)
  408094:	00021600 	sll	v0,v0,0x18
  408098:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1087 (discriminator 1)


int check_header(apacket *p)
{
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
  40809c:	3c02434e 	lui	v0,0x434e
  4080a0:	34425953 	ori	v0,v0,0x5953
  4080a4:	1062006f 	beq	v1,v0,408264 <check_header+0x234>
  4080a8:	00000000 	nop
/home_a/ppchen/adb/transport.c:1089
       (((H4(p->msg.command)) == A_SYNC) ||
       ((H4(p->msg.command)) == A_CNXN) ||
  4080ac:	8fc20020 	lw	v0,32(s8)
  4080b0:	8c42000c 	lw	v0,12(v0)
  4080b4:	00021e02 	srl	v1,v0,0x18
  4080b8:	8fc20020 	lw	v0,32(s8)
  4080bc:	8c44000c 	lw	a0,12(v0)
  4080c0:	3c0200ff 	lui	v0,0xff
  4080c4:	00821024 	and	v0,a0,v0
  4080c8:	00021202 	srl	v0,v0,0x8
  4080cc:	00621825 	or	v1,v1,v0
  4080d0:	8fc20020 	lw	v0,32(s8)
  4080d4:	8c42000c 	lw	v0,12(v0)
  4080d8:	3042ff00 	andi	v0,v0,0xff00
  4080dc:	00021200 	sll	v0,v0,0x8
  4080e0:	00621825 	or	v1,v1,v0
  4080e4:	8fc20020 	lw	v0,32(s8)
  4080e8:	8c42000c 	lw	v0,12(v0)
  4080ec:	00021600 	sll	v0,v0,0x18
  4080f0:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1088

int check_header(apacket *p)
{
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
       (((H4(p->msg.command)) == A_SYNC) ||
  4080f4:	3c024e58 	lui	v0,0x4e58
  4080f8:	34424e43 	ori	v0,v0,0x4e43
  4080fc:	10620059 	beq	v1,v0,408264 <check_header+0x234>
  408100:	00000000 	nop
/home_a/ppchen/adb/transport.c:1090
       ((H4(p->msg.command)) == A_CNXN) ||
       ((H4(p->msg.command)) == A_OPEN) ||
  408104:	8fc20020 	lw	v0,32(s8)
  408108:	8c42000c 	lw	v0,12(v0)
  40810c:	00021e02 	srl	v1,v0,0x18
  408110:	8fc20020 	lw	v0,32(s8)
  408114:	8c44000c 	lw	a0,12(v0)
  408118:	3c0200ff 	lui	v0,0xff
  40811c:	00821024 	and	v0,a0,v0
  408120:	00021202 	srl	v0,v0,0x8
  408124:	00621825 	or	v1,v1,v0
  408128:	8fc20020 	lw	v0,32(s8)
  40812c:	8c42000c 	lw	v0,12(v0)
  408130:	3042ff00 	andi	v0,v0,0xff00
  408134:	00021200 	sll	v0,v0,0x8
  408138:	00621825 	or	v1,v1,v0
  40813c:	8fc20020 	lw	v0,32(s8)
  408140:	8c42000c 	lw	v0,12(v0)
  408144:	00021600 	sll	v0,v0,0x18
  408148:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1089
int check_header(apacket *p)
{
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
       (((H4(p->msg.command)) == A_SYNC) ||
       ((H4(p->msg.command)) == A_CNXN) ||
  40814c:	3c024e45 	lui	v0,0x4e45
  408150:	3442504f 	ori	v0,v0,0x504f
  408154:	10620043 	beq	v1,v0,408264 <check_header+0x234>
  408158:	00000000 	nop
/home_a/ppchen/adb/transport.c:1091
       ((H4(p->msg.command)) == A_OPEN) ||
       ((H4(p->msg.command)) == A_OKAY) ||
  40815c:	8fc20020 	lw	v0,32(s8)
  408160:	8c42000c 	lw	v0,12(v0)
  408164:	00021e02 	srl	v1,v0,0x18
  408168:	8fc20020 	lw	v0,32(s8)
  40816c:	8c44000c 	lw	a0,12(v0)
  408170:	3c0200ff 	lui	v0,0xff
  408174:	00821024 	and	v0,a0,v0
  408178:	00021202 	srl	v0,v0,0x8
  40817c:	00621825 	or	v1,v1,v0
  408180:	8fc20020 	lw	v0,32(s8)
  408184:	8c42000c 	lw	v0,12(v0)
  408188:	3042ff00 	andi	v0,v0,0xff00
  40818c:	00021200 	sll	v0,v0,0x8
  408190:	00621825 	or	v1,v1,v0
  408194:	8fc20020 	lw	v0,32(s8)
  408198:	8c42000c 	lw	v0,12(v0)
  40819c:	00021600 	sll	v0,v0,0x18
  4081a0:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1090
{
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
       (((H4(p->msg.command)) == A_SYNC) ||
       ((H4(p->msg.command)) == A_CNXN) ||
       ((H4(p->msg.command)) == A_OPEN) ||
  4081a4:	3c025941 	lui	v0,0x5941
  4081a8:	34424b4f 	ori	v0,v0,0x4b4f
  4081ac:	1062002d 	beq	v1,v0,408264 <check_header+0x234>
  4081b0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1092
       ((H4(p->msg.command)) == A_OKAY) ||
       ((H4(p->msg.command)) == A_CLSE) ||
  4081b4:	8fc20020 	lw	v0,32(s8)
  4081b8:	8c42000c 	lw	v0,12(v0)
  4081bc:	00021e02 	srl	v1,v0,0x18
  4081c0:	8fc20020 	lw	v0,32(s8)
  4081c4:	8c44000c 	lw	a0,12(v0)
  4081c8:	3c0200ff 	lui	v0,0xff
  4081cc:	00821024 	and	v0,a0,v0
  4081d0:	00021202 	srl	v0,v0,0x8
  4081d4:	00621825 	or	v1,v1,v0
  4081d8:	8fc20020 	lw	v0,32(s8)
  4081dc:	8c42000c 	lw	v0,12(v0)
  4081e0:	3042ff00 	andi	v0,v0,0xff00
  4081e4:	00021200 	sll	v0,v0,0x8
  4081e8:	00621825 	or	v1,v1,v0
  4081ec:	8fc20020 	lw	v0,32(s8)
  4081f0:	8c42000c 	lw	v0,12(v0)
  4081f4:	00021600 	sll	v0,v0,0x18
  4081f8:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1091
    /* ADB:auto fix endian.[ */
    if((!g_is_big_endian) &&
       (((H4(p->msg.command)) == A_SYNC) ||
       ((H4(p->msg.command)) == A_CNXN) ||
       ((H4(p->msg.command)) == A_OPEN) ||
       ((H4(p->msg.command)) == A_OKAY) ||
  4081fc:	3c024553 	lui	v0,0x4553
  408200:	34424c43 	ori	v0,v0,0x4c43
  408204:	10620017 	beq	v1,v0,408264 <check_header+0x234>
  408208:	00000000 	nop
/home_a/ppchen/adb/transport.c:1093
       ((H4(p->msg.command)) == A_CLSE) ||
       ((H4(p->msg.command)) == A_WRTE))){
  40820c:	8fc20020 	lw	v0,32(s8)
  408210:	8c42000c 	lw	v0,12(v0)
  408214:	00021e02 	srl	v1,v0,0x18
  408218:	8fc20020 	lw	v0,32(s8)
  40821c:	8c44000c 	lw	a0,12(v0)
  408220:	3c0200ff 	lui	v0,0xff
  408224:	00821024 	and	v0,a0,v0
  408228:	00021202 	srl	v0,v0,0x8
  40822c:	00621825 	or	v1,v1,v0
  408230:	8fc20020 	lw	v0,32(s8)
  408234:	8c42000c 	lw	v0,12(v0)
  408238:	3042ff00 	andi	v0,v0,0xff00
  40823c:	00021200 	sll	v0,v0,0x8
  408240:	00621825 	or	v1,v1,v0
  408244:	8fc20020 	lw	v0,32(s8)
  408248:	8c42000c 	lw	v0,12(v0)
  40824c:	00021600 	sll	v0,v0,0x18
  408250:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/transport.c:1092
    if((!g_is_big_endian) &&
       (((H4(p->msg.command)) == A_SYNC) ||
       ((H4(p->msg.command)) == A_CNXN) ||
       ((H4(p->msg.command)) == A_OPEN) ||
       ((H4(p->msg.command)) == A_OKAY) ||
       ((H4(p->msg.command)) == A_CLSE) ||
  408254:	3c024554 	lui	v0,0x4554
  408258:	34425257 	ori	v0,v0,0x5257
  40825c:	1462000b 	bne	v1,v0,40828c <check_header+0x25c>
  408260:	00000000 	nop
/home_a/ppchen/adb/transport.c:1094
       ((H4(p->msg.command)) == A_WRTE))){
       printf("Scanned Big Endian value!\n");
  408264:	3c020041 	lui	v0,0x41
  408268:	2444382c 	addiu	a0,v0,14380
  40826c:	0c10540c 	jal	415030 <puts@plt>
  408270:	00000000 	nop
/home_a/ppchen/adb/transport.c:1095
	   g_is_big_endian = 1;
  408274:	3c020042 	lui	v0,0x42
  408278:	24030001 	li	v1,1
  40827c:	ac435808 	sw	v1,22536(v0)
/home_a/ppchen/adb/transport.c:1096
	   fix_endians(p);
  408280:	8fc40020 	lw	a0,32(s8)
  408284:	0c101f87 	jal	407e1c <fix_endians>
  408288:	00000000 	nop
/home_a/ppchen/adb/transport.c:1100
    }
    /* ADB:auto fix endian.] */

    if(p->msg.magic != (p->msg.command ^ 0xffffffff)) {
  40828c:	8fc20020 	lw	v0,32(s8)
  408290:	8c430020 	lw	v1,32(v0)
  408294:	8fc20020 	lw	v0,32(s8)
  408298:	8c42000c 	lw	v0,12(v0)
  40829c:	00021027 	nor	v0,zero,v0
  4082a0:	10620004 	beq	v1,v0,4082b4 <check_header+0x284>
  4082a4:	00000000 	nop
/home_a/ppchen/adb/transport.c:1102
       
        return -1;
  4082a8:	2402ffff 	li	v0,-1
  4082ac:	1000000a 	b	4082d8 <check_header+0x2a8>
  4082b0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1105
    }

    if(p->msg.data_length > MAX_PAYLOAD) {
  4082b4:	8fc20020 	lw	v0,32(s8)
  4082b8:	8c420018 	lw	v0,24(v0)
  4082bc:	2c421001 	sltiu	v0,v0,4097
  4082c0:	14400004 	bnez	v0,4082d4 <check_header+0x2a4>
  4082c4:	00000000 	nop
/home_a/ppchen/adb/transport.c:1107
       
        return -1;
  4082c8:	2402ffff 	li	v0,-1
  4082cc:	10000002 	b	4082d8 <check_header+0x2a8>
  4082d0:	00000000 	nop
/home_a/ppchen/adb/transport.c:1110
    }

    return 0;
  4082d4:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:1111
}
  4082d8:	03c0e821 	move	sp,s8
  4082dc:	8fbf001c 	lw	ra,28(sp)
  4082e0:	8fbe0018 	lw	s8,24(sp)
  4082e4:	27bd0020 	addiu	sp,sp,32
  4082e8:	03e00008 	jr	ra
  4082ec:	00000000 	nop

004082f0 <check_data>:
check_data():
/home_a/ppchen/adb/transport.c:1114

int check_data(apacket *p)
{
  4082f0:	27bdffe0 	addiu	sp,sp,-32
  4082f4:	afbe001c 	sw	s8,28(sp)
  4082f8:	03a0f021 	move	s8,sp
  4082fc:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport.c:1118
    unsigned count, sum;
    unsigned char *x;

    count = p->msg.data_length;
  408300:	8fc20020 	lw	v0,32(s8)
  408304:	8c420018 	lw	v0,24(v0)
  408308:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/transport.c:1119
    x = p->data;
  40830c:	8fc20020 	lw	v0,32(s8)
  408310:	24420024 	addiu	v0,v0,36
  408314:	afc20010 	sw	v0,16(s8)
/home_a/ppchen/adb/transport.c:1120
    sum = 0;
  408318:	afc0000c 	sw	zero,12(s8)
/home_a/ppchen/adb/transport.c:1121
    while(count-- > 0) {
  40831c:	10000009 	b	408344 <check_data+0x54>
  408320:	00000000 	nop
/home_a/ppchen/adb/transport.c:1122
        sum += *x++;
  408324:	8fc20010 	lw	v0,16(s8)
  408328:	90420000 	lbu	v0,0(v0)
  40832c:	8fc3000c 	lw	v1,12(s8)
  408330:	00621021 	addu	v0,v1,v0
  408334:	afc2000c 	sw	v0,12(s8)
  408338:	8fc20010 	lw	v0,16(s8)
  40833c:	24420001 	addiu	v0,v0,1
  408340:	afc20010 	sw	v0,16(s8)
/home_a/ppchen/adb/transport.c:1121 (discriminator 1)
    unsigned char *x;

    count = p->msg.data_length;
    x = p->data;
    sum = 0;
    while(count-- > 0) {
  408344:	8fc20008 	lw	v0,8(s8)
  408348:	0002102b 	sltu	v0,zero,v0
  40834c:	304200ff 	andi	v0,v0,0xff
  408350:	8fc30008 	lw	v1,8(s8)
  408354:	2463ffff 	addiu	v1,v1,-1
  408358:	afc30008 	sw	v1,8(s8)
  40835c:	1440fff1 	bnez	v0,408324 <check_data+0x34>
  408360:	00000000 	nop
/home_a/ppchen/adb/transport.c:1125
        sum += *x++;
    }

    if(sum != p->msg.data_check) {
  408364:	8fc20020 	lw	v0,32(s8)
  408368:	8c43001c 	lw	v1,28(v0)
  40836c:	8fc2000c 	lw	v0,12(s8)
  408370:	10620004 	beq	v1,v0,408384 <check_data+0x94>
  408374:	00000000 	nop
/home_a/ppchen/adb/transport.c:1126
        return -1;
  408378:	2402ffff 	li	v0,-1
  40837c:	10000002 	b	408388 <check_data+0x98>
  408380:	00000000 	nop
/home_a/ppchen/adb/transport.c:1128
    } else {
        return 0;
  408384:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport.c:1130
    }
}
  408388:	03c0e821 	move	sp,s8
  40838c:	8fbe001c 	lw	s8,28(sp)
  408390:	27bd0020 	addiu	sp,sp,32
  408394:	03e00008 	jr	ra
  408398:	00000000 	nop
  40839c:	00000000 	nop

004083a0 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  4083a0:	27bdffe0 	addiu	sp,sp,-32
  4083a4:	afbf001c 	sw	ra,28(sp)
  4083a8:	afbe0018 	sw	s8,24(sp)
  4083ac:	03a0f021 	move	s8,sp
  4083b0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  4083b4:	8fc40020 	lw	a0,32(s8)
  4083b8:	24050002 	li	a1,2
  4083bc:	24060001 	li	a2,1
  4083c0:	0c10532c 	jal	414cb0 <fcntl@plt>
  4083c4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  4083c8:	03c0e821 	move	sp,s8
  4083cc:	8fbf001c 	lw	ra,28(sp)
  4083d0:	8fbe0018 	lw	s8,24(sp)
  4083d4:	27bd0020 	addiu	sp,sp,32
  4083d8:	03e00008 	jr	ra
  4083dc:	00000000 	nop

004083e0 <adb_shutdown>:
adb_shutdown():
/home_a/ppchen/adb/sysdeps.h:344
}
#undef   open
#define  open    ___xxx_open

static __inline__ int  adb_shutdown(int fd)
{
  4083e0:	27bdffe0 	addiu	sp,sp,-32
  4083e4:	afbf001c 	sw	ra,28(sp)
  4083e8:	afbe0018 	sw	s8,24(sp)
  4083ec:	03a0f021 	move	s8,sp
  4083f0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:345
    return shutdown(fd, SHUT_RDWR);
  4083f4:	8fc40020 	lw	a0,32(s8)
  4083f8:	24050002 	li	a1,2
  4083fc:	0c105420 	jal	415080 <shutdown@plt>
  408400:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:346
}
  408404:	03c0e821 	move	sp,s8
  408408:	8fbf001c 	lw	ra,28(sp)
  40840c:	8fbe0018 	lw	s8,24(sp)
  408410:	27bd0020 	addiu	sp,sp,32
  408414:	03e00008 	jr	ra
  408418:	00000000 	nop

0040841c <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  40841c:	27bdffe0 	addiu	sp,sp,-32
  408420:	afbf001c 	sw	ra,28(sp)
  408424:	afbe0018 	sw	s8,24(sp)
  408428:	03a0f021 	move	s8,sp
  40842c:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  408430:	8fc40020 	lw	a0,32(s8)
  408434:	0c105378 	jal	414de0 <close@plt>
  408438:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  40843c:	03c0e821 	move	sp,s8
  408440:	8fbf001c 	lw	ra,28(sp)
  408444:	8fbe0018 	lw	s8,24(sp)
  408448:	27bd0020 	addiu	sp,sp,32
  40844c:	03e00008 	jr	ra
  408450:	00000000 	nop

00408454 <adb_socket_accept>:
adb_socket_accept():
/home_a/ppchen/adb/sysdeps.h:401
}
#undef   creat
#define  creat  ___xxx_creat

static __inline__ int  adb_socket_accept(int  serverfd, struct sockaddr*  addr, socklen_t  *addrlen)
{
  408454:	27bdffd8 	addiu	sp,sp,-40
  408458:	afbf0024 	sw	ra,36(sp)
  40845c:	afbe0020 	sw	s8,32(sp)
  408460:	03a0f021 	move	s8,sp
  408464:	afc40028 	sw	a0,40(s8)
  408468:	afc5002c 	sw	a1,44(s8)
  40846c:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/sysdeps.h:404
    int fd;

    fd = accept(serverfd, addr, addrlen);
  408470:	8fc2002c 	lw	v0,44(s8)
  408474:	8fc40028 	lw	a0,40(s8)
  408478:	00402821 	move	a1,v0
  40847c:	8fc60030 	lw	a2,48(s8)
  408480:	0c1053e0 	jal	414f80 <accept@plt>
  408484:	00000000 	nop
  408488:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:406

    if (fd >= 0)
  40848c:	8fc20018 	lw	v0,24(s8)
  408490:	04400004 	bltz	v0,4084a4 <adb_socket_accept+0x50>
  408494:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:407
        close_on_exec(fd);
  408498:	8fc40018 	lw	a0,24(s8)
  40849c:	0c1020e8 	jal	4083a0 <close_on_exec>
  4084a0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:409

    return fd;
  4084a4:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:410
}
  4084a8:	03c0e821 	move	sp,s8
  4084ac:	8fbf0024 	lw	ra,36(sp)
  4084b0:	8fbe0020 	lw	s8,32(sp)
  4084b4:	27bd0028 	addiu	sp,sp,40
  4084b8:	03e00008 	jr	ra
  4084bc:	00000000 	nop

004084c0 <adb_thread_create>:
adb_thread_create():
/home_a/ppchen/adb/sysdeps.h:424
typedef  pthread_t                 adb_thread_t;

typedef void*  (*adb_thread_func_t)( void*  arg );

static __inline__ int  adb_thread_create( adb_thread_t  *pthread, adb_thread_func_t  start, void*  arg )
{
  4084c0:	27bdffb8 	addiu	sp,sp,-72
  4084c4:	afbf0044 	sw	ra,68(sp)
  4084c8:	afbe0040 	sw	s8,64(sp)
  4084cc:	03a0f021 	move	s8,sp
  4084d0:	afc40048 	sw	a0,72(s8)
  4084d4:	afc5004c 	sw	a1,76(s8)
  4084d8:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sysdeps.h:429
    pthread_attr_t   attr;


    //pthread_detach(pthread_self());
    pthread_attr_init (&attr);
  4084dc:	27c2001c 	addiu	v0,s8,28
  4084e0:	00402021 	move	a0,v0
  4084e4:	0c1052ec 	jal	414bb0 <pthread_attr_init@plt>
  4084e8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:430
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
  4084ec:	27c2001c 	addiu	v0,s8,28
  4084f0:	00402021 	move	a0,v0
  4084f4:	24050001 	li	a1,1
  4084f8:	0c1052c8 	jal	414b20 <pthread_attr_setdetachstate@plt>
  4084fc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:431
    pthread_attr_setstacksize(&attr, 64*1024);
  408500:	27c2001c 	addiu	v0,s8,28
  408504:	00402021 	move	a0,v0
  408508:	3c050001 	lui	a1,0x1
  40850c:	0c105314 	jal	414c50 <pthread_attr_setstacksize@plt>
  408510:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:434
   

    int ret =  pthread_create( pthread, &attr, start, arg );
  408514:	27c2001c 	addiu	v0,s8,28
  408518:	8fc40048 	lw	a0,72(s8)
  40851c:	00402821 	move	a1,v0
  408520:	8fc6004c 	lw	a2,76(s8)
  408524:	8fc70050 	lw	a3,80(s8)
  408528:	0c105368 	jal	414da0 <pthread_create@plt>
  40852c:	00000000 	nop
  408530:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:436

    return ret;
  408534:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:437
}
  408538:	03c0e821 	move	sp,s8
  40853c:	8fbf0044 	lw	ra,68(sp)
  408540:	8fbe0040 	lw	s8,64(sp)
  408544:	27bd0048 	addiu	sp,sp,72
  408548:	03e00008 	jr	ra
  40854c:	00000000 	nop

00408550 <disable_tcp_nagle>:
disable_tcp_nagle():
/home_a/ppchen/adb/sysdeps.h:446
    int opt = bufsize;
    return setsockopt(fd, SOL_SOCKET, SO_RCVBUF, &opt, sizeof(opt));
}

static __inline__ void  disable_tcp_nagle(int fd)
{
  408550:	27bdffd0 	addiu	sp,sp,-48
  408554:	afbf002c 	sw	ra,44(sp)
  408558:	afbe0028 	sw	s8,40(sp)
  40855c:	03a0f021 	move	s8,sp
  408560:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/sysdeps.h:447
    int  on = 1;
  408564:	24020001 	li	v0,1
  408568:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sysdeps.h:448
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
  40856c:	24020004 	li	v0,4
  408570:	afa20010 	sw	v0,16(sp)
  408574:	8fc40030 	lw	a0,48(s8)
  408578:	24050006 	li	a1,6
  40857c:	24060001 	li	a2,1
  408580:	27c20020 	addiu	v0,s8,32
  408584:	00403821 	move	a3,v0
  408588:	0c10535c 	jal	414d70 <setsockopt@plt>
  40858c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:449
}
  408590:	03c0e821 	move	sp,s8
  408594:	8fbf002c 	lw	ra,44(sp)
  408598:	8fbe0028 	lw	s8,40(sp)
  40859c:	27bd0030 	addiu	sp,sp,48
  4085a0:	03e00008 	jr	ra
  4085a4:	00000000 	nop

004085a8 <adb_sleep_ms>:
adb_sleep_ms():
/home_a/ppchen/adb/sysdeps.h:479

#undef   socketpair
#define  socketpair   ___xxx_socketpair

static __inline__ void  adb_sleep_ms( int  mseconds )
{
  4085a8:	27bdffe0 	addiu	sp,sp,-32
  4085ac:	afbf001c 	sw	ra,28(sp)
  4085b0:	afbe0018 	sw	s8,24(sp)
  4085b4:	03a0f021 	move	s8,sp
  4085b8:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:480
    usleep( mseconds*1000 );
  4085bc:	8fc40020 	lw	a0,32(s8)
  4085c0:	00801821 	move	v1,a0
  4085c4:	00031080 	sll	v0,v1,0x2
  4085c8:	00401821 	move	v1,v0
  4085cc:	00031140 	sll	v0,v1,0x5
  4085d0:	00431023 	subu	v0,v0,v1
  4085d4:	00441021 	addu	v0,v0,a0
  4085d8:	000210c0 	sll	v0,v0,0x3
  4085dc:	00402021 	move	a0,v0
  4085e0:	0c1052d4 	jal	414b50 <usleep@plt>
  4085e4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:481
}
  4085e8:	03c0e821 	move	sp,s8
  4085ec:	8fbf001c 	lw	ra,28(sp)
  4085f0:	8fbe0018 	lw	s8,24(sp)
  4085f4:	27bd0020 	addiu	sp,sp,32
  4085f8:	03e00008 	jr	ra
  4085fc:	00000000 	nop

00408600 <fix_endians>:
fix_endians():
/home_a/ppchen/adb/transport_local.c:38
//#ifdef HAVE_BIG_ENDIAN
#if 1
/* ADB:auto fix endian.] */
#define H4(x)	(((x) & 0xFF000000) >> 24) | (((x) & 0x00FF0000) >> 8) | (((x) & 0x0000FF00) << 8) | (((x) & 0x000000FF) << 24)
static inline void fix_endians(apacket *p)
{
  408600:	27bdfff8 	addiu	sp,sp,-8
  408604:	afbe0004 	sw	s8,4(sp)
  408608:	03a0f021 	move	s8,sp
  40860c:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/transport_local.c:40
    /* ADB:auto fix endian.[ */
    if(g_is_big_endian){
  408610:	3c020042 	lui	v0,0x42
  408614:	8c425808 	lw	v0,22536(v0)
  408618:	10400079 	beqz	v0,408800 <fix_endians+0x200>
  40861c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:42
    /* ADB:auto fix endian.] */
    p->msg.command     = H4(p->msg.command);
  408620:	8fc20008 	lw	v0,8(s8)
  408624:	8c42000c 	lw	v0,12(v0)
  408628:	00021e02 	srl	v1,v0,0x18
  40862c:	8fc20008 	lw	v0,8(s8)
  408630:	8c44000c 	lw	a0,12(v0)
  408634:	3c0200ff 	lui	v0,0xff
  408638:	00821024 	and	v0,a0,v0
  40863c:	00021202 	srl	v0,v0,0x8
  408640:	00621825 	or	v1,v1,v0
  408644:	8fc20008 	lw	v0,8(s8)
  408648:	8c42000c 	lw	v0,12(v0)
  40864c:	3042ff00 	andi	v0,v0,0xff00
  408650:	00021200 	sll	v0,v0,0x8
  408654:	00621825 	or	v1,v1,v0
  408658:	8fc20008 	lw	v0,8(s8)
  40865c:	8c42000c 	lw	v0,12(v0)
  408660:	00021600 	sll	v0,v0,0x18
  408664:	00621825 	or	v1,v1,v0
  408668:	8fc20008 	lw	v0,8(s8)
  40866c:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport_local.c:43
    p->msg.arg0        = H4(p->msg.arg0);
  408670:	8fc20008 	lw	v0,8(s8)
  408674:	8c420010 	lw	v0,16(v0)
  408678:	00021e02 	srl	v1,v0,0x18
  40867c:	8fc20008 	lw	v0,8(s8)
  408680:	8c440010 	lw	a0,16(v0)
  408684:	3c0200ff 	lui	v0,0xff
  408688:	00821024 	and	v0,a0,v0
  40868c:	00021202 	srl	v0,v0,0x8
  408690:	00621825 	or	v1,v1,v0
  408694:	8fc20008 	lw	v0,8(s8)
  408698:	8c420010 	lw	v0,16(v0)
  40869c:	3042ff00 	andi	v0,v0,0xff00
  4086a0:	00021200 	sll	v0,v0,0x8
  4086a4:	00621825 	or	v1,v1,v0
  4086a8:	8fc20008 	lw	v0,8(s8)
  4086ac:	8c420010 	lw	v0,16(v0)
  4086b0:	00021600 	sll	v0,v0,0x18
  4086b4:	00621825 	or	v1,v1,v0
  4086b8:	8fc20008 	lw	v0,8(s8)
  4086bc:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport_local.c:44
    p->msg.arg1        = H4(p->msg.arg1);
  4086c0:	8fc20008 	lw	v0,8(s8)
  4086c4:	8c420014 	lw	v0,20(v0)
  4086c8:	00021e02 	srl	v1,v0,0x18
  4086cc:	8fc20008 	lw	v0,8(s8)
  4086d0:	8c440014 	lw	a0,20(v0)
  4086d4:	3c0200ff 	lui	v0,0xff
  4086d8:	00821024 	and	v0,a0,v0
  4086dc:	00021202 	srl	v0,v0,0x8
  4086e0:	00621825 	or	v1,v1,v0
  4086e4:	8fc20008 	lw	v0,8(s8)
  4086e8:	8c420014 	lw	v0,20(v0)
  4086ec:	3042ff00 	andi	v0,v0,0xff00
  4086f0:	00021200 	sll	v0,v0,0x8
  4086f4:	00621825 	or	v1,v1,v0
  4086f8:	8fc20008 	lw	v0,8(s8)
  4086fc:	8c420014 	lw	v0,20(v0)
  408700:	00021600 	sll	v0,v0,0x18
  408704:	00621825 	or	v1,v1,v0
  408708:	8fc20008 	lw	v0,8(s8)
  40870c:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport_local.c:45
    p->msg.data_length = H4(p->msg.data_length);
  408710:	8fc20008 	lw	v0,8(s8)
  408714:	8c420018 	lw	v0,24(v0)
  408718:	00021e02 	srl	v1,v0,0x18
  40871c:	8fc20008 	lw	v0,8(s8)
  408720:	8c440018 	lw	a0,24(v0)
  408724:	3c0200ff 	lui	v0,0xff
  408728:	00821024 	and	v0,a0,v0
  40872c:	00021202 	srl	v0,v0,0x8
  408730:	00621825 	or	v1,v1,v0
  408734:	8fc20008 	lw	v0,8(s8)
  408738:	8c420018 	lw	v0,24(v0)
  40873c:	3042ff00 	andi	v0,v0,0xff00
  408740:	00021200 	sll	v0,v0,0x8
  408744:	00621825 	or	v1,v1,v0
  408748:	8fc20008 	lw	v0,8(s8)
  40874c:	8c420018 	lw	v0,24(v0)
  408750:	00021600 	sll	v0,v0,0x18
  408754:	00621825 	or	v1,v1,v0
  408758:	8fc20008 	lw	v0,8(s8)
  40875c:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/transport_local.c:46
    p->msg.data_check  = H4(p->msg.data_check);
  408760:	8fc20008 	lw	v0,8(s8)
  408764:	8c42001c 	lw	v0,28(v0)
  408768:	00021e02 	srl	v1,v0,0x18
  40876c:	8fc20008 	lw	v0,8(s8)
  408770:	8c44001c 	lw	a0,28(v0)
  408774:	3c0200ff 	lui	v0,0xff
  408778:	00821024 	and	v0,a0,v0
  40877c:	00021202 	srl	v0,v0,0x8
  408780:	00621825 	or	v1,v1,v0
  408784:	8fc20008 	lw	v0,8(s8)
  408788:	8c42001c 	lw	v0,28(v0)
  40878c:	3042ff00 	andi	v0,v0,0xff00
  408790:	00021200 	sll	v0,v0,0x8
  408794:	00621825 	or	v1,v1,v0
  408798:	8fc20008 	lw	v0,8(s8)
  40879c:	8c42001c 	lw	v0,28(v0)
  4087a0:	00021600 	sll	v0,v0,0x18
  4087a4:	00621825 	or	v1,v1,v0
  4087a8:	8fc20008 	lw	v0,8(s8)
  4087ac:	ac43001c 	sw	v1,28(v0)
/home_a/ppchen/adb/transport_local.c:47
    p->msg.magic       = H4(p->msg.magic);
  4087b0:	8fc20008 	lw	v0,8(s8)
  4087b4:	8c420020 	lw	v0,32(v0)
  4087b8:	00021e02 	srl	v1,v0,0x18
  4087bc:	8fc20008 	lw	v0,8(s8)
  4087c0:	8c440020 	lw	a0,32(v0)
  4087c4:	3c0200ff 	lui	v0,0xff
  4087c8:	00821024 	and	v0,a0,v0
  4087cc:	00021202 	srl	v0,v0,0x8
  4087d0:	00621825 	or	v1,v1,v0
  4087d4:	8fc20008 	lw	v0,8(s8)
  4087d8:	8c420020 	lw	v0,32(v0)
  4087dc:	3042ff00 	andi	v0,v0,0xff00
  4087e0:	00021200 	sll	v0,v0,0x8
  4087e4:	00621825 	or	v1,v1,v0
  4087e8:	8fc20008 	lw	v0,8(s8)
  4087ec:	8c420020 	lw	v0,32(v0)
  4087f0:	00021600 	sll	v0,v0,0x18
  4087f4:	00621825 	or	v1,v1,v0
  4087f8:	8fc20008 	lw	v0,8(s8)
  4087fc:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport_local.c:51
	/* ADB:auto fix endian.[ */
    }
	/* ADB:auto fix endian.] */
}
  408800:	03c0e821 	move	sp,s8
  408804:	8fbe0004 	lw	s8,4(sp)
  408808:	27bd0008 	addiu	sp,sp,8
  40880c:	03e00008 	jr	ra
  408810:	00000000 	nop

00408814 <remote_read>:
remote_read():
/home_a/ppchen/adb/transport_local.c:69

static atransport*  local_transports[ ADB_LOCAL_TRANSPORT_MAX ];
#endif /* ADB_HOST */

static int remote_read(apacket *p, atransport *t)
{
  408814:	27bdffe0 	addiu	sp,sp,-32
  408818:	afbf001c 	sw	ra,28(sp)
  40881c:	afbe0018 	sw	s8,24(sp)
  408820:	03a0f021 	move	s8,sp
  408824:	afc40020 	sw	a0,32(s8)
  408828:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/transport_local.c:71

    if(readx(t->sfd, &p->msg, sizeof(amessage))){
  40882c:	8fc20024 	lw	v0,36(s8)
  408830:	8c430050 	lw	v1,80(v0)
  408834:	8fc20020 	lw	v0,32(s8)
  408838:	2442000c 	addiu	v0,v0,12
  40883c:	00602021 	move	a0,v1
  408840:	00402821 	move	a1,v0
  408844:	24060018 	li	a2,24
  408848:	0c101f12 	jal	407c48 <readx>
  40884c:	00000000 	nop
  408850:	10400004 	beqz	v0,408864 <remote_read+0x50>
  408854:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:73
    
        return -1;
  408858:	2402ffff 	li	v0,-1
  40885c:	10000024 	b	4088f0 <remote_read+0xdc>
  408860:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:76
    }

    fix_endians(p);
  408864:	8fc40020 	lw	a0,32(s8)
  408868:	0c102180 	jal	408600 <fix_endians>
  40886c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:81

#if 0 && defined HAVE_BIG_ENDIAN

#endif
    if(check_header(p)) {
  408870:	8fc40020 	lw	a0,32(s8)
  408874:	0c10200c 	jal	408030 <check_header>
  408878:	00000000 	nop
  40887c:	10400004 	beqz	v0,408890 <remote_read+0x7c>
  408880:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:83
      
        return -1;
  408884:	2402ffff 	li	v0,-1
  408888:	10000019 	b	4088f0 <remote_read+0xdc>
  40888c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:86
    }

    if(readx(t->sfd, p->data, p->msg.data_length)){
  408890:	8fc20024 	lw	v0,36(s8)
  408894:	8c440050 	lw	a0,80(v0)
  408898:	8fc20020 	lw	v0,32(s8)
  40889c:	24430024 	addiu	v1,v0,36
  4088a0:	8fc20020 	lw	v0,32(s8)
  4088a4:	8c420018 	lw	v0,24(v0)
  4088a8:	00602821 	move	a1,v1
  4088ac:	00403021 	move	a2,v0
  4088b0:	0c101f12 	jal	407c48 <readx>
  4088b4:	00000000 	nop
  4088b8:	10400004 	beqz	v0,4088cc <remote_read+0xb8>
  4088bc:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:88
       
        return -1;
  4088c0:	2402ffff 	li	v0,-1
  4088c4:	1000000a 	b	4088f0 <remote_read+0xdc>
  4088c8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:91
    }

    if(check_data(p)) {
  4088cc:	8fc40020 	lw	a0,32(s8)
  4088d0:	0c1020bc 	jal	4082f0 <check_data>
  4088d4:	00000000 	nop
  4088d8:	10400004 	beqz	v0,4088ec <remote_read+0xd8>
  4088dc:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:93
     
        return -1;
  4088e0:	2402ffff 	li	v0,-1
  4088e4:	10000002 	b	4088f0 <remote_read+0xdc>
  4088e8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:96
    }

    return 0;
  4088ec:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport_local.c:97
}
  4088f0:	03c0e821 	move	sp,s8
  4088f4:	8fbf001c 	lw	ra,28(sp)
  4088f8:	8fbe0018 	lw	s8,24(sp)
  4088fc:	27bd0020 	addiu	sp,sp,32
  408900:	03e00008 	jr	ra
  408904:	00000000 	nop

00408908 <remote_write>:
remote_write():
/home_a/ppchen/adb/transport_local.c:100

static int remote_write(apacket *p, atransport *t)
{
  408908:	27bdffd8 	addiu	sp,sp,-40
  40890c:	afbf0024 	sw	ra,36(sp)
  408910:	afbe0020 	sw	s8,32(sp)
  408914:	03a0f021 	move	s8,sp
  408918:	afc40028 	sw	a0,40(s8)
  40891c:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/transport_local.c:101
    int   length = p->msg.data_length;
  408920:	8fc20028 	lw	v0,40(s8)
  408924:	8c420018 	lw	v0,24(v0)
  408928:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport_local.c:104
	

    fix_endians(p);
  40892c:	8fc40028 	lw	a0,40(s8)
  408930:	0c102180 	jal	408600 <fix_endians>
  408934:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:109

#if 0 && defined HAVE_BIG_ENDIAN

#endif
    if(writex(t->sfd, &p->msg, sizeof(amessage) + length)) {
  408938:	8fc2002c 	lw	v0,44(s8)
  40893c:	8c440050 	lw	a0,80(v0)
  408940:	8fc20028 	lw	v0,40(s8)
  408944:	2443000c 	addiu	v1,v0,12
  408948:	8fc20018 	lw	v0,24(s8)
  40894c:	24420018 	addiu	v0,v0,24
  408950:	00602821 	move	a1,v1
  408954:	00403021 	move	a2,v0
  408958:	0c101f4e 	jal	407d38 <writex>
  40895c:	00000000 	nop
  408960:	10400004 	beqz	v0,408974 <remote_write+0x6c>
  408964:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:111
     
        return -1;
  408968:	2402ffff 	li	v0,-1
  40896c:	10000002 	b	408978 <remote_write+0x70>
  408970:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:114
    }

    return 0;
  408974:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport_local.c:115
}
  408978:	03c0e821 	move	sp,s8
  40897c:	8fbf0024 	lw	ra,36(sp)
  408980:	8fbe0020 	lw	s8,32(sp)
  408984:	27bd0028 	addiu	sp,sp,40
  408988:	03e00008 	jr	ra
  40898c:	00000000 	nop

00408990 <local_connect>:
local_connect():
/home_a/ppchen/adb/transport_local.c:118


int local_connect(int port) {
  408990:	27bdffe0 	addiu	sp,sp,-32
  408994:	afbf001c 	sw	ra,28(sp)
  408998:	afbe0018 	sw	s8,24(sp)
  40899c:	03a0f021 	move	s8,sp
  4089a0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport_local.c:119
    return local_connect_arbitrary_ports(port-1, port);
  4089a4:	8fc20020 	lw	v0,32(s8)
  4089a8:	2442ffff 	addiu	v0,v0,-1
  4089ac:	00402021 	move	a0,v0
  4089b0:	8fc50020 	lw	a1,32(s8)
  4089b4:	0c102275 	jal	4089d4 <local_connect_arbitrary_ports>
  4089b8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:120
}
  4089bc:	03c0e821 	move	sp,s8
  4089c0:	8fbf001c 	lw	ra,28(sp)
  4089c4:	8fbe0018 	lw	s8,24(sp)
  4089c8:	27bd0020 	addiu	sp,sp,32
  4089cc:	03e00008 	jr	ra
  4089d0:	00000000 	nop

004089d4 <local_connect_arbitrary_ports>:
local_connect_arbitrary_ports():
/home_a/ppchen/adb/transport_local.c:123

int local_connect_arbitrary_ports(int console_port, int adb_port)
{
  4089d4:	27bdff90 	addiu	sp,sp,-112
  4089d8:	afbf006c 	sw	ra,108(sp)
  4089dc:	afbe0068 	sw	s8,104(sp)
  4089e0:	03a0f021 	move	s8,sp
  4089e4:	afc40070 	sw	a0,112(s8)
  4089e8:	afc50074 	sw	a1,116(s8)
/home_a/ppchen/adb/transport_local.c:125
    char buf[64];
    int  fd = -1;
  4089ec:	2402ffff 	li	v0,-1
  4089f0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport_local.c:133
    const char *host = getenv("ADBHOST");
    if (host) {
        fd = socket_network_client(host, adb_port, SOCK_STREAM);
    }
#endif
    if (fd < 0) {
  4089f4:	8fc20020 	lw	v0,32(s8)
  4089f8:	04410006 	bgez	v0,408a14 <local_connect_arbitrary_ports+0x40>
  4089fc:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:134
        fd = socket_loopback_client(adb_port, SOCK_STREAM);
  408a00:	8fc40074 	lw	a0,116(s8)
  408a04:	24050002 	li	a1,2
  408a08:	0c104958 	jal	412560 <socket_loopback_client>
  408a0c:	00000000 	nop
  408a10:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/transport_local.c:137
    }

    if (fd >= 0) {
  408a14:	8fc20020 	lw	v0,32(s8)
  408a18:	0440001c 	bltz	v0,408a8c <local_connect_arbitrary_ports+0xb8>
  408a1c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:139
    
        close_on_exec(fd);
  408a20:	8fc40020 	lw	a0,32(s8)
  408a24:	0c1020e8 	jal	4083a0 <close_on_exec>
  408a28:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:140
        disable_tcp_nagle(fd);
  408a2c:	8fc40020 	lw	a0,32(s8)
  408a30:	0c102154 	jal	408550 <disable_tcp_nagle>
  408a34:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:141
        snprintf(buf, sizeof buf, "%s%d", LOCAL_CLIENT_PREFIX, console_port);
  408a38:	27c20024 	addiu	v0,s8,36
  408a3c:	8fc30070 	lw	v1,112(s8)
  408a40:	afa30010 	sw	v1,16(sp)
  408a44:	00402021 	move	a0,v0
  408a48:	24050040 	li	a1,64
  408a4c:	3c020041 	lui	v0,0x41
  408a50:	24463850 	addiu	a2,v0,14416
  408a54:	3c020041 	lui	v0,0x41
  408a58:	24473858 	addiu	a3,v0,14424
  408a5c:	0c105334 	jal	414cd0 <snprintf@plt>
  408a60:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:142
        register_socket_transport(fd, buf, adb_port, 1);
  408a64:	27c20024 	addiu	v0,s8,36
  408a68:	8fc40020 	lw	a0,32(s8)
  408a6c:	00402821 	move	a1,v0
  408a70:	8fc60074 	lw	a2,116(s8)
  408a74:	24070001 	li	a3,1
  408a78:	0c101e76 	jal	4079d8 <register_socket_transport>
  408a7c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:143
        return 0;
  408a80:	00001021 	move	v0,zero
  408a84:	10000002 	b	408a90 <local_connect_arbitrary_ports+0xbc>
  408a88:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:145
    }
    return -1;
  408a8c:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/transport_local.c:146
}
  408a90:	03c0e821 	move	sp,s8
  408a94:	8fbf006c 	lw	ra,108(sp)
  408a98:	8fbe0068 	lw	s8,104(sp)
  408a9c:	27bd0070 	addiu	sp,sp,112
  408aa0:	03e00008 	jr	ra
  408aa4:	00000000 	nop

00408aa8 <client_socket_thread>:
client_socket_thread():
/home_a/ppchen/adb/transport_local.c:150


static void *client_socket_thread(void *x)
{
  408aa8:	27bdfff8 	addiu	sp,sp,-8
  408aac:	afbe0004 	sw	s8,4(sp)
  408ab0:	03a0f021 	move	s8,sp
  408ab4:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/transport_local.c:164
    /* will send a message to ADB to indicate that is is starting up  */
    for ( ; count > 0; count--, port += 2 ) {
        (void) local_connect(port);
    }
#endif
    return 0;
  408ab8:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport_local.c:165
}
  408abc:	03c0e821 	move	sp,s8
  408ac0:	8fbe0004 	lw	s8,4(sp)
  408ac4:	27bd0008 	addiu	sp,sp,8
  408ac8:	03e00008 	jr	ra
  408acc:	00000000 	nop

00408ad0 <server_socket_thread>:
server_socket_thread():
/home_a/ppchen/adb/transport_local.c:168

static void *server_socket_thread(void * arg)
{
  408ad0:	27bdffb8 	addiu	sp,sp,-72
  408ad4:	afbf0044 	sw	ra,68(sp)
  408ad8:	afbe0040 	sw	s8,64(sp)
  408adc:	03a0f021 	move	s8,sp
  408ae0:	afc40048 	sw	a0,72(s8)
/home_a/ppchen/adb/transport_local.c:172
    int serverfd, fd;
    struct sockaddr addr;
    socklen_t alen;
    int port = (int)arg;
  408ae4:	8fc20048 	lw	v0,72(s8)
  408ae8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/transport_local.c:175

 
    serverfd = -1;
  408aec:	2402ffff 	li	v0,-1
  408af0:	afc20018 	sw	v0,24(s8)
  408af4:	10000002 	b	408b00 <server_socket_thread+0x30>
  408af8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:196
      
            close_on_exec(fd);
            disable_tcp_nagle(fd);
            register_socket_transport(fd, "host", port, 1);
        }
    }
  408afc:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:177
    int port = (int)arg;

 
    serverfd = -1;
    for(;;) {
        if(serverfd == -1) {
  408b00:	8fc30018 	lw	v1,24(s8)
  408b04:	2402ffff 	li	v0,-1
  408b08:	1462003f 	bne	v1,v0,408c08 <server_socket_thread+0x138>
  408b0c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:178
            serverfd = socket_inaddr_any_server(port, SOCK_STREAM);
  408b10:	8fc4001c 	lw	a0,28(s8)
  408b14:	24050002 	li	a1,2
  408b18:	0c10475c 	jal	411d70 <socket_inaddr_any_server>
  408b1c:	00000000 	nop
  408b20:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport_local.c:179
            if(serverfd < 0) {
  408b24:	8fc20018 	lw	v0,24(s8)
  408b28:	04410034 	bgez	v0,408bfc <server_socket_thread+0x12c>
  408b2c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:180 (discriminator 1)
                D("server: cannot bind socket yet\n");
  408b30:	0c1052c0 	jal	414b00 <__errno_location@plt>
  408b34:	00000000 	nop
  408b38:	8c420000 	lw	v0,0(v0)
  408b3c:	afc20020 	sw	v0,32(s8)
  408b40:	3c020042 	lui	v0,0x42
  408b44:	244457f0 	addiu	a0,v0,22512
  408b48:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  408b4c:	00000000 	nop
  408b50:	3c020042 	lui	v0,0x42
  408b54:	8c4257c4 	lw	v0,22468(v0)
  408b58:	00402021 	move	a0,v0
  408b5c:	3c020041 	lui	v0,0x41
  408b60:	24453864 	addiu	a1,v0,14436
  408b64:	3c020041 	lui	v0,0x41
  408b68:	24463870 	addiu	a2,v0,14448
  408b6c:	3c020041 	lui	v0,0x41
  408b70:	244738fc 	addiu	a3,v0,14588
  408b74:	0c1053b4 	jal	414ed0 <fprintf@plt>
  408b78:	00000000 	nop
  408b7c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  408b80:	00000000 	nop
  408b84:	8fc30020 	lw	v1,32(s8)
  408b88:	ac430000 	sw	v1,0(v0)
  408b8c:	3c020042 	lui	v0,0x42
  408b90:	8c4257c4 	lw	v0,22468(v0)
  408b94:	3c030041 	lui	v1,0x41
  408b98:	24643884 	addiu	a0,v1,14468
  408b9c:	24050001 	li	a1,1
  408ba0:	2406001f 	li	a2,31
  408ba4:	00403821 	move	a3,v0
  408ba8:	0c1052d0 	jal	414b40 <fwrite@plt>
  408bac:	00000000 	nop
  408bb0:	3c020042 	lui	v0,0x42
  408bb4:	8c4257c4 	lw	v0,22468(v0)
  408bb8:	00402021 	move	a0,v0
  408bbc:	0c1053a8 	jal	414ea0 <fflush@plt>
  408bc0:	00000000 	nop
  408bc4:	3c020042 	lui	v0,0x42
  408bc8:	244457f0 	addiu	a0,v0,22512
  408bcc:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  408bd0:	00000000 	nop
  408bd4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  408bd8:	00000000 	nop
  408bdc:	8fc30020 	lw	v1,32(s8)
  408be0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/transport_local.c:181 (discriminator 1)
                adb_sleep_ms(1000);
  408be4:	240403e8 	li	a0,1000
  408be8:	0c10216a 	jal	4085a8 <adb_sleep_ms>
  408bec:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:182 (discriminator 1)
                continue;
  408bf0:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:196 (discriminator 1)
      
            close_on_exec(fd);
            disable_tcp_nagle(fd);
            register_socket_transport(fd, "host", port, 1);
        }
    }
  408bf4:	1000ffc1 	b	408afc <server_socket_thread+0x2c>
  408bf8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:184
            if(serverfd < 0) {
                D("server: cannot bind socket yet\n");
                adb_sleep_ms(1000);
                continue;
            }
            close_on_exec(serverfd);
  408bfc:	8fc40018 	lw	a0,24(s8)
  408c00:	0c1020e8 	jal	4083a0 <close_on_exec>
  408c04:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:187
        }

        alen = sizeof(addr);
  408c08:	24020010 	li	v0,16
  408c0c:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/transport_local.c:189
 
        fd = adb_socket_accept(serverfd, &addr, &alen);
  408c10:	27c30028 	addiu	v1,s8,40
  408c14:	27c20038 	addiu	v0,s8,56
  408c18:	8fc40018 	lw	a0,24(s8)
  408c1c:	00602821 	move	a1,v1
  408c20:	00403021 	move	a2,v0
  408c24:	0c102115 	jal	408454 <adb_socket_accept>
  408c28:	00000000 	nop
  408c2c:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/transport_local.c:190
        if(fd >= 0) {
  408c30:	8fc20024 	lw	v0,36(s8)
  408c34:	0440ffb1 	bltz	v0,408afc <server_socket_thread+0x2c>
  408c38:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:192
      
            close_on_exec(fd);
  408c3c:	8fc40024 	lw	a0,36(s8)
  408c40:	0c1020e8 	jal	4083a0 <close_on_exec>
  408c44:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:193
            disable_tcp_nagle(fd);
  408c48:	8fc40024 	lw	a0,36(s8)
  408c4c:	0c102154 	jal	408550 <disable_tcp_nagle>
  408c50:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:194
            register_socket_transport(fd, "host", port, 1);
  408c54:	8fc40024 	lw	a0,36(s8)
  408c58:	3c020041 	lui	v0,0x41
  408c5c:	244538a4 	addiu	a1,v0,14500
  408c60:	8fc6001c 	lw	a2,28(s8)
  408c64:	24070001 	li	a3,1
  408c68:	0c101e76 	jal	4079d8 <register_socket_transport>
  408c6c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:196
        }
    }
  408c70:	1000ffa2 	b	408afc <server_socket_thread+0x2c>
  408c74:	00000000 	nop

00408c78 <local_init>:
local_init():
/home_a/ppchen/adb/transport_local.c:315
}
#endif
#endif  // !ADB_HOST

void local_init(int port)
{
  408c78:	27bdff78 	addiu	sp,sp,-136
  408c7c:	afbf0084 	sw	ra,132(sp)
  408c80:	afbe0080 	sw	s8,128(sp)
  408c84:	03a0f021 	move	s8,sp
  408c88:	afc40088 	sw	a0,136(s8)
/home_a/ppchen/adb/transport_local.c:320
    adb_thread_t thr;
    void* (*func)(void *);


    if(HOST) {
  408c8c:	3c020042 	lui	v0,0x42
  408c90:	8c42580c 	lw	v0,22540(v0)
  408c94:	10400006 	beqz	v0,408cb0 <local_init+0x38>
  408c98:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:321
        func = client_socket_thread;
  408c9c:	3c020041 	lui	v0,0x41
  408ca0:	24428aa8 	addiu	v0,v0,-30040
  408ca4:	afc20018 	sw	v0,24(s8)
  408ca8:	10000014 	b	408cfc <local_init+0x84>
  408cac:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:329
        func = server_socket_thread;
#else
        /* For the adbd daemon in the system image we need to distinguish
         * between the device, and the emulator. */
        char is_qemu[PROPERTY_VALUE_MAX];
        property_get("ro.kernel.qemu", is_qemu, "");
  408cb0:	27c20020 	addiu	v0,s8,32
  408cb4:	3c030041 	lui	v1,0x41
  408cb8:	246438ac 	addiu	a0,v1,14508
  408cbc:	00402821 	move	a1,v0
  408cc0:	3c020041 	lui	v0,0x41
  408cc4:	244638bc 	addiu	a2,v0,14524
  408cc8:	0c1046ac 	jal	411ab0 <property_get>
  408ccc:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:330
        if (!strcmp(is_qemu, "1")) {
  408cd0:	27c20020 	addiu	v0,s8,32
  408cd4:	00402021 	move	a0,v0
  408cd8:	3c020041 	lui	v0,0x41
  408cdc:	244538c0 	addiu	a1,v0,14528
  408ce0:	0c1053d8 	jal	414f60 <strcmp@plt>
  408ce4:	00000000 	nop
  408ce8:	10400004 	beqz	v0,408cfc <local_init+0x84>
  408cec:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:337
            //func = qemu_socket_thread;

        } else {
            /* Running inside the device: use TCP socket as the transport. */

            func = server_socket_thread;
  408cf0:	3c020041 	lui	v0,0x41
  408cf4:	24428ad0 	addiu	v0,v0,-30000
  408cf8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport_local.c:344
#endif // !ADB_HOST
    }



    if(adb_thread_create(&thr, func, (void *)port)) {
  408cfc:	8fc20088 	lw	v0,136(s8)
  408d00:	27c3001c 	addiu	v1,s8,28
  408d04:	00602021 	move	a0,v1
  408d08:	8fc50018 	lw	a1,24(s8)
  408d0c:	00403021 	move	a2,v0
  408d10:	0c102130 	jal	4084c0 <adb_thread_create>
  408d14:	00000000 	nop
  408d18:	10400010 	beqz	v0,408d5c <local_init+0xe4>
  408d1c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:346
        fatal_errno("cannot create local socket %s thread",
                    HOST ? "client" : "server");
  408d20:	3c020042 	lui	v0,0x42
  408d24:	8c42580c 	lw	v0,22540(v0)
/home_a/ppchen/adb/transport_local.c:345
    }



    if(adb_thread_create(&thr, func, (void *)port)) {
        fatal_errno("cannot create local socket %s thread",
  408d28:	10400005 	beqz	v0,408d40 <local_init+0xc8>
  408d2c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:345 (discriminator 1)
  408d30:	3c020041 	lui	v0,0x41
  408d34:	244238c4 	addiu	v0,v0,14532
  408d38:	10000003 	b	408d48 <local_init+0xd0>
  408d3c:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:345 (discriminator 2)
  408d40:	3c020041 	lui	v0,0x41
  408d44:	244238cc 	addiu	v0,v0,14540
/home_a/ppchen/adb/transport_local.c:345 (discriminator 3)
  408d48:	3c030041 	lui	v1,0x41
  408d4c:	246438d4 	addiu	a0,v1,14548
  408d50:	00402821 	move	a1,v0
  408d54:	0c1006cb 	jal	401b2c <fatal_errno>
  408d58:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:348
                    HOST ? "client" : "server");
    }
}
  408d5c:	03c0e821 	move	sp,s8
  408d60:	8fbf0084 	lw	ra,132(sp)
  408d64:	8fbe0080 	lw	s8,128(sp)
  408d68:	27bd0088 	addiu	sp,sp,136
  408d6c:	03e00008 	jr	ra
  408d70:	00000000 	nop

00408d74 <remote_kick>:
remote_kick():
/home_a/ppchen/adb/transport_local.c:351

static void remote_kick(atransport *t)
{
  408d74:	27bdffd8 	addiu	sp,sp,-40
  408d78:	afbf0024 	sw	ra,36(sp)
  408d7c:	afbe0020 	sw	s8,32(sp)
  408d80:	03a0f021 	move	s8,sp
  408d84:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/transport_local.c:352
    int fd = t->sfd;
  408d88:	8fc20028 	lw	v0,40(s8)
  408d8c:	8c420050 	lw	v0,80(v0)
  408d90:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport_local.c:353
    t->sfd = -1;
  408d94:	8fc20028 	lw	v0,40(s8)
  408d98:	2403ffff 	li	v1,-1
  408d9c:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/transport_local.c:354
    adb_shutdown(fd);
  408da0:	8fc40018 	lw	a0,24(s8)
  408da4:	0c1020f8 	jal	4083e0 <adb_shutdown>
  408da8:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:355
    adb_close(fd);
  408dac:	8fc40018 	lw	a0,24(s8)
  408db0:	0c102107 	jal	40841c <adb_close>
  408db4:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:370
            }
        }
        adb_mutex_unlock( &local_transports_lock );
    }
#endif
}
  408db8:	03c0e821 	move	sp,s8
  408dbc:	8fbf0024 	lw	ra,36(sp)
  408dc0:	8fbe0020 	lw	s8,32(sp)
  408dc4:	27bd0028 	addiu	sp,sp,40
  408dc8:	03e00008 	jr	ra
  408dcc:	00000000 	nop

00408dd0 <remote_close>:
remote_close():
/home_a/ppchen/adb/transport_local.c:373

static void remote_close(atransport *t)
{
  408dd0:	27bdffe0 	addiu	sp,sp,-32
  408dd4:	afbf001c 	sw	ra,28(sp)
  408dd8:	afbe0018 	sw	s8,24(sp)
  408ddc:	03a0f021 	move	s8,sp
  408de0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport_local.c:374
    adb_close(t->fd);
  408de4:	8fc20020 	lw	v0,32(s8)
  408de8:	8c420018 	lw	v0,24(v0)
  408dec:	00402021 	move	a0,v0
  408df0:	0c102107 	jal	40841c <adb_close>
  408df4:	00000000 	nop
/home_a/ppchen/adb/transport_local.c:375
}
  408df8:	03c0e821 	move	sp,s8
  408dfc:	8fbf001c 	lw	ra,28(sp)
  408e00:	8fbe0018 	lw	s8,24(sp)
  408e04:	27bd0020 	addiu	sp,sp,32
  408e08:	03e00008 	jr	ra
  408e0c:	00000000 	nop

00408e10 <init_socket_transport>:
init_socket_transport():
/home_a/ppchen/adb/transport_local.c:421
    return result;
}
#endif

int init_socket_transport(atransport *t, int s, int adb_port, int local)
{
  408e10:	27bdffe8 	addiu	sp,sp,-24
  408e14:	afbe0014 	sw	s8,20(sp)
  408e18:	03a0f021 	move	s8,sp
  408e1c:	afc40018 	sw	a0,24(s8)
  408e20:	afc5001c 	sw	a1,28(s8)
  408e24:	afc60020 	sw	a2,32(s8)
  408e28:	afc70024 	sw	a3,36(s8)
/home_a/ppchen/adb/transport_local.c:422
    int  fail = 0;
  408e2c:	afc00008 	sw	zero,8(s8)
/home_a/ppchen/adb/transport_local.c:424

    t->kick = remote_kick;
  408e30:	8fc20018 	lw	v0,24(s8)
  408e34:	3c030041 	lui	v1,0x41
  408e38:	24638d74 	addiu	v1,v1,-29324
  408e3c:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport_local.c:425
    t->close = remote_close;
  408e40:	8fc20018 	lw	v0,24(s8)
  408e44:	3c030041 	lui	v1,0x41
  408e48:	24638dd0 	addiu	v1,v1,-29232
  408e4c:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport_local.c:426
    t->read_from_remote = remote_read;
  408e50:	8fc20018 	lw	v0,24(s8)
  408e54:	3c030041 	lui	v1,0x41
  408e58:	24638814 	addiu	v1,v1,-30700
  408e5c:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport_local.c:427
    t->write_to_remote = remote_write;
  408e60:	8fc20018 	lw	v0,24(s8)
  408e64:	3c030041 	lui	v1,0x41
  408e68:	24638908 	addiu	v1,v1,-30456
  408e6c:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport_local.c:428
    t->sfd = s;
  408e70:	8fc20018 	lw	v0,24(s8)
  408e74:	8fc3001c 	lw	v1,28(s8)
  408e78:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/transport_local.c:429
    t->sync_token = 1;
  408e7c:	8fc20018 	lw	v0,24(s8)
  408e80:	24030001 	li	v1,1
  408e84:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/transport_local.c:430
    t->connection_state = CS_OFFLINE;
  408e88:	8fc20018 	lw	v0,24(s8)
  408e8c:	ac400044 	sw	zero,68(v0)
/home_a/ppchen/adb/transport_local.c:431
    t->type = kTransportLocal;
  408e90:	8fc20018 	lw	v0,24(s8)
  408e94:	24030001 	li	v1,1
  408e98:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/transport_local.c:432
    t->adb_port = 0;
  408e9c:	8fc20018 	lw	v0,24(s8)
  408ea0:	ac40005c 	sw	zero,92(v0)
/home_a/ppchen/adb/transport_local.c:456
            }
       }
       adb_mutex_unlock( &local_transports_lock );
    }
#endif
    return fail;
  408ea4:	8fc20008 	lw	v0,8(s8)
/home_a/ppchen/adb/transport_local.c:457
}
  408ea8:	03c0e821 	move	sp,s8
  408eac:	8fbe0014 	lw	s8,20(sp)
  408eb0:	27bd0018 	addiu	sp,sp,24
  408eb4:	03e00008 	jr	ra
  408eb8:	00000000 	nop
  408ebc:	00000000 	nop

00408ec0 <fix_endians>:
fix_endians():
/home_a/ppchen/adb/transport_usb.c:40
//#ifdef HAVE_BIG_ENDIAN
#if 1
/* ADB:auto fix endian.] */
#define H4(x)	(((x) & 0xFF000000) >> 24) | (((x) & 0x00FF0000) >> 8) | (((x) & 0x0000FF00) << 8) | (((x) & 0x000000FF) << 24)
static inline void fix_endians(apacket *p)
{
  408ec0:	27bdfff8 	addiu	sp,sp,-8
  408ec4:	afbe0004 	sw	s8,4(sp)
  408ec8:	03a0f021 	move	s8,sp
  408ecc:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/transport_usb.c:42
    /* ADB:auto fix endian.[ */
	if(g_is_big_endian){
  408ed0:	3c020042 	lui	v0,0x42
  408ed4:	8c425808 	lw	v0,22536(v0)
  408ed8:	10400079 	beqz	v0,4090c0 <fix_endians+0x200>
  408edc:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:44
    /* ADB:auto fix endian.] */
    p->msg.command     = H4(p->msg.command);
  408ee0:	8fc20008 	lw	v0,8(s8)
  408ee4:	8c42000c 	lw	v0,12(v0)
  408ee8:	00021e02 	srl	v1,v0,0x18
  408eec:	8fc20008 	lw	v0,8(s8)
  408ef0:	8c44000c 	lw	a0,12(v0)
  408ef4:	3c0200ff 	lui	v0,0xff
  408ef8:	00821024 	and	v0,a0,v0
  408efc:	00021202 	srl	v0,v0,0x8
  408f00:	00621825 	or	v1,v1,v0
  408f04:	8fc20008 	lw	v0,8(s8)
  408f08:	8c42000c 	lw	v0,12(v0)
  408f0c:	3042ff00 	andi	v0,v0,0xff00
  408f10:	00021200 	sll	v0,v0,0x8
  408f14:	00621825 	or	v1,v1,v0
  408f18:	8fc20008 	lw	v0,8(s8)
  408f1c:	8c42000c 	lw	v0,12(v0)
  408f20:	00021600 	sll	v0,v0,0x18
  408f24:	00621825 	or	v1,v1,v0
  408f28:	8fc20008 	lw	v0,8(s8)
  408f2c:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport_usb.c:45
    p->msg.arg0        = H4(p->msg.arg0);
  408f30:	8fc20008 	lw	v0,8(s8)
  408f34:	8c420010 	lw	v0,16(v0)
  408f38:	00021e02 	srl	v1,v0,0x18
  408f3c:	8fc20008 	lw	v0,8(s8)
  408f40:	8c440010 	lw	a0,16(v0)
  408f44:	3c0200ff 	lui	v0,0xff
  408f48:	00821024 	and	v0,a0,v0
  408f4c:	00021202 	srl	v0,v0,0x8
  408f50:	00621825 	or	v1,v1,v0
  408f54:	8fc20008 	lw	v0,8(s8)
  408f58:	8c420010 	lw	v0,16(v0)
  408f5c:	3042ff00 	andi	v0,v0,0xff00
  408f60:	00021200 	sll	v0,v0,0x8
  408f64:	00621825 	or	v1,v1,v0
  408f68:	8fc20008 	lw	v0,8(s8)
  408f6c:	8c420010 	lw	v0,16(v0)
  408f70:	00021600 	sll	v0,v0,0x18
  408f74:	00621825 	or	v1,v1,v0
  408f78:	8fc20008 	lw	v0,8(s8)
  408f7c:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport_usb.c:46
    p->msg.arg1        = H4(p->msg.arg1);
  408f80:	8fc20008 	lw	v0,8(s8)
  408f84:	8c420014 	lw	v0,20(v0)
  408f88:	00021e02 	srl	v1,v0,0x18
  408f8c:	8fc20008 	lw	v0,8(s8)
  408f90:	8c440014 	lw	a0,20(v0)
  408f94:	3c0200ff 	lui	v0,0xff
  408f98:	00821024 	and	v0,a0,v0
  408f9c:	00021202 	srl	v0,v0,0x8
  408fa0:	00621825 	or	v1,v1,v0
  408fa4:	8fc20008 	lw	v0,8(s8)
  408fa8:	8c420014 	lw	v0,20(v0)
  408fac:	3042ff00 	andi	v0,v0,0xff00
  408fb0:	00021200 	sll	v0,v0,0x8
  408fb4:	00621825 	or	v1,v1,v0
  408fb8:	8fc20008 	lw	v0,8(s8)
  408fbc:	8c420014 	lw	v0,20(v0)
  408fc0:	00021600 	sll	v0,v0,0x18
  408fc4:	00621825 	or	v1,v1,v0
  408fc8:	8fc20008 	lw	v0,8(s8)
  408fcc:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport_usb.c:47
    p->msg.data_length = H4(p->msg.data_length);
  408fd0:	8fc20008 	lw	v0,8(s8)
  408fd4:	8c420018 	lw	v0,24(v0)
  408fd8:	00021e02 	srl	v1,v0,0x18
  408fdc:	8fc20008 	lw	v0,8(s8)
  408fe0:	8c440018 	lw	a0,24(v0)
  408fe4:	3c0200ff 	lui	v0,0xff
  408fe8:	00821024 	and	v0,a0,v0
  408fec:	00021202 	srl	v0,v0,0x8
  408ff0:	00621825 	or	v1,v1,v0
  408ff4:	8fc20008 	lw	v0,8(s8)
  408ff8:	8c420018 	lw	v0,24(v0)
  408ffc:	3042ff00 	andi	v0,v0,0xff00
  409000:	00021200 	sll	v0,v0,0x8
  409004:	00621825 	or	v1,v1,v0
  409008:	8fc20008 	lw	v0,8(s8)
  40900c:	8c420018 	lw	v0,24(v0)
  409010:	00021600 	sll	v0,v0,0x18
  409014:	00621825 	or	v1,v1,v0
  409018:	8fc20008 	lw	v0,8(s8)
  40901c:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/transport_usb.c:48
    p->msg.data_check  = H4(p->msg.data_check);
  409020:	8fc20008 	lw	v0,8(s8)
  409024:	8c42001c 	lw	v0,28(v0)
  409028:	00021e02 	srl	v1,v0,0x18
  40902c:	8fc20008 	lw	v0,8(s8)
  409030:	8c44001c 	lw	a0,28(v0)
  409034:	3c0200ff 	lui	v0,0xff
  409038:	00821024 	and	v0,a0,v0
  40903c:	00021202 	srl	v0,v0,0x8
  409040:	00621825 	or	v1,v1,v0
  409044:	8fc20008 	lw	v0,8(s8)
  409048:	8c42001c 	lw	v0,28(v0)
  40904c:	3042ff00 	andi	v0,v0,0xff00
  409050:	00021200 	sll	v0,v0,0x8
  409054:	00621825 	or	v1,v1,v0
  409058:	8fc20008 	lw	v0,8(s8)
  40905c:	8c42001c 	lw	v0,28(v0)
  409060:	00021600 	sll	v0,v0,0x18
  409064:	00621825 	or	v1,v1,v0
  409068:	8fc20008 	lw	v0,8(s8)
  40906c:	ac43001c 	sw	v1,28(v0)
/home_a/ppchen/adb/transport_usb.c:49
    p->msg.magic       = H4(p->msg.magic);
  409070:	8fc20008 	lw	v0,8(s8)
  409074:	8c420020 	lw	v0,32(v0)
  409078:	00021e02 	srl	v1,v0,0x18
  40907c:	8fc20008 	lw	v0,8(s8)
  409080:	8c440020 	lw	a0,32(v0)
  409084:	3c0200ff 	lui	v0,0xff
  409088:	00821024 	and	v0,a0,v0
  40908c:	00021202 	srl	v0,v0,0x8
  409090:	00621825 	or	v1,v1,v0
  409094:	8fc20008 	lw	v0,8(s8)
  409098:	8c420020 	lw	v0,32(v0)
  40909c:	3042ff00 	andi	v0,v0,0xff00
  4090a0:	00021200 	sll	v0,v0,0x8
  4090a4:	00621825 	or	v1,v1,v0
  4090a8:	8fc20008 	lw	v0,8(s8)
  4090ac:	8c420020 	lw	v0,32(v0)
  4090b0:	00021600 	sll	v0,v0,0x18
  4090b4:	00621825 	or	v1,v1,v0
  4090b8:	8fc20008 	lw	v0,8(s8)
  4090bc:	ac430020 	sw	v1,32(v0)
/home_a/ppchen/adb/transport_usb.c:53
    /* ADB:auto fix endian.[ */
	}
    /* ADB:auto fix endian.] */
}
  4090c0:	03c0e821 	move	sp,s8
  4090c4:	8fbe0004 	lw	s8,4(sp)
  4090c8:	27bd0008 	addiu	sp,sp,8
  4090cc:	03e00008 	jr	ra
  4090d0:	00000000 	nop

004090d4 <host_to_le32>:
host_to_le32():
/home_a/ppchen/adb/transport_usb.c:55
unsigned host_to_le32(unsigned n)
{
  4090d4:	27bdfff8 	addiu	sp,sp,-8
  4090d8:	afbe0004 	sw	s8,4(sp)
  4090dc:	03a0f021 	move	s8,sp
  4090e0:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/transport_usb.c:57
    /* ADB:auto fix endian.[ */
	if(g_is_big_endian)
  4090e4:	3c020042 	lui	v0,0x42
  4090e8:	8c425808 	lw	v0,22536(v0)
  4090ec:	10400011 	beqz	v0,409134 <host_to_le32+0x60>
  4090f0:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:59
    /* ADB:auto fix endian.] */
    return H4(n);
  4090f4:	8fc20008 	lw	v0,8(s8)
  4090f8:	00021e02 	srl	v1,v0,0x18
  4090fc:	8fc40008 	lw	a0,8(s8)
  409100:	3c0200ff 	lui	v0,0xff
  409104:	00821024 	and	v0,a0,v0
  409108:	00021202 	srl	v0,v0,0x8
  40910c:	00621825 	or	v1,v1,v0
  409110:	8fc20008 	lw	v0,8(s8)
  409114:	3042ff00 	andi	v0,v0,0xff00
  409118:	00021200 	sll	v0,v0,0x8
  40911c:	00621825 	or	v1,v1,v0
  409120:	8fc20008 	lw	v0,8(s8)
  409124:	00021600 	sll	v0,v0,0x18
  409128:	00621025 	or	v0,v1,v0
  40912c:	10000002 	b	409138 <host_to_le32+0x64>
  409130:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:62
	/* ADB:auto fix endian.[ */
	else
	return n;
  409134:	8fc20008 	lw	v0,8(s8)
/home_a/ppchen/adb/transport_usb.c:64
	/* ADB:auto fix endian.] */
}
  409138:	03c0e821 	move	sp,s8
  40913c:	8fbe0004 	lw	s8,4(sp)
  409140:	27bd0008 	addiu	sp,sp,8
  409144:	03e00008 	jr	ra
  409148:	00000000 	nop

0040914c <remote_read>:
remote_read():
/home_a/ppchen/adb/transport_usb.c:74
    return n;
}
#endif

static int remote_read(apacket *p, atransport *t)
{
  40914c:	27bdffe0 	addiu	sp,sp,-32
  409150:	afbf001c 	sw	ra,28(sp)
  409154:	afbe0018 	sw	s8,24(sp)
  409158:	03a0f021 	move	s8,sp
  40915c:	afc40020 	sw	a0,32(s8)
  409160:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/transport_usb.c:76

    if(usb_read(t->usb, &p->msg, sizeof(amessage))){
  409164:	8fc20024 	lw	v0,36(s8)
  409168:	8c43004c 	lw	v1,76(v0)
  40916c:	8fc20020 	lw	v0,32(s8)
  409170:	2442000c 	addiu	v0,v0,12
  409174:	00602021 	move	a0,v1
  409178:	00402821 	move	a1,v0
  40917c:	24060018 	li	a2,24
  409180:	0c10455b 	jal	41156c <usb_read>
  409184:	00000000 	nop
  409188:	10400004 	beqz	v0,40919c <remote_read+0x50>
  40918c:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:78

        return -1;
  409190:	2402ffff 	li	v0,-1
  409194:	10000028 	b	409238 <remote_read+0xec>
  409198:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:81
    }

    fix_endians(p);
  40919c:	8fc40020 	lw	a0,32(s8)
  4091a0:	0c1023b0 	jal	408ec0 <fix_endians>
  4091a4:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:83

    if(check_header(p)) {
  4091a8:	8fc40020 	lw	a0,32(s8)
  4091ac:	0c10200c 	jal	408030 <check_header>
  4091b0:	00000000 	nop
  4091b4:	10400004 	beqz	v0,4091c8 <remote_read+0x7c>
  4091b8:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:85
 
        return -1;
  4091bc:	2402ffff 	li	v0,-1
  4091c0:	1000001d 	b	409238 <remote_read+0xec>
  4091c4:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:88
    }

    if(p->msg.data_length) {
  4091c8:	8fc20020 	lw	v0,32(s8)
  4091cc:	8c420018 	lw	v0,24(v0)
  4091d0:	10400010 	beqz	v0,409214 <remote_read+0xc8>
  4091d4:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:89
        if(usb_read(t->usb, p->data, p->msg.data_length)){
  4091d8:	8fc20024 	lw	v0,36(s8)
  4091dc:	8c44004c 	lw	a0,76(v0)
  4091e0:	8fc20020 	lw	v0,32(s8)
  4091e4:	24430024 	addiu	v1,v0,36
  4091e8:	8fc20020 	lw	v0,32(s8)
  4091ec:	8c420018 	lw	v0,24(v0)
  4091f0:	00602821 	move	a1,v1
  4091f4:	00403021 	move	a2,v0
  4091f8:	0c10455b 	jal	41156c <usb_read>
  4091fc:	00000000 	nop
  409200:	10400004 	beqz	v0,409214 <remote_read+0xc8>
  409204:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:91
     
            return -1;
  409208:	2402ffff 	li	v0,-1
  40920c:	1000000a 	b	409238 <remote_read+0xec>
  409210:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:95
        }
    }

    if(check_data(p)) {
  409214:	8fc40020 	lw	a0,32(s8)
  409218:	0c1020bc 	jal	4082f0 <check_data>
  40921c:	00000000 	nop
  409220:	10400004 	beqz	v0,409234 <remote_read+0xe8>
  409224:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:97
 
        return -1;
  409228:	2402ffff 	li	v0,-1
  40922c:	10000002 	b	409238 <remote_read+0xec>
  409230:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:100
    }

    return 0;
  409234:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport_usb.c:101
}
  409238:	03c0e821 	move	sp,s8
  40923c:	8fbf001c 	lw	ra,28(sp)
  409240:	8fbe0018 	lw	s8,24(sp)
  409244:	27bd0020 	addiu	sp,sp,32
  409248:	03e00008 	jr	ra
  40924c:	00000000 	nop

00409250 <remote_write>:
remote_write():
/home_a/ppchen/adb/transport_usb.c:104

static int remote_write(apacket *p, atransport *t)
{
  409250:	27bdffd8 	addiu	sp,sp,-40
  409254:	afbf0024 	sw	ra,36(sp)
  409258:	afbe0020 	sw	s8,32(sp)
  40925c:	03a0f021 	move	s8,sp
  409260:	afc40028 	sw	a0,40(s8)
  409264:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/transport_usb.c:106

    unsigned size = p->msg.data_length;
  409268:	8fc20028 	lw	v0,40(s8)
  40926c:	8c420018 	lw	v0,24(v0)
  409270:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/transport_usb.c:108

    fix_endians(p);
  409274:	8fc40028 	lw	a0,40(s8)
  409278:	0c1023b0 	jal	408ec0 <fix_endians>
  40927c:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:110

    if(usb_write(t->usb, &p->msg, sizeof(amessage))) {
  409280:	8fc2002c 	lw	v0,44(s8)
  409284:	8c43004c 	lw	v1,76(v0)
  409288:	8fc20028 	lw	v0,40(s8)
  40928c:	2442000c 	addiu	v0,v0,12
  409290:	00602021 	move	a0,v1
  409294:	00402821 	move	a1,v0
  409298:	24060018 	li	a2,24
  40929c:	0c10453d 	jal	4114f4 <usb_write>
  4092a0:	00000000 	nop
  4092a4:	10400004 	beqz	v0,4092b8 <remote_write+0x68>
  4092a8:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:112
      
        return -1;
  4092ac:	2402ffff 	li	v0,-1
  4092b0:	10000017 	b	409310 <remote_write+0xc0>
  4092b4:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:114
    }
    if(p->msg.data_length == 0) return 0;
  4092b8:	8fc20028 	lw	v0,40(s8)
  4092bc:	8c420018 	lw	v0,24(v0)
  4092c0:	14400004 	bnez	v0,4092d4 <remote_write+0x84>
  4092c4:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:114 (discriminator 1)
  4092c8:	00001021 	move	v0,zero
  4092cc:	10000010 	b	409310 <remote_write+0xc0>
  4092d0:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:115
    if(usb_write(t->usb, &p->data, size)) {
  4092d4:	8fc2002c 	lw	v0,44(s8)
  4092d8:	8c44004c 	lw	a0,76(v0)
  4092dc:	8fc20028 	lw	v0,40(s8)
  4092e0:	24430024 	addiu	v1,v0,36
  4092e4:	8fc20018 	lw	v0,24(s8)
  4092e8:	00602821 	move	a1,v1
  4092ec:	00403021 	move	a2,v0
  4092f0:	0c10453d 	jal	4114f4 <usb_write>
  4092f4:	00000000 	nop
  4092f8:	10400004 	beqz	v0,40930c <remote_write+0xbc>
  4092fc:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:117
     
        return -1;
  409300:	2402ffff 	li	v0,-1
  409304:	10000002 	b	409310 <remote_write+0xc0>
  409308:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:120
    }

    return 0;
  40930c:	00001021 	move	v0,zero
/home_a/ppchen/adb/transport_usb.c:121
}
  409310:	03c0e821 	move	sp,s8
  409314:	8fbf0024 	lw	ra,36(sp)
  409318:	8fbe0020 	lw	s8,32(sp)
  40931c:	27bd0028 	addiu	sp,sp,40
  409320:	03e00008 	jr	ra
  409324:	00000000 	nop

00409328 <remote_close>:
remote_close():
/home_a/ppchen/adb/transport_usb.c:124

static void remote_close(atransport *t)
{
  409328:	27bdffe0 	addiu	sp,sp,-32
  40932c:	afbf001c 	sw	ra,28(sp)
  409330:	afbe0018 	sw	s8,24(sp)
  409334:	03a0f021 	move	s8,sp
  409338:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport_usb.c:125
    usb_close(t->usb);
  40933c:	8fc20020 	lw	v0,32(s8)
  409340:	8c42004c 	lw	v0,76(v0)
  409344:	00402021 	move	a0,v0
  409348:	0c1045d4 	jal	411750 <usb_close>
  40934c:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:126
    t->usb = 0;
  409350:	8fc20020 	lw	v0,32(s8)
  409354:	ac40004c 	sw	zero,76(v0)
/home_a/ppchen/adb/transport_usb.c:127
}
  409358:	03c0e821 	move	sp,s8
  40935c:	8fbf001c 	lw	ra,28(sp)
  409360:	8fbe0018 	lw	s8,24(sp)
  409364:	27bd0020 	addiu	sp,sp,32
  409368:	03e00008 	jr	ra
  40936c:	00000000 	nop

00409370 <remote_kick>:
remote_kick():
/home_a/ppchen/adb/transport_usb.c:130

static void remote_kick(atransport *t)
{
  409370:	27bdffe0 	addiu	sp,sp,-32
  409374:	afbf001c 	sw	ra,28(sp)
  409378:	afbe0018 	sw	s8,24(sp)
  40937c:	03a0f021 	move	s8,sp
  409380:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/transport_usb.c:131
    usb_kick(t->usb);
  409384:	8fc20020 	lw	v0,32(s8)
  409388:	8c42004c 	lw	v0,76(v0)
  40938c:	00402021 	move	a0,v0
  409390:	0c1045b2 	jal	4116c8 <usb_kick>
  409394:	00000000 	nop
/home_a/ppchen/adb/transport_usb.c:132
}
  409398:	03c0e821 	move	sp,s8
  40939c:	8fbf001c 	lw	ra,28(sp)
  4093a0:	8fbe0018 	lw	s8,24(sp)
  4093a4:	27bd0020 	addiu	sp,sp,32
  4093a8:	03e00008 	jr	ra
  4093ac:	00000000 	nop

004093b0 <init_usb_transport>:
init_usb_transport():
/home_a/ppchen/adb/transport_usb.c:135

void init_usb_transport(atransport *t, usb_handle *h, int state)
{
  4093b0:	27bdfff8 	addiu	sp,sp,-8
  4093b4:	afbe0004 	sw	s8,4(sp)
  4093b8:	03a0f021 	move	s8,sp
  4093bc:	afc40008 	sw	a0,8(s8)
  4093c0:	afc5000c 	sw	a1,12(s8)
  4093c4:	afc60010 	sw	a2,16(s8)
/home_a/ppchen/adb/transport_usb.c:137

    t->close = remote_close;
  4093c8:	8fc20008 	lw	v0,8(s8)
  4093cc:	3c030041 	lui	v1,0x41
  4093d0:	24639328 	addiu	v1,v1,-27864
  4093d4:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/transport_usb.c:138
    t->kick = remote_kick;
  4093d8:	8fc20008 	lw	v0,8(s8)
  4093dc:	3c030041 	lui	v1,0x41
  4093e0:	24639370 	addiu	v1,v1,-27792
  4093e4:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/transport_usb.c:139
    t->read_from_remote = remote_read;
  4093e8:	8fc20008 	lw	v0,8(s8)
  4093ec:	3c030041 	lui	v1,0x41
  4093f0:	2463914c 	addiu	v1,v1,-28340
  4093f4:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/transport_usb.c:140
    t->write_to_remote = remote_write;
  4093f8:	8fc20008 	lw	v0,8(s8)
  4093fc:	3c030041 	lui	v1,0x41
  409400:	24639250 	addiu	v1,v1,-28080
  409404:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/transport_usb.c:141
    t->sync_token = 1;
  409408:	8fc20008 	lw	v0,8(s8)
  40940c:	24030001 	li	v1,1
  409410:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/transport_usb.c:142
    t->connection_state = state;
  409414:	8fc20008 	lw	v0,8(s8)
  409418:	8fc30010 	lw	v1,16(s8)
  40941c:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/transport_usb.c:143
    t->type = kTransportUsb;
  409420:	8fc20008 	lw	v0,8(s8)
  409424:	ac400048 	sw	zero,72(v0)
/home_a/ppchen/adb/transport_usb.c:144
    t->usb = h;
  409428:	8fc20008 	lw	v0,8(s8)
  40942c:	8fc3000c 	lw	v1,12(s8)
  409430:	ac43004c 	sw	v1,76(v0)
/home_a/ppchen/adb/transport_usb.c:149

#if ADB_HOST
    HOST = 1;
#else
    HOST = 0;
  409434:	3c020042 	lui	v0,0x42
  409438:	ac40580c 	sw	zero,22540(v0)
/home_a/ppchen/adb/transport_usb.c:151
#endif
}
  40943c:	03c0e821 	move	sp,s8
  409440:	8fbe0004 	lw	s8,4(sp)
  409444:	27bd0008 	addiu	sp,sp,8
  409448:	03e00008 	jr	ra
  40944c:	00000000 	nop

00409450 <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  409450:	27bdffe0 	addiu	sp,sp,-32
  409454:	afbf001c 	sw	ra,28(sp)
  409458:	afbe0018 	sw	s8,24(sp)
  40945c:	03a0f021 	move	s8,sp
  409460:	afc40020 	sw	a0,32(s8)
  409464:	afc50024 	sw	a1,36(s8)
  409468:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  40946c:	8fc40020 	lw	a0,32(s8)
  409470:	8fc50024 	lw	a1,36(s8)
  409474:	8fc60028 	lw	a2,40(s8)
  409478:	0c105340 	jal	414d00 <read@plt>
  40947c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  409480:	03c0e821 	move	sp,s8
  409484:	8fbf001c 	lw	ra,28(sp)
  409488:	8fbe0018 	lw	s8,24(sp)
  40948c:	27bd0020 	addiu	sp,sp,32
  409490:	03e00008 	jr	ra
  409494:	00000000 	nop

00409498 <adb_write>:
adb_write():
/home_a/ppchen/adb/sysdeps.h:367

#undef   read
#define  read  ___xxx_read

static __inline__ int  adb_write(int  fd, const void*  buf, size_t  len)
{
  409498:	27bdffe0 	addiu	sp,sp,-32
  40949c:	afbf001c 	sw	ra,28(sp)
  4094a0:	afbe0018 	sw	s8,24(sp)
  4094a4:	03a0f021 	move	s8,sp
  4094a8:	afc40020 	sw	a0,32(s8)
  4094ac:	afc50024 	sw	a1,36(s8)
  4094b0:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:368
    return write(fd, buf, len);
  4094b4:	8fc40020 	lw	a0,32(s8)
  4094b8:	8fc50024 	lw	a1,36(s8)
  4094bc:	8fc60028 	lw	a2,40(s8)
  4094c0:	0c10536c 	jal	414db0 <write@plt>
  4094c4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:369
}
  4094c8:	03c0e821 	move	sp,s8
  4094cc:	8fbf001c 	lw	ra,28(sp)
  4094d0:	8fbe0018 	lw	s8,24(sp)
  4094d4:	27bd0020 	addiu	sp,sp,32
  4094d8:	03e00008 	jr	ra
  4094dc:	00000000 	nop

004094e0 <sendfailmsg>:
sendfailmsg():
/home_a/ppchen/adb/sockets.c:34
ADB_MUTEX_DEFINE( socket_list_lock );

static void local_socket_close_locked(asocket *s);

int sendfailmsg(int fd, const char *reason)
{
  4094e0:	27bdffd0 	addiu	sp,sp,-48
  4094e4:	afbf002c 	sw	ra,44(sp)
  4094e8:	afbe0028 	sw	s8,40(sp)
  4094ec:	03a0f021 	move	s8,sp
  4094f0:	afc40030 	sw	a0,48(s8)
  4094f4:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/sockets.c:37
    char buf[9];
    int len;
    len = strlen(reason);
  4094f8:	8fc40034 	lw	a0,52(s8)
  4094fc:	0c10531c 	jal	414c70 <strlen@plt>
  409500:	00000000 	nop
  409504:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:38
    if(len > 0xffff) len = 0xffff;
  409508:	8fc30018 	lw	v1,24(s8)
  40950c:	3c020001 	lui	v0,0x1
  409510:	0062102a 	slt	v0,v1,v0
  409514:	14400003 	bnez	v0,409524 <sendfailmsg+0x44>
  409518:	00000000 	nop
/home_a/ppchen/adb/sockets.c:38 (discriminator 1)
  40951c:	3402ffff 	li	v0,0xffff
  409520:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:39
    snprintf(buf, sizeof buf, "FAIL%04x", len);
  409524:	27c2001c 	addiu	v0,s8,28
  409528:	00402021 	move	a0,v0
  40952c:	24050009 	li	a1,9
  409530:	3c020041 	lui	v0,0x41
  409534:	24463920 	addiu	a2,v0,14624
  409538:	8fc70018 	lw	a3,24(s8)
  40953c:	0c105334 	jal	414cd0 <snprintf@plt>
  409540:	00000000 	nop
/home_a/ppchen/adb/sockets.c:40
    if(writex(fd, buf, 8)) return -1;
  409544:	27c2001c 	addiu	v0,s8,28
  409548:	8fc40030 	lw	a0,48(s8)
  40954c:	00402821 	move	a1,v0
  409550:	24060008 	li	a2,8
  409554:	0c101f4e 	jal	407d38 <writex>
  409558:	00000000 	nop
  40955c:	10400004 	beqz	v0,409570 <sendfailmsg+0x90>
  409560:	00000000 	nop
/home_a/ppchen/adb/sockets.c:40 (discriminator 1)
  409564:	2402ffff 	li	v0,-1
  409568:	10000007 	b	409588 <sendfailmsg+0xa8>
  40956c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:41
    return writex(fd, reason, len);
  409570:	8fc20018 	lw	v0,24(s8)
  409574:	8fc40030 	lw	a0,48(s8)
  409578:	8fc50034 	lw	a1,52(s8)
  40957c:	00403021 	move	a2,v0
  409580:	0c101f4e 	jal	407d38 <writex>
  409584:	00000000 	nop
/home_a/ppchen/adb/sockets.c:42
}
  409588:	03c0e821 	move	sp,s8
  40958c:	8fbf002c 	lw	ra,44(sp)
  409590:	8fbe0028 	lw	s8,40(sp)
  409594:	27bd0030 	addiu	sp,sp,48
  409598:	03e00008 	jr	ra
  40959c:	00000000 	nop

004095a0 <find_local_socket>:
find_local_socket():
/home_a/ppchen/adb/sockets.c:63
    .next = &local_socket_closing_list,
    .prev = &local_socket_closing_list,
};

asocket *find_local_socket(unsigned id)
{
  4095a0:	27bdffd8 	addiu	sp,sp,-40
  4095a4:	afbf0024 	sw	ra,36(sp)
  4095a8:	afbe0020 	sw	s8,32(sp)
  4095ac:	03a0f021 	move	s8,sp
  4095b0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:65
    asocket *s;
    asocket *result = NULL;
  4095b4:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/sockets.c:67

    adb_mutex_lock(&socket_list_lock);
  4095b8:	3c020042 	lui	v0,0x42
  4095bc:	244459f0 	addiu	a0,v0,23024
  4095c0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4095c4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:68
    for (s = local_socket_list.next; s != &local_socket_list; s = s->next) {
  4095c8:	3c020042 	lui	v0,0x42
  4095cc:	8c4256d4 	lw	v0,22228(v0)
  4095d0:	afc20018 	sw	v0,24(s8)
  4095d4:	1000000d 	b	40960c <find_local_socket+0x6c>
  4095d8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:69
        if (s->id == id) {
  4095dc:	8fc20018 	lw	v0,24(s8)
  4095e0:	8c430008 	lw	v1,8(v0)
  4095e4:	8fc20028 	lw	v0,40(s8)
  4095e8:	14620005 	bne	v1,v0,409600 <find_local_socket+0x60>
  4095ec:	00000000 	nop
/home_a/ppchen/adb/sockets.c:70
            result = s;
  4095f0:	8fc20018 	lw	v0,24(s8)
  4095f4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:71
            break;
  4095f8:	10000009 	b	409620 <find_local_socket+0x80>
  4095fc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:68
{
    asocket *s;
    asocket *result = NULL;

    adb_mutex_lock(&socket_list_lock);
    for (s = local_socket_list.next; s != &local_socket_list; s = s->next) {
  409600:	8fc20018 	lw	v0,24(s8)
  409604:	8c420000 	lw	v0,0(v0)
  409608:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:68 (discriminator 1)
  40960c:	8fc30018 	lw	v1,24(s8)
  409610:	3c020042 	lui	v0,0x42
  409614:	244256d4 	addiu	v0,v0,22228
  409618:	1462fff0 	bne	v1,v0,4095dc <find_local_socket+0x3c>
  40961c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:74
        if (s->id == id) {
            result = s;
            break;
        }
    }
    adb_mutex_unlock(&socket_list_lock);
  409620:	3c020042 	lui	v0,0x42
  409624:	244459f0 	addiu	a0,v0,23024
  409628:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40962c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:76

    return result;
  409630:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:77
}
  409634:	03c0e821 	move	sp,s8
  409638:	8fbf0024 	lw	ra,36(sp)
  40963c:	8fbe0020 	lw	s8,32(sp)
  409640:	27bd0028 	addiu	sp,sp,40
  409644:	03e00008 	jr	ra
  409648:	00000000 	nop

0040964c <insert_local_socket>:
insert_local_socket():
/home_a/ppchen/adb/sockets.c:81

static void
insert_local_socket(asocket*  s, asocket*  list)
{
  40964c:	27bdfff8 	addiu	sp,sp,-8
  409650:	afbe0004 	sw	s8,4(sp)
  409654:	03a0f021 	move	s8,sp
  409658:	afc40008 	sw	a0,8(s8)
  40965c:	afc5000c 	sw	a1,12(s8)
/home_a/ppchen/adb/sockets.c:82
    s->next       = list;
  409660:	8fc20008 	lw	v0,8(s8)
  409664:	8fc3000c 	lw	v1,12(s8)
  409668:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/sockets.c:83
    s->prev       = s->next->prev;
  40966c:	8fc20008 	lw	v0,8(s8)
  409670:	8c420000 	lw	v0,0(v0)
  409674:	8c430004 	lw	v1,4(v0)
  409678:	8fc20008 	lw	v0,8(s8)
  40967c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:84
    s->prev->next = s;
  409680:	8fc20008 	lw	v0,8(s8)
  409684:	8c420004 	lw	v0,4(v0)
  409688:	8fc30008 	lw	v1,8(s8)
  40968c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/sockets.c:85
    s->next->prev = s;
  409690:	8fc20008 	lw	v0,8(s8)
  409694:	8c420000 	lw	v0,0(v0)
  409698:	8fc30008 	lw	v1,8(s8)
  40969c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:86
}
  4096a0:	03c0e821 	move	sp,s8
  4096a4:	8fbe0004 	lw	s8,4(sp)
  4096a8:	27bd0008 	addiu	sp,sp,8
  4096ac:	03e00008 	jr	ra
  4096b0:	00000000 	nop

004096b4 <install_local_socket>:
install_local_socket():
/home_a/ppchen/adb/sockets.c:90


void install_local_socket(asocket *s)
{
  4096b4:	27bdffe0 	addiu	sp,sp,-32
  4096b8:	afbf001c 	sw	ra,28(sp)
  4096bc:	afbe0018 	sw	s8,24(sp)
  4096c0:	03a0f021 	move	s8,sp
  4096c4:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:91
    adb_mutex_lock(&socket_list_lock);
  4096c8:	3c020042 	lui	v0,0x42
  4096cc:	244459f0 	addiu	a0,v0,23024
  4096d0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4096d4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:93

    s->id = local_socket_next_id++;
  4096d8:	3c020042 	lui	v0,0x42
  4096dc:	8c4256d0 	lw	v0,22224(v0)
  4096e0:	8fc30020 	lw	v1,32(s8)
  4096e4:	ac620008 	sw	v0,8(v1)
  4096e8:	24430001 	addiu	v1,v0,1
  4096ec:	3c020042 	lui	v0,0x42
  4096f0:	ac4356d0 	sw	v1,22224(v0)
/home_a/ppchen/adb/sockets.c:94
    insert_local_socket(s, &local_socket_list);
  4096f4:	8fc40020 	lw	a0,32(s8)
  4096f8:	3c020042 	lui	v0,0x42
  4096fc:	244556d4 	addiu	a1,v0,22228
  409700:	0c102593 	jal	40964c <insert_local_socket>
  409704:	00000000 	nop
/home_a/ppchen/adb/sockets.c:96

    adb_mutex_unlock(&socket_list_lock);
  409708:	3c020042 	lui	v0,0x42
  40970c:	244459f0 	addiu	a0,v0,23024
  409710:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  409714:	00000000 	nop
/home_a/ppchen/adb/sockets.c:97
}
  409718:	03c0e821 	move	sp,s8
  40971c:	8fbf001c 	lw	ra,28(sp)
  409720:	8fbe0018 	lw	s8,24(sp)
  409724:	27bd0020 	addiu	sp,sp,32
  409728:	03e00008 	jr	ra
  40972c:	00000000 	nop

00409730 <remove_socket>:
remove_socket():
/home_a/ppchen/adb/sockets.c:100

void remove_socket(asocket *s)
{
  409730:	27bdfff8 	addiu	sp,sp,-8
  409734:	afbe0004 	sw	s8,4(sp)
  409738:	03a0f021 	move	s8,sp
  40973c:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/sockets.c:102
    // socket_list_lock should already be held
    if (s->prev && s->next)
  409740:	8fc20008 	lw	v0,8(s8)
  409744:	8c420004 	lw	v0,4(v0)
  409748:	10400015 	beqz	v0,4097a0 <remove_socket+0x70>
  40974c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:102 (discriminator 1)
  409750:	8fc20008 	lw	v0,8(s8)
  409754:	8c420000 	lw	v0,0(v0)
  409758:	10400011 	beqz	v0,4097a0 <remove_socket+0x70>
  40975c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:104
    {
        s->prev->next = s->next;
  409760:	8fc20008 	lw	v0,8(s8)
  409764:	8c420004 	lw	v0,4(v0)
  409768:	8fc30008 	lw	v1,8(s8)
  40976c:	8c630000 	lw	v1,0(v1)
  409770:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/sockets.c:105
        s->next->prev = s->prev;
  409774:	8fc20008 	lw	v0,8(s8)
  409778:	8c420000 	lw	v0,0(v0)
  40977c:	8fc30008 	lw	v1,8(s8)
  409780:	8c630004 	lw	v1,4(v1)
  409784:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:106
        s->next = 0;
  409788:	8fc20008 	lw	v0,8(s8)
  40978c:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/sockets.c:107
        s->prev = 0;
  409790:	8fc20008 	lw	v0,8(s8)
  409794:	ac400004 	sw	zero,4(v0)
/home_a/ppchen/adb/sockets.c:108
        s->id = 0;
  409798:	8fc20008 	lw	v0,8(s8)
  40979c:	ac400008 	sw	zero,8(v0)
/home_a/ppchen/adb/sockets.c:110
    }
}
  4097a0:	03c0e821 	move	sp,s8
  4097a4:	8fbe0004 	lw	s8,4(sp)
  4097a8:	27bd0008 	addiu	sp,sp,8
  4097ac:	03e00008 	jr	ra
  4097b0:	00000000 	nop

004097b4 <close_all_sockets>:
close_all_sockets():
/home_a/ppchen/adb/sockets.c:113

void close_all_sockets(atransport *t)
{
  4097b4:	27bdffd8 	addiu	sp,sp,-40
  4097b8:	afbf0024 	sw	ra,36(sp)
  4097bc:	afbe0020 	sw	s8,32(sp)
  4097c0:	03a0f021 	move	s8,sp
  4097c4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:119
    asocket *s;

        /* this is a little gross, but since s->close() *will* modify
        ** the list out from under you, your options are limited.
        */
    adb_mutex_lock(&socket_list_lock);
  4097c8:	3c020042 	lui	v0,0x42
  4097cc:	244459f0 	addiu	a0,v0,23024
  4097d0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4097d4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:121
restart:
    for(s = local_socket_list.next; s != &local_socket_list; s = s->next){
  4097d8:	3c020042 	lui	v0,0x42
  4097dc:	8c4256d4 	lw	v0,22228(v0)
  4097e0:	afc20018 	sw	v0,24(s8)
  4097e4:	10000018 	b	409848 <close_all_sockets+0x94>
  4097e8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:122
        if(s->transport == t || (s->peer && s->peer->transport == t)) {
  4097ec:	8fc20018 	lw	v0,24(s8)
  4097f0:	8c430050 	lw	v1,80(v0)
  4097f4:	8fc20028 	lw	v0,40(s8)
  4097f8:	1062000b 	beq	v1,v0,409828 <close_all_sockets+0x74>
  4097fc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:122 (discriminator 1)
  409800:	8fc20018 	lw	v0,24(s8)
  409804:	8c420014 	lw	v0,20(v0)
  409808:	1040000c 	beqz	v0,40983c <close_all_sockets+0x88>
  40980c:	00000000 	nop
  409810:	8fc20018 	lw	v0,24(s8)
  409814:	8c420014 	lw	v0,20(v0)
  409818:	8c430050 	lw	v1,80(v0)
  40981c:	8fc20028 	lw	v0,40(s8)
  409820:	14620006 	bne	v1,v0,40983c <close_all_sockets+0x88>
  409824:	00000000 	nop
/home_a/ppchen/adb/sockets.c:123
            local_socket_close_locked(s);
  409828:	8fc40018 	lw	a0,24(s8)
  40982c:	0c1026e3 	jal	409b8c <local_socket_close_locked>
  409830:	00000000 	nop
/home_a/ppchen/adb/sockets.c:124
            goto restart;
  409834:	1000ffe8 	b	4097d8 <close_all_sockets+0x24>
  409838:	00000000 	nop
/home_a/ppchen/adb/sockets.c:121
        /* this is a little gross, but since s->close() *will* modify
        ** the list out from under you, your options are limited.
        */
    adb_mutex_lock(&socket_list_lock);
restart:
    for(s = local_socket_list.next; s != &local_socket_list; s = s->next){
  40983c:	8fc20018 	lw	v0,24(s8)
  409840:	8c420000 	lw	v0,0(v0)
  409844:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:121 (discriminator 1)
  409848:	8fc30018 	lw	v1,24(s8)
  40984c:	3c020042 	lui	v0,0x42
  409850:	244256d4 	addiu	v0,v0,22228
  409854:	1462ffe5 	bne	v1,v0,4097ec <close_all_sockets+0x38>
  409858:	00000000 	nop
/home_a/ppchen/adb/sockets.c:127
        if(s->transport == t || (s->peer && s->peer->transport == t)) {
            local_socket_close_locked(s);
            goto restart;
        }
    }
    adb_mutex_unlock(&socket_list_lock);
  40985c:	3c020042 	lui	v0,0x42
  409860:	244459f0 	addiu	a0,v0,23024
  409864:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  409868:	00000000 	nop
/home_a/ppchen/adb/sockets.c:128
}
  40986c:	03c0e821 	move	sp,s8
  409870:	8fbf0024 	lw	ra,36(sp)
  409874:	8fbe0020 	lw	s8,32(sp)
  409878:	27bd0028 	addiu	sp,sp,40
  40987c:	03e00008 	jr	ra
  409880:	00000000 	nop

00409884 <local_socket_enqueue>:
local_socket_enqueue():
/home_a/ppchen/adb/sockets.c:131

static int local_socket_enqueue(asocket *s, apacket *p)
{
  409884:	27bdffd8 	addiu	sp,sp,-40
  409888:	afbf0024 	sw	ra,36(sp)
  40988c:	afbe0020 	sw	s8,32(sp)
  409890:	03a0f021 	move	s8,sp
  409894:	afc40028 	sw	a0,40(s8)
  409898:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sockets.c:134
   

    p->ptr = p->data;
  40989c:	8fc2002c 	lw	v0,44(s8)
  4098a0:	24430024 	addiu	v1,v0,36
  4098a4:	8fc2002c 	lw	v0,44(s8)
  4098a8:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/sockets.c:140

        /* if there is already data queue'd, we will receive
        ** events when it's time to write.  just add this to
        ** the tail
        */
    if(s->pkt_first) {
  4098ac:	8fc20028 	lw	v0,40(s8)
  4098b0:	8c420038 	lw	v0,56(v0)
  4098b4:	10400031 	beqz	v0,40997c <local_socket_enqueue+0xf8>
  4098b8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:141
        goto enqueue;
  4098bc:	1000003e 	b	4099b8 <local_socket_enqueue+0x134>
  4098c0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:148

        /* write as much as we can, until we
        ** would block or there is an error/eof
        */
    while(p->len > 0) {
        int r = adb_write(s->fd, p->ptr, p->len);
  4098c4:	8fc20028 	lw	v0,40(s8)
  4098c8:	8c440034 	lw	a0,52(v0)
  4098cc:	8fc2002c 	lw	v0,44(s8)
  4098d0:	8c430008 	lw	v1,8(v0)
  4098d4:	8fc2002c 	lw	v0,44(s8)
  4098d8:	8c420004 	lw	v0,4(v0)
  4098dc:	00602821 	move	a1,v1
  4098e0:	00403021 	move	a2,v0
  4098e4:	0c102526 	jal	409498 <adb_write>
  4098e8:	00000000 	nop
  4098ec:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:150

        if(r > 0) {
  4098f0:	8fc20018 	lw	v0,24(s8)
  4098f4:	1840000f 	blez	v0,409934 <local_socket_enqueue+0xb0>
  4098f8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:151
            p->len -= r;
  4098fc:	8fc2002c 	lw	v0,44(s8)
  409900:	8c430004 	lw	v1,4(v0)
  409904:	8fc20018 	lw	v0,24(s8)
  409908:	00621823 	subu	v1,v1,v0
  40990c:	8fc2002c 	lw	v0,44(s8)
  409910:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:152
            p->ptr += r;
  409914:	8fc2002c 	lw	v0,44(s8)
  409918:	8c430008 	lw	v1,8(v0)
  40991c:	8fc20018 	lw	v0,24(s8)
  409920:	00621821 	addu	v1,v1,v0
  409924:	8fc2002c 	lw	v0,44(s8)
  409928:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/sockets.c:153
            continue;
  40992c:	10000014 	b	409980 <local_socket_enqueue+0xfc>
  409930:	00000000 	nop
/home_a/ppchen/adb/sockets.c:155
        }
        if((r == 0) || (errno != EAGAIN)) {
  409934:	8fc20018 	lw	v0,24(s8)
  409938:	10400007 	beqz	v0,409958 <local_socket_enqueue+0xd4>
  40993c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:155 (discriminator 1)
  409940:	0c1052c0 	jal	414b00 <__errno_location@plt>
  409944:	00000000 	nop
  409948:	8c430000 	lw	v1,0(v0)
  40994c:	2402000b 	li	v0,11
  409950:	1062000f 	beq	v1,v0,409990 <local_socket_enqueue+0x10c>
  409954:	00000000 	nop
/home_a/ppchen/adb/sockets.c:157
           
            s->close(s);
  409958:	8fc20028 	lw	v0,40(s8)
  40995c:	8c420048 	lw	v0,72(v0)
  409960:	8fc40028 	lw	a0,40(s8)
  409964:	0040c821 	move	t9,v0
  409968:	0320f809 	jalr	t9
  40996c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:158
            return 1; /* not ready (error) */
  409970:	24020001 	li	v0,1
  409974:	10000029 	b	409a1c <local_socket_enqueue+0x198>
  409978:	00000000 	nop
/home_a/ppchen/adb/sockets.c:147
    }

        /* write as much as we can, until we
        ** would block or there is an error/eof
        */
    while(p->len > 0) {
  40997c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:147 (discriminator 1)
  409980:	8fc2002c 	lw	v0,44(s8)
  409984:	8c420004 	lw	v0,4(v0)
  409988:	1440ffce 	bnez	v0,4098c4 <local_socket_enqueue+0x40>
  40998c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:166
        }
    }


	
    if(p->len == 0) {
  409990:	8fc2002c 	lw	v0,44(s8)
  409994:	8c420004 	lw	v0,4(v0)
  409998:	14400007 	bnez	v0,4099b8 <local_socket_enqueue+0x134>
  40999c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:167
        put_apacket(p);
  4099a0:	8fc4002c 	lw	a0,44(s8)
  4099a4:	0c10078a 	jal	401e28 <put_apacket>
  4099a8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:168
        return 0; /* ready for more data */
  4099ac:	00001021 	move	v0,zero
  4099b0:	1000001a 	b	409a1c <local_socket_enqueue+0x198>
  4099b4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:172
    }

enqueue:
    p->next = 0;
  4099b8:	8fc2002c 	lw	v0,44(s8)
  4099bc:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/sockets.c:173
    if(s->pkt_first) {
  4099c0:	8fc20028 	lw	v0,40(s8)
  4099c4:	8c420038 	lw	v0,56(v0)
  4099c8:	10400007 	beqz	v0,4099e8 <local_socket_enqueue+0x164>
  4099cc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:174
        s->pkt_last->next = p;
  4099d0:	8fc20028 	lw	v0,40(s8)
  4099d4:	8c42003c 	lw	v0,60(v0)
  4099d8:	8fc3002c 	lw	v1,44(s8)
  4099dc:	ac430000 	sw	v1,0(v0)
  4099e0:	10000004 	b	4099f4 <local_socket_enqueue+0x170>
  4099e4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:176
    } else {
        s->pkt_first = p;
  4099e8:	8fc20028 	lw	v0,40(s8)
  4099ec:	8fc3002c 	lw	v1,44(s8)
  4099f0:	ac430038 	sw	v1,56(v0)
/home_a/ppchen/adb/sockets.c:178
    }
    s->pkt_last = p;
  4099f4:	8fc20028 	lw	v0,40(s8)
  4099f8:	8fc3002c 	lw	v1,44(s8)
  4099fc:	ac43003c 	sw	v1,60(v0)
/home_a/ppchen/adb/sockets.c:181
 
        /* make sure we are notified when we can drain the queue */
    fdevent_add(&s->fde, FDE_WRITE);
  409a00:	8fc20028 	lw	v0,40(s8)
  409a04:	24420018 	addiu	v0,v0,24
  409a08:	00402021 	move	a0,v0
  409a0c:	24050002 	li	a1,2
  409a10:	0c101735 	jal	405cd4 <fdevent_add>
  409a14:	00000000 	nop
/home_a/ppchen/adb/sockets.c:183

    return 1; /* not ready (backlog) */
  409a18:	24020001 	li	v0,1
/home_a/ppchen/adb/sockets.c:184
}
  409a1c:	03c0e821 	move	sp,s8
  409a20:	8fbf0024 	lw	ra,36(sp)
  409a24:	8fbe0020 	lw	s8,32(sp)
  409a28:	27bd0028 	addiu	sp,sp,40
  409a2c:	03e00008 	jr	ra
  409a30:	00000000 	nop

00409a34 <local_socket_ready>:
local_socket_ready():
/home_a/ppchen/adb/sockets.c:187

static void local_socket_ready(asocket *s)
{
  409a34:	27bdffe0 	addiu	sp,sp,-32
  409a38:	afbf001c 	sw	ra,28(sp)
  409a3c:	afbe0018 	sw	s8,24(sp)
  409a40:	03a0f021 	move	s8,sp
  409a44:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:190
        /* far side is ready for data, pay attention to
           readable events */
    fdevent_add(&s->fde, FDE_READ);
  409a48:	8fc20020 	lw	v0,32(s8)
  409a4c:	24420018 	addiu	v0,v0,24
  409a50:	00402021 	move	a0,v0
  409a54:	24050001 	li	a1,1
  409a58:	0c101735 	jal	405cd4 <fdevent_add>
  409a5c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:192
//    D("LS(%d): ready()\n", s->id);
}
  409a60:	03c0e821 	move	sp,s8
  409a64:	8fbf001c 	lw	ra,28(sp)
  409a68:	8fbe0018 	lw	s8,24(sp)
  409a6c:	27bd0020 	addiu	sp,sp,32
  409a70:	03e00008 	jr	ra
  409a74:	00000000 	nop

00409a78 <local_socket_close>:
local_socket_close():
/home_a/ppchen/adb/sockets.c:195

static void local_socket_close(asocket *s)
{
  409a78:	27bdffe0 	addiu	sp,sp,-32
  409a7c:	afbf001c 	sw	ra,28(sp)
  409a80:	afbe0018 	sw	s8,24(sp)
  409a84:	03a0f021 	move	s8,sp
  409a88:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:196
    adb_mutex_lock(&socket_list_lock);
  409a8c:	3c020042 	lui	v0,0x42
  409a90:	244459f0 	addiu	a0,v0,23024
  409a94:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  409a98:	00000000 	nop
/home_a/ppchen/adb/sockets.c:197
    local_socket_close_locked(s);
  409a9c:	8fc40020 	lw	a0,32(s8)
  409aa0:	0c1026e3 	jal	409b8c <local_socket_close_locked>
  409aa4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:198
    adb_mutex_unlock(&socket_list_lock);
  409aa8:	3c020042 	lui	v0,0x42
  409aac:	244459f0 	addiu	a0,v0,23024
  409ab0:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  409ab4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:199
}
  409ab8:	03c0e821 	move	sp,s8
  409abc:	8fbf001c 	lw	ra,28(sp)
  409ac0:	8fbe0018 	lw	s8,24(sp)
  409ac4:	27bd0020 	addiu	sp,sp,32
  409ac8:	03e00008 	jr	ra
  409acc:	00000000 	nop

00409ad0 <local_socket_destroy>:
local_socket_destroy():
/home_a/ppchen/adb/sockets.c:203

// be sure to hold the socket list lock when calling this
static void local_socket_destroy(asocket  *s)
{
  409ad0:	27bdffd0 	addiu	sp,sp,-48
  409ad4:	afbf002c 	sw	ra,44(sp)
  409ad8:	afbe0028 	sw	s8,40(sp)
  409adc:	03a0f021 	move	s8,sp
  409ae0:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/sockets.c:205
    apacket *p, *n;
    int exit_on_close = s->exit_on_close;
  409ae4:	8fc20030 	lw	v0,48(s8)
  409ae8:	8c420010 	lw	v0,16(v0)
  409aec:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:212
   

        /* IMPORTANT: the remove closes the fd
        ** that belongs to this socket
        */
    fdevent_remove(&s->fde);
  409af0:	8fc20030 	lw	v0,48(s8)
  409af4:	24420018 	addiu	v0,v0,24
  409af8:	00402021 	move	a0,v0
  409afc:	0c1016c0 	jal	405b00 <fdevent_remove>
  409b00:	00000000 	nop
/home_a/ppchen/adb/sockets.c:215

        /* dispose of any unwritten data */
    for(p = s->pkt_first; p; p = n) {
  409b04:	8fc20030 	lw	v0,48(s8)
  409b08:	8c420038 	lw	v0,56(v0)
  409b0c:	afc20018 	sw	v0,24(s8)
  409b10:	10000009 	b	409b38 <local_socket_destroy+0x68>
  409b14:	00000000 	nop
/home_a/ppchen/adb/sockets.c:217 (discriminator 2)
      
        n = p->next;
  409b18:	8fc20018 	lw	v0,24(s8)
  409b1c:	8c420000 	lw	v0,0(v0)
  409b20:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sockets.c:218 (discriminator 2)
        put_apacket(p);
  409b24:	8fc40018 	lw	a0,24(s8)
  409b28:	0c10078a 	jal	401e28 <put_apacket>
  409b2c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:215 (discriminator 2)
        ** that belongs to this socket
        */
    fdevent_remove(&s->fde);

        /* dispose of any unwritten data */
    for(p = s->pkt_first; p; p = n) {
  409b30:	8fc20020 	lw	v0,32(s8)
  409b34:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:215 (discriminator 1)
  409b38:	8fc20018 	lw	v0,24(s8)
  409b3c:	1440fff6 	bnez	v0,409b18 <local_socket_destroy+0x48>
  409b40:	00000000 	nop
/home_a/ppchen/adb/sockets.c:220
      
        n = p->next;
        put_apacket(p);
    }
    remove_socket(s);
  409b44:	8fc40030 	lw	a0,48(s8)
  409b48:	0c1025cc 	jal	409730 <remove_socket>
  409b4c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:221
    free(s);
  409b50:	8fc40030 	lw	a0,48(s8)
  409b54:	0c1053e4 	jal	414f90 <free@plt>
  409b58:	00000000 	nop
/home_a/ppchen/adb/sockets.c:223

    if (exit_on_close) {
  409b5c:	8fc2001c 	lw	v0,28(s8)
  409b60:	10400004 	beqz	v0,409b74 <local_socket_destroy+0xa4>
  409b64:	00000000 	nop
/home_a/ppchen/adb/sockets.c:225
      
        exit(1);
  409b68:	24040001 	li	a0,1
  409b6c:	0c1053cc 	jal	414f30 <exit@plt>
  409b70:	00000000 	nop
/home_a/ppchen/adb/sockets.c:227
    }
}
  409b74:	03c0e821 	move	sp,s8
  409b78:	8fbf002c 	lw	ra,44(sp)
  409b7c:	8fbe0028 	lw	s8,40(sp)
  409b80:	27bd0030 	addiu	sp,sp,48
  409b84:	03e00008 	jr	ra
  409b88:	00000000 	nop

00409b8c <local_socket_close_locked>:
local_socket_close_locked():
/home_a/ppchen/adb/sockets.c:231


static void local_socket_close_locked(asocket *s)
{
  409b8c:	27bdffd8 	addiu	sp,sp,-40
  409b90:	afbf0024 	sw	ra,36(sp)
  409b94:	afbe0020 	sw	s8,32(sp)
  409b98:	03a0f021 	move	s8,sp
  409b9c:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:233
   
    if(s->peer) {
  409ba0:	8fc20028 	lw	v0,40(s8)
  409ba4:	8c420014 	lw	v0,20(v0)
  409ba8:	1040001d 	beqz	v0,409c20 <local_socket_close_locked+0x94>
  409bac:	00000000 	nop
/home_a/ppchen/adb/sockets.c:235
   
        s->peer->peer = 0;
  409bb0:	8fc20028 	lw	v0,40(s8)
  409bb4:	8c420014 	lw	v0,20(v0)
  409bb8:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:237
        // tweak to avoid deadlock
        if (s->peer->close == local_socket_close) {
  409bbc:	8fc20028 	lw	v0,40(s8)
  409bc0:	8c420014 	lw	v0,20(v0)
  409bc4:	8c430048 	lw	v1,72(v0)
  409bc8:	3c020041 	lui	v0,0x41
  409bcc:	24429a78 	addiu	v0,v0,-25992
  409bd0:	14620008 	bne	v1,v0,409bf4 <local_socket_close_locked+0x68>
  409bd4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:238
            local_socket_close_locked(s->peer);
  409bd8:	8fc20028 	lw	v0,40(s8)
  409bdc:	8c420014 	lw	v0,20(v0)
  409be0:	00402021 	move	a0,v0
  409be4:	0c1026e3 	jal	409b8c <local_socket_close_locked>
  409be8:	00000000 	nop
  409bec:	1000000a 	b	409c18 <local_socket_close_locked+0x8c>
  409bf0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:240
        } else {
            s->peer->close(s->peer);
  409bf4:	8fc20028 	lw	v0,40(s8)
  409bf8:	8c420014 	lw	v0,20(v0)
  409bfc:	8c420048 	lw	v0,72(v0)
  409c00:	8fc30028 	lw	v1,40(s8)
  409c04:	8c630014 	lw	v1,20(v1)
  409c08:	00602021 	move	a0,v1
  409c0c:	0040c821 	move	t9,v0
  409c10:	0320f809 	jalr	t9
  409c14:	00000000 	nop
/home_a/ppchen/adb/sockets.c:242
        }
        s->peer = 0;
  409c18:	8fc20028 	lw	v0,40(s8)
  409c1c:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:248
    }

        /* If we are already closing, or if there are no
        ** pending packets, destroy immediately
        */
    if (s->closing || s->pkt_first == NULL) {
  409c20:	8fc20028 	lw	v0,40(s8)
  409c24:	8c42000c 	lw	v0,12(v0)
  409c28:	14400005 	bnez	v0,409c40 <local_socket_close_locked+0xb4>
  409c2c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:248 (discriminator 1)
  409c30:	8fc20028 	lw	v0,40(s8)
  409c34:	8c420038 	lw	v0,56(v0)
  409c38:	14400009 	bnez	v0,409c60 <local_socket_close_locked+0xd4>
  409c3c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:249
        int   id = s->id;
  409c40:	8fc20028 	lw	v0,40(s8)
  409c44:	8c420008 	lw	v0,8(v0)
  409c48:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:250
        local_socket_destroy(s);
  409c4c:	8fc40028 	lw	a0,40(s8)
  409c50:	0c1026b4 	jal	409ad0 <local_socket_destroy>
  409c54:	00000000 	nop
/home_a/ppchen/adb/sockets.c:252
    
        return;
  409c58:	10000012 	b	409ca4 <local_socket_close_locked+0x118>
  409c5c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:258
    }

        /* otherwise, put on the closing list
        */
   
    s->closing = 1;
  409c60:	8fc20028 	lw	v0,40(s8)
  409c64:	24030001 	li	v1,1
  409c68:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/sockets.c:259
    fdevent_del(&s->fde, FDE_READ);
  409c6c:	8fc20028 	lw	v0,40(s8)
  409c70:	24420018 	addiu	v0,v0,24
  409c74:	00402021 	move	a0,v0
  409c78:	24050001 	li	a1,1
  409c7c:	0c10174b 	jal	405d2c <fdevent_del>
  409c80:	00000000 	nop
/home_a/ppchen/adb/sockets.c:260
    remove_socket(s);
  409c84:	8fc40028 	lw	a0,40(s8)
  409c88:	0c1025cc 	jal	409730 <remove_socket>
  409c8c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:262
  
    insert_local_socket(s, &local_socket_closing_list);
  409c90:	8fc40028 	lw	a0,40(s8)
  409c94:	3c020042 	lui	v0,0x42
  409c98:	24455728 	addiu	a1,v0,22312
  409c9c:	0c102593 	jal	40964c <insert_local_socket>
  409ca0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:263
}
  409ca4:	03c0e821 	move	sp,s8
  409ca8:	8fbf0024 	lw	ra,36(sp)
  409cac:	8fbe0020 	lw	s8,32(sp)
  409cb0:	27bd0028 	addiu	sp,sp,40
  409cb4:	03e00008 	jr	ra
  409cb8:	00000000 	nop

00409cbc <local_socket_event_func>:
local_socket_event_func():
/home_a/ppchen/adb/sockets.c:266

static void local_socket_event_func(int fd, unsigned ev, void *_s)
{
  409cbc:	27bdffb8 	addiu	sp,sp,-72
  409cc0:	afbf0044 	sw	ra,68(sp)
  409cc4:	afbe0040 	sw	s8,64(sp)
  409cc8:	03a0f021 	move	s8,sp
  409ccc:	afc40048 	sw	a0,72(s8)
  409cd0:	afc5004c 	sw	a1,76(s8)
  409cd4:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sockets.c:267
    asocket *s = _s;
  409cd8:	8fc20050 	lw	v0,80(s8)
  409cdc:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/sockets.c:268
    int  a = 0;
  409ce0:	afc0002c 	sw	zero,44(s8)
/home_a/ppchen/adb/sockets.c:274
 

    /* put the FDE_WRITE processing before the FDE_READ
    ** in order to simplify the code.
    */
    if(ev & FDE_WRITE){
  409ce4:	8fc2004c 	lw	v0,76(s8)
  409ce8:	30420002 	andi	v0,v0,0x2
  409cec:	10400071 	beqz	v0,409eb4 <local_socket_event_func+0x1f8>
  409cf0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:277
        apacket *p;

        while((p = s->pkt_first) != 0) {
  409cf4:	1000004e 	b	409e30 <local_socket_event_func+0x174>
  409cf8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:278
	    a = p->len;
  409cfc:	8fc20030 	lw	v0,48(s8)
  409d00:	8c420004 	lw	v0,4(v0)
  409d04:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/sockets.c:279
            while(p->len > 0) {
  409d08:	10000034 	b	409ddc <local_socket_event_func+0x120>
  409d0c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:280
                int r = adb_write(fd, p->ptr, p->len);
  409d10:	8fc20030 	lw	v0,48(s8)
  409d14:	8c430008 	lw	v1,8(v0)
  409d18:	8fc20030 	lw	v0,48(s8)
  409d1c:	8c420004 	lw	v0,4(v0)
  409d20:	8fc40048 	lw	a0,72(s8)
  409d24:	00602821 	move	a1,v1
  409d28:	00403021 	move	a2,v0
  409d2c:	0c102526 	jal	409498 <adb_write>
  409d30:	00000000 	nop
  409d34:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/sockets.c:281
                if(r > 0) {
  409d38:	8fc20034 	lw	v0,52(s8)
  409d3c:	1840000f 	blez	v0,409d7c <local_socket_event_func+0xc0>
  409d40:	00000000 	nop
/home_a/ppchen/adb/sockets.c:282
                    p->ptr += r;
  409d44:	8fc20030 	lw	v0,48(s8)
  409d48:	8c430008 	lw	v1,8(v0)
  409d4c:	8fc20034 	lw	v0,52(s8)
  409d50:	00621821 	addu	v1,v1,v0
  409d54:	8fc20030 	lw	v0,48(s8)
  409d58:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/sockets.c:283
                    p->len -= r;
  409d5c:	8fc20030 	lw	v0,48(s8)
  409d60:	8c430004 	lw	v1,4(v0)
  409d64:	8fc20034 	lw	v0,52(s8)
  409d68:	00621823 	subu	v1,v1,v0
  409d6c:	8fc20030 	lw	v0,48(s8)
  409d70:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:284
                    continue;
  409d74:	10000019 	b	409ddc <local_socket_event_func+0x120>
  409d78:	00000000 	nop
/home_a/ppchen/adb/sockets.c:286
                }
                if(r < 0) {
  409d7c:	8fc20034 	lw	v0,52(s8)
  409d80:	0441000d 	bgez	v0,409db8 <local_socket_event_func+0xfc>
  409d84:	00000000 	nop
/home_a/ppchen/adb/sockets.c:290
                    /* returning here is ok because FDE_READ will
                    ** be processed in the next iteration loop
                    */
                    if(errno == EAGAIN) return;
  409d88:	0c1052c0 	jal	414b00 <__errno_location@plt>
  409d8c:	00000000 	nop
  409d90:	8c430000 	lw	v1,0(v0)
  409d94:	2402000b 	li	v0,11
  409d98:	106200bd 	beq	v1,v0,40a090 <local_socket_event_func+0x3d4>
  409d9c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:291
                    if(errno == EINTR) continue;
  409da0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  409da4:	00000000 	nop
  409da8:	8c430000 	lw	v1,0(v0)
  409dac:	24020004 	li	v0,4
  409db0:	10620009 	beq	v1,v0,409dd8 <local_socket_event_func+0x11c>
  409db4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:294
                }
               
                s->close(s);
  409db8:	8fc20028 	lw	v0,40(s8)
  409dbc:	8c420048 	lw	v0,72(v0)
  409dc0:	8fc40028 	lw	a0,40(s8)
  409dc4:	0040c821 	move	t9,v0
  409dc8:	0320f809 	jalr	t9
  409dcc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:295
                return;
  409dd0:	100000b6 	b	40a0ac <local_socket_event_func+0x3f0>
  409dd4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:291
                if(r < 0) {
                    /* returning here is ok because FDE_READ will
                    ** be processed in the next iteration loop
                    */
                    if(errno == EAGAIN) return;
                    if(errno == EINTR) continue;
  409dd8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:279 (discriminator 1)
    if(ev & FDE_WRITE){
        apacket *p;

        while((p = s->pkt_first) != 0) {
	    a = p->len;
            while(p->len > 0) {
  409ddc:	8fc20030 	lw	v0,48(s8)
  409de0:	8c420004 	lw	v0,4(v0)
  409de4:	1440ffca 	bnez	v0,409d10 <local_socket_event_func+0x54>
  409de8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:300
                return;
            }


	
            if(p->len == 0) {
  409dec:	8fc20030 	lw	v0,48(s8)
  409df0:	8c420004 	lw	v0,4(v0)
  409df4:	1440000e 	bnez	v0,409e30 <local_socket_event_func+0x174>
  409df8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:301
                s->pkt_first = p->next;
  409dfc:	8fc20030 	lw	v0,48(s8)
  409e00:	8c430000 	lw	v1,0(v0)
  409e04:	8fc20028 	lw	v0,40(s8)
  409e08:	ac430038 	sw	v1,56(v0)
/home_a/ppchen/adb/sockets.c:302
                if(s->pkt_first == 0) s->pkt_last = 0;
  409e0c:	8fc20028 	lw	v0,40(s8)
  409e10:	8c420038 	lw	v0,56(v0)
  409e14:	14400003 	bnez	v0,409e24 <local_socket_event_func+0x168>
  409e18:	00000000 	nop
/home_a/ppchen/adb/sockets.c:302 (discriminator 1)
  409e1c:	8fc20028 	lw	v0,40(s8)
  409e20:	ac40003c 	sw	zero,60(v0)
/home_a/ppchen/adb/sockets.c:303
                put_apacket(p);
  409e24:	8fc40030 	lw	a0,48(s8)
  409e28:	0c10078a 	jal	401e28 <put_apacket>
  409e2c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:277 (discriminator 1)
    ** in order to simplify the code.
    */
    if(ev & FDE_WRITE){
        apacket *p;

        while((p = s->pkt_first) != 0) {
  409e30:	8fc20028 	lw	v0,40(s8)
  409e34:	8c420038 	lw	v0,56(v0)
  409e38:	afc20030 	sw	v0,48(s8)
  409e3c:	8fc20030 	lw	v0,48(s8)
  409e40:	1440ffae 	bnez	v0,409cfc <local_socket_event_func+0x40>
  409e44:	00000000 	nop
/home_a/ppchen/adb/sockets.c:310
        }

            /* if we sent the last packet of a closing socket,
            ** we can now destroy it.
            */
        if (s->closing) {
  409e48:	8fc20028 	lw	v0,40(s8)
  409e4c:	8c42000c 	lw	v0,12(v0)
  409e50:	10400009 	beqz	v0,409e78 <local_socket_event_func+0x1bc>
  409e54:	00000000 	nop
/home_a/ppchen/adb/sockets.c:312
           
            s->close(s);
  409e58:	8fc20028 	lw	v0,40(s8)
  409e5c:	8c420048 	lw	v0,72(v0)
  409e60:	8fc40028 	lw	a0,40(s8)
  409e64:	0040c821 	move	t9,v0
  409e68:	0320f809 	jalr	t9
  409e6c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:313
            return;
  409e70:	1000008e 	b	40a0ac <local_socket_event_func+0x3f0>
  409e74:	00000000 	nop
/home_a/ppchen/adb/sockets.c:320

            /* no more packets queued, so we can ignore
            ** writable events again and tell our peer
            ** to resume writing
            */
        fdevent_del(&s->fde, FDE_WRITE);
  409e78:	8fc20028 	lw	v0,40(s8)
  409e7c:	24420018 	addiu	v0,v0,24
  409e80:	00402021 	move	a0,v0
  409e84:	24050002 	li	a1,2
  409e88:	0c10174b 	jal	405d2c <fdevent_del>
  409e8c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:321
        s->peer->ready(s->peer);
  409e90:	8fc20028 	lw	v0,40(s8)
  409e94:	8c420014 	lw	v0,20(v0)
  409e98:	8c420044 	lw	v0,68(v0)
  409e9c:	8fc30028 	lw	v1,40(s8)
  409ea0:	8c630014 	lw	v1,20(v1)
  409ea4:	00602021 	move	a0,v1
  409ea8:	0040c821 	move	t9,v0
  409eac:	0320f809 	jalr	t9
  409eb0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:325
    }


    if(ev & FDE_READ){
  409eb4:	8fc2004c 	lw	v0,76(s8)
  409eb8:	30420001 	andi	v0,v0,0x1
  409ebc:	10400077 	beqz	v0,40a09c <local_socket_event_func+0x3e0>
  409ec0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:326
        apacket *p = get_apacket();
  409ec4:	0c10076f 	jal	401dbc <get_apacket>
  409ec8:	00000000 	nop
  409ecc:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/sockets.c:327
        unsigned char *x = p->data;
  409ed0:	8fc20038 	lw	v0,56(s8)
  409ed4:	24420024 	addiu	v0,v0,36
  409ed8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:328
        size_t avail = MAX_PAYLOAD;
  409edc:	24021000 	li	v0,4096
  409ee0:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:330
        int r;
        int is_eof = 0;
  409ee4:	afc00024 	sw	zero,36(s8)
/home_a/ppchen/adb/sockets.c:332

        while(avail > 0) {
  409ee8:	10000028 	b	409f8c <local_socket_event_func+0x2d0>
  409eec:	00000000 	nop
/home_a/ppchen/adb/sockets.c:333
            r = adb_read(fd, x, avail);
  409ef0:	8fc40048 	lw	a0,72(s8)
  409ef4:	8fc50018 	lw	a1,24(s8)
  409ef8:	8fc6001c 	lw	a2,28(s8)
  409efc:	0c102514 	jal	409450 <adb_read>
  409f00:	00000000 	nop
  409f04:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sockets.c:335

            if(r > 0) {
  409f08:	8fc20020 	lw	v0,32(s8)
  409f0c:	1840000b 	blez	v0,409f3c <local_socket_event_func+0x280>
  409f10:	00000000 	nop
/home_a/ppchen/adb/sockets.c:336
                avail -= r;
  409f14:	8fc20020 	lw	v0,32(s8)
  409f18:	8fc3001c 	lw	v1,28(s8)
  409f1c:	00621023 	subu	v0,v1,v0
  409f20:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:337
                x += r;
  409f24:	8fc20020 	lw	v0,32(s8)
  409f28:	8fc30018 	lw	v1,24(s8)
  409f2c:	00621021 	addu	v0,v1,v0
  409f30:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:338
                continue;
  409f34:	10000015 	b	409f8c <local_socket_event_func+0x2d0>
  409f38:	00000000 	nop
/home_a/ppchen/adb/sockets.c:340
            }
            if(r < 0) {
  409f3c:	8fc20020 	lw	v0,32(s8)
  409f40:	0441000d 	bgez	v0,409f78 <local_socket_event_func+0x2bc>
  409f44:	00000000 	nop
/home_a/ppchen/adb/sockets.c:341
                if(errno == EAGAIN) break;
  409f48:	0c1052c0 	jal	414b00 <__errno_location@plt>
  409f4c:	00000000 	nop
  409f50:	8c430000 	lw	v1,0(v0)
  409f54:	2402000b 	li	v0,11
  409f58:	10620011 	beq	v1,v0,409fa0 <local_socket_event_func+0x2e4>
  409f5c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:342
                if(errno == EINTR) continue;
  409f60:	0c1052c0 	jal	414b00 <__errno_location@plt>
  409f64:	00000000 	nop
  409f68:	8c430000 	lw	v1,0(v0)
  409f6c:	24020004 	li	v0,4
  409f70:	10620005 	beq	v1,v0,409f88 <local_socket_event_func+0x2cc>
  409f74:	00000000 	nop
/home_a/ppchen/adb/sockets.c:346
            }

                /* r = 0 or unhandled error */
            is_eof = 1;
  409f78:	24020001 	li	v0,1
  409f7c:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/sockets.c:347
            break;
  409f80:	10000008 	b	409fa4 <local_socket_event_func+0x2e8>
  409f84:	00000000 	nop
/home_a/ppchen/adb/sockets.c:342
                x += r;
                continue;
            }
            if(r < 0) {
                if(errno == EAGAIN) break;
                if(errno == EINTR) continue;
  409f88:	00000000 	nop
/home_a/ppchen/adb/sockets.c:332 (discriminator 1)
        unsigned char *x = p->data;
        size_t avail = MAX_PAYLOAD;
        int r;
        int is_eof = 0;

        while(avail > 0) {
  409f8c:	8fc2001c 	lw	v0,28(s8)
  409f90:	1440ffd7 	bnez	v0,409ef0 <local_socket_event_func+0x234>
  409f94:	00000000 	nop
  409f98:	10000002 	b	409fa4 <local_socket_event_func+0x2e8>
  409f9c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:341
                avail -= r;
                x += r;
                continue;
            }
            if(r < 0) {
                if(errno == EAGAIN) break;
  409fa0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:352
            break;
        }

	

        if((avail == MAX_PAYLOAD) || (s->peer == 0)) {
  409fa4:	8fc3001c 	lw	v1,28(s8)
  409fa8:	24021000 	li	v0,4096
  409fac:	10620005 	beq	v1,v0,409fc4 <local_socket_event_func+0x308>
  409fb0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:352 (discriminator 1)
  409fb4:	8fc20028 	lw	v0,40(s8)
  409fb8:	8c420014 	lw	v0,20(v0)
  409fbc:	14400006 	bnez	v0,409fd8 <local_socket_event_func+0x31c>
  409fc0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:353
            put_apacket(p);
  409fc4:	8fc40038 	lw	a0,56(s8)
  409fc8:	0c10078a 	jal	401e28 <put_apacket>
  409fcc:	00000000 	nop
  409fd0:	1000001d 	b	40a048 <local_socket_event_func+0x38c>
  409fd4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:355
        } else {
            p->len = MAX_PAYLOAD - avail;
  409fd8:	24031000 	li	v1,4096
  409fdc:	8fc2001c 	lw	v0,28(s8)
  409fe0:	00621823 	subu	v1,v1,v0
  409fe4:	8fc20038 	lw	v0,56(s8)
  409fe8:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:358

	
            r = s->peer->enqueue(s->peer, p);
  409fec:	8fc20028 	lw	v0,40(s8)
  409ff0:	8c420014 	lw	v0,20(v0)
  409ff4:	8c420040 	lw	v0,64(v0)
  409ff8:	8fc30028 	lw	v1,40(s8)
  409ffc:	8c630014 	lw	v1,20(v1)
  40a000:	00602021 	move	a0,v1
  40a004:	8fc50038 	lw	a1,56(s8)
  40a008:	0040c821 	move	t9,v0
  40a00c:	0320f809 	jalr	t9
  40a010:	00000000 	nop
  40a014:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sockets.c:361
         

            if(r < 0) {
  40a018:	8fc20020 	lw	v0,32(s8)
  40a01c:	04400022 	bltz	v0,40a0a8 <local_socket_event_func+0x3ec>
  40a020:	00000000 	nop
/home_a/ppchen/adb/sockets.c:373
                    ** to process FDE_WRITE events.
                    */
                return;
            }

            if(r > 0) {
  40a024:	8fc20020 	lw	v0,32(s8)
  40a028:	18400007 	blez	v0,40a048 <local_socket_event_func+0x38c>
  40a02c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:378
                    /* if the remote cannot accept further events,
                    ** we disable notification of READs.  They'll
                    ** be enabled again when we get a call to ready()
                    */
                fdevent_del(&s->fde, FDE_READ);
  40a030:	8fc20028 	lw	v0,40(s8)
  40a034:	24420018 	addiu	v0,v0,24
  40a038:	00402021 	move	a0,v0
  40a03c:	24050001 	li	a1,1
  40a040:	0c10174b 	jal	405d2c <fdevent_del>
  40a044:	00000000 	nop
/home_a/ppchen/adb/sockets.c:382
            }
        }
        /* Don't allow a forced eof if data is still there */
        if((s->fde.force_eof && !r) || is_eof) {
  40a048:	8fc20028 	lw	v0,40(s8)
  40a04c:	8c420024 	lw	v0,36(v0)
  40a050:	10400004 	beqz	v0,40a064 <local_socket_event_func+0x3a8>
  40a054:	00000000 	nop
/home_a/ppchen/adb/sockets.c:382 (discriminator 1)
  40a058:	8fc20020 	lw	v0,32(s8)
  40a05c:	10400004 	beqz	v0,40a070 <local_socket_event_func+0x3b4>
  40a060:	00000000 	nop
/home_a/ppchen/adb/sockets.c:382 (discriminator 2)
  40a064:	8fc20024 	lw	v0,36(s8)
  40a068:	1040000c 	beqz	v0,40a09c <local_socket_event_func+0x3e0>
  40a06c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:384
            
            s->close(s);
  40a070:	8fc20028 	lw	v0,40(s8)
  40a074:	8c420048 	lw	v0,72(v0)
  40a078:	8fc40028 	lw	a0,40(s8)
  40a07c:	0040c821 	move	t9,v0
  40a080:	0320f809 	jalr	t9
  40a084:	00000000 	nop
/home_a/ppchen/adb/sockets.c:396
            ** bytes of readable data.
            */
//        s->close(s);


        return;
  40a088:	10000004 	b	40a09c <local_socket_event_func+0x3e0>
  40a08c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:290
                }
                if(r < 0) {
                    /* returning here is ok because FDE_READ will
                    ** be processed in the next iteration loop
                    */
                    if(errno == EAGAIN) return;
  40a090:	00000000 	nop
  40a094:	10000005 	b	40a0ac <local_socket_event_func+0x3f0>
  40a098:	00000000 	nop
/home_a/ppchen/adb/sockets.c:396
            ** bytes of readable data.
            */
//        s->close(s);


        return;
  40a09c:	00000000 	nop
  40a0a0:	10000002 	b	40a0ac <local_socket_event_func+0x3f0>
  40a0a4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:370
                    ** note that if we still have buffered packets, the
                    ** socket will be placed on the closing socket list.
                    ** this handler function will be called again
                    ** to process FDE_WRITE events.
                    */
                return;
  40a0a8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:398
//        s->close(s);


        return;
    }
}
  40a0ac:	03c0e821 	move	sp,s8
  40a0b0:	8fbf0044 	lw	ra,68(sp)
  40a0b4:	8fbe0040 	lw	s8,64(sp)
  40a0b8:	27bd0048 	addiu	sp,sp,72
  40a0bc:	03e00008 	jr	ra
  40a0c0:	00000000 	nop

0040a0c4 <create_local_socket>:
create_local_socket():
/home_a/ppchen/adb/sockets.c:401

asocket *create_local_socket(int fd)
{
  40a0c4:	27bdffd8 	addiu	sp,sp,-40
  40a0c8:	afbf0024 	sw	ra,36(sp)
  40a0cc:	afbe0020 	sw	s8,32(sp)
  40a0d0:	03a0f021 	move	s8,sp
  40a0d4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:402
    asocket *s = calloc(1, sizeof(asocket));
  40a0d8:	24040001 	li	a0,1
  40a0dc:	24050054 	li	a1,84
  40a0e0:	0c1052b8 	jal	414ae0 <calloc@plt>
  40a0e4:	00000000 	nop
  40a0e8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:403
    if (s == NULL) fatal("cannot allocate socket");
  40a0ec:	8fc20018 	lw	v0,24(s8)
  40a0f0:	14400005 	bnez	v0,40a108 <create_local_socket+0x44>
  40a0f4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:403 (discriminator 1)
  40a0f8:	3c020041 	lui	v0,0x41
  40a0fc:	2444392c 	addiu	a0,v0,14636
  40a100:	0c1006a7 	jal	401a9c <fatal>
  40a104:	00000000 	nop
/home_a/ppchen/adb/sockets.c:404
    s->fd = fd;
  40a108:	8fc20018 	lw	v0,24(s8)
  40a10c:	8fc30028 	lw	v1,40(s8)
  40a110:	ac430034 	sw	v1,52(v0)
/home_a/ppchen/adb/sockets.c:405
    s->enqueue = local_socket_enqueue;
  40a114:	8fc20018 	lw	v0,24(s8)
  40a118:	3c030041 	lui	v1,0x41
  40a11c:	24639884 	addiu	v1,v1,-26492
  40a120:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/sockets.c:406
    s->ready = local_socket_ready;
  40a124:	8fc20018 	lw	v0,24(s8)
  40a128:	3c030041 	lui	v1,0x41
  40a12c:	24639a34 	addiu	v1,v1,-26060
  40a130:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:407
    s->close = local_socket_close;
  40a134:	8fc20018 	lw	v0,24(s8)
  40a138:	3c030041 	lui	v1,0x41
  40a13c:	24639a78 	addiu	v1,v1,-25992
  40a140:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:408
    install_local_socket(s);
  40a144:	8fc40018 	lw	a0,24(s8)
  40a148:	0c1025ad 	jal	4096b4 <install_local_socket>
  40a14c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:410

    fdevent_install(&s->fde, fd, local_socket_event_func, s);
  40a150:	8fc20018 	lw	v0,24(s8)
  40a154:	24420018 	addiu	v0,v0,24
  40a158:	00402021 	move	a0,v0
  40a15c:	8fc50028 	lw	a1,40(s8)
  40a160:	3c020041 	lui	v0,0x41
  40a164:	24469cbc 	addiu	a2,v0,-25412
  40a168:	8fc70018 	lw	a3,24(s8)
  40a16c:	0c101689 	jal	405a24 <fdevent_install>
  40a170:	00000000 	nop
/home_a/ppchen/adb/sockets.c:414
/*    fdevent_add(&s->fde, FDE_ERROR); */
    //fprintf(stderr, "Created local socket in create_local_socket \n");

    return s;
  40a174:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:415
}
  40a178:	03c0e821 	move	sp,s8
  40a17c:	8fbf0024 	lw	ra,36(sp)
  40a180:	8fbe0020 	lw	s8,32(sp)
  40a184:	27bd0028 	addiu	sp,sp,40
  40a188:	03e00008 	jr	ra
  40a18c:	00000000 	nop

0040a190 <create_local_service_socket>:
create_local_service_socket():
/home_a/ppchen/adb/sockets.c:418

asocket *create_local_service_socket(const char *name)
{
  40a190:	27bdffd8 	addiu	sp,sp,-40
  40a194:	afbf0024 	sw	ra,36(sp)
  40a198:	afbe0020 	sw	s8,32(sp)
  40a19c:	03a0f021 	move	s8,sp
  40a1a0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:423
    asocket *s;
    int fd;

#if !ADB_HOST
    if (!strcmp(name,"jdwp")) {
  40a1a4:	8fc40028 	lw	a0,40(s8)
  40a1a8:	3c020041 	lui	v0,0x41
  40a1ac:	24453944 	addiu	a1,v0,14660
  40a1b0:	0c1053d8 	jal	414f60 <strcmp@plt>
  40a1b4:	00000000 	nop
  40a1b8:	14400005 	bnez	v0,40a1d0 <create_local_service_socket+0x40>
  40a1bc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:424
        return create_jdwp_service_socket();
  40a1c0:	0c10409f 	jal	41027c <create_jdwp_service_socket>
  40a1c4:	00000000 	nop
  40a1c8:	1000003a 	b	40a2b4 <create_local_service_socket+0x124>
  40a1cc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:426
    }
    if (!strcmp(name,"track-jdwp")) {
  40a1d0:	8fc40028 	lw	a0,40(s8)
  40a1d4:	3c020041 	lui	v0,0x41
  40a1d8:	2445394c 	addiu	a1,v0,14668
  40a1dc:	0c1053d8 	jal	414f60 <strcmp@plt>
  40a1e0:	00000000 	nop
  40a1e4:	14400005 	bnez	v0,40a1fc <create_local_service_socket+0x6c>
  40a1e8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:427
        return create_jdwp_tracker_service_socket();
  40a1ec:	0c10416a 	jal	4105a8 <create_jdwp_tracker_service_socket>
  40a1f0:	00000000 	nop
  40a1f4:	1000002f 	b	40a2b4 <create_local_service_socket+0x124>
  40a1f8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:430
    }
#endif
    fd = service_to_fd(name);
  40a1fc:	8fc40028 	lw	a0,40(s8)
  40a200:	0c10305b 	jal	40c16c <service_to_fd>
  40a204:	00000000 	nop
  40a208:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:431
    if(fd < 0) return 0;
  40a20c:	8fc20018 	lw	v0,24(s8)
  40a210:	04410004 	bgez	v0,40a224 <create_local_service_socket+0x94>
  40a214:	00000000 	nop
/home_a/ppchen/adb/sockets.c:431 (discriminator 1)
  40a218:	00001021 	move	v0,zero
  40a21c:	10000025 	b	40a2b4 <create_local_service_socket+0x124>
  40a220:	00000000 	nop
/home_a/ppchen/adb/sockets.c:433

    s = create_local_socket(fd);
  40a224:	8fc40018 	lw	a0,24(s8)
  40a228:	0c102831 	jal	40a0c4 <create_local_socket>
  40a22c:	00000000 	nop
  40a230:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:437


#if !ADB_HOST
    if ((!strncmp(name, "root:", 5) && getuid() != 0)
  40a234:	8fc40028 	lw	a0,40(s8)
  40a238:	3c020041 	lui	v0,0x41
  40a23c:	24453958 	addiu	a1,v0,14680
  40a240:	24060005 	li	a2,5
  40a244:	0c105308 	jal	414c20 <strncmp@plt>
  40a248:	00000000 	nop
  40a24c:	14400005 	bnez	v0,40a264 <create_local_service_socket+0xd4>
  40a250:	00000000 	nop
/home_a/ppchen/adb/sockets.c:437 (discriminator 1)
  40a254:	0c1053b0 	jal	414ec0 <getuid@plt>
  40a258:	00000000 	nop
  40a25c:	14400011 	bnez	v0,40a2a4 <create_local_service_socket+0x114>
  40a260:	00000000 	nop
/home_a/ppchen/adb/sockets.c:438
        || !strncmp(name, "usb:", 4)
  40a264:	8fc40028 	lw	a0,40(s8)
  40a268:	3c020041 	lui	v0,0x41
  40a26c:	24453960 	addiu	a1,v0,14688
  40a270:	24060004 	li	a2,4
  40a274:	0c105308 	jal	414c20 <strncmp@plt>
  40a278:	00000000 	nop
  40a27c:	10400009 	beqz	v0,40a2a4 <create_local_service_socket+0x114>
  40a280:	00000000 	nop
/home_a/ppchen/adb/sockets.c:439
        || !strncmp(name, "tcpip:", 6)) {
  40a284:	8fc40028 	lw	a0,40(s8)
  40a288:	3c020041 	lui	v0,0x41
  40a28c:	24453968 	addiu	a1,v0,14696
  40a290:	24060006 	li	a2,6
  40a294:	0c105308 	jal	414c20 <strncmp@plt>
  40a298:	00000000 	nop
  40a29c:	14400004 	bnez	v0,40a2b0 <create_local_service_socket+0x120>
  40a2a0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:441
      
        s->exit_on_close = 1;
  40a2a4:	8fc2001c 	lw	v0,28(s8)
  40a2a8:	24030001 	li	v1,1
  40a2ac:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/sockets.c:445
    }
#endif

    return s;
  40a2b0:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:446
}
  40a2b4:	03c0e821 	move	sp,s8
  40a2b8:	8fbf0024 	lw	ra,36(sp)
  40a2bc:	8fbe0020 	lw	s8,32(sp)
  40a2c0:	27bd0028 	addiu	sp,sp,40
  40a2c4:	03e00008 	jr	ra
  40a2c8:	00000000 	nop

0040a2cc <remote_socket_enqueue>:
remote_socket_enqueue():
/home_a/ppchen/adb/sockets.c:473
    asocket      socket;
    adisconnect  disconnect;
} aremotesocket;

static int remote_socket_enqueue(asocket *s, apacket *p)
{
  40a2cc:	27bdffe0 	addiu	sp,sp,-32
  40a2d0:	afbf001c 	sw	ra,28(sp)
  40a2d4:	afbe0018 	sw	s8,24(sp)
  40a2d8:	03a0f021 	move	s8,sp
  40a2dc:	afc40020 	sw	a0,32(s8)
  40a2e0:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/sockets.c:475

    p->msg.command = A_WRTE;
  40a2e4:	8fc20024 	lw	v0,36(s8)
  40a2e8:	3c034554 	lui	v1,0x4554
  40a2ec:	34635257 	ori	v1,v1,0x5257
  40a2f0:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/sockets.c:476
    p->msg.arg0 = s->peer->id;
  40a2f4:	8fc20020 	lw	v0,32(s8)
  40a2f8:	8c420014 	lw	v0,20(v0)
  40a2fc:	8c430008 	lw	v1,8(v0)
  40a300:	8fc20024 	lw	v0,36(s8)
  40a304:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/sockets.c:477
    p->msg.arg1 = s->id;
  40a308:	8fc20020 	lw	v0,32(s8)
  40a30c:	8c430008 	lw	v1,8(v0)
  40a310:	8fc20024 	lw	v0,36(s8)
  40a314:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/sockets.c:478
    p->msg.data_length = p->len;
  40a318:	8fc20024 	lw	v0,36(s8)
  40a31c:	8c430004 	lw	v1,4(v0)
  40a320:	8fc20024 	lw	v0,36(s8)
  40a324:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/sockets.c:479
    send_packet(p, s->transport);
  40a328:	8fc20020 	lw	v0,32(s8)
  40a32c:	8c420050 	lw	v0,80(v0)
  40a330:	8fc40024 	lw	a0,36(s8)
  40a334:	00402821 	move	a1,v0
  40a338:	0c101a6e 	jal	4069b8 <send_packet>
  40a33c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:480
    return 1;
  40a340:	24020001 	li	v0,1
/home_a/ppchen/adb/sockets.c:481
}
  40a344:	03c0e821 	move	sp,s8
  40a348:	8fbf001c 	lw	ra,28(sp)
  40a34c:	8fbe0018 	lw	s8,24(sp)
  40a350:	27bd0020 	addiu	sp,sp,32
  40a354:	03e00008 	jr	ra
  40a358:	00000000 	nop

0040a35c <remote_socket_ready>:
remote_socket_ready():
/home_a/ppchen/adb/sockets.c:484

static void remote_socket_ready(asocket *s)
{
  40a35c:	27bdffd8 	addiu	sp,sp,-40
  40a360:	afbf0024 	sw	ra,36(sp)
  40a364:	afbe0020 	sw	s8,32(sp)
  40a368:	03a0f021 	move	s8,sp
  40a36c:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:486

    apacket *p = get_apacket();
  40a370:	0c10076f 	jal	401dbc <get_apacket>
  40a374:	00000000 	nop
  40a378:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:487
    p->msg.command = A_OKAY;
  40a37c:	8fc20018 	lw	v0,24(s8)
  40a380:	3c035941 	lui	v1,0x5941
  40a384:	34634b4f 	ori	v1,v1,0x4b4f
  40a388:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/sockets.c:488
    p->msg.arg0 = s->peer->id;
  40a38c:	8fc20028 	lw	v0,40(s8)
  40a390:	8c420014 	lw	v0,20(v0)
  40a394:	8c430008 	lw	v1,8(v0)
  40a398:	8fc20018 	lw	v0,24(s8)
  40a39c:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/sockets.c:489
    p->msg.arg1 = s->id;
  40a3a0:	8fc20028 	lw	v0,40(s8)
  40a3a4:	8c430008 	lw	v1,8(v0)
  40a3a8:	8fc20018 	lw	v0,24(s8)
  40a3ac:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/sockets.c:490
    send_packet(p, s->transport);
  40a3b0:	8fc20028 	lw	v0,40(s8)
  40a3b4:	8c420050 	lw	v0,80(v0)
  40a3b8:	8fc40018 	lw	a0,24(s8)
  40a3bc:	00402821 	move	a1,v0
  40a3c0:	0c101a6e 	jal	4069b8 <send_packet>
  40a3c4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:491
}
  40a3c8:	03c0e821 	move	sp,s8
  40a3cc:	8fbf0024 	lw	ra,36(sp)
  40a3d0:	8fbe0020 	lw	s8,32(sp)
  40a3d4:	27bd0028 	addiu	sp,sp,40
  40a3d8:	03e00008 	jr	ra
  40a3dc:	00000000 	nop

0040a3e0 <remote_socket_close>:
remote_socket_close():
/home_a/ppchen/adb/sockets.c:494

static void remote_socket_close(asocket *s)
{
  40a3e0:	27bdffd8 	addiu	sp,sp,-40
  40a3e4:	afbf0024 	sw	ra,36(sp)
  40a3e8:	afbe0020 	sw	s8,32(sp)
  40a3ec:	03a0f021 	move	s8,sp
  40a3f0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:496
   
    apacket *p = get_apacket();
  40a3f4:	0c10076f 	jal	401dbc <get_apacket>
  40a3f8:	00000000 	nop
  40a3fc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:497
    p->msg.command = A_CLSE;
  40a400:	8fc20018 	lw	v0,24(s8)
  40a404:	3c034553 	lui	v1,0x4553
  40a408:	34634c43 	ori	v1,v1,0x4c43
  40a40c:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/sockets.c:498
    if(s->peer) {
  40a410:	8fc20028 	lw	v0,40(s8)
  40a414:	8c420014 	lw	v0,20(v0)
  40a418:	10400012 	beqz	v0,40a464 <remote_socket_close+0x84>
  40a41c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:499
        p->msg.arg0 = s->peer->id;
  40a420:	8fc20028 	lw	v0,40(s8)
  40a424:	8c420014 	lw	v0,20(v0)
  40a428:	8c430008 	lw	v1,8(v0)
  40a42c:	8fc20018 	lw	v0,24(s8)
  40a430:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/sockets.c:500
        s->peer->peer = 0;
  40a434:	8fc20028 	lw	v0,40(s8)
  40a438:	8c420014 	lw	v0,20(v0)
  40a43c:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:502
    
        s->peer->close(s->peer);
  40a440:	8fc20028 	lw	v0,40(s8)
  40a444:	8c420014 	lw	v0,20(v0)
  40a448:	8c420048 	lw	v0,72(v0)
  40a44c:	8fc30028 	lw	v1,40(s8)
  40a450:	8c630014 	lw	v1,20(v1)
  40a454:	00602021 	move	a0,v1
  40a458:	0040c821 	move	t9,v0
  40a45c:	0320f809 	jalr	t9
  40a460:	00000000 	nop
/home_a/ppchen/adb/sockets.c:504
    }
    p->msg.arg1 = s->id;
  40a464:	8fc20028 	lw	v0,40(s8)
  40a468:	8c430008 	lw	v1,8(v0)
  40a46c:	8fc20018 	lw	v0,24(s8)
  40a470:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/sockets.c:505
    send_packet(p, s->transport);
  40a474:	8fc20028 	lw	v0,40(s8)
  40a478:	8c420050 	lw	v0,80(v0)
  40a47c:	8fc40018 	lw	a0,24(s8)
  40a480:	00402821 	move	a1,v0
  40a484:	0c101a6e 	jal	4069b8 <send_packet>
  40a488:	00000000 	nop
/home_a/ppchen/adb/sockets.c:507

    remove_transport_disconnect( s->transport, &((aremotesocket*)s)->disconnect );
  40a48c:	8fc20028 	lw	v0,40(s8)
  40a490:	8c430050 	lw	v1,80(v0)
  40a494:	8fc20028 	lw	v0,40(s8)
  40a498:	24420054 	addiu	v0,v0,84
  40a49c:	00602021 	move	a0,v1
  40a4a0:	00402821 	move	a1,v0
  40a4a4:	0c101d80 	jal	407600 <remove_transport_disconnect>
  40a4a8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:508
    free(s);
  40a4ac:	8fc40028 	lw	a0,40(s8)
  40a4b0:	0c1053e4 	jal	414f90 <free@plt>
  40a4b4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:509
}
  40a4b8:	03c0e821 	move	sp,s8
  40a4bc:	8fbf0024 	lw	ra,36(sp)
  40a4c0:	8fbe0020 	lw	s8,32(sp)
  40a4c4:	27bd0028 	addiu	sp,sp,40
  40a4c8:	03e00008 	jr	ra
  40a4cc:	00000000 	nop

0040a4d0 <remote_socket_disconnect>:
remote_socket_disconnect():
/home_a/ppchen/adb/sockets.c:512

static void remote_socket_disconnect(void*  _s, atransport*  t)
{
  40a4d0:	27bdffd8 	addiu	sp,sp,-40
  40a4d4:	afbf0024 	sw	ra,36(sp)
  40a4d8:	afbe0020 	sw	s8,32(sp)
  40a4dc:	03a0f021 	move	s8,sp
  40a4e0:	afc40028 	sw	a0,40(s8)
  40a4e4:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sockets.c:513
    asocket*  s    = _s;
  40a4e8:	8fc20028 	lw	v0,40(s8)
  40a4ec:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:514
    asocket*  peer = s->peer;
  40a4f0:	8fc20018 	lw	v0,24(s8)
  40a4f4:	8c420014 	lw	v0,20(v0)
  40a4f8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:517

 
    if (peer) {
  40a4fc:	8fc2001c 	lw	v0,28(s8)
  40a500:	10400009 	beqz	v0,40a528 <remote_socket_disconnect+0x58>
  40a504:	00000000 	nop
/home_a/ppchen/adb/sockets.c:518
        peer->peer = NULL;
  40a508:	8fc2001c 	lw	v0,28(s8)
  40a50c:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:519
        peer->close(peer);
  40a510:	8fc2001c 	lw	v0,28(s8)
  40a514:	8c420048 	lw	v0,72(v0)
  40a518:	8fc4001c 	lw	a0,28(s8)
  40a51c:	0040c821 	move	t9,v0
  40a520:	0320f809 	jalr	t9
  40a524:	00000000 	nop
/home_a/ppchen/adb/sockets.c:521
    }
    remove_transport_disconnect( s->transport, &((aremotesocket*)s)->disconnect );
  40a528:	8fc20018 	lw	v0,24(s8)
  40a52c:	8c430050 	lw	v1,80(v0)
  40a530:	8fc20018 	lw	v0,24(s8)
  40a534:	24420054 	addiu	v0,v0,84
  40a538:	00602021 	move	a0,v1
  40a53c:	00402821 	move	a1,v0
  40a540:	0c101d80 	jal	407600 <remove_transport_disconnect>
  40a544:	00000000 	nop
/home_a/ppchen/adb/sockets.c:522
    free(s);
  40a548:	8fc40018 	lw	a0,24(s8)
  40a54c:	0c1053e4 	jal	414f90 <free@plt>
  40a550:	00000000 	nop
/home_a/ppchen/adb/sockets.c:523
}
  40a554:	03c0e821 	move	sp,s8
  40a558:	8fbf0024 	lw	ra,36(sp)
  40a55c:	8fbe0020 	lw	s8,32(sp)
  40a560:	27bd0028 	addiu	sp,sp,40
  40a564:	03e00008 	jr	ra
  40a568:	00000000 	nop

0040a56c <create_remote_socket>:
create_remote_socket():
/home_a/ppchen/adb/sockets.c:526

asocket *create_remote_socket(unsigned id, atransport *t)
{
  40a56c:	27bdffd8 	addiu	sp,sp,-40
  40a570:	afbf0024 	sw	ra,36(sp)
  40a574:	afbe0020 	sw	s8,32(sp)
  40a578:	03a0f021 	move	s8,sp
  40a57c:	afc40028 	sw	a0,40(s8)
  40a580:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sockets.c:527
    asocket *s = calloc(1, sizeof(aremotesocket));
  40a584:	24040001 	li	a0,1
  40a588:	24050064 	li	a1,100
  40a58c:	0c1052b8 	jal	414ae0 <calloc@plt>
  40a590:	00000000 	nop
  40a594:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:528
    adisconnect*  dis = &((aremotesocket*)s)->disconnect;
  40a598:	8fc20018 	lw	v0,24(s8)
  40a59c:	24420054 	addiu	v0,v0,84
  40a5a0:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:530

    if (s == NULL) fatal("cannot allocate socket");
  40a5a4:	8fc20018 	lw	v0,24(s8)
  40a5a8:	14400005 	bnez	v0,40a5c0 <create_remote_socket+0x54>
  40a5ac:	00000000 	nop
/home_a/ppchen/adb/sockets.c:530 (discriminator 1)
  40a5b0:	3c020041 	lui	v0,0x41
  40a5b4:	2444392c 	addiu	a0,v0,14636
  40a5b8:	0c1006a7 	jal	401a9c <fatal>
  40a5bc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:531
    s->id = id;
  40a5c0:	8fc20018 	lw	v0,24(s8)
  40a5c4:	8fc30028 	lw	v1,40(s8)
  40a5c8:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/sockets.c:532
    s->enqueue = remote_socket_enqueue;
  40a5cc:	8fc20018 	lw	v0,24(s8)
  40a5d0:	3c030041 	lui	v1,0x41
  40a5d4:	2463a2cc 	addiu	v1,v1,-23860
  40a5d8:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/sockets.c:533
    s->ready = remote_socket_ready;
  40a5dc:	8fc20018 	lw	v0,24(s8)
  40a5e0:	3c030041 	lui	v1,0x41
  40a5e4:	2463a35c 	addiu	v1,v1,-23716
  40a5e8:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:534
    s->close = remote_socket_close;
  40a5ec:	8fc20018 	lw	v0,24(s8)
  40a5f0:	3c030041 	lui	v1,0x41
  40a5f4:	2463a3e0 	addiu	v1,v1,-23584
  40a5f8:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:535
    s->transport = t;
  40a5fc:	8fc20018 	lw	v0,24(s8)
  40a600:	8fc3002c 	lw	v1,44(s8)
  40a604:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/sockets.c:537

    dis->func   = remote_socket_disconnect;
  40a608:	8fc2001c 	lw	v0,28(s8)
  40a60c:	3c030041 	lui	v1,0x41
  40a610:	2463a4d0 	addiu	v1,v1,-23344
  40a614:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/sockets.c:538
    dis->opaque = s;
  40a618:	8fc2001c 	lw	v0,28(s8)
  40a61c:	8fc30018 	lw	v1,24(s8)
  40a620:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:539
    add_transport_disconnect( t, dis );
  40a624:	8fc4002c 	lw	a0,44(s8)
  40a628:	8fc5001c 	lw	a1,28(s8)
  40a62c:	0c101d5b 	jal	40756c <add_transport_disconnect>
  40a630:	00000000 	nop
/home_a/ppchen/adb/sockets.c:541
   
    return s;
  40a634:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:542
}
  40a638:	03c0e821 	move	sp,s8
  40a63c:	8fbf0024 	lw	ra,36(sp)
  40a640:	8fbe0020 	lw	s8,32(sp)
  40a644:	27bd0028 	addiu	sp,sp,40
  40a648:	03e00008 	jr	ra
  40a64c:	00000000 	nop

0040a650 <connect_to_remote>:
connect_to_remote():
/home_a/ppchen/adb/sockets.c:545

void connect_to_remote(asocket *s, const char *destination)
{
  40a650:	27bdffd8 	addiu	sp,sp,-40
  40a654:	afbf0024 	sw	ra,36(sp)
  40a658:	afbe0020 	sw	s8,32(sp)
  40a65c:	03a0f021 	move	s8,sp
  40a660:	afc40028 	sw	a0,40(s8)
  40a664:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sockets.c:547

    apacket *p = get_apacket();
  40a668:	0c10076f 	jal	401dbc <get_apacket>
  40a66c:	00000000 	nop
  40a670:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:548
    int len = strlen(destination) + 1;
  40a674:	8fc4002c 	lw	a0,44(s8)
  40a678:	0c10531c 	jal	414c70 <strlen@plt>
  40a67c:	00000000 	nop
  40a680:	24420001 	addiu	v0,v0,1
  40a684:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:550

    if(len > (MAX_PAYLOAD-1)) {
  40a688:	8fc2001c 	lw	v0,28(s8)
  40a68c:	28421000 	slti	v0,v0,4096
  40a690:	14400005 	bnez	v0,40a6a8 <connect_to_remote+0x58>
  40a694:	00000000 	nop
/home_a/ppchen/adb/sockets.c:551
        fatal("destination oversized");
  40a698:	3c020041 	lui	v0,0x41
  40a69c:	24443970 	addiu	a0,v0,14704
  40a6a0:	0c1006a7 	jal	401a9c <fatal>
  40a6a4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:555
    }

  
    p->msg.command = A_OPEN;
  40a6a8:	8fc20018 	lw	v0,24(s8)
  40a6ac:	3c034e45 	lui	v1,0x4e45
  40a6b0:	3463504f 	ori	v1,v1,0x504f
  40a6b4:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/sockets.c:556
    p->msg.arg0 = s->id;
  40a6b8:	8fc20028 	lw	v0,40(s8)
  40a6bc:	8c430008 	lw	v1,8(v0)
  40a6c0:	8fc20018 	lw	v0,24(s8)
  40a6c4:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/sockets.c:557
    p->msg.data_length = len;
  40a6c8:	8fc3001c 	lw	v1,28(s8)
  40a6cc:	8fc20018 	lw	v0,24(s8)
  40a6d0:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/sockets.c:558
    strcpy((char*) p->data, destination);
  40a6d4:	8fc20018 	lw	v0,24(s8)
  40a6d8:	24420024 	addiu	v0,v0,36
  40a6dc:	00402021 	move	a0,v0
  40a6e0:	8fc5002c 	lw	a1,44(s8)
  40a6e4:	0c105418 	jal	415060 <strcpy@plt>
  40a6e8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:559
    send_packet(p, s->transport);
  40a6ec:	8fc20028 	lw	v0,40(s8)
  40a6f0:	8c420050 	lw	v0,80(v0)
  40a6f4:	8fc40018 	lw	a0,24(s8)
  40a6f8:	00402821 	move	a1,v0
  40a6fc:	0c101a6e 	jal	4069b8 <send_packet>
  40a700:	00000000 	nop
/home_a/ppchen/adb/sockets.c:560
}
  40a704:	03c0e821 	move	sp,s8
  40a708:	8fbf0024 	lw	ra,36(sp)
  40a70c:	8fbe0020 	lw	s8,32(sp)
  40a710:	27bd0028 	addiu	sp,sp,40
  40a714:	03e00008 	jr	ra
  40a718:	00000000 	nop

0040a71c <local_socket_ready_notify>:
local_socket_ready_notify():
/home_a/ppchen/adb/sockets.c:566


/* this is used by magic sockets to rig local sockets to
   send the go-ahead message when they connect */
static void local_socket_ready_notify(asocket *s)
{
  40a71c:	27bdffe0 	addiu	sp,sp,-32
  40a720:	afbf001c 	sw	ra,28(sp)
  40a724:	afbe0018 	sw	s8,24(sp)
  40a728:	03a0f021 	move	s8,sp
  40a72c:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:567
    s->ready = local_socket_ready;
  40a730:	8fc20020 	lw	v0,32(s8)
  40a734:	3c030041 	lui	v1,0x41
  40a738:	24639a34 	addiu	v1,v1,-26060
  40a73c:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:568
    s->close = local_socket_close;
  40a740:	8fc20020 	lw	v0,32(s8)
  40a744:	3c030041 	lui	v1,0x41
  40a748:	24639a78 	addiu	v1,v1,-25992
  40a74c:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:569
    adb_write(s->fd, "OKAY", 4);
  40a750:	8fc20020 	lw	v0,32(s8)
  40a754:	8c420034 	lw	v0,52(v0)
  40a758:	00402021 	move	a0,v0
  40a75c:	3c020041 	lui	v0,0x41
  40a760:	24453988 	addiu	a1,v0,14728
  40a764:	24060004 	li	a2,4
  40a768:	0c102526 	jal	409498 <adb_write>
  40a76c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:570
    s->ready(s);
  40a770:	8fc20020 	lw	v0,32(s8)
  40a774:	8c420044 	lw	v0,68(v0)
  40a778:	8fc40020 	lw	a0,32(s8)
  40a77c:	0040c821 	move	t9,v0
  40a780:	0320f809 	jalr	t9
  40a784:	00000000 	nop
/home_a/ppchen/adb/sockets.c:571
}
  40a788:	03c0e821 	move	sp,s8
  40a78c:	8fbf001c 	lw	ra,28(sp)
  40a790:	8fbe0018 	lw	s8,24(sp)
  40a794:	27bd0020 	addiu	sp,sp,32
  40a798:	03e00008 	jr	ra
  40a79c:	00000000 	nop

0040a7a0 <local_socket_close_notify>:
local_socket_close_notify():
/home_a/ppchen/adb/sockets.c:577

/* this is used by magic sockets to rig local sockets to
   send the failure message if they are closed before
   connected (to avoid closing them without a status message) */
static void local_socket_close_notify(asocket *s)
{
  40a7a0:	27bdffe0 	addiu	sp,sp,-32
  40a7a4:	afbf001c 	sw	ra,28(sp)
  40a7a8:	afbe0018 	sw	s8,24(sp)
  40a7ac:	03a0f021 	move	s8,sp
  40a7b0:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:578
    s->ready = local_socket_ready;
  40a7b4:	8fc20020 	lw	v0,32(s8)
  40a7b8:	3c030041 	lui	v1,0x41
  40a7bc:	24639a34 	addiu	v1,v1,-26060
  40a7c0:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:579
    s->close = local_socket_close;
  40a7c4:	8fc20020 	lw	v0,32(s8)
  40a7c8:	3c030041 	lui	v1,0x41
  40a7cc:	24639a78 	addiu	v1,v1,-25992
  40a7d0:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:580
    sendfailmsg(s->fd, "closed");
  40a7d4:	8fc20020 	lw	v0,32(s8)
  40a7d8:	8c420034 	lw	v0,52(v0)
  40a7dc:	00402021 	move	a0,v0
  40a7e0:	3c020041 	lui	v0,0x41
  40a7e4:	24453990 	addiu	a1,v0,14736
  40a7e8:	0c102538 	jal	4094e0 <sendfailmsg>
  40a7ec:	00000000 	nop
/home_a/ppchen/adb/sockets.c:581
    s->close(s);
  40a7f0:	8fc20020 	lw	v0,32(s8)
  40a7f4:	8c420048 	lw	v0,72(v0)
  40a7f8:	8fc40020 	lw	a0,32(s8)
  40a7fc:	0040c821 	move	t9,v0
  40a800:	0320f809 	jalr	t9
  40a804:	00000000 	nop
/home_a/ppchen/adb/sockets.c:582
}
  40a808:	03c0e821 	move	sp,s8
  40a80c:	8fbf001c 	lw	ra,28(sp)
  40a810:	8fbe0018 	lw	s8,24(sp)
  40a814:	27bd0020 	addiu	sp,sp,32
  40a818:	03e00008 	jr	ra
  40a81c:	00000000 	nop

0040a820 <unhex>:
unhex():
/home_a/ppchen/adb/sockets.c:585

unsigned unhex(unsigned char *s, int len)
{
  40a820:	27bdffe8 	addiu	sp,sp,-24
  40a824:	afbe0014 	sw	s8,20(sp)
  40a828:	03a0f021 	move	s8,sp
  40a82c:	afc40018 	sw	a0,24(s8)
  40a830:	afc5001c 	sw	a1,28(s8)
/home_a/ppchen/adb/sockets.c:586
    unsigned n = 0, c;
  40a834:	afc00008 	sw	zero,8(s8)
/home_a/ppchen/adb/sockets.c:588

    while(len-- > 0) {
  40a838:	1000002a 	b	40a8e4 <unhex+0xc4>
  40a83c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:589
        switch((c = *s++)) {
  40a840:	8fc20018 	lw	v0,24(s8)
  40a844:	90420000 	lbu	v0,0(v0)
  40a848:	afc2000c 	sw	v0,12(s8)
  40a84c:	8fc2000c 	lw	v0,12(s8)
  40a850:	8fc30018 	lw	v1,24(s8)
  40a854:	24630001 	addiu	v1,v1,1
  40a858:	afc30018 	sw	v1,24(s8)
  40a85c:	2442ffd0 	addiu	v0,v0,-48
  40a860:	2c430037 	sltiu	v1,v0,55
  40a864:	10600017 	beqz	v1,40a8c4 <unhex+0xa4>
  40a868:	00000000 	nop
  40a86c:	00021880 	sll	v1,v0,0x2
  40a870:	3c020041 	lui	v0,0x41
  40a874:	24423998 	addiu	v0,v0,14744
  40a878:	00621021 	addu	v0,v1,v0
  40a87c:	8c420000 	lw	v0,0(v0)
  40a880:	00400008 	jr	v0
  40a884:	00000000 	nop
/home_a/ppchen/adb/sockets.c:594
        case '0': case '1': case '2':
        case '3': case '4': case '5':
        case '6': case '7': case '8':
        case '9':
            c -= '0';
  40a888:	8fc2000c 	lw	v0,12(s8)
  40a88c:	2442ffd0 	addiu	v0,v0,-48
  40a890:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/sockets.c:595
            break;
  40a894:	1000000e 	b	40a8d0 <unhex+0xb0>
  40a898:	00000000 	nop
/home_a/ppchen/adb/sockets.c:598
        case 'a': case 'b': case 'c':
        case 'd': case 'e': case 'f':
            c = c - 'a' + 10;
  40a89c:	8fc2000c 	lw	v0,12(s8)
  40a8a0:	2442ffa9 	addiu	v0,v0,-87
  40a8a4:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/sockets.c:599
            break;
  40a8a8:	10000009 	b	40a8d0 <unhex+0xb0>
  40a8ac:	00000000 	nop
/home_a/ppchen/adb/sockets.c:602
        case 'A': case 'B': case 'C':
        case 'D': case 'E': case 'F':
            c = c - 'A' + 10;
  40a8b0:	8fc2000c 	lw	v0,12(s8)
  40a8b4:	2442ffc9 	addiu	v0,v0,-55
  40a8b8:	afc2000c 	sw	v0,12(s8)
/home_a/ppchen/adb/sockets.c:603
            break;
  40a8bc:	10000004 	b	40a8d0 <unhex+0xb0>
  40a8c0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:605
        default:
            return 0xffffffff;
  40a8c4:	2402ffff 	li	v0,-1
  40a8c8:	1000000f 	b	40a908 <unhex+0xe8>
  40a8cc:	00000000 	nop
/home_a/ppchen/adb/sockets.c:608
        }

        n = (n << 4) | c;
  40a8d0:	8fc20008 	lw	v0,8(s8)
  40a8d4:	00021900 	sll	v1,v0,0x4
  40a8d8:	8fc2000c 	lw	v0,12(s8)
  40a8dc:	00621025 	or	v0,v1,v0
  40a8e0:	afc20008 	sw	v0,8(s8)
/home_a/ppchen/adb/sockets.c:588 (discriminator 1)

unsigned unhex(unsigned char *s, int len)
{
    unsigned n = 0, c;

    while(len-- > 0) {
  40a8e4:	8fc2001c 	lw	v0,28(s8)
  40a8e8:	0002102a 	slt	v0,zero,v0
  40a8ec:	304200ff 	andi	v0,v0,0xff
  40a8f0:	8fc3001c 	lw	v1,28(s8)
  40a8f4:	2463ffff 	addiu	v1,v1,-1
  40a8f8:	afc3001c 	sw	v1,28(s8)
  40a8fc:	1440ffd0 	bnez	v0,40a840 <unhex+0x20>
  40a900:	00000000 	nop
/home_a/ppchen/adb/sockets.c:611
        }

        n = (n << 4) | c;
    }

    return n;
  40a904:	8fc20008 	lw	v0,8(s8)
/home_a/ppchen/adb/sockets.c:612
}
  40a908:	03c0e821 	move	sp,s8
  40a90c:	8fbe0014 	lw	s8,20(sp)
  40a910:	27bd0018 	addiu	sp,sp,24
  40a914:	03e00008 	jr	ra
  40a918:	00000000 	nop

0040a91c <skip_host_serial>:
skip_host_serial():
/home_a/ppchen/adb/sockets.c:618

/* skip_host_serial return the position in a string
   skipping over the 'serial' parameter in the ADB protocol,
   where parameter string may be a host:port string containing
   the protocol delimiter (colon). */
char *skip_host_serial(char *service) {
  40a91c:	27bdffd8 	addiu	sp,sp,-40
  40a920:	afbf0024 	sw	ra,36(sp)
  40a924:	afbe0020 	sw	s8,32(sp)
  40a928:	03a0f021 	move	s8,sp
  40a92c:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:621
    char *first_colon, *serial_end;

    first_colon = strchr(service, ':');
  40a930:	8fc40028 	lw	a0,40(s8)
  40a934:	2405003a 	li	a1,58
  40a938:	0c1053f4 	jal	414fd0 <strchr@plt>
  40a93c:	00000000 	nop
  40a940:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:622
    if (!first_colon) {
  40a944:	8fc20018 	lw	v0,24(s8)
  40a948:	14400004 	bnez	v0,40a95c <skip_host_serial+0x40>
  40a94c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:624
        /* No colon in service string. */
        return NULL;
  40a950:	00001021 	move	v0,zero
  40a954:	10000004 	b	40a968 <skip_host_serial+0x4c>
  40a958:	00000000 	nop
/home_a/ppchen/adb/sockets.c:626
    }
    serial_end = first_colon;
  40a95c:	8fc20018 	lw	v0,24(s8)
  40a960:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:637
    /*     if ((*serial_end) != ':') { */
    /*         // Something other than numbers was found, reset the end. */
    /*         serial_end = first_colon; */
    /*     } */
    /* } */
    return serial_end;
  40a964:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:638
}
  40a968:	03c0e821 	move	sp,s8
  40a96c:	8fbf0024 	lw	ra,36(sp)
  40a970:	8fbe0020 	lw	s8,32(sp)
  40a974:	27bd0028 	addiu	sp,sp,40
  40a978:	03e00008 	jr	ra
  40a97c:	00000000 	nop

0040a980 <smart_socket_enqueue>:
smart_socket_enqueue():
/home_a/ppchen/adb/sockets.c:641

static int smart_socket_enqueue(asocket *s, apacket *p)
{
  40a980:	27bdffd0 	addiu	sp,sp,-48
  40a984:	afbf002c 	sw	ra,44(sp)
  40a988:	afbe0028 	sw	s8,40(sp)
  40a98c:	03a0f021 	move	s8,sp
  40a990:	afc40030 	sw	a0,48(s8)
  40a994:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/sockets.c:651
    transport_type ttype = kTransportAny;
#endif

  

    if(s->pkt_first == 0) {
  40a998:	8fc20030 	lw	v0,48(s8)
  40a99c:	8c420038 	lw	v0,56(v0)
  40a9a0:	14400009 	bnez	v0,40a9c8 <smart_socket_enqueue+0x48>
  40a9a4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:652
        s->pkt_first = p;
  40a9a8:	8fc20030 	lw	v0,48(s8)
  40a9ac:	8fc30034 	lw	v1,52(s8)
  40a9b0:	ac430038 	sw	v1,56(v0)
/home_a/ppchen/adb/sockets.c:653
        s->pkt_last = p;
  40a9b4:	8fc20030 	lw	v0,48(s8)
  40a9b8:	8fc30034 	lw	v1,52(s8)
  40a9bc:	ac43003c 	sw	v1,60(v0)
  40a9c0:	1000005c 	b	40ab34 <smart_socket_enqueue+0x1b4>
  40a9c4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:655
    } else {
        if((s->pkt_first->len + p->len) > MAX_PAYLOAD) {
  40a9c8:	8fc20030 	lw	v0,48(s8)
  40a9cc:	8c420038 	lw	v0,56(v0)
  40a9d0:	8c430004 	lw	v1,4(v0)
  40a9d4:	8fc20034 	lw	v0,52(s8)
  40a9d8:	8c420004 	lw	v0,4(v0)
  40a9dc:	00621021 	addu	v0,v1,v0
  40a9e0:	2c421001 	sltiu	v0,v0,4097
  40a9e4:	14400034 	bnez	v0,40aab8 <smart_socket_enqueue+0x138>
  40a9e8:	00000000 	nop
/home_a/ppchen/adb/sockets.c:656 (discriminator 1)
            D("SS(%d): overflow\n", s->id);
  40a9ec:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40a9f0:	00000000 	nop
  40a9f4:	8c420000 	lw	v0,0(v0)
  40a9f8:	afc20018 	sw	v0,24(s8)
  40a9fc:	3c020042 	lui	v0,0x42
  40aa00:	244457f0 	addiu	a0,v0,22512
  40aa04:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40aa08:	00000000 	nop
  40aa0c:	3c020042 	lui	v0,0x42
  40aa10:	8c4257c4 	lw	v0,22468(v0)
  40aa14:	00402021 	move	a0,v0
  40aa18:	3c020041 	lui	v0,0x41
  40aa1c:	24453a74 	addiu	a1,v0,14964
  40aa20:	3c020041 	lui	v0,0x41
  40aa24:	24463a80 	addiu	a2,v0,14976
  40aa28:	3c020041 	lui	v0,0x41
  40aa2c:	24473ac4 	addiu	a3,v0,15044
  40aa30:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40aa34:	00000000 	nop
  40aa38:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40aa3c:	00000000 	nop
  40aa40:	8fc30018 	lw	v1,24(s8)
  40aa44:	ac430000 	sw	v1,0(v0)
  40aa48:	3c020042 	lui	v0,0x42
  40aa4c:	8c4357c4 	lw	v1,22468(v0)
  40aa50:	8fc20030 	lw	v0,48(s8)
  40aa54:	8c420008 	lw	v0,8(v0)
  40aa58:	00602021 	move	a0,v1
  40aa5c:	3c030041 	lui	v1,0x41
  40aa60:	24653a8c 	addiu	a1,v1,14988
  40aa64:	00403021 	move	a2,v0
  40aa68:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40aa6c:	00000000 	nop
  40aa70:	3c020042 	lui	v0,0x42
  40aa74:	8c4257c4 	lw	v0,22468(v0)
  40aa78:	00402021 	move	a0,v0
  40aa7c:	0c1053a8 	jal	414ea0 <fflush@plt>
  40aa80:	00000000 	nop
  40aa84:	3c020042 	lui	v0,0x42
  40aa88:	244457f0 	addiu	a0,v0,22512
  40aa8c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40aa90:	00000000 	nop
  40aa94:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40aa98:	00000000 	nop
  40aa9c:	8fc30018 	lw	v1,24(s8)
  40aaa0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/sockets.c:657 (discriminator 1)
            put_apacket(p);
  40aaa4:	8fc40034 	lw	a0,52(s8)
  40aaa8:	0c10078a 	jal	401e28 <put_apacket>
  40aaac:	00000000 	nop
/home_a/ppchen/adb/sockets.c:658 (discriminator 1)
            goto fail;
  40aab0:	1000009c 	b	40ad24 <smart_socket_enqueue+0x3a4>
  40aab4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:661
        }

        memcpy(s->pkt_first->data + s->pkt_first->len,
  40aab8:	8fc20030 	lw	v0,48(s8)
  40aabc:	8c430038 	lw	v1,56(v0)
  40aac0:	8fc20030 	lw	v0,48(s8)
  40aac4:	8c420038 	lw	v0,56(v0)
  40aac8:	8c420004 	lw	v0,4(v0)
  40aacc:	24420020 	addiu	v0,v0,32
  40aad0:	00621021 	addu	v0,v1,v0
  40aad4:	24440004 	addiu	a0,v0,4
/home_a/ppchen/adb/sockets.c:662
               p->data, p->len);
  40aad8:	8fc20034 	lw	v0,52(s8)
  40aadc:	24430024 	addiu	v1,v0,36
  40aae0:	8fc20034 	lw	v0,52(s8)
/home_a/ppchen/adb/sockets.c:661
            D("SS(%d): overflow\n", s->id);
            put_apacket(p);
            goto fail;
        }

        memcpy(s->pkt_first->data + s->pkt_first->len,
  40aae4:	8c420004 	lw	v0,4(v0)
  40aae8:	00602821 	move	a1,v1
  40aaec:	00403021 	move	a2,v0
  40aaf0:	0c1052d8 	jal	414b60 <memcpy@plt>
  40aaf4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:663
               p->data, p->len);
        s->pkt_first->len += p->len;
  40aaf8:	8fc20030 	lw	v0,48(s8)
  40aafc:	8c420038 	lw	v0,56(v0)
  40ab00:	8fc30030 	lw	v1,48(s8)
  40ab04:	8c630038 	lw	v1,56(v1)
  40ab08:	8c640004 	lw	a0,4(v1)
  40ab0c:	8fc30034 	lw	v1,52(s8)
  40ab10:	8c630004 	lw	v1,4(v1)
  40ab14:	00831821 	addu	v1,a0,v1
  40ab18:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/sockets.c:664
        put_apacket(p);
  40ab1c:	8fc40034 	lw	a0,52(s8)
  40ab20:	0c10078a 	jal	401e28 <put_apacket>
  40ab24:	00000000 	nop
/home_a/ppchen/adb/sockets.c:666

        p = s->pkt_first;
  40ab28:	8fc20030 	lw	v0,48(s8)
  40ab2c:	8c420038 	lw	v0,56(v0)
  40ab30:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/sockets.c:670
    }

        /* don't bother if we can't decode the length */
    if(p->len < 4) return 0;
  40ab34:	8fc20034 	lw	v0,52(s8)
  40ab38:	8c420004 	lw	v0,4(v0)
  40ab3c:	2c420004 	sltiu	v0,v0,4
  40ab40:	10400004 	beqz	v0,40ab54 <smart_socket_enqueue+0x1d4>
  40ab44:	00000000 	nop
/home_a/ppchen/adb/sockets.c:670 (discriminator 1)
  40ab48:	00001021 	move	v0,zero
  40ab4c:	1000007c 	b	40ad40 <smart_socket_enqueue+0x3c0>
  40ab50:	00000000 	nop
/home_a/ppchen/adb/sockets.c:672

    len = unhex(p->data, 4);
  40ab54:	8fc20034 	lw	v0,52(s8)
  40ab58:	24420024 	addiu	v0,v0,36
  40ab5c:	00402021 	move	a0,v0
  40ab60:	24050004 	li	a1,4
  40ab64:	0c102a08 	jal	40a820 <unhex>
  40ab68:	00000000 	nop
  40ab6c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sockets.c:673
    if((len < 1) ||  (len > 1024)) {
  40ab70:	8fc2001c 	lw	v0,28(s8)
  40ab74:	1040006b 	beqz	v0,40ad24 <smart_socket_enqueue+0x3a4>
  40ab78:	00000000 	nop
/home_a/ppchen/adb/sockets.c:673 (discriminator 1)
  40ab7c:	8fc2001c 	lw	v0,28(s8)
  40ab80:	2c420401 	sltiu	v0,v0,1025
  40ab84:	10400067 	beqz	v0,40ad24 <smart_socket_enqueue+0x3a4>
  40ab88:	00000000 	nop
/home_a/ppchen/adb/sockets.c:680
        goto fail;
    }

   
        /* can't do anything until we have the full header */
    if((len + 4) > p->len) {
  40ab8c:	8fc2001c 	lw	v0,28(s8)
  40ab90:	24430004 	addiu	v1,v0,4
  40ab94:	8fc20034 	lw	v0,52(s8)
  40ab98:	8c420004 	lw	v0,4(v0)
  40ab9c:	0043102b 	sltu	v0,v0,v1
  40aba0:	10400004 	beqz	v0,40abb4 <smart_socket_enqueue+0x234>
  40aba4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:682
    
        return 0;
  40aba8:	00001021 	move	v0,zero
  40abac:	10000064 	b	40ad40 <smart_socket_enqueue+0x3c0>
  40abb0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:685
    }

    p->data[len + 4] = 0;
  40abb4:	8fc2001c 	lw	v0,28(s8)
  40abb8:	24420004 	addiu	v0,v0,4
  40abbc:	8fc30034 	lw	v1,52(s8)
  40abc0:	00621021 	addu	v0,v1,v0
  40abc4:	a0400024 	sb	zero,36(v0)
/home_a/ppchen/adb/sockets.c:767
            /* initial state is "ready" */
        s2->ready(s2);
        return 0;
    }
#else /* !ADB_HOST */
    if (s->transport == NULL) {
  40abc8:	8fc20030 	lw	v0,48(s8)
  40abcc:	8c420050 	lw	v0,80(v0)
  40abd0:	1440001c 	bnez	v0,40ac44 <smart_socket_enqueue+0x2c4>
  40abd4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:768
        char* error_string = "unknown failure";
  40abd8:	3c020041 	lui	v0,0x41
  40abdc:	24423aa0 	addiu	v0,v0,15008
  40abe0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sockets.c:769
        s->transport = acquire_one_transport (CS_ANY,
  40abe4:	27c20020 	addiu	v0,s8,32
  40abe8:	2404ffff 	li	a0,-1
  40abec:	24050002 	li	a1,2
  40abf0:	00003021 	move	a2,zero
  40abf4:	00403821 	move	a3,v0
  40abf8:	0c101d9b 	jal	40766c <acquire_one_transport>
  40abfc:	00000000 	nop
  40ac00:	00401821 	move	v1,v0
  40ac04:	8fc20030 	lw	v0,48(s8)
  40ac08:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/sockets.c:772
                kTransportAny, NULL, &error_string);

        if (s->transport == NULL) {
  40ac0c:	8fc20030 	lw	v0,48(s8)
  40ac10:	8c420050 	lw	v0,80(v0)
  40ac14:	1440000b 	bnez	v0,40ac44 <smart_socket_enqueue+0x2c4>
  40ac18:	00000000 	nop
/home_a/ppchen/adb/sockets.c:773
            sendfailmsg(s->peer->fd, error_string);
  40ac1c:	8fc20030 	lw	v0,48(s8)
  40ac20:	8c420014 	lw	v0,20(v0)
  40ac24:	8c430034 	lw	v1,52(v0)
  40ac28:	8fc20020 	lw	v0,32(s8)
  40ac2c:	00602021 	move	a0,v1
  40ac30:	00402821 	move	a1,v0
  40ac34:	0c102538 	jal	4094e0 <sendfailmsg>
  40ac38:	00000000 	nop
  40ac3c:	10000039 	b	40ad24 <smart_socket_enqueue+0x3a4>
  40ac40:	00000000 	nop
/home_a/ppchen/adb/sockets.c:779
            goto fail;
        }
    }
#endif

    if(!(s->transport) || (s->transport->connection_state == CS_OFFLINE)) {
  40ac44:	8fc20030 	lw	v0,48(s8)
  40ac48:	8c420050 	lw	v0,80(v0)
  40ac4c:	10400006 	beqz	v0,40ac68 <smart_socket_enqueue+0x2e8>
  40ac50:	00000000 	nop
/home_a/ppchen/adb/sockets.c:779 (discriminator 1)
  40ac54:	8fc20030 	lw	v0,48(s8)
  40ac58:	8c420050 	lw	v0,80(v0)
  40ac5c:	8c420044 	lw	v0,68(v0)
  40ac60:	1440000b 	bnez	v0,40ac90 <smart_socket_enqueue+0x310>
  40ac64:	00000000 	nop
/home_a/ppchen/adb/sockets.c:783
           /* if there's no remote we fail the connection
            ** right here and terminate it
            */
        sendfailmsg(s->peer->fd, "device offline (x)");
  40ac68:	8fc20030 	lw	v0,48(s8)
  40ac6c:	8c420014 	lw	v0,20(v0)
  40ac70:	8c420034 	lw	v0,52(v0)
  40ac74:	00402021 	move	a0,v0
  40ac78:	3c020041 	lui	v0,0x41
  40ac7c:	24453ab0 	addiu	a1,v0,15024
  40ac80:	0c102538 	jal	4094e0 <sendfailmsg>
  40ac84:	00000000 	nop
/home_a/ppchen/adb/sockets.c:784
        goto fail;
  40ac88:	10000026 	b	40ad24 <smart_socket_enqueue+0x3a4>
  40ac8c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:793
        /* instrument our peer to pass the success or fail
        ** message back once it connects or closes, then
        ** detach from it, request the connection, and
        ** tear down
        */
    s->peer->ready = local_socket_ready_notify;
  40ac90:	8fc20030 	lw	v0,48(s8)
  40ac94:	8c420014 	lw	v0,20(v0)
  40ac98:	3c030041 	lui	v1,0x41
  40ac9c:	2463a71c 	addiu	v1,v1,-22756
  40aca0:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:794
    s->peer->close = local_socket_close_notify;
  40aca4:	8fc20030 	lw	v0,48(s8)
  40aca8:	8c420014 	lw	v0,20(v0)
  40acac:	3c030041 	lui	v1,0x41
  40acb0:	2463a7a0 	addiu	v1,v1,-22624
  40acb4:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:795
    s->peer->peer = 0;
  40acb8:	8fc20030 	lw	v0,48(s8)
  40acbc:	8c420014 	lw	v0,20(v0)
  40acc0:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:797
        /* give him our transport and upref it */
    s->peer->transport = s->transport;
  40acc4:	8fc20030 	lw	v0,48(s8)
  40acc8:	8c420014 	lw	v0,20(v0)
  40accc:	8fc30030 	lw	v1,48(s8)
  40acd0:	8c630050 	lw	v1,80(v1)
  40acd4:	ac430050 	sw	v1,80(v0)
/home_a/ppchen/adb/sockets.c:799

    connect_to_remote(s->peer, (char*) (p->data + 4));
  40acd8:	8fc20030 	lw	v0,48(s8)
  40acdc:	8c430014 	lw	v1,20(v0)
  40ace0:	8fc20034 	lw	v0,52(s8)
  40ace4:	24420028 	addiu	v0,v0,40
  40ace8:	00602021 	move	a0,v1
  40acec:	00402821 	move	a1,v0
  40acf0:	0c102994 	jal	40a650 <connect_to_remote>
  40acf4:	00000000 	nop
/home_a/ppchen/adb/sockets.c:800
    s->peer = 0;
  40acf8:	8fc20030 	lw	v0,48(s8)
  40acfc:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:801
    s->close(s);
  40ad00:	8fc20030 	lw	v0,48(s8)
  40ad04:	8c420048 	lw	v0,72(v0)
  40ad08:	8fc40030 	lw	a0,48(s8)
  40ad0c:	0040c821 	move	t9,v0
  40ad10:	0320f809 	jalr	t9
  40ad14:	00000000 	nop
/home_a/ppchen/adb/sockets.c:802
    return 1;
  40ad18:	24020001 	li	v0,1
  40ad1c:	10000008 	b	40ad40 <smart_socket_enqueue+0x3c0>
  40ad20:	00000000 	nop
/home_a/ppchen/adb/sockets.c:809
fail:
        /* we're going to close our peer as a side-effect, so
        ** return -1 to signal that state to the local socket
        ** who is enqueueing against us
        */
    s->close(s);
  40ad24:	8fc20030 	lw	v0,48(s8)
  40ad28:	8c420048 	lw	v0,72(v0)
  40ad2c:	8fc40030 	lw	a0,48(s8)
  40ad30:	0040c821 	move	t9,v0
  40ad34:	0320f809 	jalr	t9
  40ad38:	00000000 	nop
/home_a/ppchen/adb/sockets.c:810
    return -1;
  40ad3c:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/sockets.c:811
}
  40ad40:	03c0e821 	move	sp,s8
  40ad44:	8fbf002c 	lw	ra,44(sp)
  40ad48:	8fbe0028 	lw	s8,40(sp)
  40ad4c:	27bd0030 	addiu	sp,sp,48
  40ad50:	03e00008 	jr	ra
  40ad54:	00000000 	nop

0040ad58 <smart_socket_ready>:
smart_socket_ready():
/home_a/ppchen/adb/sockets.c:814

static void smart_socket_ready(asocket *s)
{
  40ad58:	27bdfff8 	addiu	sp,sp,-8
  40ad5c:	afbe0004 	sw	s8,4(sp)
  40ad60:	03a0f021 	move	s8,sp
  40ad64:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/sockets.c:816
   
}
  40ad68:	03c0e821 	move	sp,s8
  40ad6c:	8fbe0004 	lw	s8,4(sp)
  40ad70:	27bd0008 	addiu	sp,sp,8
  40ad74:	03e00008 	jr	ra
  40ad78:	00000000 	nop

0040ad7c <smart_socket_close>:
smart_socket_close():
/home_a/ppchen/adb/sockets.c:819

static void smart_socket_close(asocket *s)
{
  40ad7c:	27bdffe0 	addiu	sp,sp,-32
  40ad80:	afbf001c 	sw	ra,28(sp)
  40ad84:	afbe0018 	sw	s8,24(sp)
  40ad88:	03a0f021 	move	s8,sp
  40ad8c:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sockets.c:821

    if(s->pkt_first){
  40ad90:	8fc20020 	lw	v0,32(s8)
  40ad94:	8c420038 	lw	v0,56(v0)
  40ad98:	10400006 	beqz	v0,40adb4 <smart_socket_close+0x38>
  40ad9c:	00000000 	nop
/home_a/ppchen/adb/sockets.c:822
        put_apacket(s->pkt_first);
  40ada0:	8fc20020 	lw	v0,32(s8)
  40ada4:	8c420038 	lw	v0,56(v0)
  40ada8:	00402021 	move	a0,v0
  40adac:	0c10078a 	jal	401e28 <put_apacket>
  40adb0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:824
    }
    if(s->peer) {
  40adb4:	8fc20020 	lw	v0,32(s8)
  40adb8:	8c420014 	lw	v0,20(v0)
  40adbc:	1040000f 	beqz	v0,40adfc <smart_socket_close+0x80>
  40adc0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:825
        s->peer->peer = 0;
  40adc4:	8fc20020 	lw	v0,32(s8)
  40adc8:	8c420014 	lw	v0,20(v0)
  40adcc:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:826
        s->peer->close(s->peer);
  40add0:	8fc20020 	lw	v0,32(s8)
  40add4:	8c420014 	lw	v0,20(v0)
  40add8:	8c420048 	lw	v0,72(v0)
  40addc:	8fc30020 	lw	v1,32(s8)
  40ade0:	8c630014 	lw	v1,20(v1)
  40ade4:	00602021 	move	a0,v1
  40ade8:	0040c821 	move	t9,v0
  40adec:	0320f809 	jalr	t9
  40adf0:	00000000 	nop
/home_a/ppchen/adb/sockets.c:827
        s->peer = 0;
  40adf4:	8fc20020 	lw	v0,32(s8)
  40adf8:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/sockets.c:829
    }
    free(s);
  40adfc:	8fc40020 	lw	a0,32(s8)
  40ae00:	0c1053e4 	jal	414f90 <free@plt>
  40ae04:	00000000 	nop
/home_a/ppchen/adb/sockets.c:830
}
  40ae08:	03c0e821 	move	sp,s8
  40ae0c:	8fbf001c 	lw	ra,28(sp)
  40ae10:	8fbe0018 	lw	s8,24(sp)
  40ae14:	27bd0020 	addiu	sp,sp,32
  40ae18:	03e00008 	jr	ra
  40ae1c:	00000000 	nop

0040ae20 <create_smart_socket>:
create_smart_socket():
/home_a/ppchen/adb/sockets.c:833

asocket *create_smart_socket(void (*action_cb)(asocket *s, const char *act))
{
  40ae20:	27bdffd8 	addiu	sp,sp,-40
  40ae24:	afbf0024 	sw	ra,36(sp)
  40ae28:	afbe0020 	sw	s8,32(sp)
  40ae2c:	03a0f021 	move	s8,sp
  40ae30:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:835
  
    asocket *s = calloc(1, sizeof(asocket));
  40ae34:	24040001 	li	a0,1
  40ae38:	24050054 	li	a1,84
  40ae3c:	0c1052b8 	jal	414ae0 <calloc@plt>
  40ae40:	00000000 	nop
  40ae44:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:836
    if (s == NULL) fatal("cannot allocate socket");
  40ae48:	8fc20018 	lw	v0,24(s8)
  40ae4c:	14400005 	bnez	v0,40ae64 <create_smart_socket+0x44>
  40ae50:	00000000 	nop
/home_a/ppchen/adb/sockets.c:836 (discriminator 1)
  40ae54:	3c020041 	lui	v0,0x41
  40ae58:	2444392c 	addiu	a0,v0,14636
  40ae5c:	0c1006a7 	jal	401a9c <fatal>
  40ae60:	00000000 	nop
/home_a/ppchen/adb/sockets.c:837
    s->enqueue = smart_socket_enqueue;
  40ae64:	8fc20018 	lw	v0,24(s8)
  40ae68:	3c030041 	lui	v1,0x41
  40ae6c:	2463a980 	addiu	v1,v1,-22144
  40ae70:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/sockets.c:838
    s->ready = smart_socket_ready;
  40ae74:	8fc20018 	lw	v0,24(s8)
  40ae78:	3c030041 	lui	v1,0x41
  40ae7c:	2463ad58 	addiu	v1,v1,-21160
  40ae80:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/sockets.c:839
    s->close = smart_socket_close;
  40ae84:	8fc20018 	lw	v0,24(s8)
  40ae88:	3c030041 	lui	v1,0x41
  40ae8c:	2463ad7c 	addiu	v1,v1,-21124
  40ae90:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/sockets.c:840
    s->extra = action_cb;
  40ae94:	8fc20018 	lw	v0,24(s8)
  40ae98:	8fc30028 	lw	v1,40(s8)
  40ae9c:	ac43004c 	sw	v1,76(v0)
/home_a/ppchen/adb/sockets.c:843

 
    return s;
  40aea0:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:844
}
  40aea4:	03c0e821 	move	sp,s8
  40aea8:	8fbf0024 	lw	ra,36(sp)
  40aeac:	8fbe0020 	lw	s8,32(sp)
  40aeb0:	27bd0028 	addiu	sp,sp,40
  40aeb4:	03e00008 	jr	ra
  40aeb8:	00000000 	nop

0040aebc <smart_socket_action>:
smart_socket_action():
/home_a/ppchen/adb/sockets.c:847

void smart_socket_action(asocket *s, const char *act)
{
  40aebc:	27bdfff8 	addiu	sp,sp,-8
  40aec0:	afbe0004 	sw	s8,4(sp)
  40aec4:	03a0f021 	move	s8,sp
  40aec8:	afc40008 	sw	a0,8(s8)
  40aecc:	afc5000c 	sw	a1,12(s8)
/home_a/ppchen/adb/sockets.c:849

}
  40aed0:	03c0e821 	move	sp,s8
  40aed4:	8fbe0004 	lw	s8,4(sp)
  40aed8:	27bd0008 	addiu	sp,sp,8
  40aedc:	03e00008 	jr	ra
  40aee0:	00000000 	nop

0040aee4 <connect_to_smartsocket>:
connect_to_smartsocket():
/home_a/ppchen/adb/sockets.c:852

void connect_to_smartsocket(asocket *s)
{
  40aee4:	27bdffd8 	addiu	sp,sp,-40
  40aee8:	afbf0024 	sw	ra,36(sp)
  40aeec:	afbe0020 	sw	s8,32(sp)
  40aef0:	03a0f021 	move	s8,sp
  40aef4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sockets.c:854
  
    asocket *ss = create_smart_socket(smart_socket_action);
  40aef8:	3c020041 	lui	v0,0x41
  40aefc:	2444aebc 	addiu	a0,v0,-20804
  40af00:	0c102b88 	jal	40ae20 <create_smart_socket>
  40af04:	00000000 	nop
  40af08:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sockets.c:855
    s->peer = ss;
  40af0c:	8fc20028 	lw	v0,40(s8)
  40af10:	8fc30018 	lw	v1,24(s8)
  40af14:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/sockets.c:856
    ss->peer = s;
  40af18:	8fc20018 	lw	v0,24(s8)
  40af1c:	8fc30028 	lw	v1,40(s8)
  40af20:	ac430014 	sw	v1,20(v0)
/home_a/ppchen/adb/sockets.c:857
    s->ready(s);
  40af24:	8fc20028 	lw	v0,40(s8)
  40af28:	8c420044 	lw	v0,68(v0)
  40af2c:	8fc40028 	lw	a0,40(s8)
  40af30:	0040c821 	move	t9,v0
  40af34:	0320f809 	jalr	t9
  40af38:	00000000 	nop
/home_a/ppchen/adb/sockets.c:858
}
  40af3c:	03c0e821 	move	sp,s8
  40af40:	8fbf0024 	lw	ra,36(sp)
  40af44:	8fbe0020 	lw	s8,32(sp)
  40af48:	27bd0028 	addiu	sp,sp,40
  40af4c:	03e00008 	jr	ra
  40af50:	00000000 	nop
	...

0040af60 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  40af60:	27bdffe0 	addiu	sp,sp,-32
  40af64:	afbf001c 	sw	ra,28(sp)
  40af68:	afbe0018 	sw	s8,24(sp)
  40af6c:	03a0f021 	move	s8,sp
  40af70:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  40af74:	8fc40020 	lw	a0,32(s8)
  40af78:	24050002 	li	a1,2
  40af7c:	24060001 	li	a2,1
  40af80:	0c10532c 	jal	414cb0 <fcntl@plt>
  40af84:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  40af88:	03c0e821 	move	sp,s8
  40af8c:	8fbf001c 	lw	ra,28(sp)
  40af90:	8fbe0018 	lw	s8,24(sp)
  40af94:	27bd0020 	addiu	sp,sp,32
  40af98:	03e00008 	jr	ra
  40af9c:	00000000 	nop

0040afa0 <unix_open>:
unix_open():
/home_a/ppchen/adb/sysdeps.h:310

static __inline__ int  unix_open(const char*  path, int options,...)
{
  40afa0:	27bdffd8 	addiu	sp,sp,-40
  40afa4:	afbf0024 	sw	ra,36(sp)
  40afa8:	afbe0020 	sw	s8,32(sp)
  40afac:	03a0f021 	move	s8,sp
  40afb0:	afc40028 	sw	a0,40(s8)
  40afb4:	afc60030 	sw	a2,48(s8)
  40afb8:	afc70034 	sw	a3,52(s8)
  40afbc:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:311
    if ((options & O_CREAT) == 0)
  40afc0:	8fc2002c 	lw	v0,44(s8)
  40afc4:	30420100 	andi	v0,v0,0x100
  40afc8:	14400007 	bnez	v0,40afe8 <unix_open+0x48>
  40afcc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:313
    {
        return  open(path, options);
  40afd0:	8fc40028 	lw	a0,40(s8)
  40afd4:	8fc5002c 	lw	a1,44(s8)
  40afd8:	0c1052c4 	jal	414b10 <open@plt>
  40afdc:	00000000 	nop
  40afe0:	1000000d 	b	40b018 <unix_open+0x78>
  40afe4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:319
    }
    else
    {
        int      mode;
        va_list  args;
        va_start( args, options );
  40afe8:	27c20030 	addiu	v0,s8,48
  40afec:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sysdeps.h:320
        mode = va_arg( args, int );
  40aff0:	8fc2001c 	lw	v0,28(s8)
  40aff4:	24430004 	addiu	v1,v0,4
  40aff8:	afc3001c 	sw	v1,28(s8)
  40affc:	8c420000 	lw	v0,0(v0)
  40b000:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:322
        va_end( args );
        return open(path, options, mode);
  40b004:	8fc40028 	lw	a0,40(s8)
  40b008:	8fc5002c 	lw	a1,44(s8)
  40b00c:	8fc60018 	lw	a2,24(s8)
  40b010:	0c1052c4 	jal	414b10 <open@plt>
  40b014:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:324
    }
}
  40b018:	03c0e821 	move	sp,s8
  40b01c:	8fbf0024 	lw	ra,36(sp)
  40b020:	8fbe0020 	lw	s8,32(sp)
  40b024:	27bd0028 	addiu	sp,sp,40
  40b028:	03e00008 	jr	ra
  40b02c:	00000000 	nop

0040b030 <adb_open>:
adb_open():
/home_a/ppchen/adb/sysdeps.h:333
    return open( pathname, options, mode );
}


static __inline__ int  adb_open( const char*  pathname, int  options )
{
  40b030:	27bdffd8 	addiu	sp,sp,-40
  40b034:	afbf0024 	sw	ra,36(sp)
  40b038:	afbe0020 	sw	s8,32(sp)
  40b03c:	03a0f021 	move	s8,sp
  40b040:	afc40028 	sw	a0,40(s8)
  40b044:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:334
    int  fd = open( pathname, options );
  40b048:	8fc40028 	lw	a0,40(s8)
  40b04c:	8fc5002c 	lw	a1,44(s8)
  40b050:	0c1052c4 	jal	414b10 <open@plt>
  40b054:	00000000 	nop
  40b058:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:335
    if (fd < 0)
  40b05c:	8fc20018 	lw	v0,24(s8)
  40b060:	04410004 	bgez	v0,40b074 <adb_open+0x44>
  40b064:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:336
        return -1;
  40b068:	2402ffff 	li	v0,-1
  40b06c:	10000005 	b	40b084 <adb_open+0x54>
  40b070:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:337
    close_on_exec( fd );
  40b074:	8fc40018 	lw	a0,24(s8)
  40b078:	0c102bd8 	jal	40af60 <close_on_exec>
  40b07c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:338
    return fd;
  40b080:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:339
}
  40b084:	03c0e821 	move	sp,s8
  40b088:	8fbf0024 	lw	ra,36(sp)
  40b08c:	8fbe0020 	lw	s8,32(sp)
  40b090:	27bd0028 	addiu	sp,sp,40
  40b094:	03e00008 	jr	ra
  40b098:	00000000 	nop

0040b09c <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  40b09c:	27bdffe0 	addiu	sp,sp,-32
  40b0a0:	afbf001c 	sw	ra,28(sp)
  40b0a4:	afbe0018 	sw	s8,24(sp)
  40b0a8:	03a0f021 	move	s8,sp
  40b0ac:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  40b0b0:	8fc40020 	lw	a0,32(s8)
  40b0b4:	0c105378 	jal	414de0 <close@plt>
  40b0b8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  40b0bc:	03c0e821 	move	sp,s8
  40b0c0:	8fbf001c 	lw	ra,28(sp)
  40b0c4:	8fbe0018 	lw	s8,24(sp)
  40b0c8:	27bd0020 	addiu	sp,sp,32
  40b0cc:	03e00008 	jr	ra
  40b0d0:	00000000 	nop

0040b0d4 <adb_write>:
adb_write():
/home_a/ppchen/adb/sysdeps.h:367

#undef   read
#define  read  ___xxx_read

static __inline__ int  adb_write(int  fd, const void*  buf, size_t  len)
{
  40b0d4:	27bdffe0 	addiu	sp,sp,-32
  40b0d8:	afbf001c 	sw	ra,28(sp)
  40b0dc:	afbe0018 	sw	s8,24(sp)
  40b0e0:	03a0f021 	move	s8,sp
  40b0e4:	afc40020 	sw	a0,32(s8)
  40b0e8:	afc50024 	sw	a1,36(s8)
  40b0ec:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:368
    return write(fd, buf, len);
  40b0f0:	8fc40020 	lw	a0,32(s8)
  40b0f4:	8fc50024 	lw	a1,36(s8)
  40b0f8:	8fc60028 	lw	a2,40(s8)
  40b0fc:	0c10536c 	jal	414db0 <write@plt>
  40b100:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:369
}
  40b104:	03c0e821 	move	sp,s8
  40b108:	8fbf001c 	lw	ra,28(sp)
  40b10c:	8fbe0018 	lw	s8,24(sp)
  40b110:	27bd0020 	addiu	sp,sp,32
  40b114:	03e00008 	jr	ra
  40b118:	00000000 	nop

0040b11c <adb_creat>:
adb_creat():
/home_a/ppchen/adb/sysdeps.h:388
}
#undef  unlink
#define unlink  ___xxx_unlink

static __inline__  int  adb_creat(const char*  path, int  mode)
{
  40b11c:	27bdffd8 	addiu	sp,sp,-40
  40b120:	afbf0024 	sw	ra,36(sp)
  40b124:	afbe0020 	sw	s8,32(sp)
  40b128:	03a0f021 	move	s8,sp
  40b12c:	afc40028 	sw	a0,40(s8)
  40b130:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:389
    int  fd = creat(path, mode);
  40b134:	8fc2002c 	lw	v0,44(s8)
  40b138:	8fc40028 	lw	a0,40(s8)
  40b13c:	00402821 	move	a1,v0
  40b140:	0c1052bc 	jal	414af0 <creat@plt>
  40b144:	00000000 	nop
  40b148:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:391

    if ( fd < 0 )
  40b14c:	8fc20018 	lw	v0,24(s8)
  40b150:	04410004 	bgez	v0,40b164 <adb_creat+0x48>
  40b154:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:392
        return -1;
  40b158:	2402ffff 	li	v0,-1
  40b15c:	10000005 	b	40b174 <adb_creat+0x58>
  40b160:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:394

    close_on_exec(fd);
  40b164:	8fc40018 	lw	a0,24(s8)
  40b168:	0c102bd8 	jal	40af60 <close_on_exec>
  40b16c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:395
    return fd;
  40b170:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:396
}
  40b174:	03c0e821 	move	sp,s8
  40b178:	8fbf0024 	lw	ra,36(sp)
  40b17c:	8fbe0020 	lw	s8,32(sp)
  40b180:	27bd0028 	addiu	sp,sp,40
  40b184:	03e00008 	jr	ra
  40b188:	00000000 	nop

0040b18c <adb_thread_create>:
adb_thread_create():
/home_a/ppchen/adb/sysdeps.h:424
typedef  pthread_t                 adb_thread_t;

typedef void*  (*adb_thread_func_t)( void*  arg );

static __inline__ int  adb_thread_create( adb_thread_t  *pthread, adb_thread_func_t  start, void*  arg )
{
  40b18c:	27bdffb8 	addiu	sp,sp,-72
  40b190:	afbf0044 	sw	ra,68(sp)
  40b194:	afbe0040 	sw	s8,64(sp)
  40b198:	03a0f021 	move	s8,sp
  40b19c:	afc40048 	sw	a0,72(s8)
  40b1a0:	afc5004c 	sw	a1,76(s8)
  40b1a4:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sysdeps.h:429
    pthread_attr_t   attr;


    //pthread_detach(pthread_self());
    pthread_attr_init (&attr);
  40b1a8:	27c2001c 	addiu	v0,s8,28
  40b1ac:	00402021 	move	a0,v0
  40b1b0:	0c1052ec 	jal	414bb0 <pthread_attr_init@plt>
  40b1b4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:430
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
  40b1b8:	27c2001c 	addiu	v0,s8,28
  40b1bc:	00402021 	move	a0,v0
  40b1c0:	24050001 	li	a1,1
  40b1c4:	0c1052c8 	jal	414b20 <pthread_attr_setdetachstate@plt>
  40b1c8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:431
    pthread_attr_setstacksize(&attr, 64*1024);
  40b1cc:	27c2001c 	addiu	v0,s8,28
  40b1d0:	00402021 	move	a0,v0
  40b1d4:	3c050001 	lui	a1,0x1
  40b1d8:	0c105314 	jal	414c50 <pthread_attr_setstacksize@plt>
  40b1dc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:434
   

    int ret =  pthread_create( pthread, &attr, start, arg );
  40b1e0:	27c2001c 	addiu	v0,s8,28
  40b1e4:	8fc40048 	lw	a0,72(s8)
  40b1e8:	00402821 	move	a1,v0
  40b1ec:	8fc6004c 	lw	a2,76(s8)
  40b1f0:	8fc70050 	lw	a3,80(s8)
  40b1f4:	0c105368 	jal	414da0 <pthread_create@plt>
  40b1f8:	00000000 	nop
  40b1fc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:436

    return ret;
  40b200:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:437
}
  40b204:	03c0e821 	move	sp,s8
  40b208:	8fbf0044 	lw	ra,68(sp)
  40b20c:	8fbe0040 	lw	s8,64(sp)
  40b210:	27bd0048 	addiu	sp,sp,72
  40b214:	03e00008 	jr	ra
  40b218:	00000000 	nop

0040b21c <disable_tcp_nagle>:
disable_tcp_nagle():
/home_a/ppchen/adb/sysdeps.h:446
    int opt = bufsize;
    return setsockopt(fd, SOL_SOCKET, SO_RCVBUF, &opt, sizeof(opt));
}

static __inline__ void  disable_tcp_nagle(int fd)
{
  40b21c:	27bdffd0 	addiu	sp,sp,-48
  40b220:	afbf002c 	sw	ra,44(sp)
  40b224:	afbe0028 	sw	s8,40(sp)
  40b228:	03a0f021 	move	s8,sp
  40b22c:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/sysdeps.h:447
    int  on = 1;
  40b230:	24020001 	li	v0,1
  40b234:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/sysdeps.h:448
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
  40b238:	24020004 	li	v0,4
  40b23c:	afa20010 	sw	v0,16(sp)
  40b240:	8fc40030 	lw	a0,48(s8)
  40b244:	24050006 	li	a1,6
  40b248:	24060001 	li	a2,1
  40b24c:	27c20020 	addiu	v0,s8,32
  40b250:	00403821 	move	a3,v0
  40b254:	0c10535c 	jal	414d70 <setsockopt@plt>
  40b258:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:449
}
  40b25c:	03c0e821 	move	sp,s8
  40b260:	8fbf002c 	lw	ra,44(sp)
  40b264:	8fbe0028 	lw	s8,40(sp)
  40b268:	27bd0030 	addiu	sp,sp,48
  40b26c:	03e00008 	jr	ra
  40b270:	00000000 	nop

0040b274 <unix_socketpair>:
unix_socketpair():
/home_a/ppchen/adb/sysdeps.h:453


static __inline__ int  unix_socketpair( int  d, int  type, int  protocol, int sv[2] )
{
  40b274:	27bdffe0 	addiu	sp,sp,-32
  40b278:	afbf001c 	sw	ra,28(sp)
  40b27c:	afbe0018 	sw	s8,24(sp)
  40b280:	03a0f021 	move	s8,sp
  40b284:	afc40020 	sw	a0,32(s8)
  40b288:	afc50024 	sw	a1,36(s8)
  40b28c:	afc60028 	sw	a2,40(s8)
  40b290:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/sysdeps.h:454
    return socketpair( d, type, protocol, sv );
  40b294:	8fc40020 	lw	a0,32(s8)
  40b298:	8fc50024 	lw	a1,36(s8)
  40b29c:	8fc60028 	lw	a2,40(s8)
  40b2a0:	8fc7002c 	lw	a3,44(s8)
  40b2a4:	0c105394 	jal	414e50 <socketpair@plt>
  40b2a8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:455
}
  40b2ac:	03c0e821 	move	sp,s8
  40b2b0:	8fbf001c 	lw	ra,28(sp)
  40b2b4:	8fbe0018 	lw	s8,24(sp)
  40b2b8:	27bd0020 	addiu	sp,sp,32
  40b2bc:	03e00008 	jr	ra
  40b2c0:	00000000 	nop

0040b2c4 <adb_socketpair>:
adb_socketpair():
/home_a/ppchen/adb/sysdeps.h:458

static __inline__ int  adb_socketpair( int  sv[2] )
{
  40b2c4:	27bdffd8 	addiu	sp,sp,-40
  40b2c8:	afbf0024 	sw	ra,36(sp)
  40b2cc:	afbe0020 	sw	s8,32(sp)
  40b2d0:	03a0f021 	move	s8,sp
  40b2d4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sysdeps.h:463
    int  rc;



    rc = unix_socketpair( AF_UNIX, SOCK_STREAM, 0, sv );
  40b2d8:	24040001 	li	a0,1
  40b2dc:	24050002 	li	a1,2
  40b2e0:	00003021 	move	a2,zero
  40b2e4:	8fc70028 	lw	a3,40(s8)
  40b2e8:	0c102c9d 	jal	40b274 <unix_socketpair>
  40b2ec:	00000000 	nop
  40b2f0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:467



    if (rc < 0)
  40b2f4:	8fc20018 	lw	v0,24(s8)
  40b2f8:	04410004 	bgez	v0,40b30c <adb_socketpair+0x48>
  40b2fc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:468
        return -1;
  40b300:	2402ffff 	li	v0,-1
  40b304:	1000000d 	b	40b33c <adb_socketpair+0x78>
  40b308:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:470

    close_on_exec( sv[0] );
  40b30c:	8fc20028 	lw	v0,40(s8)
  40b310:	8c420000 	lw	v0,0(v0)
  40b314:	00402021 	move	a0,v0
  40b318:	0c102bd8 	jal	40af60 <close_on_exec>
  40b31c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:471
    close_on_exec( sv[1] );
  40b320:	8fc20028 	lw	v0,40(s8)
  40b324:	24420004 	addiu	v0,v0,4
  40b328:	8c420000 	lw	v0,0(v0)
  40b32c:	00402021 	move	a0,v0
  40b330:	0c102bd8 	jal	40af60 <close_on_exec>
  40b334:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:472
    return 0;
  40b338:	00001021 	move	v0,zero
/home_a/ppchen/adb/sysdeps.h:473
}
  40b33c:	03c0e821 	move	sp,s8
  40b340:	8fbf0024 	lw	ra,36(sp)
  40b344:	8fbe0020 	lw	s8,32(sp)
  40b348:	27bd0028 	addiu	sp,sp,40
  40b34c:	03e00008 	jr	ra
  40b350:	00000000 	nop

0040b354 <service_bootstrap_func>:
service_bootstrap_func():
/home_a/ppchen/adb/services.c:49
    void *cookie;
};


void *service_bootstrap_func(void *x)
{
  40b354:	27bdffd8 	addiu	sp,sp,-40
  40b358:	afbf0024 	sw	ra,36(sp)
  40b35c:	afbe0020 	sw	s8,32(sp)
  40b360:	03a0f021 	move	s8,sp
  40b364:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/services.c:50
    stinfo *sti = x;
  40b368:	8fc20028 	lw	v0,40(s8)
  40b36c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:51
    sti->func(sti->fd, sti->cookie);
  40b370:	8fc20018 	lw	v0,24(s8)
  40b374:	8c420000 	lw	v0,0(v0)
  40b378:	8fc30018 	lw	v1,24(s8)
  40b37c:	8c640004 	lw	a0,4(v1)
  40b380:	8fc30018 	lw	v1,24(s8)
  40b384:	8c630008 	lw	v1,8(v1)
  40b388:	00602821 	move	a1,v1
  40b38c:	0040c821 	move	t9,v0
  40b390:	0320f809 	jalr	t9
  40b394:	00000000 	nop
/home_a/ppchen/adb/services.c:52
    free(sti);
  40b398:	8fc40018 	lw	a0,24(s8)
  40b39c:	0c1053e4 	jal	414f90 <free@plt>
  40b3a0:	00000000 	nop
/home_a/ppchen/adb/services.c:53
    return 0;
  40b3a4:	00001021 	move	v0,zero
/home_a/ppchen/adb/services.c:54
}
  40b3a8:	03c0e821 	move	sp,s8
  40b3ac:	8fbf0024 	lw	ra,36(sp)
  40b3b0:	8fbe0020 	lw	s8,32(sp)
  40b3b4:	27bd0028 	addiu	sp,sp,40
  40b3b8:	03e00008 	jr	ra
  40b3bc:	00000000 	nop

0040b3c0 <recover_service>:
recover_service():
/home_a/ppchen/adb/services.c:80
}
#else
extern int recovery_mode;

static void recover_service(int s, void *cookie)
{
  40b3c0:	27bdefd0 	addiu	sp,sp,-4144
  40b3c4:	afbf102c 	sw	ra,4140(sp)
  40b3c8:	afbe1028 	sw	s8,4136(sp)
  40b3cc:	03a0f021 	move	s8,sp
  40b3d0:	afc41030 	sw	a0,4144(s8)
  40b3d4:	afc51034 	sw	a1,4148(s8)
/home_a/ppchen/adb/services.c:82
    unsigned char buf[4096];
    unsigned count = (unsigned) cookie;
  40b3d8:	8fc21034 	lw	v0,4148(s8)
  40b3dc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:85
    int fd;

    fd = adb_creat("/tmp/update", 0644);
  40b3e0:	3c020041 	lui	v0,0x41
  40b3e4:	24443ae0 	addiu	a0,v0,15072
  40b3e8:	240501a4 	li	a1,420
  40b3ec:	0c102c47 	jal	40b11c <adb_creat>
  40b3f0:	00000000 	nop
  40b3f4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/services.c:86
    if(fd < 0) {
  40b3f8:	8fc2001c 	lw	v0,28(s8)
  40b3fc:	04410020 	bgez	v0,40b480 <recover_service+0xc0>
  40b400:	00000000 	nop
/home_a/ppchen/adb/services.c:87
        adb_close(s);
  40b404:	8fc41030 	lw	a0,4144(s8)
  40b408:	0c102c27 	jal	40b09c <adb_close>
  40b40c:	00000000 	nop
  40b410:	10000044 	b	40b524 <recover_service+0x164>
  40b414:	00000000 	nop
/home_a/ppchen/adb/services.c:92
        return;
    }

    while(count > 0) {
        unsigned xfer = (count > 4096) ? 4096 : count;
  40b418:	8fc40018 	lw	a0,24(s8)
  40b41c:	8fc30018 	lw	v1,24(s8)
  40b420:	24021000 	li	v0,4096
  40b424:	2c841001 	sltiu	a0,a0,4097
  40b428:	0064100b 	movn	v0,v1,a0
  40b42c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/services.c:93
        if(readx(s, buf, xfer)) break;
  40b430:	27c20024 	addiu	v0,s8,36
  40b434:	8fc41030 	lw	a0,4144(s8)
  40b438:	00402821 	move	a1,v0
  40b43c:	8fc60020 	lw	a2,32(s8)
  40b440:	0c101f12 	jal	407c48 <readx>
  40b444:	00000000 	nop
  40b448:	14400012 	bnez	v0,40b494 <recover_service+0xd4>
  40b44c:	00000000 	nop
/home_a/ppchen/adb/services.c:94
        if(writex(fd, buf, xfer)) break;
  40b450:	27c20024 	addiu	v0,s8,36
  40b454:	8fc4001c 	lw	a0,28(s8)
  40b458:	00402821 	move	a1,v0
  40b45c:	8fc60020 	lw	a2,32(s8)
  40b460:	0c101f4e 	jal	407d38 <writex>
  40b464:	00000000 	nop
  40b468:	1440000d 	bnez	v0,40b4a0 <recover_service+0xe0>
  40b46c:	00000000 	nop
/home_a/ppchen/adb/services.c:95
        count -= xfer;
  40b470:	8fc30018 	lw	v1,24(s8)
  40b474:	8fc20020 	lw	v0,32(s8)
  40b478:	00621023 	subu	v0,v1,v0
  40b47c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:91 (discriminator 1)
    if(fd < 0) {
        adb_close(s);
        return;
    }

    while(count > 0) {
  40b480:	8fc20018 	lw	v0,24(s8)
  40b484:	1440ffe4 	bnez	v0,40b418 <recover_service+0x58>
  40b488:	00000000 	nop
  40b48c:	10000005 	b	40b4a4 <recover_service+0xe4>
  40b490:	00000000 	nop
/home_a/ppchen/adb/services.c:93
        unsigned xfer = (count > 4096) ? 4096 : count;
        if(readx(s, buf, xfer)) break;
  40b494:	00000000 	nop
  40b498:	10000002 	b	40b4a4 <recover_service+0xe4>
  40b49c:	00000000 	nop
/home_a/ppchen/adb/services.c:94
        if(writex(fd, buf, xfer)) break;
  40b4a0:	00000000 	nop
/home_a/ppchen/adb/services.c:98
        count -= xfer;
    }

    if(count == 0) {
  40b4a4:	8fc20018 	lw	v0,24(s8)
  40b4a8:	14400009 	bnez	v0,40b4d0 <recover_service+0x110>
  40b4ac:	00000000 	nop
/home_a/ppchen/adb/services.c:99
        writex(s, "OKAY", 4);
  40b4b0:	8fc41030 	lw	a0,4144(s8)
  40b4b4:	3c020041 	lui	v0,0x41
  40b4b8:	24453aec 	addiu	a1,v0,15084
  40b4bc:	24060004 	li	a2,4
  40b4c0:	0c101f4e 	jal	407d38 <writex>
  40b4c4:	00000000 	nop
  40b4c8:	10000007 	b	40b4e8 <recover_service+0x128>
  40b4cc:	00000000 	nop
/home_a/ppchen/adb/services.c:101
    } else {
        writex(s, "FAIL", 4);
  40b4d0:	8fc41030 	lw	a0,4144(s8)
  40b4d4:	3c020041 	lui	v0,0x41
  40b4d8:	24453af4 	addiu	a1,v0,15092
  40b4dc:	24060004 	li	a2,4
  40b4e0:	0c101f4e 	jal	407d38 <writex>
  40b4e4:	00000000 	nop
/home_a/ppchen/adb/services.c:103
    }
    adb_close(fd);
  40b4e8:	8fc4001c 	lw	a0,28(s8)
  40b4ec:	0c102c27 	jal	40b09c <adb_close>
  40b4f0:	00000000 	nop
/home_a/ppchen/adb/services.c:104
    adb_close(s);
  40b4f4:	8fc41030 	lw	a0,4144(s8)
  40b4f8:	0c102c27 	jal	40b09c <adb_close>
  40b4fc:	00000000 	nop
/home_a/ppchen/adb/services.c:106

    fd = adb_creat("/tmp/update.begin", 0644);
  40b500:	3c020041 	lui	v0,0x41
  40b504:	24443afc 	addiu	a0,v0,15100
  40b508:	240501a4 	li	a1,420
  40b50c:	0c102c47 	jal	40b11c <adb_creat>
  40b510:	00000000 	nop
  40b514:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/services.c:107
    adb_close(fd);
  40b518:	8fc4001c 	lw	a0,28(s8)
  40b51c:	0c102c27 	jal	40b09c <adb_close>
  40b520:	00000000 	nop
/home_a/ppchen/adb/services.c:108
}
  40b524:	03c0e821 	move	sp,s8
  40b528:	8fbf102c 	lw	ra,4140(sp)
  40b52c:	8fbe1028 	lw	s8,4136(sp)
  40b530:	27bd1030 	addiu	sp,sp,4144
  40b534:	03e00008 	jr	ra
  40b538:	00000000 	nop

0040b53c <restart_root_service>:
restart_root_service():
/home_a/ppchen/adb/services.c:111

void restart_root_service(int fd, void *cookie)
{
  40b53c:	27bdff20 	addiu	sp,sp,-224
  40b540:	afbf00dc 	sw	ra,220(sp)
  40b544:	afbe00d8 	sw	s8,216(sp)
  40b548:	03a0f021 	move	s8,sp
  40b54c:	afc400e0 	sw	a0,224(s8)
  40b550:	afc500e4 	sw	a1,228(s8)
/home_a/ppchen/adb/services.c:115
    char buf[100];
    char value[PROPERTY_VALUE_MAX];

    if (getuid() == 0) {
  40b554:	0c1053b0 	jal	414ec0 <getuid@plt>
  40b558:	00000000 	nop
  40b55c:	14400018 	bnez	v0,40b5c0 <restart_root_service+0x84>
  40b560:	00000000 	nop
/home_a/ppchen/adb/services.c:116
        snprintf(buf, sizeof(buf), "adbd is already running as root\n");
  40b564:	3c020041 	lui	v0,0x41
  40b568:	27c40018 	addiu	a0,s8,24
  40b56c:	24433b10 	addiu	v1,v0,15120
  40b570:	24020021 	li	v0,33
  40b574:	00602821 	move	a1,v1
  40b578:	00403021 	move	a2,v0
  40b57c:	0c1052d8 	jal	414b60 <memcpy@plt>
  40b580:	00000000 	nop
/home_a/ppchen/adb/services.c:117
        writex(fd, buf, strlen(buf));
  40b584:	27c20018 	addiu	v0,s8,24
  40b588:	00402021 	move	a0,v0
  40b58c:	0c10531c 	jal	414c70 <strlen@plt>
  40b590:	00000000 	nop
  40b594:	8fc400e0 	lw	a0,224(s8)
  40b598:	27c30018 	addiu	v1,s8,24
  40b59c:	00602821 	move	a1,v1
  40b5a0:	00403021 	move	a2,v0
  40b5a4:	0c101f4e 	jal	407d38 <writex>
  40b5a8:	00000000 	nop
/home_a/ppchen/adb/services.c:118
        adb_close(fd);
  40b5ac:	8fc400e0 	lw	a0,224(s8)
  40b5b0:	0c102c27 	jal	40b09c <adb_close>
  40b5b4:	00000000 	nop
  40b5b8:	10000050 	b	40b6fc <restart_root_service+0x1c0>
  40b5bc:	00000000 	nop
/home_a/ppchen/adb/services.c:120
    } else {
        property_get("ro.debuggable", value, "");
  40b5c0:	27c2007c 	addiu	v0,s8,124
  40b5c4:	3c030041 	lui	v1,0x41
  40b5c8:	24643b34 	addiu	a0,v1,15156
  40b5cc:	00402821 	move	a1,v0
  40b5d0:	3c020041 	lui	v0,0x41
  40b5d4:	24463b44 	addiu	a2,v0,15172
  40b5d8:	0c1046ac 	jal	411ab0 <property_get>
  40b5dc:	00000000 	nop
/home_a/ppchen/adb/services.c:121
        if (strcmp(value, "1") != 0) {
  40b5e0:	27c2007c 	addiu	v0,s8,124
  40b5e4:	00402021 	move	a0,v0
  40b5e8:	3c020041 	lui	v0,0x41
  40b5ec:	24453b48 	addiu	a1,v0,15176
  40b5f0:	0c1053d8 	jal	414f60 <strcmp@plt>
  40b5f4:	00000000 	nop
  40b5f8:	10400018 	beqz	v0,40b65c <restart_root_service+0x120>
  40b5fc:	00000000 	nop
/home_a/ppchen/adb/services.c:122
            snprintf(buf, sizeof(buf), "adbd cannot run as root in production builds\n");
  40b600:	3c020041 	lui	v0,0x41
  40b604:	27c40018 	addiu	a0,s8,24
  40b608:	24433b4c 	addiu	v1,v0,15180
  40b60c:	2402002e 	li	v0,46
  40b610:	00602821 	move	a1,v1
  40b614:	00403021 	move	a2,v0
  40b618:	0c1052d8 	jal	414b60 <memcpy@plt>
  40b61c:	00000000 	nop
/home_a/ppchen/adb/services.c:123
            writex(fd, buf, strlen(buf));
  40b620:	27c20018 	addiu	v0,s8,24
  40b624:	00402021 	move	a0,v0
  40b628:	0c10531c 	jal	414c70 <strlen@plt>
  40b62c:	00000000 	nop
  40b630:	8fc400e0 	lw	a0,224(s8)
  40b634:	27c30018 	addiu	v1,s8,24
  40b638:	00602821 	move	a1,v1
  40b63c:	00403021 	move	a2,v0
  40b640:	0c101f4e 	jal	407d38 <writex>
  40b644:	00000000 	nop
/home_a/ppchen/adb/services.c:124
            adb_close(fd);
  40b648:	8fc400e0 	lw	a0,224(s8)
  40b64c:	0c102c27 	jal	40b09c <adb_close>
  40b650:	00000000 	nop
  40b654:	10000029 	b	40b6fc <restart_root_service+0x1c0>
  40b658:	00000000 	nop
/home_a/ppchen/adb/services.c:128
            return;
        }

        property_set("service.adb.root", "1");
  40b65c:	3c020041 	lui	v0,0x41
  40b660:	24443b7c 	addiu	a0,v0,15228
  40b664:	3c020041 	lui	v0,0x41
  40b668:	24453b48 	addiu	a1,v0,15176
  40b66c:	0c10470f 	jal	411c3c <property_set>
  40b670:	00000000 	nop
/home_a/ppchen/adb/services.c:129
        snprintf(buf, sizeof(buf), "restarting adbd as root\n");
  40b674:	3c020041 	lui	v0,0x41
  40b678:	8c483b90 	lw	t0,15248(v0)
  40b67c:	24433b90 	addiu	v1,v0,15248
  40b680:	8c670004 	lw	a3,4(v1)
  40b684:	24433b90 	addiu	v1,v0,15248
  40b688:	8c660008 	lw	a2,8(v1)
  40b68c:	24433b90 	addiu	v1,v0,15248
  40b690:	8c65000c 	lw	a1,12(v1)
  40b694:	24433b90 	addiu	v1,v0,15248
  40b698:	8c640010 	lw	a0,16(v1)
  40b69c:	24433b90 	addiu	v1,v0,15248
  40b6a0:	8c630014 	lw	v1,20(v1)
  40b6a4:	afc80018 	sw	t0,24(s8)
  40b6a8:	afc7001c 	sw	a3,28(s8)
  40b6ac:	afc60020 	sw	a2,32(s8)
  40b6b0:	afc50024 	sw	a1,36(s8)
  40b6b4:	afc40028 	sw	a0,40(s8)
  40b6b8:	afc3002c 	sw	v1,44(s8)
  40b6bc:	24423b90 	addiu	v0,v0,15248
  40b6c0:	90420018 	lbu	v0,24(v0)
  40b6c4:	a3c20030 	sb	v0,48(s8)
/home_a/ppchen/adb/services.c:130
        writex(fd, buf, strlen(buf));
  40b6c8:	27c20018 	addiu	v0,s8,24
  40b6cc:	00402021 	move	a0,v0
  40b6d0:	0c10531c 	jal	414c70 <strlen@plt>
  40b6d4:	00000000 	nop
  40b6d8:	8fc400e0 	lw	a0,224(s8)
  40b6dc:	27c30018 	addiu	v1,s8,24
  40b6e0:	00602821 	move	a1,v1
  40b6e4:	00403021 	move	a2,v0
  40b6e8:	0c101f4e 	jal	407d38 <writex>
  40b6ec:	00000000 	nop
/home_a/ppchen/adb/services.c:131
        adb_close(fd);
  40b6f0:	8fc400e0 	lw	a0,224(s8)
  40b6f4:	0c102c27 	jal	40b09c <adb_close>
  40b6f8:	00000000 	nop
/home_a/ppchen/adb/services.c:133
    }
}
  40b6fc:	03c0e821 	move	sp,s8
  40b700:	8fbf00dc 	lw	ra,220(sp)
  40b704:	8fbe00d8 	lw	s8,216(sp)
  40b708:	27bd00e0 	addiu	sp,sp,224
  40b70c:	03e00008 	jr	ra
  40b710:	00000000 	nop

0040b714 <restart_tcp_service>:
restart_tcp_service():
/home_a/ppchen/adb/services.c:136

void restart_tcp_service(int fd, void *cookie)
{
  40b714:	27bdff18 	addiu	sp,sp,-232
  40b718:	afbf00e4 	sw	ra,228(sp)
  40b71c:	afbe00e0 	sw	s8,224(sp)
  40b720:	03a0f021 	move	s8,sp
  40b724:	afc400e8 	sw	a0,232(s8)
  40b728:	afc500ec 	sw	a1,236(s8)
/home_a/ppchen/adb/services.c:139
    char buf[100];
    char value[PROPERTY_VALUE_MAX];
    int port = (int)cookie;
  40b72c:	8fc200ec 	lw	v0,236(s8)
  40b730:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:141

    if (port <= 0) {
  40b734:	8fc20018 	lw	v0,24(s8)
  40b738:	1c40001d 	bgtz	v0,40b7b0 <restart_tcp_service+0x9c>
  40b73c:	00000000 	nop
/home_a/ppchen/adb/services.c:142
        snprintf(buf, sizeof(buf), "invalid port\n");
  40b740:	27c2001c 	addiu	v0,s8,28
  40b744:	3c030041 	lui	v1,0x41
  40b748:	8c663bac 	lw	a2,15276(v1)
  40b74c:	24643bac 	addiu	a0,v1,15276
  40b750:	8c850004 	lw	a1,4(a0)
  40b754:	24643bac 	addiu	a0,v1,15276
  40b758:	8c840008 	lw	a0,8(a0)
  40b75c:	ac460000 	sw	a2,0(v0)
  40b760:	ac450004 	sw	a1,4(v0)
  40b764:	ac440008 	sw	a0,8(v0)
  40b768:	24633bac 	addiu	v1,v1,15276
  40b76c:	9463000c 	lhu	v1,12(v1)
  40b770:	a443000c 	sh	v1,12(v0)
/home_a/ppchen/adb/services.c:143
        writex(fd, buf, strlen(buf));
  40b774:	27c2001c 	addiu	v0,s8,28
  40b778:	00402021 	move	a0,v0
  40b77c:	0c10531c 	jal	414c70 <strlen@plt>
  40b780:	00000000 	nop
  40b784:	27c3001c 	addiu	v1,s8,28
  40b788:	8fc400e8 	lw	a0,232(s8)
  40b78c:	00602821 	move	a1,v1
  40b790:	00403021 	move	a2,v0
  40b794:	0c101f4e 	jal	407d38 <writex>
  40b798:	00000000 	nop
/home_a/ppchen/adb/services.c:144
        adb_close(fd);
  40b79c:	8fc400e8 	lw	a0,232(s8)
  40b7a0:	0c102c27 	jal	40b09c <adb_close>
  40b7a4:	00000000 	nop
  40b7a8:	10000024 	b	40b83c <restart_tcp_service+0x128>
  40b7ac:	00000000 	nop
/home_a/ppchen/adb/services.c:148
        return;
    }

    snprintf(value, sizeof(value), "%d", port);
  40b7b0:	27c20080 	addiu	v0,s8,128
  40b7b4:	00402021 	move	a0,v0
  40b7b8:	2405005c 	li	a1,92
  40b7bc:	3c020041 	lui	v0,0x41
  40b7c0:	24463bbc 	addiu	a2,v0,15292
  40b7c4:	8fc70018 	lw	a3,24(s8)
  40b7c8:	0c105334 	jal	414cd0 <snprintf@plt>
  40b7cc:	00000000 	nop
/home_a/ppchen/adb/services.c:149
    property_set("service.adb.tcp.port", value);
  40b7d0:	27c20080 	addiu	v0,s8,128
  40b7d4:	3c030041 	lui	v1,0x41
  40b7d8:	24643bc0 	addiu	a0,v1,15296
  40b7dc:	00402821 	move	a1,v0
  40b7e0:	0c10470f 	jal	411c3c <property_set>
  40b7e4:	00000000 	nop
/home_a/ppchen/adb/services.c:150
    snprintf(buf, sizeof(buf), "restarting in TCP mode port: %d\n", port);
  40b7e8:	27c2001c 	addiu	v0,s8,28
  40b7ec:	00402021 	move	a0,v0
  40b7f0:	24050064 	li	a1,100
  40b7f4:	3c020041 	lui	v0,0x41
  40b7f8:	24463bd8 	addiu	a2,v0,15320
  40b7fc:	8fc70018 	lw	a3,24(s8)
  40b800:	0c105334 	jal	414cd0 <snprintf@plt>
  40b804:	00000000 	nop
/home_a/ppchen/adb/services.c:151
    writex(fd, buf, strlen(buf));
  40b808:	27c2001c 	addiu	v0,s8,28
  40b80c:	00402021 	move	a0,v0
  40b810:	0c10531c 	jal	414c70 <strlen@plt>
  40b814:	00000000 	nop
  40b818:	27c3001c 	addiu	v1,s8,28
  40b81c:	8fc400e8 	lw	a0,232(s8)
  40b820:	00602821 	move	a1,v1
  40b824:	00403021 	move	a2,v0
  40b828:	0c101f4e 	jal	407d38 <writex>
  40b82c:	00000000 	nop
/home_a/ppchen/adb/services.c:152
    adb_close(fd);
  40b830:	8fc400e8 	lw	a0,232(s8)
  40b834:	0c102c27 	jal	40b09c <adb_close>
  40b838:	00000000 	nop
/home_a/ppchen/adb/services.c:153
}
  40b83c:	03c0e821 	move	sp,s8
  40b840:	8fbf00e4 	lw	ra,228(sp)
  40b844:	8fbe00e0 	lw	s8,224(sp)
  40b848:	27bd00e8 	addiu	sp,sp,232
  40b84c:	03e00008 	jr	ra
  40b850:	00000000 	nop

0040b854 <restart_usb_service>:
restart_usb_service():
/home_a/ppchen/adb/services.c:156

void restart_usb_service(int fd, void *cookie)
{
  40b854:	27bdff78 	addiu	sp,sp,-136
  40b858:	afbf0084 	sw	ra,132(sp)
  40b85c:	afbe0080 	sw	s8,128(sp)
  40b860:	03a0f021 	move	s8,sp
  40b864:	afc40088 	sw	a0,136(s8)
  40b868:	afc5008c 	sw	a1,140(s8)
/home_a/ppchen/adb/services.c:159
    char buf[100];

    property_set("service.adb.tcp.port", "0");
  40b86c:	3c020041 	lui	v0,0x41
  40b870:	24443bc0 	addiu	a0,v0,15296
  40b874:	3c020041 	lui	v0,0x41
  40b878:	24453bfc 	addiu	a1,v0,15356
  40b87c:	0c10470f 	jal	411c3c <property_set>
  40b880:	00000000 	nop
/home_a/ppchen/adb/services.c:160
    snprintf(buf, sizeof(buf), "restarting in USB mode\n");
  40b884:	3c020041 	lui	v0,0x41
  40b888:	8c473c00 	lw	a3,15360(v0)
  40b88c:	24433c00 	addiu	v1,v0,15360
  40b890:	8c660004 	lw	a2,4(v1)
  40b894:	24433c00 	addiu	v1,v0,15360
  40b898:	8c650008 	lw	a1,8(v1)
  40b89c:	24433c00 	addiu	v1,v0,15360
  40b8a0:	8c64000c 	lw	a0,12(v1)
  40b8a4:	24433c00 	addiu	v1,v0,15360
  40b8a8:	8c630010 	lw	v1,16(v1)
  40b8ac:	24423c00 	addiu	v0,v0,15360
  40b8b0:	8c420014 	lw	v0,20(v0)
  40b8b4:	afc70018 	sw	a3,24(s8)
  40b8b8:	afc6001c 	sw	a2,28(s8)
  40b8bc:	afc50020 	sw	a1,32(s8)
  40b8c0:	afc40024 	sw	a0,36(s8)
  40b8c4:	afc30028 	sw	v1,40(s8)
  40b8c8:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/services.c:161
    writex(fd, buf, strlen(buf));
  40b8cc:	27c20018 	addiu	v0,s8,24
  40b8d0:	00402021 	move	a0,v0
  40b8d4:	0c10531c 	jal	414c70 <strlen@plt>
  40b8d8:	00000000 	nop
  40b8dc:	8fc40088 	lw	a0,136(s8)
  40b8e0:	27c30018 	addiu	v1,s8,24
  40b8e4:	00602821 	move	a1,v1
  40b8e8:	00403021 	move	a2,v0
  40b8ec:	0c101f4e 	jal	407d38 <writex>
  40b8f0:	00000000 	nop
/home_a/ppchen/adb/services.c:162
    adb_close(fd);
  40b8f4:	8fc40088 	lw	a0,136(s8)
  40b8f8:	0c102c27 	jal	40b09c <adb_close>
  40b8fc:	00000000 	nop
/home_a/ppchen/adb/services.c:163
}
  40b900:	03c0e821 	move	sp,s8
  40b904:	8fbf0084 	lw	ra,132(sp)
  40b908:	8fbe0080 	lw	s8,128(sp)
  40b90c:	27bd0088 	addiu	sp,sp,136
  40b910:	03e00008 	jr	ra
  40b914:	00000000 	nop

0040b918 <my_adb_reboot>:
my_adb_reboot():
/home_a/ppchen/adb/services.c:166

int my_adb_reboot(int a,int b,void * p)
{
  40b918:	27bdfff8 	addiu	sp,sp,-8
  40b91c:	afbe0004 	sw	s8,4(sp)
  40b920:	03a0f021 	move	s8,sp
  40b924:	afc40008 	sw	a0,8(s8)
  40b928:	afc5000c 	sw	a1,12(s8)
  40b92c:	afc60010 	sw	a2,16(s8)
/home_a/ppchen/adb/services.c:167
    return 0;
  40b930:	00001021 	move	v0,zero
/home_a/ppchen/adb/services.c:168
}
  40b934:	03c0e821 	move	sp,s8
  40b938:	8fbe0004 	lw	s8,4(sp)
  40b93c:	27bd0008 	addiu	sp,sp,8
  40b940:	03e00008 	jr	ra
  40b944:	00000000 	nop

0040b948 <reboot_service>:
reboot_service():
/home_a/ppchen/adb/services.c:171

void reboot_service(int fd, void *arg)
{
  40b948:	27bdff60 	addiu	sp,sp,-160
  40b94c:	afbf009c 	sw	ra,156(sp)
  40b950:	afbe0098 	sw	s8,152(sp)
  40b954:	03a0f021 	move	s8,sp
  40b958:	afc400a0 	sw	a0,160(s8)
  40b95c:	afc500a4 	sw	a1,164(s8)
/home_a/ppchen/adb/services.c:175
    char buf[100];
    int pid, ret;

    sync();
  40b960:	0c1053a4 	jal	414e90 <sync@plt>
  40b964:	00000000 	nop
/home_a/ppchen/adb/services.c:180

    /* Attempt to unmount the SD card first.
     * No need to bother checking for errors.
     */
    pid = fork();
  40b968:	0c1053d0 	jal	414f40 <fork@plt>
  40b96c:	00000000 	nop
  40b970:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/services.c:181
    if (pid == 0) {
  40b974:	8fc20028 	lw	v0,40(s8)
  40b978:	14400016 	bnez	v0,40b9d4 <reboot_service+0x8c>
  40b97c:	00000000 	nop
/home_a/ppchen/adb/services.c:183
        /* ask vdc to unmount it */
        execl("/system/bin/vdc", "/system/bin/vdc", "volume", "unmount",
  40b980:	3c020041 	lui	v0,0x41
  40b984:	24443c18 	addiu	a0,v0,15384
  40b988:	0c1052cc 	jal	414b30 <getenv@plt>
  40b98c:	00000000 	nop
  40b990:	afa20010 	sw	v0,16(sp)
  40b994:	3c020041 	lui	v0,0x41
  40b998:	24423c4c 	addiu	v0,v0,15436
  40b99c:	afa20014 	sw	v0,20(sp)
  40b9a0:	afa00018 	sw	zero,24(sp)
  40b9a4:	3c020041 	lui	v0,0x41
  40b9a8:	24443c2c 	addiu	a0,v0,15404
  40b9ac:	3c020041 	lui	v0,0x41
  40b9b0:	24453c2c 	addiu	a1,v0,15404
  40b9b4:	3c020041 	lui	v0,0x41
  40b9b8:	24463c3c 	addiu	a2,v0,15420
  40b9bc:	3c020041 	lui	v0,0x41
  40b9c0:	24473c44 	addiu	a3,v0,15428
  40b9c4:	0c1053a0 	jal	414e80 <execl@plt>
  40b9c8:	00000000 	nop
  40b9cc:	1000000a 	b	40b9f8 <reboot_service+0xb0>
  40b9d0:	00000000 	nop
/home_a/ppchen/adb/services.c:185
                getenv("EXTERNAL_STORAGE"), "force", NULL);
    } else if (pid > 0) {
  40b9d4:	8fc20028 	lw	v0,40(s8)
  40b9d8:	18400007 	blez	v0,40b9f8 <reboot_service+0xb0>
  40b9dc:	00000000 	nop
/home_a/ppchen/adb/services.c:187
        /* wait until vdc succeeds or fails */
        waitpid(pid, &ret, 0);
  40b9e0:	27c20090 	addiu	v0,s8,144
  40b9e4:	8fc40028 	lw	a0,40(s8)
  40b9e8:	00402821 	move	a1,v0
  40b9ec:	00003021 	move	a2,zero
  40b9f0:	0c1053dc 	jal	414f70 <waitpid@plt>
  40b9f4:	00000000 	nop
/home_a/ppchen/adb/services.c:190
    }

    ret = my_adb_reboot(ANDROID_RB_RESTART2, 0, (char *) arg);
  40b9f8:	3c02dead 	lui	v0,0xdead
  40b9fc:	34440003 	ori	a0,v0,0x3
  40ba00:	00002821 	move	a1,zero
  40ba04:	8fc600a4 	lw	a2,164(s8)
  40ba08:	0c102e46 	jal	40b918 <my_adb_reboot>
  40ba0c:	00000000 	nop
  40ba10:	afc20090 	sw	v0,144(s8)
/home_a/ppchen/adb/services.c:191
    if (ret < 0) {
  40ba14:	8fc20090 	lw	v0,144(s8)
  40ba18:	04410019 	bgez	v0,40ba80 <reboot_service+0x138>
  40ba1c:	00000000 	nop
/home_a/ppchen/adb/services.c:192
        snprintf(buf, sizeof(buf), "reboot failed: %s\n", strerror(errno));
  40ba20:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ba24:	00000000 	nop
  40ba28:	8c420000 	lw	v0,0(v0)
  40ba2c:	00402021 	move	a0,v0
  40ba30:	0c1053f8 	jal	414fe0 <strerror@plt>
  40ba34:	00000000 	nop
  40ba38:	27c3002c 	addiu	v1,s8,44
  40ba3c:	00602021 	move	a0,v1
  40ba40:	24050064 	li	a1,100
  40ba44:	3c030041 	lui	v1,0x41
  40ba48:	24663c54 	addiu	a2,v1,15444
  40ba4c:	00403821 	move	a3,v0
  40ba50:	0c105334 	jal	414cd0 <snprintf@plt>
  40ba54:	00000000 	nop
/home_a/ppchen/adb/services.c:193
        writex(fd, buf, strlen(buf));
  40ba58:	27c2002c 	addiu	v0,s8,44
  40ba5c:	00402021 	move	a0,v0
  40ba60:	0c10531c 	jal	414c70 <strlen@plt>
  40ba64:	00000000 	nop
  40ba68:	27c3002c 	addiu	v1,s8,44
  40ba6c:	8fc400a0 	lw	a0,160(s8)
  40ba70:	00602821 	move	a1,v1
  40ba74:	00403021 	move	a2,v0
  40ba78:	0c101f4e 	jal	407d38 <writex>
  40ba7c:	00000000 	nop
/home_a/ppchen/adb/services.c:195
    }
    free(arg);
  40ba80:	8fc400a4 	lw	a0,164(s8)
  40ba84:	0c1053e4 	jal	414f90 <free@plt>
  40ba88:	00000000 	nop
/home_a/ppchen/adb/services.c:196
    adb_close(fd);
  40ba8c:	8fc400a0 	lw	a0,160(s8)
  40ba90:	0c102c27 	jal	40b09c <adb_close>
  40ba94:	00000000 	nop
/home_a/ppchen/adb/services.c:197
}
  40ba98:	03c0e821 	move	sp,s8
  40ba9c:	8fbf009c 	lw	ra,156(sp)
  40baa0:	8fbe0098 	lw	s8,152(sp)
  40baa4:	27bd00a0 	addiu	sp,sp,160
  40baa8:	03e00008 	jr	ra
  40baac:	00000000 	nop

0040bab0 <create_service_thread>:
create_service_thread():
/home_a/ppchen/adb/services.c:236
    close(fd);
}
#endif

static int create_service_thread(void (*func)(int, void *), void *cookie)
{
  40bab0:	27bdffd0 	addiu	sp,sp,-48
  40bab4:	afbf002c 	sw	ra,44(sp)
  40bab8:	afbe0028 	sw	s8,40(sp)
  40babc:	03a0f021 	move	s8,sp
  40bac0:	afc40030 	sw	a0,48(s8)
  40bac4:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/services.c:241
    stinfo *sti;
    adb_thread_t t;
    int s[2];

    printf("create_service_thread start\n");
  40bac8:	3c020041 	lui	v0,0x41
  40bacc:	24443c68 	addiu	a0,v0,15464
  40bad0:	0c10540c 	jal	415030 <puts@plt>
  40bad4:	00000000 	nop
/home_a/ppchen/adb/services.c:242
    if(adb_socketpair(s)) {
  40bad8:	27c20020 	addiu	v0,s8,32
  40badc:	00402021 	move	a0,v0
  40bae0:	0c102cb1 	jal	40b2c4 <adb_socketpair>
  40bae4:	00000000 	nop
  40bae8:	10400004 	beqz	v0,40bafc <create_service_thread+0x4c>
  40baec:	00000000 	nop
/home_a/ppchen/adb/services.c:244
 
        return -1;
  40baf0:	2402ffff 	li	v0,-1
  40baf4:	1000002d 	b	40bbac <create_service_thread+0xfc>
  40baf8:	00000000 	nop
/home_a/ppchen/adb/services.c:247
    }

    sti = malloc(sizeof(stinfo));
  40bafc:	2404000c 	li	a0,12
  40bb00:	0c105300 	jal	414c00 <malloc@plt>
  40bb04:	00000000 	nop
  40bb08:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:248
    if(sti == 0) fatal("cannot allocate stinfo");
  40bb0c:	8fc20018 	lw	v0,24(s8)
  40bb10:	14400005 	bnez	v0,40bb28 <create_service_thread+0x78>
  40bb14:	00000000 	nop
/home_a/ppchen/adb/services.c:248 (discriminator 1)
  40bb18:	3c020041 	lui	v0,0x41
  40bb1c:	24443c84 	addiu	a0,v0,15492
  40bb20:	0c1006a7 	jal	401a9c <fatal>
  40bb24:	00000000 	nop
/home_a/ppchen/adb/services.c:249
    sti->func = func;
  40bb28:	8fc20018 	lw	v0,24(s8)
  40bb2c:	8fc30030 	lw	v1,48(s8)
  40bb30:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/services.c:250
    sti->cookie = cookie;
  40bb34:	8fc20018 	lw	v0,24(s8)
  40bb38:	8fc30034 	lw	v1,52(s8)
  40bb3c:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/services.c:251
    sti->fd = s[1];
  40bb40:	8fc30024 	lw	v1,36(s8)
  40bb44:	8fc20018 	lw	v0,24(s8)
  40bb48:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/services.c:253

    if(adb_thread_create( &t, service_bootstrap_func, sti)){
  40bb4c:	27c2001c 	addiu	v0,s8,28
  40bb50:	00402021 	move	a0,v0
  40bb54:	3c020041 	lui	v0,0x41
  40bb58:	2445b354 	addiu	a1,v0,-19628
  40bb5c:	8fc60018 	lw	a2,24(s8)
  40bb60:	0c102c63 	jal	40b18c <adb_thread_create>
  40bb64:	00000000 	nop
  40bb68:	1040000f 	beqz	v0,40bba8 <create_service_thread+0xf8>
  40bb6c:	00000000 	nop
/home_a/ppchen/adb/services.c:254
        free(sti);
  40bb70:	8fc40018 	lw	a0,24(s8)
  40bb74:	0c1053e4 	jal	414f90 <free@plt>
  40bb78:	00000000 	nop
/home_a/ppchen/adb/services.c:255
        adb_close(s[0]);
  40bb7c:	8fc20020 	lw	v0,32(s8)
  40bb80:	00402021 	move	a0,v0
  40bb84:	0c102c27 	jal	40b09c <adb_close>
  40bb88:	00000000 	nop
/home_a/ppchen/adb/services.c:256
        adb_close(s[1]);
  40bb8c:	8fc20024 	lw	v0,36(s8)
  40bb90:	00402021 	move	a0,v0
  40bb94:	0c102c27 	jal	40b09c <adb_close>
  40bb98:	00000000 	nop
/home_a/ppchen/adb/services.c:258
    
        return -1;
  40bb9c:	2402ffff 	li	v0,-1
  40bba0:	10000002 	b	40bbac <create_service_thread+0xfc>
  40bba4:	00000000 	nop
/home_a/ppchen/adb/services.c:262
    }

  
    return s[0];
  40bba8:	8fc20020 	lw	v0,32(s8)
/home_a/ppchen/adb/services.c:263
}
  40bbac:	03c0e821 	move	sp,s8
  40bbb0:	8fbf002c 	lw	ra,44(sp)
  40bbb4:	8fbe0028 	lw	s8,40(sp)
  40bbb8:	27bd0030 	addiu	sp,sp,48
  40bbbc:	03e00008 	jr	ra
  40bbc0:	00000000 	nop

0040bbc4 <create_subprocess>:
create_subprocess():
/home_a/ppchen/adb/services.c:267

#if !ADB_HOST
static int create_subprocess(const char *cmd, const char *arg0, const char *arg1, pid_t *pid)
{
  40bbc4:	27bdff80 	addiu	sp,sp,-128
  40bbc8:	afbf007c 	sw	ra,124(sp)
  40bbcc:	afbe0078 	sw	s8,120(sp)
  40bbd0:	afb10074 	sw	s1,116(sp)
  40bbd4:	afb00070 	sw	s0,112(sp)
  40bbd8:	03a0f021 	move	s8,sp
  40bbdc:	afc40080 	sw	a0,128(s8)
  40bbe0:	afc50084 	sw	a1,132(s8)
  40bbe4:	afc60088 	sw	a2,136(s8)
  40bbe8:	afc7008c 	sw	a3,140(s8)
/home_a/ppchen/adb/services.c:276
    return -1;
#else /* !HAVE_WIN32_PROC */
    char *devname;
    int ptm;

    ptm = unix_open("/dev/ptmx", O_RDWR); // | O_NOCTTY);
  40bbec:	3c020041 	lui	v0,0x41
  40bbf0:	24443c9c 	addiu	a0,v0,15516
  40bbf4:	24050002 	li	a1,2
  40bbf8:	0c102be8 	jal	40afa0 <unix_open>
  40bbfc:	00000000 	nop
  40bc00:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/services.c:277
    if(ptm < 0){
  40bc04:	8fc20020 	lw	v0,32(s8)
  40bc08:	04410004 	bgez	v0,40bc1c <create_subprocess+0x58>
  40bc0c:	00000000 	nop
/home_a/ppchen/adb/services.c:279
    
        return -1;
  40bc10:	2402ffff 	li	v0,-1
  40bc14:	10000088 	b	40be38 <create_subprocess+0x274>
  40bc18:	00000000 	nop
/home_a/ppchen/adb/services.c:281
    }
    fcntl(ptm, F_SETFD, FD_CLOEXEC);
  40bc1c:	8fc40020 	lw	a0,32(s8)
  40bc20:	24050002 	li	a1,2
  40bc24:	24060001 	li	a2,1
  40bc28:	0c10532c 	jal	414cb0 <fcntl@plt>
  40bc2c:	00000000 	nop
/home_a/ppchen/adb/services.c:283

    if(grantpt(ptm) || unlockpt(ptm) ||
  40bc30:	8fc40020 	lw	a0,32(s8)
  40bc34:	0c10541c 	jal	415070 <grantpt@plt>
  40bc38:	00000000 	nop
  40bc3c:	1440000d 	bnez	v0,40bc74 <create_subprocess+0xb0>
  40bc40:	00000000 	nop
/home_a/ppchen/adb/services.c:283 (discriminator 1)
  40bc44:	8fc40020 	lw	a0,32(s8)
  40bc48:	0c105384 	jal	414e10 <unlockpt@plt>
  40bc4c:	00000000 	nop
  40bc50:	14400008 	bnez	v0,40bc74 <create_subprocess+0xb0>
  40bc54:	00000000 	nop
  40bc58:	8fc40020 	lw	a0,32(s8)
  40bc5c:	0c105328 	jal	414ca0 <ptsname@plt>
  40bc60:	00000000 	nop
  40bc64:	afc20024 	sw	v0,36(s8)
  40bc68:	8fc20024 	lw	v0,36(s8)
  40bc6c:	14400007 	bnez	v0,40bc8c <create_subprocess+0xc8>
  40bc70:	00000000 	nop
/home_a/ppchen/adb/services.c:286
       ((devname = (char*) ptsname(ptm)) == 0)){
     
        adb_close(ptm);
  40bc74:	8fc40020 	lw	a0,32(s8)
  40bc78:	0c102c27 	jal	40b09c <adb_close>
  40bc7c:	00000000 	nop
/home_a/ppchen/adb/services.c:287
        return -1;
  40bc80:	2402ffff 	li	v0,-1
  40bc84:	1000006c 	b	40be38 <create_subprocess+0x274>
  40bc88:	00000000 	nop
/home_a/ppchen/adb/services.c:290
    }

    *pid = fork();
  40bc8c:	0c1053d0 	jal	414f40 <fork@plt>
  40bc90:	00000000 	nop
  40bc94:	00401821 	move	v1,v0
  40bc98:	8fc2008c 	lw	v0,140(s8)
  40bc9c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/services.c:294
	

	
    if(*pid < 0) {
  40bca0:	8fc2008c 	lw	v0,140(s8)
  40bca4:	8c420000 	lw	v0,0(v0)
  40bca8:	04410007 	bgez	v0,40bcc8 <create_subprocess+0x104>
  40bcac:	00000000 	nop
/home_a/ppchen/adb/services.c:296
      
        adb_close(ptm);
  40bcb0:	8fc40020 	lw	a0,32(s8)
  40bcb4:	0c102c27 	jal	40b09c <adb_close>
  40bcb8:	00000000 	nop
/home_a/ppchen/adb/services.c:297
        return -1;
  40bcbc:	2402ffff 	li	v0,-1
  40bcc0:	1000005d 	b	40be38 <create_subprocess+0x274>
  40bcc4:	00000000 	nop
/home_a/ppchen/adb/services.c:301
    }


    if(*pid == 0){
  40bcc8:	8fc2008c 	lw	v0,140(s8)
  40bccc:	8c420000 	lw	v0,0(v0)
  40bcd0:	14400058 	bnez	v0,40be34 <create_subprocess+0x270>
  40bcd4:	00000000 	nop
/home_a/ppchen/adb/services.c:304
        int pts;

        setsid();
  40bcd8:	0c105380 	jal	414e00 <setsid@plt>
  40bcdc:	00000000 	nop
/home_a/ppchen/adb/services.c:305
        pts = unix_open(devname, O_RDWR);
  40bce0:	8fc40024 	lw	a0,36(s8)
  40bce4:	24050002 	li	a1,2
  40bce8:	0c102be8 	jal	40afa0 <unix_open>
  40bcec:	00000000 	nop
  40bcf0:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/services.c:307

        if(pts < 0) {
  40bcf4:	8fc20028 	lw	v0,40(s8)
  40bcf8:	0441000c 	bgez	v0,40bd2c <create_subprocess+0x168>
  40bcfc:	00000000 	nop
/home_a/ppchen/adb/services.c:309
	    
            fprintf(stderr, "child failed to open pseudo-term slave: %s\n", devname);
  40bd00:	3c020042 	lui	v0,0x42
  40bd04:	8c4257c4 	lw	v0,22468(v0)
  40bd08:	00402021 	move	a0,v0
  40bd0c:	3c020041 	lui	v0,0x41
  40bd10:	24453ca8 	addiu	a1,v0,15528
  40bd14:	8fc60024 	lw	a2,36(s8)
  40bd18:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40bd1c:	00000000 	nop
/home_a/ppchen/adb/services.c:310
            exit(-1);
  40bd20:	2404ffff 	li	a0,-1
  40bd24:	0c1053cc 	jal	414f30 <exit@plt>
  40bd28:	00000000 	nop
/home_a/ppchen/adb/services.c:313
        }

        dup2(pts, 0);
  40bd2c:	8fc40028 	lw	a0,40(s8)
  40bd30:	00002821 	move	a1,zero
  40bd34:	0c105338 	jal	414ce0 <dup2@plt>
  40bd38:	00000000 	nop
/home_a/ppchen/adb/services.c:314
        dup2(pts, 1);
  40bd3c:	8fc40028 	lw	a0,40(s8)
  40bd40:	24050001 	li	a1,1
  40bd44:	0c105338 	jal	414ce0 <dup2@plt>
  40bd48:	00000000 	nop
/home_a/ppchen/adb/services.c:315
        dup2(pts, 2);
  40bd4c:	8fc40028 	lw	a0,40(s8)
  40bd50:	24050002 	li	a1,2
  40bd54:	0c105338 	jal	414ce0 <dup2@plt>
  40bd58:	00000000 	nop
/home_a/ppchen/adb/services.c:317

        adb_close(pts);
  40bd5c:	8fc40028 	lw	a0,40(s8)
  40bd60:	0c102c27 	jal	40b09c <adb_close>
  40bd64:	00000000 	nop
/home_a/ppchen/adb/services.c:318
        adb_close(ptm);
  40bd68:	8fc40020 	lw	a0,32(s8)
  40bd6c:	0c102c27 	jal	40b09c <adb_close>
  40bd70:	00000000 	nop
/home_a/ppchen/adb/services.c:323

        // set OOM adjustment to zero
        char text[64];
       // snprintf(text, sizeof text, "/proc/%d/oom_adj", getpid());
        int fd = adb_open(text, O_WRONLY);
  40bd74:	27c20030 	addiu	v0,s8,48
  40bd78:	00402021 	move	a0,v0
  40bd7c:	24050001 	li	a1,1
  40bd80:	0c102c0c 	jal	40b030 <adb_open>
  40bd84:	00000000 	nop
  40bd88:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/services.c:324
        if (fd >= 0) {
  40bd8c:	8fc2002c 	lw	v0,44(s8)
  40bd90:	0440000a 	bltz	v0,40bdbc <create_subprocess+0x1f8>
  40bd94:	00000000 	nop
/home_a/ppchen/adb/services.c:325
            adb_write(fd, "0", 1);
  40bd98:	8fc4002c 	lw	a0,44(s8)
  40bd9c:	3c020041 	lui	v0,0x41
  40bda0:	24453bfc 	addiu	a1,v0,15356
  40bda4:	24060001 	li	a2,1
  40bda8:	0c102c35 	jal	40b0d4 <adb_write>
  40bdac:	00000000 	nop
/home_a/ppchen/adb/services.c:326
            adb_close(fd);
  40bdb0:	8fc4002c 	lw	a0,44(s8)
  40bdb4:	0c102c27 	jal	40b09c <adb_close>
  40bdb8:	00000000 	nop
/home_a/ppchen/adb/services.c:330
        } else {
           //D("adb: unable to open %s\n", text);
        }
        execl(cmd, cmd, arg0, arg1, NULL);
  40bdbc:	afa00010 	sw	zero,16(sp)
  40bdc0:	8fc40080 	lw	a0,128(s8)
  40bdc4:	8fc50080 	lw	a1,128(s8)
  40bdc8:	8fc60084 	lw	a2,132(s8)
  40bdcc:	8fc70088 	lw	a3,136(s8)
  40bdd0:	0c1053a0 	jal	414e80 <execl@plt>
  40bdd4:	00000000 	nop
/home_a/ppchen/adb/services.c:331
        fprintf(stderr, "- exec '%s' failed: %s (%d) -\n",
  40bdd8:	3c020042 	lui	v0,0x42
  40bddc:	8c5157c4 	lw	s1,22468(v0)
/home_a/ppchen/adb/services.c:332
                cmd, strerror(errno), errno);
  40bde0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40bde4:	00000000 	nop
/home_a/ppchen/adb/services.c:331
            adb_close(fd);
        } else {
           //D("adb: unable to open %s\n", text);
        }
        execl(cmd, cmd, arg0, arg1, NULL);
        fprintf(stderr, "- exec '%s' failed: %s (%d) -\n",
  40bde8:	8c420000 	lw	v0,0(v0)
  40bdec:	00402021 	move	a0,v0
  40bdf0:	0c1053f8 	jal	414fe0 <strerror@plt>
  40bdf4:	00000000 	nop
  40bdf8:	00408021 	move	s0,v0
/home_a/ppchen/adb/services.c:332
                cmd, strerror(errno), errno);
  40bdfc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40be00:	00000000 	nop
/home_a/ppchen/adb/services.c:331
            adb_close(fd);
        } else {
           //D("adb: unable to open %s\n", text);
        }
        execl(cmd, cmd, arg0, arg1, NULL);
        fprintf(stderr, "- exec '%s' failed: %s (%d) -\n",
  40be04:	8c420000 	lw	v0,0(v0)
  40be08:	afa20010 	sw	v0,16(sp)
  40be0c:	02202021 	move	a0,s1
  40be10:	3c020041 	lui	v0,0x41
  40be14:	24453cd4 	addiu	a1,v0,15572
  40be18:	8fc60080 	lw	a2,128(s8)
  40be1c:	02003821 	move	a3,s0
  40be20:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40be24:	00000000 	nop
/home_a/ppchen/adb/services.c:333
                cmd, strerror(errno), errno);
        exit(-1);
  40be28:	2404ffff 	li	a0,-1
  40be2c:	0c1053cc 	jal	414f30 <exit@plt>
  40be30:	00000000 	nop
/home_a/ppchen/adb/services.c:339
    } else {
        // Don't set child's OOM adjustment to zero.
        // Let the child do it itself, as sometimes the parent starts
        // running before the child has a /proc/pid/oom_adj.
        // """adb: unable to open /proc/644/oom_adj""" seen in some logs.
        return ptm;
  40be34:	8fc20020 	lw	v0,32(s8)
/home_a/ppchen/adb/services.c:342
    }
#endif /* !HAVE_WIN32_PROC */
}
  40be38:	03c0e821 	move	sp,s8
  40be3c:	8fbf007c 	lw	ra,124(sp)
  40be40:	8fbe0078 	lw	s8,120(sp)
  40be44:	8fb10074 	lw	s1,116(sp)
  40be48:	8fb00070 	lw	s0,112(sp)
  40be4c:	27bd0080 	addiu	sp,sp,128
  40be50:	03e00008 	jr	ra
  40be54:	00000000 	nop

0040be58 <subproc_waiter_service>:
subproc_waiter_service():
/home_a/ppchen/adb/services.c:431
    free(sti);
    return fd;
}
#else
static void subproc_waiter_service(int fd, void *cookie)
{
  40be58:	27bdffb0 	addiu	sp,sp,-80
  40be5c:	afbf004c 	sw	ra,76(sp)
  40be60:	afbe0048 	sw	s8,72(sp)
  40be64:	afb10044 	sw	s1,68(sp)
  40be68:	afb00040 	sw	s0,64(sp)
  40be6c:	03a0f021 	move	s8,sp
  40be70:	afc40050 	sw	a0,80(s8)
  40be74:	afc50054 	sw	a1,84(s8)
/home_a/ppchen/adb/services.c:432
    pid_t pid = (pid_t)cookie;
  40be78:	8fc20054 	lw	v0,84(s8)
  40be7c:	afc20020 	sw	v0,32(s8)
  40be80:	10000002 	b	40be8c <subproc_waiter_service+0x34>
  40be84:	00000000 	nop
/home_a/ppchen/adb/services.c:451
            } else if (WEXITSTATUS(status) >= 0) {
              
                break;
            }
         }
    }
  40be88:	00000000 	nop
/home_a/ppchen/adb/services.c:437
    pid_t pid = (pid_t)cookie;

    
    for (;;) {
        int status;
        pid_t p = waitpid(pid, &status, 0);
  40be8c:	27c2003c 	addiu	v0,s8,60
  40be90:	8fc40020 	lw	a0,32(s8)
  40be94:	00402821 	move	a1,v0
  40be98:	00003021 	move	a2,zero
  40be9c:	0c1053dc 	jal	414f70 <waitpid@plt>
  40bea0:	00000000 	nop
  40bea4:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/services.c:438
        if (p == pid) {
  40bea8:	8fc30024 	lw	v1,36(s8)
  40beac:	8fc20020 	lw	v0,32(s8)
  40beb0:	1462fff5 	bne	v1,v0,40be88 <subproc_waiter_service+0x30>
  40beb4:	00000000 	nop
/home_a/ppchen/adb/services.c:440
          
            if (WIFSIGNALED(status)) {
  40beb8:	8fc2003c 	lw	v0,60(s8)
  40bebc:	afc20038 	sw	v0,56(s8)
  40bec0:	8fc20038 	lw	v0,56(s8)
  40bec4:	304200ff 	andi	v0,v0,0xff
  40bec8:	3042007f 	andi	v0,v0,0x7f
  40becc:	304200ff 	andi	v0,v0,0xff
  40bed0:	24420001 	addiu	v0,v0,1
  40bed4:	304200ff 	andi	v0,v0,0xff
  40bed8:	7c021420 	seb	v0,v0
  40bedc:	00021043 	sra	v0,v0,0x1
  40bee0:	7c021420 	seb	v0,v0
  40bee4:	1c40000e 	bgtz	v0,40bf20 <subproc_waiter_service+0xc8>
  40bee8:	00000000 	nop
/home_a/ppchen/adb/services.c:443
               
                break;
            } else if (!WIFEXITED(status)) {
  40beec:	8fc2003c 	lw	v0,60(s8)
  40bef0:	afc20034 	sw	v0,52(s8)
  40bef4:	8fc20034 	lw	v0,52(s8)
  40bef8:	3042007f 	andi	v0,v0,0x7f
  40befc:	14400008 	bnez	v0,40bf20 <subproc_waiter_service+0xc8>
  40bf00:	00000000 	nop
/home_a/ppchen/adb/services.c:446
              
                break;
            } else if (WEXITSTATUS(status) >= 0) {
  40bf04:	8fc2003c 	lw	v0,60(s8)
  40bf08:	afc20030 	sw	v0,48(s8)
  40bf0c:	8fc20030 	lw	v0,48(s8)
  40bf10:	3042ff00 	andi	v0,v0,0xff00
  40bf14:	00021203 	sra	v0,v0,0x8
  40bf18:	0440ffdb 	bltz	v0,40be88 <subproc_waiter_service+0x30>
  40bf1c:	00000000 	nop
/home_a/ppchen/adb/services.c:452
              
                break;
            }
         }
    }
    D("shell exited fd=%d of pid=%d err=%d\n", fd, pid, errno);
  40bf20:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40bf24:	00000000 	nop
  40bf28:	8c420000 	lw	v0,0(v0)
  40bf2c:	afc20028 	sw	v0,40(s8)
  40bf30:	3c020042 	lui	v0,0x42
  40bf34:	244457f0 	addiu	a0,v0,22512
  40bf38:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40bf3c:	00000000 	nop
  40bf40:	3c020042 	lui	v0,0x42
  40bf44:	8c4257c4 	lw	v0,22468(v0)
  40bf48:	00402021 	move	a0,v0
  40bf4c:	3c020041 	lui	v0,0x41
  40bf50:	24453cf4 	addiu	a1,v0,15604
  40bf54:	3c020041 	lui	v0,0x41
  40bf58:	24463d00 	addiu	a2,v0,15616
  40bf5c:	3c020041 	lui	v0,0x41
  40bf60:	24473e0c 	addiu	a3,v0,15884
  40bf64:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40bf68:	00000000 	nop
  40bf6c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40bf70:	00000000 	nop
  40bf74:	8fc30028 	lw	v1,40(s8)
  40bf78:	ac430000 	sw	v1,0(v0)
  40bf7c:	3c020042 	lui	v0,0x42
  40bf80:	8c5157c4 	lw	s1,22468(v0)
  40bf84:	8fd00050 	lw	s0,80(s8)
  40bf88:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40bf8c:	00000000 	nop
  40bf90:	8c420000 	lw	v0,0(v0)
  40bf94:	afa20010 	sw	v0,16(sp)
  40bf98:	02202021 	move	a0,s1
  40bf9c:	3c020041 	lui	v0,0x41
  40bfa0:	24453d0c 	addiu	a1,v0,15628
  40bfa4:	02003021 	move	a2,s0
  40bfa8:	8fc70020 	lw	a3,32(s8)
  40bfac:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40bfb0:	00000000 	nop
  40bfb4:	3c020042 	lui	v0,0x42
  40bfb8:	8c4257c4 	lw	v0,22468(v0)
  40bfbc:	00402021 	move	a0,v0
  40bfc0:	0c1053a8 	jal	414ea0 <fflush@plt>
  40bfc4:	00000000 	nop
  40bfc8:	3c020042 	lui	v0,0x42
  40bfcc:	244457f0 	addiu	a0,v0,22512
  40bfd0:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40bfd4:	00000000 	nop
  40bfd8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40bfdc:	00000000 	nop
  40bfe0:	8fc30028 	lw	v1,40(s8)
  40bfe4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/services.c:453
    if (SHELL_EXIT_NOTIFY_FD >=0) {
  40bfe8:	3c020042 	lui	v0,0x42
  40bfec:	8c425630 	lw	v0,22064(v0)
  40bff0:	04400009 	bltz	v0,40c018 <subproc_waiter_service+0x1c0>
  40bff4:	00000000 	nop
/home_a/ppchen/adb/services.c:455
      int res;
      res = writex(SHELL_EXIT_NOTIFY_FD, &fd, sizeof(fd));
  40bff8:	3c020042 	lui	v0,0x42
  40bffc:	8c425630 	lw	v0,22064(v0)
  40c000:	00402021 	move	a0,v0
  40c004:	27c50050 	addiu	a1,s8,80
  40c008:	24060004 	li	a2,4
  40c00c:	0c101f4e 	jal	407d38 <writex>
  40c010:	00000000 	nop
  40c014:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/services.c:458

    }
}
  40c018:	03c0e821 	move	sp,s8
  40c01c:	8fbf004c 	lw	ra,76(sp)
  40c020:	8fbe0048 	lw	s8,72(sp)
  40c024:	8fb10044 	lw	s1,68(sp)
  40c028:	8fb00040 	lw	s0,64(sp)
  40c02c:	27bd0050 	addiu	sp,sp,80
  40c030:	03e00008 	jr	ra
  40c034:	00000000 	nop

0040c038 <create_subproc_thread>:
create_subproc_thread():
/home_a/ppchen/adb/services.c:461

static int create_subproc_thread(const char *name)
{
  40c038:	27bdffd0 	addiu	sp,sp,-48
  40c03c:	afbf002c 	sw	ra,44(sp)
  40c040:	afbe0028 	sw	s8,40(sp)
  40c044:	03a0f021 	move	s8,sp
  40c048:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/services.c:467
    stinfo *sti;
    adb_thread_t t;
    int ret_fd;
    pid_t pid;

    if(name) {
  40c04c:	8fc20030 	lw	v0,48(s8)
  40c050:	1040000d 	beqz	v0,40c088 <create_subproc_thread+0x50>
  40c054:	00000000 	nop
/home_a/ppchen/adb/services.c:468
        ret_fd = create_subprocess(SHELL_COMMAND, "-c", name, &pid);
  40c058:	27c20024 	addiu	v0,s8,36
  40c05c:	3c030041 	lui	v1,0x41
  40c060:	24643d34 	addiu	a0,v1,15668
  40c064:	3c030041 	lui	v1,0x41
  40c068:	24653d3c 	addiu	a1,v1,15676
  40c06c:	8fc60030 	lw	a2,48(s8)
  40c070:	00403821 	move	a3,v0
  40c074:	0c102ef1 	jal	40bbc4 <create_subprocess>
  40c078:	00000000 	nop
  40c07c:	afc20018 	sw	v0,24(s8)
  40c080:	1000000b 	b	40c0b0 <create_subproc_thread+0x78>
  40c084:	00000000 	nop
/home_a/ppchen/adb/services.c:470
    } else {
        ret_fd = create_subprocess(SHELL_COMMAND, "-l", 0, &pid);
  40c088:	27c20024 	addiu	v0,s8,36
  40c08c:	3c030041 	lui	v1,0x41
  40c090:	24643d34 	addiu	a0,v1,15668
  40c094:	3c030041 	lui	v1,0x41
  40c098:	24653d40 	addiu	a1,v1,15680
  40c09c:	00003021 	move	a2,zero
  40c0a0:	00403821 	move	a3,v0
  40c0a4:	0c102ef1 	jal	40bbc4 <create_subprocess>
  40c0a8:	00000000 	nop
  40c0ac:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:474
    }
   

    sti = malloc(sizeof(stinfo));
  40c0b0:	2404000c 	li	a0,12
  40c0b4:	0c105300 	jal	414c00 <malloc@plt>
  40c0b8:	00000000 	nop
  40c0bc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/services.c:475
    if(sti == 0) fatal("cannot allocate stinfo");
  40c0c0:	8fc2001c 	lw	v0,28(s8)
  40c0c4:	14400005 	bnez	v0,40c0dc <create_subproc_thread+0xa4>
  40c0c8:	00000000 	nop
/home_a/ppchen/adb/services.c:475 (discriminator 1)
  40c0cc:	3c020041 	lui	v0,0x41
  40c0d0:	24443c84 	addiu	a0,v0,15492
  40c0d4:	0c1006a7 	jal	401a9c <fatal>
  40c0d8:	00000000 	nop
/home_a/ppchen/adb/services.c:476
    sti->func = subproc_waiter_service;
  40c0dc:	8fc2001c 	lw	v0,28(s8)
  40c0e0:	3c030041 	lui	v1,0x41
  40c0e4:	2463be58 	addiu	v1,v1,-16808
  40c0e8:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/services.c:477
    sti->cookie = (void*)pid;
  40c0ec:	8fc20024 	lw	v0,36(s8)
  40c0f0:	00401821 	move	v1,v0
  40c0f4:	8fc2001c 	lw	v0,28(s8)
  40c0f8:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/services.c:478
    sti->fd = ret_fd;
  40c0fc:	8fc2001c 	lw	v0,28(s8)
  40c100:	8fc30018 	lw	v1,24(s8)
  40c104:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/services.c:480

    if(adb_thread_create( &t, service_bootstrap_func, sti)){
  40c108:	27c20020 	addiu	v0,s8,32
  40c10c:	00402021 	move	a0,v0
  40c110:	3c020041 	lui	v0,0x41
  40c114:	2445b354 	addiu	a1,v0,-19628
  40c118:	8fc6001c 	lw	a2,28(s8)
  40c11c:	0c102c63 	jal	40b18c <adb_thread_create>
  40c120:	00000000 	nop
  40c124:	1040000a 	beqz	v0,40c150 <create_subproc_thread+0x118>
  40c128:	00000000 	nop
/home_a/ppchen/adb/services.c:481
        free(sti);
  40c12c:	8fc4001c 	lw	a0,28(s8)
  40c130:	0c1053e4 	jal	414f90 <free@plt>
  40c134:	00000000 	nop
/home_a/ppchen/adb/services.c:482
        adb_close(ret_fd);
  40c138:	8fc40018 	lw	a0,24(s8)
  40c13c:	0c102c27 	jal	40b09c <adb_close>
  40c140:	00000000 	nop
/home_a/ppchen/adb/services.c:484
      
        return -1;
  40c144:	2402ffff 	li	v0,-1
  40c148:	10000002 	b	40c154 <create_subproc_thread+0x11c>
  40c14c:	00000000 	nop
/home_a/ppchen/adb/services.c:488
    }


    return ret_fd;
  40c150:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/services.c:489
}
  40c154:	03c0e821 	move	sp,s8
  40c158:	8fbf002c 	lw	ra,44(sp)
  40c15c:	8fbe0028 	lw	s8,40(sp)
  40c160:	27bd0030 	addiu	sp,sp,48
  40c164:	03e00008 	jr	ra
  40c168:	00000000 	nop

0040c16c <service_to_fd>:
service_to_fd():
/home_a/ppchen/adb/services.c:494
#endif
#endif

int service_to_fd(const char *name)
{
  40c16c:	27bdffc8 	addiu	sp,sp,-56
  40c170:	afbf0034 	sw	ra,52(sp)
  40c174:	afbe0030 	sw	s8,48(sp)
  40c178:	03a0f021 	move	s8,sp
  40c17c:	afc40038 	sw	a0,56(s8)
/home_a/ppchen/adb/services.c:495
    int ret = -1;
  40c180:	2402ffff 	li	v0,-1
  40c184:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:497

    if(!strncmp(name, "tcp:", 4)) {
  40c188:	8fc40038 	lw	a0,56(s8)
  40c18c:	3c020041 	lui	v0,0x41
  40c190:	24453d44 	addiu	a1,v0,15684
  40c194:	24060004 	li	a2,4
  40c198:	0c105308 	jal	414c20 <strncmp@plt>
  40c19c:	00000000 	nop
  40c1a0:	14400021 	bnez	v0,40c228 <service_to_fd+0xbc>
  40c1a4:	00000000 	nop
/home_a/ppchen/adb/services.c:498
        int port = atoi(name + 4);
  40c1a8:	8fc20038 	lw	v0,56(s8)
  40c1ac:	24420004 	addiu	v0,v0,4
  40c1b0:	00402021 	move	a0,v0
  40c1b4:	0c1053e8 	jal	414fa0 <atoi@plt>
  40c1b8:	00000000 	nop
  40c1bc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/services.c:499
        name = strchr(name + 4, ':');
  40c1c0:	8fc20038 	lw	v0,56(s8)
  40c1c4:	24420004 	addiu	v0,v0,4
  40c1c8:	00402021 	move	a0,v0
  40c1cc:	2405003a 	li	a1,58
  40c1d0:	0c1053f4 	jal	414fd0 <strchr@plt>
  40c1d4:	00000000 	nop
  40c1d8:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/services.c:500
        if(name == 0) {
  40c1dc:	8fc20038 	lw	v0,56(s8)
  40c1e0:	1440000e 	bnez	v0,40c21c <service_to_fd+0xb0>
  40c1e4:	00000000 	nop
/home_a/ppchen/adb/services.c:501
            ret = socket_loopback_client(port, SOCK_STREAM);
  40c1e8:	8fc4001c 	lw	a0,28(s8)
  40c1ec:	24050002 	li	a1,2
  40c1f0:	0c104958 	jal	412560 <socket_loopback_client>
  40c1f4:	00000000 	nop
  40c1f8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:502
            if (ret >= 0)
  40c1fc:	8fc20018 	lw	v0,24(s8)
  40c200:	04400173 	bltz	v0,40c7d0 <service_to_fd+0x664>
  40c204:	00000000 	nop
/home_a/ppchen/adb/services.c:503
                disable_tcp_nagle(ret);
  40c208:	8fc40018 	lw	a0,24(s8)
  40c20c:	0c102c87 	jal	40b21c <disable_tcp_nagle>
  40c210:	00000000 	nop
  40c214:	1000016e 	b	40c7d0 <service_to_fd+0x664>
  40c218:	00000000 	nop
/home_a/ppchen/adb/services.c:510
#if ADB_HOST
            adb_mutex_lock(&dns_lock);
            ret = socket_network_client(name + 1, port, SOCK_STREAM);
            adb_mutex_unlock(&dns_lock);
#else
            return -1;
  40c21c:	2402ffff 	li	v0,-1
  40c220:	10000172 	b	40c7ec <service_to_fd+0x680>
  40c224:	00000000 	nop
/home_a/ppchen/adb/services.c:514
#endif
        }
#ifndef HAVE_WINSOCK   /* winsock doesn't implement unix domain sockets */
    } else if(!strncmp(name, "local:", 6)) {
  40c228:	8fc40038 	lw	a0,56(s8)
  40c22c:	3c020041 	lui	v0,0x41
  40c230:	24453d4c 	addiu	a1,v0,15692
  40c234:	24060006 	li	a2,6
  40c238:	0c105308 	jal	414c20 <strncmp@plt>
  40c23c:	00000000 	nop
  40c240:	1440000b 	bnez	v0,40c270 <service_to_fd+0x104>
  40c244:	00000000 	nop
/home_a/ppchen/adb/services.c:515
        ret = socket_local_client(name + 6,
  40c248:	8fc20038 	lw	v0,56(s8)
  40c24c:	24420006 	addiu	v0,v0,6
  40c250:	00402021 	move	a0,v0
  40c254:	24050001 	li	a1,1
  40c258:	24060002 	li	a2,2
  40c25c:	0c10485f 	jal	41217c <socket_local_client>
  40c260:	00000000 	nop
  40c264:	afc20018 	sw	v0,24(s8)
  40c268:	10000159 	b	40c7d0 <service_to_fd+0x664>
  40c26c:	00000000 	nop
/home_a/ppchen/adb/services.c:517
                ANDROID_SOCKET_NAMESPACE_RESERVED, SOCK_STREAM);
    } else if(!strncmp(name, "localreserved:", 14)) {
  40c270:	8fc40038 	lw	a0,56(s8)
  40c274:	3c020041 	lui	v0,0x41
  40c278:	24453d54 	addiu	a1,v0,15700
  40c27c:	2406000e 	li	a2,14
  40c280:	0c105308 	jal	414c20 <strncmp@plt>
  40c284:	00000000 	nop
  40c288:	1440000b 	bnez	v0,40c2b8 <service_to_fd+0x14c>
  40c28c:	00000000 	nop
/home_a/ppchen/adb/services.c:518
        ret = socket_local_client(name + 14,
  40c290:	8fc20038 	lw	v0,56(s8)
  40c294:	2442000e 	addiu	v0,v0,14
  40c298:	00402021 	move	a0,v0
  40c29c:	24050001 	li	a1,1
  40c2a0:	24060002 	li	a2,2
  40c2a4:	0c10485f 	jal	41217c <socket_local_client>
  40c2a8:	00000000 	nop
  40c2ac:	afc20018 	sw	v0,24(s8)
  40c2b0:	10000147 	b	40c7d0 <service_to_fd+0x664>
  40c2b4:	00000000 	nop
/home_a/ppchen/adb/services.c:520
                ANDROID_SOCKET_NAMESPACE_RESERVED, SOCK_STREAM);
    } else if(!strncmp(name, "localabstract:", 14)) {
  40c2b8:	8fc40038 	lw	a0,56(s8)
  40c2bc:	3c020041 	lui	v0,0x41
  40c2c0:	24453d64 	addiu	a1,v0,15716
  40c2c4:	2406000e 	li	a2,14
  40c2c8:	0c105308 	jal	414c20 <strncmp@plt>
  40c2cc:	00000000 	nop
  40c2d0:	1440000b 	bnez	v0,40c300 <service_to_fd+0x194>
  40c2d4:	00000000 	nop
/home_a/ppchen/adb/services.c:521
        ret = socket_local_client(name + 14,
  40c2d8:	8fc20038 	lw	v0,56(s8)
  40c2dc:	2442000e 	addiu	v0,v0,14
  40c2e0:	00402021 	move	a0,v0
  40c2e4:	00002821 	move	a1,zero
  40c2e8:	24060002 	li	a2,2
  40c2ec:	0c10485f 	jal	41217c <socket_local_client>
  40c2f0:	00000000 	nop
  40c2f4:	afc20018 	sw	v0,24(s8)
  40c2f8:	10000135 	b	40c7d0 <service_to_fd+0x664>
  40c2fc:	00000000 	nop
/home_a/ppchen/adb/services.c:523
                ANDROID_SOCKET_NAMESPACE_ABSTRACT, SOCK_STREAM);
    } else if(!strncmp(name, "localfilesystem:", 16)) {
  40c300:	8fc40038 	lw	a0,56(s8)
  40c304:	3c020041 	lui	v0,0x41
  40c308:	24453d74 	addiu	a1,v0,15732
  40c30c:	24060010 	li	a2,16
  40c310:	0c105308 	jal	414c20 <strncmp@plt>
  40c314:	00000000 	nop
  40c318:	1440000b 	bnez	v0,40c348 <service_to_fd+0x1dc>
  40c31c:	00000000 	nop
/home_a/ppchen/adb/services.c:524
        ret = socket_local_client(name + 16,
  40c320:	8fc20038 	lw	v0,56(s8)
  40c324:	24420010 	addiu	v0,v0,16
  40c328:	00402021 	move	a0,v0
  40c32c:	24050002 	li	a1,2
  40c330:	24060002 	li	a2,2
  40c334:	0c10485f 	jal	41217c <socket_local_client>
  40c338:	00000000 	nop
  40c33c:	afc20018 	sw	v0,24(s8)
  40c340:	10000123 	b	40c7d0 <service_to_fd+0x664>
  40c344:	00000000 	nop
/home_a/ppchen/adb/services.c:534
   
        char *n = strdup(name + 4);
        if(n == 0) return -1;
        ret = create_service_thread(dns_service, n);
#else /* !ADB_HOST */
    } else if(!strncmp("dev:", name, 4)) {
  40c348:	3c020041 	lui	v0,0x41
  40c34c:	24443d88 	addiu	a0,v0,15752
  40c350:	8fc50038 	lw	a1,56(s8)
  40c354:	24060004 	li	a2,4
  40c358:	0c105308 	jal	414c20 <strncmp@plt>
  40c35c:	00000000 	nop
  40c360:	1440000a 	bnez	v0,40c38c <service_to_fd+0x220>
  40c364:	00000000 	nop
/home_a/ppchen/adb/services.c:536
      
        ret = unix_open(name + 4, O_RDWR);
  40c368:	8fc20038 	lw	v0,56(s8)
  40c36c:	24420004 	addiu	v0,v0,4
  40c370:	00402021 	move	a0,v0
  40c374:	24050002 	li	a1,2
  40c378:	0c102be8 	jal	40afa0 <unix_open>
  40c37c:	00000000 	nop
  40c380:	afc20018 	sw	v0,24(s8)
  40c384:	10000112 	b	40c7d0 <service_to_fd+0x664>
  40c388:	00000000 	nop
/home_a/ppchen/adb/services.c:537
    } else if(!strncmp(name, "framebuffer:", 12)) {
  40c38c:	8fc40038 	lw	a0,56(s8)
  40c390:	3c020041 	lui	v0,0x41
  40c394:	24453d90 	addiu	a1,v0,15760
  40c398:	2406000c 	li	a2,12
  40c39c:	0c105308 	jal	414c20 <strncmp@plt>
  40c3a0:	00000000 	nop
  40c3a4:	14400009 	bnez	v0,40c3cc <service_to_fd+0x260>
  40c3a8:	00000000 	nop
/home_a/ppchen/adb/services.c:539
       
        ret = create_service_thread(framebuffer_service, 0);
  40c3ac:	3c020041 	lui	v0,0x41
  40c3b0:	24440720 	addiu	a0,v0,1824
  40c3b4:	00002821 	move	a1,zero
  40c3b8:	0c102eac 	jal	40bab0 <create_service_thread>
  40c3bc:	00000000 	nop
  40c3c0:	afc20018 	sw	v0,24(s8)
  40c3c4:	10000102 	b	40c7d0 <service_to_fd+0x664>
  40c3c8:	00000000 	nop
/home_a/ppchen/adb/services.c:540
    } else if(recovery_mode && !strncmp(name, "recover:", 8)) {
  40c3cc:	3c020042 	lui	v0,0x42
  40c3d0:	8c425810 	lw	v0,22544(v0)
  40c3d4:	10400016 	beqz	v0,40c430 <service_to_fd+0x2c4>
  40c3d8:	00000000 	nop
/home_a/ppchen/adb/services.c:540 (discriminator 1)
  40c3dc:	8fc40038 	lw	a0,56(s8)
  40c3e0:	3c020041 	lui	v0,0x41
  40c3e4:	24453da0 	addiu	a1,v0,15776
  40c3e8:	24060008 	li	a2,8
  40c3ec:	0c105308 	jal	414c20 <strncmp@plt>
  40c3f0:	00000000 	nop
  40c3f4:	1440000e 	bnez	v0,40c430 <service_to_fd+0x2c4>
  40c3f8:	00000000 	nop
/home_a/ppchen/adb/services.c:542
      
        ret = create_service_thread(recover_service, (void*) atoi(name + 8));
  40c3fc:	8fc20038 	lw	v0,56(s8)
  40c400:	24420008 	addiu	v0,v0,8
  40c404:	00402021 	move	a0,v0
  40c408:	0c1053e8 	jal	414fa0 <atoi@plt>
  40c40c:	00000000 	nop
  40c410:	3c030041 	lui	v1,0x41
  40c414:	2464b3c0 	addiu	a0,v1,-19520
  40c418:	00402821 	move	a1,v0
  40c41c:	0c102eac 	jal	40bab0 <create_service_thread>
  40c420:	00000000 	nop
  40c424:	afc20018 	sw	v0,24(s8)
  40c428:	100000e9 	b	40c7d0 <service_to_fd+0x664>
  40c42c:	00000000 	nop
/home_a/ppchen/adb/services.c:543
    } else if (!strncmp(name, "jdwp:", 5)) {
  40c430:	8fc40038 	lw	a0,56(s8)
  40c434:	3c020041 	lui	v0,0x41
  40c438:	24453dac 	addiu	a1,v0,15788
  40c43c:	24060005 	li	a2,5
  40c440:	0c105308 	jal	414c20 <strncmp@plt>
  40c444:	00000000 	nop
  40c448:	1440000c 	bnez	v0,40c47c <service_to_fd+0x310>
  40c44c:	00000000 	nop
/home_a/ppchen/adb/services.c:545
      
        ret = create_jdwp_connection_fd(atoi(name+5));
  40c450:	8fc20038 	lw	v0,56(s8)
  40c454:	24420005 	addiu	v0,v0,5
  40c458:	00402021 	move	a0,v0
  40c45c:	0c1053e8 	jal	414fa0 <atoi@plt>
  40c460:	00000000 	nop
  40c464:	00402021 	move	a0,v0
  40c468:	0c103cea 	jal	40f3a8 <create_jdwp_connection_fd>
  40c46c:	00000000 	nop
  40c470:	afc20018 	sw	v0,24(s8)
  40c474:	100000d6 	b	40c7d0 <service_to_fd+0x664>
  40c478:	00000000 	nop
/home_a/ppchen/adb/services.c:546
    } else if (!strncmp(name, "log:", 4)) {
  40c47c:	8fc40038 	lw	a0,56(s8)
  40c480:	3c020041 	lui	v0,0x41
  40c484:	24453db4 	addiu	a1,v0,15796
  40c488:	24060004 	li	a2,4
  40c48c:	0c105308 	jal	414c20 <strncmp@plt>
  40c490:	00000000 	nop
  40c494:	1440000e 	bnez	v0,40c4d0 <service_to_fd+0x364>
  40c498:	00000000 	nop
/home_a/ppchen/adb/services.c:548
       
        ret = create_service_thread(log_service, get_log_file_path(name + 4));
  40c49c:	8fc20038 	lw	v0,56(s8)
  40c4a0:	24420004 	addiu	v0,v0,4
  40c4a4:	00402021 	move	a0,v0
  40c4a8:	0c104671 	jal	4119c4 <get_log_file_path>
  40c4ac:	00000000 	nop
  40c4b0:	3c030041 	lui	v1,0x41
  40c4b4:	24641890 	addiu	a0,v1,6288
  40c4b8:	00402821 	move	a1,v0
  40c4bc:	0c102eac 	jal	40bab0 <create_service_thread>
  40c4c0:	00000000 	nop
  40c4c4:	afc20018 	sw	v0,24(s8)
  40c4c8:	100000c1 	b	40c7d0 <service_to_fd+0x664>
  40c4cc:	00000000 	nop
/home_a/ppchen/adb/services.c:549
    } else if(!HOST && !strncmp(name, "shell:", 6)) {
  40c4d0:	3c020042 	lui	v0,0x42
  40c4d4:	8c42580c 	lw	v0,22540(v0)
  40c4d8:	1440001c 	bnez	v0,40c54c <service_to_fd+0x3e0>
  40c4dc:	00000000 	nop
/home_a/ppchen/adb/services.c:549 (discriminator 1)
  40c4e0:	8fc40038 	lw	a0,56(s8)
  40c4e4:	3c020041 	lui	v0,0x41
  40c4e8:	24453dbc 	addiu	a1,v0,15804
  40c4ec:	24060006 	li	a2,6
  40c4f0:	0c105308 	jal	414c20 <strncmp@plt>
  40c4f4:	00000000 	nop
  40c4f8:	14400014 	bnez	v0,40c54c <service_to_fd+0x3e0>
  40c4fc:	00000000 	nop
/home_a/ppchen/adb/services.c:551
       
        if(name[6]) {
  40c500:	8fc20038 	lw	v0,56(s8)
  40c504:	24420006 	addiu	v0,v0,6
  40c508:	80420000 	lb	v0,0(v0)
  40c50c:	10400009 	beqz	v0,40c534 <service_to_fd+0x3c8>
  40c510:	00000000 	nop
/home_a/ppchen/adb/services.c:552
            ret = create_subproc_thread(name + 6);
  40c514:	8fc20038 	lw	v0,56(s8)
  40c518:	24420006 	addiu	v0,v0,6
  40c51c:	00402021 	move	a0,v0
  40c520:	0c10300e 	jal	40c038 <create_subproc_thread>
  40c524:	00000000 	nop
  40c528:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:551
    } else if (!strncmp(name, "log:", 4)) {
       
        ret = create_service_thread(log_service, get_log_file_path(name + 4));
    } else if(!HOST && !strncmp(name, "shell:", 6)) {
       
        if(name[6]) {
  40c52c:	100000a8 	b	40c7d0 <service_to_fd+0x664>
  40c530:	00000000 	nop
/home_a/ppchen/adb/services.c:554
            ret = create_subproc_thread(name + 6);
        } else {
            ret = create_subproc_thread(0);
  40c534:	00002021 	move	a0,zero
  40c538:	0c10300e 	jal	40c038 <create_subproc_thread>
  40c53c:	00000000 	nop
  40c540:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:551
    } else if (!strncmp(name, "log:", 4)) {
       
        ret = create_service_thread(log_service, get_log_file_path(name + 4));
    } else if(!HOST && !strncmp(name, "shell:", 6)) {
       
        if(name[6]) {
  40c544:	100000a2 	b	40c7d0 <service_to_fd+0x664>
  40c548:	00000000 	nop
/home_a/ppchen/adb/services.c:556
            ret = create_subproc_thread(name + 6);
        } else {
            ret = create_subproc_thread(0);
        }
    } else if(!strncmp(name, "sync:", 5)) {
  40c54c:	8fc40038 	lw	a0,56(s8)
  40c550:	3c020041 	lui	v0,0x41
  40c554:	24453dc4 	addiu	a1,v0,15812
  40c558:	24060005 	li	a2,5
  40c55c:	0c105308 	jal	414c20 <strncmp@plt>
  40c560:	00000000 	nop
  40c564:	14400009 	bnez	v0,40c58c <service_to_fd+0x420>
  40c568:	00000000 	nop
/home_a/ppchen/adb/services.c:558
        
        ret = create_service_thread(file_sync_service, NULL);
  40c56c:	3c020041 	lui	v0,0x41
  40c570:	2444d8b8 	addiu	a0,v0,-10056
  40c574:	00002821 	move	a1,zero
  40c578:	0c102eac 	jal	40bab0 <create_service_thread>
  40c57c:	00000000 	nop
  40c580:	afc20018 	sw	v0,24(s8)
  40c584:	10000092 	b	40c7d0 <service_to_fd+0x664>
  40c588:	00000000 	nop
/home_a/ppchen/adb/services.c:559
    } else if(!strncmp(name, "remount:", 8)) {
  40c58c:	8fc40038 	lw	a0,56(s8)
  40c590:	3c020041 	lui	v0,0x41
  40c594:	24453dcc 	addiu	a1,v0,15820
  40c598:	24060008 	li	a2,8
  40c59c:	0c105308 	jal	414c20 <strncmp@plt>
  40c5a0:	00000000 	nop
  40c5a4:	14400009 	bnez	v0,40c5cc <service_to_fd+0x460>
  40c5a8:	00000000 	nop
/home_a/ppchen/adb/services.c:561
        
        ret = create_service_thread(remount_service, NULL);
  40c5ac:	3c020041 	lui	v0,0x41
  40c5b0:	24441084 	addiu	a0,v0,4228
  40c5b4:	00002821 	move	a1,zero
  40c5b8:	0c102eac 	jal	40bab0 <create_service_thread>
  40c5bc:	00000000 	nop
  40c5c0:	afc20018 	sw	v0,24(s8)
  40c5c4:	10000082 	b	40c7d0 <service_to_fd+0x664>
  40c5c8:	00000000 	nop
/home_a/ppchen/adb/services.c:562
    } else if(!strncmp(name, "reboot:", 7)) {
  40c5cc:	8fc40038 	lw	a0,56(s8)
  40c5d0:	3c020041 	lui	v0,0x41
  40c5d4:	24453dd8 	addiu	a1,v0,15832
  40c5d8:	24060007 	li	a2,7
  40c5dc:	0c105308 	jal	414c20 <strncmp@plt>
  40c5e0:	00000000 	nop
  40c5e4:	14400015 	bnez	v0,40c63c <service_to_fd+0x4d0>
  40c5e8:	00000000 	nop
/home_a/ppchen/adb/services.c:564
       
        void* arg = strdup(name + 7);
  40c5ec:	8fc20038 	lw	v0,56(s8)
  40c5f0:	24420007 	addiu	v0,v0,7
  40c5f4:	00402021 	move	a0,v0
  40c5f8:	0c105408 	jal	415020 <strdup@plt>
  40c5fc:	00000000 	nop
  40c600:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/services.c:565
        if(arg == 0) return -1;
  40c604:	8fc20020 	lw	v0,32(s8)
  40c608:	14400004 	bnez	v0,40c61c <service_to_fd+0x4b0>
  40c60c:	00000000 	nop
/home_a/ppchen/adb/services.c:565 (discriminator 1)
  40c610:	2402ffff 	li	v0,-1
  40c614:	10000075 	b	40c7ec <service_to_fd+0x680>
  40c618:	00000000 	nop
/home_a/ppchen/adb/services.c:566
        ret = create_service_thread(reboot_service, arg);
  40c61c:	3c020041 	lui	v0,0x41
  40c620:	2444b948 	addiu	a0,v0,-18104
  40c624:	8fc50020 	lw	a1,32(s8)
  40c628:	0c102eac 	jal	40bab0 <create_service_thread>
  40c62c:	00000000 	nop
  40c630:	afc20018 	sw	v0,24(s8)
  40c634:	10000066 	b	40c7d0 <service_to_fd+0x664>
  40c638:	00000000 	nop
/home_a/ppchen/adb/services.c:567
    } else if(!strncmp(name, "root:", 5)) {
  40c63c:	8fc40038 	lw	a0,56(s8)
  40c640:	3c020041 	lui	v0,0x41
  40c644:	24453de0 	addiu	a1,v0,15840
  40c648:	24060005 	li	a2,5
  40c64c:	0c105308 	jal	414c20 <strncmp@plt>
  40c650:	00000000 	nop
  40c654:	14400009 	bnez	v0,40c67c <service_to_fd+0x510>
  40c658:	00000000 	nop
/home_a/ppchen/adb/services.c:569
        
        ret = create_service_thread(restart_root_service, NULL);
  40c65c:	3c020041 	lui	v0,0x41
  40c660:	2444b53c 	addiu	a0,v0,-19140
  40c664:	00002821 	move	a1,zero
  40c668:	0c102eac 	jal	40bab0 <create_service_thread>
  40c66c:	00000000 	nop
  40c670:	afc20018 	sw	v0,24(s8)
  40c674:	10000056 	b	40c7d0 <service_to_fd+0x664>
  40c678:	00000000 	nop
/home_a/ppchen/adb/services.c:570
    } else if(!strncmp(name, "backup:", 7)) {
  40c67c:	8fc40038 	lw	a0,56(s8)
  40c680:	3c020041 	lui	v0,0x41
  40c684:	24453de8 	addiu	a1,v0,15848
  40c688:	24060007 	li	a2,7
  40c68c:	0c105308 	jal	414c20 <strncmp@plt>
  40c690:	00000000 	nop
  40c694:	14400014 	bnez	v0,40c6e8 <service_to_fd+0x57c>
  40c698:	00000000 	nop
/home_a/ppchen/adb/services.c:572
       
        char* arg = strdup(name+7);
  40c69c:	8fc20038 	lw	v0,56(s8)
  40c6a0:	24420007 	addiu	v0,v0,7
  40c6a4:	00402021 	move	a0,v0
  40c6a8:	0c105408 	jal	415020 <strdup@plt>
  40c6ac:	00000000 	nop
  40c6b0:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/services.c:573
        if (arg == NULL) return -1;
  40c6b4:	8fc20024 	lw	v0,36(s8)
  40c6b8:	14400004 	bnez	v0,40c6cc <service_to_fd+0x560>
  40c6bc:	00000000 	nop
/home_a/ppchen/adb/services.c:573 (discriminator 1)
  40c6c0:	2402ffff 	li	v0,-1
  40c6c4:	10000049 	b	40c7ec <service_to_fd+0x680>
  40c6c8:	00000000 	nop
/home_a/ppchen/adb/services.c:574
        ret = backup_service(BACKUP, arg);
  40c6cc:	00002021 	move	a0,zero
  40c6d0:	8fc50024 	lw	a1,36(s8)
  40c6d4:	0c100f65 	jal	403d94 <backup_service>
  40c6d8:	00000000 	nop
  40c6dc:	afc20018 	sw	v0,24(s8)
  40c6e0:	1000003b 	b	40c7d0 <service_to_fd+0x664>
  40c6e4:	00000000 	nop
/home_a/ppchen/adb/services.c:575
    } else if(!strncmp(name, "restore:", 8)) {
  40c6e8:	8fc40038 	lw	a0,56(s8)
  40c6ec:	3c020041 	lui	v0,0x41
  40c6f0:	24453df0 	addiu	a1,v0,15856
  40c6f4:	24060008 	li	a2,8
  40c6f8:	0c105308 	jal	414c20 <strncmp@plt>
  40c6fc:	00000000 	nop
  40c700:	14400008 	bnez	v0,40c724 <service_to_fd+0x5b8>
  40c704:	00000000 	nop
/home_a/ppchen/adb/services.c:577
       
        ret = backup_service(RESTORE, NULL);
  40c708:	24040001 	li	a0,1
  40c70c:	00002821 	move	a1,zero
  40c710:	0c100f65 	jal	403d94 <backup_service>
  40c714:	00000000 	nop
  40c718:	afc20018 	sw	v0,24(s8)
  40c71c:	1000002c 	b	40c7d0 <service_to_fd+0x664>
  40c720:	00000000 	nop
/home_a/ppchen/adb/services.c:578
    } else if(!strncmp(name, "tcpip:", 6)) {
  40c724:	8fc40038 	lw	a0,56(s8)
  40c728:	3c020041 	lui	v0,0x41
  40c72c:	24453dfc 	addiu	a1,v0,15868
  40c730:	24060006 	li	a2,6
  40c734:	0c105308 	jal	414c20 <strncmp@plt>
  40c738:	00000000 	nop
  40c73c:	14400016 	bnez	v0,40c798 <service_to_fd+0x62c>
  40c740:	00000000 	nop
/home_a/ppchen/adb/services.c:581
      
        int port;
        if (sscanf(name + 6, "%d", &port) == 0) {
  40c744:	8fc20038 	lw	v0,56(s8)
  40c748:	24430006 	addiu	v1,v0,6
  40c74c:	27c20028 	addiu	v0,s8,40
  40c750:	00602021 	move	a0,v1
  40c754:	3c030041 	lui	v1,0x41
  40c758:	24653bbc 	addiu	a1,v1,15292
  40c75c:	00403021 	move	a2,v0
  40c760:	0c105390 	jal	414e40 <sscanf@plt>
  40c764:	00000000 	nop
  40c768:	14400002 	bnez	v0,40c774 <service_to_fd+0x608>
  40c76c:	00000000 	nop
/home_a/ppchen/adb/services.c:582
            port = 0;
  40c770:	afc00028 	sw	zero,40(s8)
/home_a/ppchen/adb/services.c:584
        }
        ret = create_service_thread(restart_tcp_service, (void *)port);
  40c774:	8fc20028 	lw	v0,40(s8)
  40c778:	3c030041 	lui	v1,0x41
  40c77c:	2464b714 	addiu	a0,v1,-18668
  40c780:	00402821 	move	a1,v0
  40c784:	0c102eac 	jal	40bab0 <create_service_thread>
  40c788:	00000000 	nop
  40c78c:	afc20018 	sw	v0,24(s8)
  40c790:	1000000f 	b	40c7d0 <service_to_fd+0x664>
  40c794:	00000000 	nop
/home_a/ppchen/adb/services.c:585
    } else if(!strncmp(name, "usb:", 4)) {
  40c798:	8fc40038 	lw	a0,56(s8)
  40c79c:	3c020041 	lui	v0,0x41
  40c7a0:	24453e04 	addiu	a1,v0,15876
  40c7a4:	24060004 	li	a2,4
  40c7a8:	0c105308 	jal	414c20 <strncmp@plt>
  40c7ac:	00000000 	nop
  40c7b0:	14400007 	bnez	v0,40c7d0 <service_to_fd+0x664>
  40c7b4:	00000000 	nop
/home_a/ppchen/adb/services.c:586
        ret = create_service_thread(restart_usb_service, NULL);
  40c7b8:	3c020041 	lui	v0,0x41
  40c7bc:	2444b854 	addiu	a0,v0,-18348
  40c7c0:	00002821 	move	a1,zero
  40c7c4:	0c102eac 	jal	40bab0 <create_service_thread>
  40c7c8:	00000000 	nop
  40c7cc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/services.c:593
#if 0
    } else if(!strncmp(name, "echo:", 5)){
        ret = create_service_thread(echo_service, 0);
#endif
    }
    if (ret >= 0) {
  40c7d0:	8fc20018 	lw	v0,24(s8)
  40c7d4:	04400004 	bltz	v0,40c7e8 <service_to_fd+0x67c>
  40c7d8:	00000000 	nop
/home_a/ppchen/adb/services.c:594
        close_on_exec(ret);
  40c7dc:	8fc40018 	lw	a0,24(s8)
  40c7e0:	0c102bd8 	jal	40af60 <close_on_exec>
  40c7e4:	00000000 	nop
/home_a/ppchen/adb/services.c:596
    }
    return ret;
  40c7e8:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/services.c:597
}
  40c7ec:	03c0e821 	move	sp,s8
  40c7f0:	8fbf0034 	lw	ra,52(sp)
  40c7f4:	8fbe0030 	lw	s8,48(sp)
  40c7f8:	27bd0038 	addiu	sp,sp,56
  40c7fc:	03e00008 	jr	ra
  40c800:	00000000 	nop
	...

0040c810 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  40c810:	27bdffe0 	addiu	sp,sp,-32
  40c814:	afbf001c 	sw	ra,28(sp)
  40c818:	afbe0018 	sw	s8,24(sp)
  40c81c:	03a0f021 	move	s8,sp
  40c820:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  40c824:	8fc40020 	lw	a0,32(s8)
  40c828:	24050002 	li	a1,2
  40c82c:	24060001 	li	a2,1
  40c830:	0c10532c 	jal	414cb0 <fcntl@plt>
  40c834:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  40c838:	03c0e821 	move	sp,s8
  40c83c:	8fbf001c 	lw	ra,28(sp)
  40c840:	8fbe0018 	lw	s8,24(sp)
  40c844:	27bd0020 	addiu	sp,sp,32
  40c848:	03e00008 	jr	ra
  40c84c:	00000000 	nop

0040c850 <adb_open_mode>:
adb_open_mode():
/home_a/ppchen/adb/sysdeps.h:327
        return open(path, options, mode);
    }
}

static __inline__ int  adb_open_mode( const char*  pathname, int  options, int  mode )
{
  40c850:	27bdffe0 	addiu	sp,sp,-32
  40c854:	afbf001c 	sw	ra,28(sp)
  40c858:	afbe0018 	sw	s8,24(sp)
  40c85c:	03a0f021 	move	s8,sp
  40c860:	afc40020 	sw	a0,32(s8)
  40c864:	afc50024 	sw	a1,36(s8)
  40c868:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:328
    return open( pathname, options, mode );
  40c86c:	8fc40020 	lw	a0,32(s8)
  40c870:	8fc50024 	lw	a1,36(s8)
  40c874:	8fc60028 	lw	a2,40(s8)
  40c878:	0c1052c4 	jal	414b10 <open@plt>
  40c87c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:329
}
  40c880:	03c0e821 	move	sp,s8
  40c884:	8fbf001c 	lw	ra,28(sp)
  40c888:	8fbe0018 	lw	s8,24(sp)
  40c88c:	27bd0020 	addiu	sp,sp,32
  40c890:	03e00008 	jr	ra
  40c894:	00000000 	nop

0040c898 <adb_open>:
adb_open():
/home_a/ppchen/adb/sysdeps.h:333


static __inline__ int  adb_open( const char*  pathname, int  options )
{
  40c898:	27bdffd8 	addiu	sp,sp,-40
  40c89c:	afbf0024 	sw	ra,36(sp)
  40c8a0:	afbe0020 	sw	s8,32(sp)
  40c8a4:	03a0f021 	move	s8,sp
  40c8a8:	afc40028 	sw	a0,40(s8)
  40c8ac:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:334
    int  fd = open( pathname, options );
  40c8b0:	8fc40028 	lw	a0,40(s8)
  40c8b4:	8fc5002c 	lw	a1,44(s8)
  40c8b8:	0c1052c4 	jal	414b10 <open@plt>
  40c8bc:	00000000 	nop
  40c8c0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:335
    if (fd < 0)
  40c8c4:	8fc20018 	lw	v0,24(s8)
  40c8c8:	04410004 	bgez	v0,40c8dc <adb_open+0x44>
  40c8cc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:336
        return -1;
  40c8d0:	2402ffff 	li	v0,-1
  40c8d4:	10000005 	b	40c8ec <adb_open+0x54>
  40c8d8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:337
    close_on_exec( fd );
  40c8dc:	8fc40018 	lw	a0,24(s8)
  40c8e0:	0c103204 	jal	40c810 <close_on_exec>
  40c8e4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:338
    return fd;
  40c8e8:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:339
}
  40c8ec:	03c0e821 	move	sp,s8
  40c8f0:	8fbf0024 	lw	ra,36(sp)
  40c8f4:	8fbe0020 	lw	s8,32(sp)
  40c8f8:	27bd0028 	addiu	sp,sp,40
  40c8fc:	03e00008 	jr	ra
  40c900:	00000000 	nop

0040c904 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  40c904:	27bdffe0 	addiu	sp,sp,-32
  40c908:	afbf001c 	sw	ra,28(sp)
  40c90c:	afbe0018 	sw	s8,24(sp)
  40c910:	03a0f021 	move	s8,sp
  40c914:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  40c918:	8fc40020 	lw	a0,32(s8)
  40c91c:	0c105378 	jal	414de0 <close@plt>
  40c920:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  40c924:	03c0e821 	move	sp,s8
  40c928:	8fbf001c 	lw	ra,28(sp)
  40c92c:	8fbe0018 	lw	s8,24(sp)
  40c930:	27bd0020 	addiu	sp,sp,32
  40c934:	03e00008 	jr	ra
  40c938:	00000000 	nop

0040c93c <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  40c93c:	27bdffe0 	addiu	sp,sp,-32
  40c940:	afbf001c 	sw	ra,28(sp)
  40c944:	afbe0018 	sw	s8,24(sp)
  40c948:	03a0f021 	move	s8,sp
  40c94c:	afc40020 	sw	a0,32(s8)
  40c950:	afc50024 	sw	a1,36(s8)
  40c954:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  40c958:	8fc40020 	lw	a0,32(s8)
  40c95c:	8fc50024 	lw	a1,36(s8)
  40c960:	8fc60028 	lw	a2,40(s8)
  40c964:	0c105340 	jal	414d00 <read@plt>
  40c968:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  40c96c:	03c0e821 	move	sp,s8
  40c970:	8fbf001c 	lw	ra,28(sp)
  40c974:	8fbe0018 	lw	s8,24(sp)
  40c978:	27bd0020 	addiu	sp,sp,32
  40c97c:	03e00008 	jr	ra
  40c980:	00000000 	nop

0040c984 <adb_unlink>:
adb_unlink():
/home_a/ppchen/adb/sysdeps.h:381
}
#undef   lseek
#define  lseek   ___xxx_lseek

static __inline__  int    adb_unlink(const char*  path)
{
  40c984:	27bdffe0 	addiu	sp,sp,-32
  40c988:	afbf001c 	sw	ra,28(sp)
  40c98c:	afbe0018 	sw	s8,24(sp)
  40c990:	03a0f021 	move	s8,sp
  40c994:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:382
    return  unlink(path);
  40c998:	8fc40020 	lw	a0,32(s8)
  40c99c:	0c10539c 	jal	414e70 <unlink@plt>
  40c9a0:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:383
}
  40c9a4:	03c0e821 	move	sp,s8
  40c9a8:	8fbf001c 	lw	ra,28(sp)
  40c9ac:	8fbe0018 	lw	s8,24(sp)
  40c9b0:	27bd0020 	addiu	sp,sp,32
  40c9b4:	03e00008 	jr	ra
  40c9b8:	00000000 	nop

0040c9bc <adb_mkdir>:
adb_mkdir():
/home_a/ppchen/adb/sysdeps.h:484
{
    usleep( mseconds*1000 );
}

static __inline__ int  adb_mkdir(const char*  path, int mode)
{
  40c9bc:	27bdffe0 	addiu	sp,sp,-32
  40c9c0:	afbf001c 	sw	ra,28(sp)
  40c9c4:	afbe0018 	sw	s8,24(sp)
  40c9c8:	03a0f021 	move	s8,sp
  40c9cc:	afc40020 	sw	a0,32(s8)
  40c9d0:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/sysdeps.h:485
    return mkdir(path, mode);
  40c9d4:	8fc20024 	lw	v0,36(s8)
  40c9d8:	8fc40020 	lw	a0,32(s8)
  40c9dc:	00402821 	move	a1,v0
  40c9e0:	0c1052fc 	jal	414bf0 <mkdir@plt>
  40c9e4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:486
}
  40c9e8:	03c0e821 	move	sp,s8
  40c9ec:	8fbf001c 	lw	ra,28(sp)
  40c9f0:	8fbe0018 	lw	s8,24(sp)
  40c9f4:	27bd0020 	addiu	sp,sp,32
  40c9f8:	03e00008 	jr	ra
  40c9fc:	00000000 	nop

0040ca00 <adb_dirstart>:
adb_dirstart():
/home_a/ppchen/adb/sysdeps.h:495
static __inline__ void  adb_sysdeps_init(void)
{
}

static __inline__ char*  adb_dirstart(const char*  path)
{
  40ca00:	27bdffe0 	addiu	sp,sp,-32
  40ca04:	afbf001c 	sw	ra,28(sp)
  40ca08:	afbe0018 	sw	s8,24(sp)
  40ca0c:	03a0f021 	move	s8,sp
  40ca10:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:496
    return strchr(path, '/');
  40ca14:	8fc40020 	lw	a0,32(s8)
  40ca18:	2405002f 	li	a1,47
  40ca1c:	0c1053f4 	jal	414fd0 <strchr@plt>
  40ca20:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:497
}
  40ca24:	03c0e821 	move	sp,s8
  40ca28:	8fbf001c 	lw	ra,28(sp)
  40ca2c:	8fbe0018 	lw	s8,24(sp)
  40ca30:	27bd0020 	addiu	sp,sp,32
  40ca34:	03e00008 	jr	ra
  40ca38:	00000000 	nop

0040ca3c <__swap_uint32>:
__swap_uint32():
/home_a/ppchen/adb/file_sync_service.h:29
/* ADB:auto fix endian.[ */
//#ifdef HAVE_BIG_ENDIAN
#if 1
/* ADB:auto fix endian.] */
static inline unsigned __swap_uint32(unsigned x) 
{
  40ca3c:	27bdfff8 	addiu	sp,sp,-8
  40ca40:	afbe0004 	sw	s8,4(sp)
  40ca44:	03a0f021 	move	s8,sp
  40ca48:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/file_sync_service.h:31
	/* ADB:auto fix endian.[ */
    if(g_is_big_endian){
  40ca4c:	3c020042 	lui	v0,0x42
  40ca50:	8c425808 	lw	v0,22536(v0)
  40ca54:	10400011 	beqz	v0,40ca9c <__swap_uint32+0x60>
  40ca58:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.h:32
        return (((x) & 0xFF000000) >> 24)
  40ca5c:	8fc20008 	lw	v0,8(s8)
  40ca60:	00021e02 	srl	v1,v0,0x18
/home_a/ppchen/adb/file_sync_service.h:33
            | (((x) & 0x00FF0000) >> 8)
  40ca64:	8fc40008 	lw	a0,8(s8)
  40ca68:	3c0200ff 	lui	v0,0xff
  40ca6c:	00821024 	and	v0,a0,v0
  40ca70:	00021202 	srl	v0,v0,0x8
  40ca74:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/file_sync_service.h:34
            | (((x) & 0x0000FF00) << 8)
  40ca78:	8fc20008 	lw	v0,8(s8)
  40ca7c:	3042ff00 	andi	v0,v0,0xff00
  40ca80:	00021200 	sll	v0,v0,0x8
  40ca84:	00621825 	or	v1,v1,v0
/home_a/ppchen/adb/file_sync_service.h:35
            | (((x) & 0x000000FF) << 24);
  40ca88:	8fc20008 	lw	v0,8(s8)
  40ca8c:	00021600 	sll	v0,v0,0x18
/home_a/ppchen/adb/file_sync_service.h:32
/* ADB:auto fix endian.] */
static inline unsigned __swap_uint32(unsigned x) 
{
	/* ADB:auto fix endian.[ */
    if(g_is_big_endian){
        return (((x) & 0xFF000000) >> 24)
  40ca90:	00621025 	or	v0,v1,v0
  40ca94:	10000002 	b	40caa0 <__swap_uint32+0x64>
  40ca98:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.h:37
            | (((x) & 0x00FF0000) >> 8)
            | (((x) & 0x0000FF00) << 8)
            | (((x) & 0x000000FF) << 24);
    }else{
        return x;
  40ca9c:	8fc20008 	lw	v0,8(s8)
/home_a/ppchen/adb/file_sync_service.h:40
    }
	/* ADB:auto fix endian.] */
}
  40caa0:	03c0e821 	move	sp,s8
  40caa4:	8fbe0004 	lw	s8,4(sp)
  40caa8:	27bd0008 	addiu	sp,sp,8
  40caac:	03e00008 	jr	ra
  40cab0:	00000000 	nop

0040cab4 <MKID>:
MKID():
/home_a/ppchen/adb/file_sync_service.h:47
#define ltohl(x) __swap_uint32(x)
/* ADB:auto fix endian.[ */
//#define MKID(a,b,c,d) ((d) | ((c) << 8) | ((b) << 16) | ((a) << 24))
/* ADB:auto fix endian.] */
static inline unsigned MKID(unsigned a, unsigned b, unsigned c, unsigned d)
{
  40cab4:	27bdfff8 	addiu	sp,sp,-8
  40cab8:	afbe0004 	sw	s8,4(sp)
  40cabc:	03a0f021 	move	s8,sp
  40cac0:	afc40008 	sw	a0,8(s8)
  40cac4:	afc5000c 	sw	a1,12(s8)
  40cac8:	afc60010 	sw	a2,16(s8)
  40cacc:	afc70014 	sw	a3,20(s8)
/home_a/ppchen/adb/file_sync_service.h:48
    if(g_is_big_endian){
  40cad0:	3c020042 	lui	v0,0x42
  40cad4:	8c425808 	lw	v0,22536(v0)
  40cad8:	1040000d 	beqz	v0,40cb10 <MKID+0x5c>
  40cadc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.h:49
        return ((d) | ((c) << 8) | ((b) << 16) | ((a) << 24));
  40cae0:	8fc20010 	lw	v0,16(s8)
  40cae4:	00021a00 	sll	v1,v0,0x8
  40cae8:	8fc20014 	lw	v0,20(s8)
  40caec:	00621825 	or	v1,v1,v0
  40caf0:	8fc2000c 	lw	v0,12(s8)
  40caf4:	00021400 	sll	v0,v0,0x10
  40caf8:	00621825 	or	v1,v1,v0
  40cafc:	8fc20008 	lw	v0,8(s8)
  40cb00:	00021600 	sll	v0,v0,0x18
  40cb04:	00621025 	or	v0,v1,v0
  40cb08:	1000000b 	b	40cb38 <MKID+0x84>
  40cb0c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.h:51
    }else{
        return ((a) | ((b) << 8) | ((c) << 16) | ((d) << 24));
  40cb10:	8fc2000c 	lw	v0,12(s8)
  40cb14:	00021a00 	sll	v1,v0,0x8
  40cb18:	8fc20008 	lw	v0,8(s8)
  40cb1c:	00621825 	or	v1,v1,v0
  40cb20:	8fc20010 	lw	v0,16(s8)
  40cb24:	00021400 	sll	v0,v0,0x10
  40cb28:	00621825 	or	v1,v1,v0
  40cb2c:	8fc20014 	lw	v0,20(s8)
  40cb30:	00021600 	sll	v0,v0,0x18
  40cb34:	00621025 	or	v0,v1,v0
/home_a/ppchen/adb/file_sync_service.h:53
    }
}
  40cb38:	03c0e821 	move	sp,s8
  40cb3c:	8fbe0004 	lw	s8,4(sp)
  40cb40:	27bd0008 	addiu	sp,sp,8
  40cb44:	03e00008 	jr	ra
  40cb48:	00000000 	nop

0040cb4c <mkdirs>:
mkdirs():
/home_a/ppchen/adb/file_sync_service.c:35
#define TRACE_TAG  TRACE_SYNC
#include "adb.h"
#include "file_sync_service.h"

static int mkdirs(char *name)
{
  40cb4c:	27bdffc8 	addiu	sp,sp,-56
  40cb50:	afbf0034 	sw	ra,52(sp)
  40cb54:	afbe0030 	sw	s8,48(sp)
  40cb58:	afb0002c 	sw	s0,44(sp)
  40cb5c:	03a0f021 	move	s8,sp
  40cb60:	afc40038 	sw	a0,56(s8)
/home_a/ppchen/adb/file_sync_service.c:37
    int ret;
    char *x = name + 1;
  40cb64:	8fc20038 	lw	v0,56(s8)
  40cb68:	24420001 	addiu	v0,v0,1
  40cb6c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:39

    if(name[0] != '/') return -1;
  40cb70:	8fc20038 	lw	v0,56(s8)
  40cb74:	80430000 	lb	v1,0(v0)
  40cb78:	2402002f 	li	v0,47
  40cb7c:	10620004 	beq	v1,v0,40cb90 <mkdirs+0x44>
  40cb80:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:39 (discriminator 1)
  40cb84:	2402ffff 	li	v0,-1
  40cb88:	1000005c 	b	40ccfc <mkdirs+0x1b0>
  40cb8c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:42

    for(;;) {
        x = adb_dirstart(x);
  40cb90:	8fc40018 	lw	a0,24(s8)
  40cb94:	0c103280 	jal	40ca00 <adb_dirstart>
  40cb98:	00000000 	nop
  40cb9c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:43
        if(x == 0) return 0;
  40cba0:	8fc20018 	lw	v0,24(s8)
  40cba4:	14400004 	bnez	v0,40cbb8 <mkdirs+0x6c>
  40cba8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:43 (discriminator 1)
  40cbac:	00001021 	move	v0,zero
  40cbb0:	10000052 	b	40ccfc <mkdirs+0x1b0>
  40cbb4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:44
        *x = 0;
  40cbb8:	8fc20018 	lw	v0,24(s8)
  40cbbc:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/file_sync_service.c:45
        ret = adb_mkdir(name, 0775);
  40cbc0:	8fc40038 	lw	a0,56(s8)
  40cbc4:	240501fd 	li	a1,509
  40cbc8:	0c10326f 	jal	40c9bc <adb_mkdir>
  40cbcc:	00000000 	nop
  40cbd0:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:46
        if((ret < 0) && (errno != EEXIST)) {
  40cbd4:	8fc2001c 	lw	v0,28(s8)
  40cbd8:	04410040 	bgez	v0,40ccdc <mkdirs+0x190>
  40cbdc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:46 (discriminator 1)
  40cbe0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40cbe4:	00000000 	nop
  40cbe8:	8c430000 	lw	v1,0(v0)
  40cbec:	24020011 	li	v0,17
  40cbf0:	1062003a 	beq	v1,v0,40ccdc <mkdirs+0x190>
  40cbf4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:47 (discriminator 1)
            D("mkdir(\"%s\") -> %s\n", name, strerror(errno));
  40cbf8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40cbfc:	00000000 	nop
  40cc00:	8c420000 	lw	v0,0(v0)
  40cc04:	afc20020 	sw	v0,32(s8)
  40cc08:	3c020042 	lui	v0,0x42
  40cc0c:	244457f0 	addiu	a0,v0,22512
  40cc10:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40cc14:	00000000 	nop
  40cc18:	3c020042 	lui	v0,0x42
  40cc1c:	8c4257c4 	lw	v0,22468(v0)
  40cc20:	00402021 	move	a0,v0
  40cc24:	3c020041 	lui	v0,0x41
  40cc28:	24453e30 	addiu	a1,v0,15920
  40cc2c:	3c020041 	lui	v0,0x41
  40cc30:	24463e3c 	addiu	a2,v0,15932
  40cc34:	3c020041 	lui	v0,0x41
  40cc38:	2447425c 	addiu	a3,v0,16988
  40cc3c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40cc40:	00000000 	nop
  40cc44:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40cc48:	00000000 	nop
  40cc4c:	8fc30020 	lw	v1,32(s8)
  40cc50:	ac430000 	sw	v1,0(v0)
  40cc54:	3c020042 	lui	v0,0x42
  40cc58:	8c5057c4 	lw	s0,22468(v0)
  40cc5c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40cc60:	00000000 	nop
  40cc64:	8c420000 	lw	v0,0(v0)
  40cc68:	00402021 	move	a0,v0
  40cc6c:	0c1053f8 	jal	414fe0 <strerror@plt>
  40cc70:	00000000 	nop
  40cc74:	02002021 	move	a0,s0
  40cc78:	3c030041 	lui	v1,0x41
  40cc7c:	24653e50 	addiu	a1,v1,15952
  40cc80:	8fc60038 	lw	a2,56(s8)
  40cc84:	00403821 	move	a3,v0
  40cc88:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40cc8c:	00000000 	nop
  40cc90:	3c020042 	lui	v0,0x42
  40cc94:	8c4257c4 	lw	v0,22468(v0)
  40cc98:	00402021 	move	a0,v0
  40cc9c:	0c1053a8 	jal	414ea0 <fflush@plt>
  40cca0:	00000000 	nop
  40cca4:	3c020042 	lui	v0,0x42
  40cca8:	244457f0 	addiu	a0,v0,22512
  40ccac:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40ccb0:	00000000 	nop
  40ccb4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ccb8:	00000000 	nop
  40ccbc:	8fc30020 	lw	v1,32(s8)
  40ccc0:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:48 (discriminator 1)
            *x = '/';
  40ccc4:	8fc20018 	lw	v0,24(s8)
  40ccc8:	2403002f 	li	v1,47
  40cccc:	a0430000 	sb	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:49 (discriminator 1)
            return ret;
  40ccd0:	8fc2001c 	lw	v0,28(s8)
  40ccd4:	10000009 	b	40ccfc <mkdirs+0x1b0>
  40ccd8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:51
        }
        *x++ = '/';
  40ccdc:	8fc20018 	lw	v0,24(s8)
  40cce0:	2403002f 	li	v1,47
  40cce4:	a0430000 	sb	v1,0(v0)
  40cce8:	8fc20018 	lw	v0,24(s8)
  40ccec:	24420001 	addiu	v0,v0,1
  40ccf0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:52
    }
  40ccf4:	1000ffa6 	b	40cb90 <mkdirs+0x44>
  40ccf8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:54
    return 0;
}
  40ccfc:	03c0e821 	move	sp,s8
  40cd00:	8fbf0034 	lw	ra,52(sp)
  40cd04:	8fbe0030 	lw	s8,48(sp)
  40cd08:	8fb0002c 	lw	s0,44(sp)
  40cd0c:	27bd0038 	addiu	sp,sp,56
  40cd10:	03e00008 	jr	ra
  40cd14:	00000000 	nop

0040cd18 <do_stat>:
do_stat():
/home_a/ppchen/adb/file_sync_service.c:57

static int do_stat(int s, const char *path)
{
  40cd18:	27bdff30 	addiu	sp,sp,-208
  40cd1c:	afbf00cc 	sw	ra,204(sp)
  40cd20:	afbe00c8 	sw	s8,200(sp)
  40cd24:	03a0f021 	move	s8,sp
  40cd28:	afc400d0 	sw	a0,208(s8)
  40cd2c:	afc500d4 	sw	a1,212(s8)
/home_a/ppchen/adb/file_sync_service.c:60
    syncmsg msg;
    struct stat st;
    printf("<====> do_stat enter \n");
  40cd30:	3c020041 	lui	v0,0x41
  40cd34:	24443e64 	addiu	a0,v0,15972
  40cd38:	0c10540c 	jal	415030 <puts@plt>
  40cd3c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:61
    msg.stat.id = ID_STAT;
  40cd40:	24040053 	li	a0,83
  40cd44:	24050054 	li	a1,84
  40cd48:	24060041 	li	a2,65
  40cd4c:	24070054 	li	a3,84
  40cd50:	0c1032ad 	jal	40cab4 <MKID>
  40cd54:	00000000 	nop
  40cd58:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:63

    if(lstat(path, &st)) {
  40cd5c:	27c20030 	addiu	v0,s8,48
  40cd60:	8fc400d4 	lw	a0,212(s8)
  40cd64:	00402821 	move	a1,v0
  40cd68:	0c1053c8 	jal	414f20 <lstat@plt>
  40cd6c:	00000000 	nop
  40cd70:	10400006 	beqz	v0,40cd8c <do_stat+0x74>
  40cd74:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:64
        msg.stat.mode = 0;
  40cd78:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/file_sync_service.c:65
        msg.stat.size = 0;
  40cd7c:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/file_sync_service.c:66
        msg.stat.time = 0;
  40cd80:	afc00024 	sw	zero,36(s8)
  40cd84:	10000010 	b	40cdc8 <do_stat+0xb0>
  40cd88:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:68
    } else {
        msg.stat.mode = htoll(st.st_mode);
  40cd8c:	8fc20044 	lw	v0,68(s8)
  40cd90:	00402021 	move	a0,v0
  40cd94:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cd98:	00000000 	nop
  40cd9c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:69
        msg.stat.size = htoll(st.st_size);
  40cda0:	8fc20064 	lw	v0,100(s8)
  40cda4:	00402021 	move	a0,v0
  40cda8:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cdac:	00000000 	nop
  40cdb0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:70
        msg.stat.time = htoll(st.st_mtime);
  40cdb4:	8fc20074 	lw	v0,116(s8)
  40cdb8:	00402021 	move	a0,v0
  40cdbc:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cdc0:	00000000 	nop
  40cdc4:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/file_sync_service.c:73
    }

    printf("<====> do_stat writex \n");
  40cdc8:	3c020041 	lui	v0,0x41
  40cdcc:	24443e7c 	addiu	a0,v0,15996
  40cdd0:	0c10540c 	jal	415030 <puts@plt>
  40cdd4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:74
    return writex(s, &msg.stat, sizeof(msg.stat));
  40cdd8:	8fc400d0 	lw	a0,208(s8)
  40cddc:	27c20018 	addiu	v0,s8,24
  40cde0:	00402821 	move	a1,v0
  40cde4:	24060010 	li	a2,16
  40cde8:	0c101f4e 	jal	407d38 <writex>
  40cdec:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:76
    printf("<====> do_stat writex  end\n");
}
  40cdf0:	03c0e821 	move	sp,s8
  40cdf4:	8fbf00cc 	lw	ra,204(sp)
  40cdf8:	8fbe00c8 	lw	s8,200(sp)
  40cdfc:	27bd00d0 	addiu	sp,sp,208
  40ce00:	03e00008 	jr	ra
  40ce04:	00000000 	nop

0040ce08 <do_list>:
do_list():
/home_a/ppchen/adb/file_sync_service.c:79

static int do_list(int s, const char *path)
{
  40ce08:	27bdfa18 	addiu	sp,sp,-1512
  40ce0c:	afbf05e4 	sw	ra,1508(sp)
  40ce10:	afbe05e0 	sw	s8,1504(sp)
  40ce14:	03a0f021 	move	s8,sp
  40ce18:	afc405e8 	sw	a0,1512(s8)
  40ce1c:	afc505ec 	sw	a1,1516(s8)
/home_a/ppchen/adb/file_sync_service.c:89
    int len;

    char tmp[1024 + 256 + 1];
    char *fname;

    len = strlen(path);
  40ce20:	8fc405ec 	lw	a0,1516(s8)
  40ce24:	0c10531c 	jal	414c70 <strlen@plt>
  40ce28:	00000000 	nop
  40ce2c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:90
    memcpy(tmp, path, len);
  40ce30:	8fc20018 	lw	v0,24(s8)
  40ce34:	27c300dc 	addiu	v1,s8,220
  40ce38:	00602021 	move	a0,v1
  40ce3c:	8fc505ec 	lw	a1,1516(s8)
  40ce40:	00403021 	move	a2,v0
  40ce44:	0c1052d8 	jal	414b60 <memcpy@plt>
  40ce48:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:91
    tmp[len] = '/';
  40ce4c:	8fc20018 	lw	v0,24(s8)
  40ce50:	27c30018 	addiu	v1,s8,24
  40ce54:	00621021 	addu	v0,v1,v0
  40ce58:	2403002f 	li	v1,47
  40ce5c:	a04300c4 	sb	v1,196(v0)
/home_a/ppchen/adb/file_sync_service.c:92
    fname = tmp + len + 1;
  40ce60:	8fc20018 	lw	v0,24(s8)
  40ce64:	24420001 	addiu	v0,v0,1
  40ce68:	27c300dc 	addiu	v1,s8,220
  40ce6c:	00621021 	addu	v0,v1,v0
  40ce70:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:94

    msg.dent.id = ID_DENT;
  40ce74:	24040044 	li	a0,68
  40ce78:	24050045 	li	a1,69
  40ce7c:	2406004e 	li	a2,78
  40ce80:	24070054 	li	a3,84
  40ce84:	0c1032ad 	jal	40cab4 <MKID>
  40ce88:	00000000 	nop
  40ce8c:	afc200c8 	sw	v0,200(s8)
/home_a/ppchen/adb/file_sync_service.c:96

    d = opendir(path);
  40ce90:	8fc405ec 	lw	a0,1516(s8)
  40ce94:	0c105324 	jal	414c90 <opendir@plt>
  40ce98:	00000000 	nop
  40ce9c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:97
    if(d == 0) goto done;
  40cea0:	8fc20020 	lw	v0,32(s8)
  40cea4:	14400045 	bnez	v0,40cfbc <do_list+0x1b4>
  40cea8:	00000000 	nop
  40ceac:	1000004d 	b	40cfe4 <do_list+0x1dc>
  40ceb0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:100

    while((de = readdir(d))) {
        int len = strlen(de->d_name);
  40ceb4:	8fc20024 	lw	v0,36(s8)
  40ceb8:	2442000b 	addiu	v0,v0,11
  40cebc:	00402021 	move	a0,v0
  40cec0:	0c10531c 	jal	414c70 <strlen@plt>
  40cec4:	00000000 	nop
  40cec8:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/file_sync_service.c:104

            /* not supposed to be possible, but
               if it does happen, let's not buffer overrun */
        if(len > 256) continue;
  40cecc:	8fc20028 	lw	v0,40(s8)
  40ced0:	28420101 	slti	v0,v0,257
  40ced4:	10400038 	beqz	v0,40cfb8 <do_list+0x1b0>
  40ced8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:106

        strcpy(fname, de->d_name);
  40cedc:	8fc20024 	lw	v0,36(s8)
  40cee0:	2442000b 	addiu	v0,v0,11
  40cee4:	8fc4001c 	lw	a0,28(s8)
  40cee8:	00402821 	move	a1,v0
  40ceec:	0c105418 	jal	415060 <strcpy@plt>
  40cef0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:107
        if(lstat(tmp, &st) == 0) {
  40cef4:	27c300dc 	addiu	v1,s8,220
  40cef8:	27c20030 	addiu	v0,s8,48
  40cefc:	00602021 	move	a0,v1
  40cf00:	00402821 	move	a1,v0
  40cf04:	0c1053c8 	jal	414f20 <lstat@plt>
  40cf08:	00000000 	nop
  40cf0c:	1440002b 	bnez	v0,40cfbc <do_list+0x1b4>
  40cf10:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:108
            msg.dent.mode = htoll(st.st_mode);
  40cf14:	8fc20044 	lw	v0,68(s8)
  40cf18:	00402021 	move	a0,v0
  40cf1c:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cf20:	00000000 	nop
  40cf24:	afc200cc 	sw	v0,204(s8)
/home_a/ppchen/adb/file_sync_service.c:109
            msg.dent.size = htoll(st.st_size);
  40cf28:	8fc20064 	lw	v0,100(s8)
  40cf2c:	00402021 	move	a0,v0
  40cf30:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cf34:	00000000 	nop
  40cf38:	afc200d0 	sw	v0,208(s8)
/home_a/ppchen/adb/file_sync_service.c:110
            msg.dent.time = htoll(st.st_mtime);
  40cf3c:	8fc20074 	lw	v0,116(s8)
  40cf40:	00402021 	move	a0,v0
  40cf44:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cf48:	00000000 	nop
  40cf4c:	afc200d4 	sw	v0,212(s8)
/home_a/ppchen/adb/file_sync_service.c:111
            msg.dent.namelen = htoll(len);
  40cf50:	8fc20028 	lw	v0,40(s8)
  40cf54:	00402021 	move	a0,v0
  40cf58:	0c10328f 	jal	40ca3c <__swap_uint32>
  40cf5c:	00000000 	nop
  40cf60:	afc200d8 	sw	v0,216(s8)
/home_a/ppchen/adb/file_sync_service.c:113

            if(writex(s, &msg.dent, sizeof(msg.dent)) ||
  40cf64:	27c200c8 	addiu	v0,s8,200
  40cf68:	8fc405e8 	lw	a0,1512(s8)
  40cf6c:	00402821 	move	a1,v0
  40cf70:	24060014 	li	a2,20
  40cf74:	0c101f4e 	jal	407d38 <writex>
  40cf78:	00000000 	nop
  40cf7c:	1440000b 	bnez	v0,40cfac <do_list+0x1a4>
  40cf80:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:114 (discriminator 1)
               writex(s, de->d_name, len)) {
  40cf84:	8fc20024 	lw	v0,36(s8)
  40cf88:	2443000b 	addiu	v1,v0,11
  40cf8c:	8fc20028 	lw	v0,40(s8)
  40cf90:	8fc405e8 	lw	a0,1512(s8)
  40cf94:	00602821 	move	a1,v1
  40cf98:	00403021 	move	a2,v0
  40cf9c:	0c101f4e 	jal	407d38 <writex>
  40cfa0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:113 (discriminator 1)
            msg.dent.mode = htoll(st.st_mode);
            msg.dent.size = htoll(st.st_size);
            msg.dent.time = htoll(st.st_mtime);
            msg.dent.namelen = htoll(len);

            if(writex(s, &msg.dent, sizeof(msg.dent)) ||
  40cfa4:	10400005 	beqz	v0,40cfbc <do_list+0x1b4>
  40cfa8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:115
               writex(s, de->d_name, len)) {
                return -1;
  40cfac:	2402ffff 	li	v0,-1
  40cfb0:	1000001d 	b	40d028 <do_list+0x220>
  40cfb4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:104
    while((de = readdir(d))) {
        int len = strlen(de->d_name);

            /* not supposed to be possible, but
               if it does happen, let's not buffer overrun */
        if(len > 256) continue;
  40cfb8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:99 (discriminator 1)
    msg.dent.id = ID_DENT;

    d = opendir(path);
    if(d == 0) goto done;

    while((de = readdir(d))) {
  40cfbc:	8fc40020 	lw	a0,32(s8)
  40cfc0:	0c1053f0 	jal	414fc0 <readdir@plt>
  40cfc4:	00000000 	nop
  40cfc8:	afc20024 	sw	v0,36(s8)
  40cfcc:	8fc20024 	lw	v0,36(s8)
  40cfd0:	1440ffb8 	bnez	v0,40ceb4 <do_list+0xac>
  40cfd4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:120
                return -1;
            }
        }
    }

    closedir(d);
  40cfd8:	8fc40020 	lw	a0,32(s8)
  40cfdc:	0c105370 	jal	414dc0 <closedir@plt>
  40cfe0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:123

done:
    msg.dent.id = ID_DONE;
  40cfe4:	24040044 	li	a0,68
  40cfe8:	2405004f 	li	a1,79
  40cfec:	2406004e 	li	a2,78
  40cff0:	24070045 	li	a3,69
  40cff4:	0c1032ad 	jal	40cab4 <MKID>
  40cff8:	00000000 	nop
  40cffc:	afc200c8 	sw	v0,200(s8)
/home_a/ppchen/adb/file_sync_service.c:124
    msg.dent.mode = 0;
  40d000:	afc000cc 	sw	zero,204(s8)
/home_a/ppchen/adb/file_sync_service.c:125
    msg.dent.size = 0;
  40d004:	afc000d0 	sw	zero,208(s8)
/home_a/ppchen/adb/file_sync_service.c:126
    msg.dent.time = 0;
  40d008:	afc000d4 	sw	zero,212(s8)
/home_a/ppchen/adb/file_sync_service.c:127
    msg.dent.namelen = 0;
  40d00c:	afc000d8 	sw	zero,216(s8)
/home_a/ppchen/adb/file_sync_service.c:128
    return writex(s, &msg.dent, sizeof(msg.dent));
  40d010:	27c200c8 	addiu	v0,s8,200
  40d014:	8fc405e8 	lw	a0,1512(s8)
  40d018:	00402821 	move	a1,v0
  40d01c:	24060014 	li	a2,20
  40d020:	0c101f4e 	jal	407d38 <writex>
  40d024:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:129
}
  40d028:	03c0e821 	move	sp,s8
  40d02c:	8fbf05e4 	lw	ra,1508(sp)
  40d030:	8fbe05e0 	lw	s8,1504(sp)
  40d034:	27bd05e8 	addiu	sp,sp,1512
  40d038:	03e00008 	jr	ra
  40d03c:	00000000 	nop

0040d040 <fail_message>:
fail_message():
/home_a/ppchen/adb/file_sync_service.c:132

static int fail_message(int s, const char *reason)
{
  40d040:	27bdffc0 	addiu	sp,sp,-64
  40d044:	afbf003c 	sw	ra,60(sp)
  40d048:	afbe0038 	sw	s8,56(sp)
  40d04c:	03a0f021 	move	s8,sp
  40d050:	afc40040 	sw	a0,64(s8)
  40d054:	afc50044 	sw	a1,68(s8)
/home_a/ppchen/adb/file_sync_service.c:134
    syncmsg msg;
    int len = strlen(reason);
  40d058:	8fc40044 	lw	a0,68(s8)
  40d05c:	0c10531c 	jal	414c70 <strlen@plt>
  40d060:	00000000 	nop
  40d064:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:136

    D("sync: failure: %s\n", reason);
  40d068:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d06c:	00000000 	nop
  40d070:	8c420000 	lw	v0,0(v0)
  40d074:	afc2001c 	sw	v0,28(s8)
  40d078:	3c020042 	lui	v0,0x42
  40d07c:	244457f0 	addiu	a0,v0,22512
  40d080:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40d084:	00000000 	nop
  40d088:	3c020042 	lui	v0,0x42
  40d08c:	8c4257c4 	lw	v0,22468(v0)
  40d090:	00402021 	move	a0,v0
  40d094:	3c020041 	lui	v0,0x41
  40d098:	24453e30 	addiu	a1,v0,15920
  40d09c:	3c020041 	lui	v0,0x41
  40d0a0:	24463e3c 	addiu	a2,v0,15932
  40d0a4:	3c020041 	lui	v0,0x41
  40d0a8:	2447424c 	addiu	a3,v0,16972
  40d0ac:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40d0b0:	00000000 	nop
  40d0b4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d0b8:	00000000 	nop
  40d0bc:	8fc3001c 	lw	v1,28(s8)
  40d0c0:	ac430000 	sw	v1,0(v0)
  40d0c4:	3c020042 	lui	v0,0x42
  40d0c8:	8c4257c4 	lw	v0,22468(v0)
  40d0cc:	00402021 	move	a0,v0
  40d0d0:	3c020041 	lui	v0,0x41
  40d0d4:	24453e94 	addiu	a1,v0,16020
  40d0d8:	8fc60044 	lw	a2,68(s8)
  40d0dc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40d0e0:	00000000 	nop
  40d0e4:	3c020042 	lui	v0,0x42
  40d0e8:	8c4257c4 	lw	v0,22468(v0)
  40d0ec:	00402021 	move	a0,v0
  40d0f0:	0c1053a8 	jal	414ea0 <fflush@plt>
  40d0f4:	00000000 	nop
  40d0f8:	3c020042 	lui	v0,0x42
  40d0fc:	244457f0 	addiu	a0,v0,22512
  40d100:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40d104:	00000000 	nop
  40d108:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d10c:	00000000 	nop
  40d110:	8fc3001c 	lw	v1,28(s8)
  40d114:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:137
    return 0;
  40d118:	00001021 	move	v0,zero
/home_a/ppchen/adb/file_sync_service.c:146
       writex(s, reason, len)) {
        return -1;
    } else {
        return 0;
    }
}
  40d11c:	03c0e821 	move	sp,s8
  40d120:	8fbf003c 	lw	ra,60(sp)
  40d124:	8fbe0038 	lw	s8,56(sp)
  40d128:	27bd0040 	addiu	sp,sp,64
  40d12c:	03e00008 	jr	ra
  40d130:	00000000 	nop

0040d134 <fail_errno>:
fail_errno():
/home_a/ppchen/adb/file_sync_service.c:149

static int fail_errno(int s)
{
  40d134:	27bdffe0 	addiu	sp,sp,-32
  40d138:	afbf001c 	sw	ra,28(sp)
  40d13c:	afbe0018 	sw	s8,24(sp)
  40d140:	03a0f021 	move	s8,sp
  40d144:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:150
    return fail_message(s, strerror(errno));
  40d148:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d14c:	00000000 	nop
  40d150:	8c420000 	lw	v0,0(v0)
  40d154:	00402021 	move	a0,v0
  40d158:	0c1053f8 	jal	414fe0 <strerror@plt>
  40d15c:	00000000 	nop
  40d160:	8fc40020 	lw	a0,32(s8)
  40d164:	00402821 	move	a1,v0
  40d168:	0c103410 	jal	40d040 <fail_message>
  40d16c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:151
}
  40d170:	03c0e821 	move	sp,s8
  40d174:	8fbf001c 	lw	ra,28(sp)
  40d178:	8fbe0018 	lw	s8,24(sp)
  40d17c:	27bd0020 	addiu	sp,sp,32
  40d180:	03e00008 	jr	ra
  40d184:	00000000 	nop

0040d188 <handle_send_file>:
handle_send_file():
/home_a/ppchen/adb/file_sync_service.c:154

static int handle_send_file(int s, char *path, mode_t mode, char *buffer)
{
  40d188:	27bdffa8 	addiu	sp,sp,-88
  40d18c:	afbf0054 	sw	ra,84(sp)
  40d190:	afbe0050 	sw	s8,80(sp)
  40d194:	afb0004c 	sw	s0,76(sp)
  40d198:	03a0f021 	move	s8,sp
  40d19c:	afc40058 	sw	a0,88(s8)
  40d1a0:	afc5005c 	sw	a1,92(s8)
  40d1a4:	afc60060 	sw	a2,96(s8)
  40d1a8:	afc70064 	sw	a3,100(s8)
/home_a/ppchen/adb/file_sync_service.c:156
    syncmsg msg;
    unsigned int timestamp = 0;
  40d1ac:	afc0001c 	sw	zero,28(s8)
/home_a/ppchen/adb/file_sync_service.c:159
    int fd;

    printf("<====> enter handle_send_file \n");
  40d1b0:	3c020041 	lui	v0,0x41
  40d1b4:	24443ea8 	addiu	a0,v0,16040
  40d1b8:	0c10540c 	jal	415030 <puts@plt>
  40d1bc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:160
    printf("<====> enter handle_send_file s=%d \n", s);
  40d1c0:	3c020041 	lui	v0,0x41
  40d1c4:	24443ec8 	addiu	a0,v0,16072
  40d1c8:	8fc50058 	lw	a1,88(s8)
  40d1cc:	0c105400 	jal	415000 <printf@plt>
  40d1d0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:161
    printf("<====> enter handle_send_file path=%s \n", path);
  40d1d4:	3c020041 	lui	v0,0x41
  40d1d8:	24443ef0 	addiu	a0,v0,16112
  40d1dc:	8fc5005c 	lw	a1,92(s8)
  40d1e0:	0c105400 	jal	415000 <printf@plt>
  40d1e4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:162
   printf("<====> enter handle_send_file mode=%d \n", mode);
  40d1e8:	3c020041 	lui	v0,0x41
  40d1ec:	24443f18 	addiu	a0,v0,16152
  40d1f0:	8fc50060 	lw	a1,96(s8)
  40d1f4:	0c105400 	jal	415000 <printf@plt>
  40d1f8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:164
   
    fd = adb_open_mode(path, O_WRONLY | O_CREAT | O_EXCL, mode);
  40d1fc:	8fc20060 	lw	v0,96(s8)
  40d200:	8fc4005c 	lw	a0,92(s8)
  40d204:	24050501 	li	a1,1281
  40d208:	00403021 	move	a2,v0
  40d20c:	0c103214 	jal	40c850 <adb_open_mode>
  40d210:	00000000 	nop
  40d214:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:165
    if(fd < 0 && errno == ENOENT) {
  40d218:	8fc20018 	lw	v0,24(s8)
  40d21c:	04410011 	bgez	v0,40d264 <handle_send_file+0xdc>
  40d220:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:165 (discriminator 1)
  40d224:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d228:	00000000 	nop
  40d22c:	8c430000 	lw	v1,0(v0)
  40d230:	24020002 	li	v0,2
  40d234:	1462000b 	bne	v1,v0,40d264 <handle_send_file+0xdc>
  40d238:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:166
        mkdirs(path);
  40d23c:	8fc4005c 	lw	a0,92(s8)
  40d240:	0c1032d3 	jal	40cb4c <mkdirs>
  40d244:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:167
        fd = adb_open_mode(path, O_WRONLY | O_CREAT | O_EXCL, mode);
  40d248:	8fc20060 	lw	v0,96(s8)
  40d24c:	8fc4005c 	lw	a0,92(s8)
  40d250:	24050501 	li	a1,1281
  40d254:	00403021 	move	a2,v0
  40d258:	0c103214 	jal	40c850 <adb_open_mode>
  40d25c:	00000000 	nop
  40d260:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:169
    }
    if(fd < 0 && errno == EEXIST) {
  40d264:	8fc20018 	lw	v0,24(s8)
  40d268:	0441000e 	bgez	v0,40d2a4 <handle_send_file+0x11c>
  40d26c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:169 (discriminator 1)
  40d270:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d274:	00000000 	nop
  40d278:	8c430000 	lw	v1,0(v0)
  40d27c:	24020011 	li	v0,17
  40d280:	14620008 	bne	v1,v0,40d2a4 <handle_send_file+0x11c>
  40d284:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:170
        fd = adb_open_mode(path, O_WRONLY, mode);
  40d288:	8fc20060 	lw	v0,96(s8)
  40d28c:	8fc4005c 	lw	a0,92(s8)
  40d290:	24050001 	li	a1,1
  40d294:	00403021 	move	a2,v0
  40d298:	0c103214 	jal	40c850 <adb_open_mode>
  40d29c:	00000000 	nop
  40d2a0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:172
    }
    if(fd < 0) {
  40d2a4:	8fc20018 	lw	v0,24(s8)
  40d2a8:	04410012 	bgez	v0,40d2f4 <handle_send_file+0x16c>
  40d2ac:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:173
	printf("<====> enter handle_send_file open fail!!!!\n");
  40d2b0:	3c020041 	lui	v0,0x41
  40d2b4:	24443f40 	addiu	a0,v0,16192
  40d2b8:	0c10540c 	jal	415030 <puts@plt>
  40d2bc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:174
        if(fail_errno(s))
  40d2c0:	8fc40058 	lw	a0,88(s8)
  40d2c4:	0c10344d 	jal	40d134 <fail_errno>
  40d2c8:	00000000 	nop
  40d2cc:	10400004 	beqz	v0,40d2e0 <handle_send_file+0x158>
  40d2d0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:175
            return -1;
  40d2d4:	2402ffff 	li	v0,-1
  40d2d8:	100000a4 	b	40d56c <handle_send_file+0x3e4>
  40d2dc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:176
        fd = -1;
  40d2e0:	2402ffff 	li	v0,-1
  40d2e4:	afc20018 	sw	v0,24(s8)
  40d2e8:	10000002 	b	40d2f4 <handle_send_file+0x16c>
  40d2ec:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:211
            adb_unlink(path);
            fd = -1;
            errno = saved_errno;
            if(fail_errno(s)) return -1;
        }
    }
  40d2f0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:182
    }

    for(;;) {
        unsigned int len;

        if(readx(s, &msg.data, sizeof(msg.data)))
  40d2f4:	27c20028 	addiu	v0,s8,40
  40d2f8:	8fc40058 	lw	a0,88(s8)
  40d2fc:	00402821 	move	a1,v0
  40d300:	24060008 	li	a2,8
  40d304:	0c101f12 	jal	407c48 <readx>
  40d308:	00000000 	nop
  40d30c:	14400089 	bnez	v0,40d534 <handle_send_file+0x3ac>
  40d310:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:185
            goto fail;

        if(msg.data.id != ID_DATA) {
  40d314:	8fd00028 	lw	s0,40(s8)
  40d318:	24040044 	li	a0,68
  40d31c:	24050041 	li	a1,65
  40d320:	24060054 	li	a2,84
  40d324:	24070041 	li	a3,65
  40d328:	0c1032ad 	jal	40cab4 <MKID>
  40d32c:	00000000 	nop
  40d330:	1202001c 	beq	s0,v0,40d3a4 <handle_send_file+0x21c>
  40d334:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:186
            if(msg.data.id == ID_DONE) {
  40d338:	8fd00028 	lw	s0,40(s8)
  40d33c:	24040044 	li	a0,68
  40d340:	2405004f 	li	a1,79
  40d344:	2406004e 	li	a2,78
  40d348:	24070045 	li	a3,69
  40d34c:	0c1032ad 	jal	40cab4 <MKID>
  40d350:	00000000 	nop
  40d354:	1602000c 	bne	s0,v0,40d388 <handle_send_file+0x200>
  40d358:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:187
                timestamp = ltohl(msg.data.size);
  40d35c:	8fc2002c 	lw	v0,44(s8)
  40d360:	00402021 	move	a0,v0
  40d364:	0c10328f 	jal	40ca3c <__swap_uint32>
  40d368:	00000000 	nop
  40d36c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:188
                break;
  40d370:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:213
            errno = saved_errno;
            if(fail_errno(s)) return -1;
        }
    }

    if(fd >= 0) {
  40d374:	8fc20018 	lw	v0,24(s8)
  40d378:	04400067 	bltz	v0,40d518 <handle_send_file+0x390>
  40d37c:	00000000 	nop
  40d380:	10000046 	b	40d49c <handle_send_file+0x314>
  40d384:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:190
        if(msg.data.id != ID_DATA) {
            if(msg.data.id == ID_DONE) {
                timestamp = ltohl(msg.data.size);
                break;
            }
            fail_message(s, "invalid data message");
  40d388:	8fc40058 	lw	a0,88(s8)
  40d38c:	3c020041 	lui	v0,0x41
  40d390:	24453f6c 	addiu	a1,v0,16236
  40d394:	0c103410 	jal	40d040 <fail_message>
  40d398:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:191
            goto fail;
  40d39c:	10000069 	b	40d544 <handle_send_file+0x3bc>
  40d3a0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:193
        }
        len = ltohl(msg.data.size);
  40d3a4:	8fc2002c 	lw	v0,44(s8)
  40d3a8:	00402021 	move	a0,v0
  40d3ac:	0c10328f 	jal	40ca3c <__swap_uint32>
  40d3b0:	00000000 	nop
  40d3b4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:194
        if(len > SYNC_DATA_MAX) {
  40d3b8:	8fc30020 	lw	v1,32(s8)
  40d3bc:	3c020001 	lui	v0,0x1
  40d3c0:	34420001 	ori	v0,v0,0x1
  40d3c4:	0062102b 	sltu	v0,v1,v0
  40d3c8:	14400008 	bnez	v0,40d3ec <handle_send_file+0x264>
  40d3cc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:195
            fail_message(s, "oversize data message");
  40d3d0:	8fc40058 	lw	a0,88(s8)
  40d3d4:	3c020041 	lui	v0,0x41
  40d3d8:	24453f84 	addiu	a1,v0,16260
  40d3dc:	0c103410 	jal	40d040 <fail_message>
  40d3e0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:196
            goto fail;
  40d3e4:	10000057 	b	40d544 <handle_send_file+0x3bc>
  40d3e8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:198
        }
        if(readx(s, buffer, len))
  40d3ec:	8fc40058 	lw	a0,88(s8)
  40d3f0:	8fc50064 	lw	a1,100(s8)
  40d3f4:	8fc60020 	lw	a2,32(s8)
  40d3f8:	0c101f12 	jal	407c48 <readx>
  40d3fc:	00000000 	nop
  40d400:	1440004f 	bnez	v0,40d540 <handle_send_file+0x3b8>
  40d404:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:201
            goto fail;

        if(fd < 0)
  40d408:	8fc20018 	lw	v0,24(s8)
  40d40c:	04400020 	bltz	v0,40d490 <handle_send_file+0x308>
  40d410:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:203
            continue;
        if(writex(fd, buffer, len)) {
  40d414:	8fc40018 	lw	a0,24(s8)
  40d418:	8fc50064 	lw	a1,100(s8)
  40d41c:	8fc60020 	lw	a2,32(s8)
  40d420:	0c101f4e 	jal	407d38 <writex>
  40d424:	00000000 	nop
  40d428:	1040ffb1 	beqz	v0,40d2f0 <handle_send_file+0x168>
  40d42c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:204
            int saved_errno = errno;
  40d430:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d434:	00000000 	nop
  40d438:	8c420000 	lw	v0,0(v0)
  40d43c:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/file_sync_service.c:205
            adb_close(fd);
  40d440:	8fc40018 	lw	a0,24(s8)
  40d444:	0c103241 	jal	40c904 <adb_close>
  40d448:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:206
            adb_unlink(path);
  40d44c:	8fc4005c 	lw	a0,92(s8)
  40d450:	0c103261 	jal	40c984 <adb_unlink>
  40d454:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:207
            fd = -1;
  40d458:	2402ffff 	li	v0,-1
  40d45c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:208
            errno = saved_errno;
  40d460:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d464:	00000000 	nop
  40d468:	8fc30024 	lw	v1,36(s8)
  40d46c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:209
            if(fail_errno(s)) return -1;
  40d470:	8fc40058 	lw	a0,88(s8)
  40d474:	0c10344d 	jal	40d134 <fail_errno>
  40d478:	00000000 	nop
  40d47c:	1040ff9c 	beqz	v0,40d2f0 <handle_send_file+0x168>
  40d480:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:209 (discriminator 1)
  40d484:	2402ffff 	li	v0,-1
  40d488:	10000038 	b	40d56c <handle_send_file+0x3e4>
  40d48c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:202
        }
        if(readx(s, buffer, len))
            goto fail;

        if(fd < 0)
            continue;
  40d490:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:211
            adb_unlink(path);
            fd = -1;
            errno = saved_errno;
            if(fail_errno(s)) return -1;
        }
    }
  40d494:	1000ff96 	b	40d2f0 <handle_send_file+0x168>
  40d498:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:215

    if(fd >= 0) {
        struct utimbuf u;
        adb_close(fd);
  40d49c:	8fc40018 	lw	a0,24(s8)
  40d4a0:	0c103241 	jal	40c904 <adb_close>
  40d4a4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:216
        u.actime = timestamp;
  40d4a8:	8fc2001c 	lw	v0,28(s8)
  40d4ac:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/file_sync_service.c:217
        u.modtime = timestamp;
  40d4b0:	8fc2001c 	lw	v0,28(s8)
  40d4b4:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/file_sync_service.c:218
        utime(path, &u);
  40d4b8:	27c2003c 	addiu	v0,s8,60
  40d4bc:	8fc4005c 	lw	a0,92(s8)
  40d4c0:	00402821 	move	a1,v0
  40d4c4:	0c105350 	jal	414d40 <utime@plt>
  40d4c8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:220

        msg.status.id = ID_OKAY;
  40d4cc:	2404004f 	li	a0,79
  40d4d0:	2405004b 	li	a1,75
  40d4d4:	24060041 	li	a2,65
  40d4d8:	24070059 	li	a3,89
  40d4dc:	0c1032ad 	jal	40cab4 <MKID>
  40d4e0:	00000000 	nop
  40d4e4:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/file_sync_service.c:221
        msg.status.msglen = 0;
  40d4e8:	afc0002c 	sw	zero,44(s8)
/home_a/ppchen/adb/file_sync_service.c:222
        if(writex(s, &msg.status, sizeof(msg.status)))
  40d4ec:	27c20028 	addiu	v0,s8,40
  40d4f0:	8fc40058 	lw	a0,88(s8)
  40d4f4:	00402821 	move	a1,v0
  40d4f8:	24060008 	li	a2,8
  40d4fc:	0c101f4e 	jal	407d38 <writex>
  40d500:	00000000 	nop
  40d504:	10400004 	beqz	v0,40d518 <handle_send_file+0x390>
  40d508:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:223
            return -1;
  40d50c:	2402ffff 	li	v0,-1
  40d510:	10000016 	b	40d56c <handle_send_file+0x3e4>
  40d514:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:226
    }

    printf("<====> enter handle_send_file success\n");
  40d518:	3c020041 	lui	v0,0x41
  40d51c:	24443f9c 	addiu	a0,v0,16284
  40d520:	0c10540c 	jal	415030 <puts@plt>
  40d524:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:227
    return 0;
  40d528:	00001021 	move	v0,zero
  40d52c:	1000000f 	b	40d56c <handle_send_file+0x3e4>
  40d530:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:183

    for(;;) {
        unsigned int len;

        if(readx(s, &msg.data, sizeof(msg.data)))
            goto fail;
  40d534:	00000000 	nop
  40d538:	10000002 	b	40d544 <handle_send_file+0x3bc>
  40d53c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:199
        if(len > SYNC_DATA_MAX) {
            fail_message(s, "oversize data message");
            goto fail;
        }
        if(readx(s, buffer, len))
            goto fail;
  40d540:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:230

    printf("<====> enter handle_send_file success\n");
    return 0;

fail:
    if(fd >= 0)
  40d544:	8fc20018 	lw	v0,24(s8)
  40d548:	04400004 	bltz	v0,40d55c <handle_send_file+0x3d4>
  40d54c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:231
        adb_close(fd);
  40d550:	8fc40018 	lw	a0,24(s8)
  40d554:	0c103241 	jal	40c904 <adb_close>
  40d558:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:232
    adb_unlink(path);
  40d55c:	8fc4005c 	lw	a0,92(s8)
  40d560:	0c103261 	jal	40c984 <adb_unlink>
  40d564:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:233
    return -1;
  40d568:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/file_sync_service.c:234
}
  40d56c:	03c0e821 	move	sp,s8
  40d570:	8fbf0054 	lw	ra,84(sp)
  40d574:	8fbe0050 	lw	s8,80(sp)
  40d578:	8fb0004c 	lw	s0,76(sp)
  40d57c:	27bd0058 	addiu	sp,sp,88
  40d580:	03e00008 	jr	ra
  40d584:	00000000 	nop

0040d588 <do_send>:
do_send():
/home_a/ppchen/adb/file_sync_service.c:287
    return 0;
}
#endif /* HAVE_SYMLINKS */

static int do_send(int s, char *path, char *buffer)
{
  40d588:	27bdffd0 	addiu	sp,sp,-48
  40d58c:	afbf002c 	sw	ra,44(sp)
  40d590:	afbe0028 	sw	s8,40(sp)
  40d594:	03a0f021 	move	s8,sp
  40d598:	afc40030 	sw	a0,48(s8)
  40d59c:	afc50034 	sw	a1,52(s8)
  40d5a0:	afc60038 	sw	a2,56(s8)
/home_a/ppchen/adb/file_sync_service.c:292
    char *tmp;
    mode_t mode;
    int is_link, ret;

    printf("<====> enter do_send \n");
  40d5a4:	3c020041 	lui	v0,0x41
  40d5a8:	24443fc4 	addiu	a0,v0,16324
  40d5ac:	0c10540c 	jal	415030 <puts@plt>
  40d5b0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:294

    tmp = strrchr(path,',');
  40d5b4:	8fc40034 	lw	a0,52(s8)
  40d5b8:	2405002c 	li	a1,44
  40d5bc:	0c105304 	jal	414c10 <strrchr@plt>
  40d5c0:	00000000 	nop
  40d5c4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:295
    if(tmp) {
  40d5c8:	8fc2001c 	lw	v0,28(s8)
  40d5cc:	10400012 	beqz	v0,40d618 <do_send+0x90>
  40d5d0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:296
        *tmp = 0;
  40d5d4:	8fc2001c 	lw	v0,28(s8)
  40d5d8:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/file_sync_service.c:297
        errno = 0;
  40d5dc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d5e0:	00000000 	nop
  40d5e4:	ac400000 	sw	zero,0(v0)
/home_a/ppchen/adb/file_sync_service.c:298
        mode = strtoul(tmp + 1, NULL, 0);
  40d5e8:	8fc2001c 	lw	v0,28(s8)
  40d5ec:	24420001 	addiu	v0,v0,1
  40d5f0:	00402021 	move	a0,v0
  40d5f4:	00002821 	move	a1,zero
  40d5f8:	00003021 	move	a2,zero
  40d5fc:	0c1052f8 	jal	414be0 <strtoul@plt>
  40d600:	00000000 	nop
  40d604:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:300
#ifndef HAVE_SYMLINKS
        is_link = 0;
  40d608:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/file_sync_service.c:304
#else
        is_link = S_ISLNK(mode);
#endif
        mode &= 0777;
  40d60c:	8fc20018 	lw	v0,24(s8)
  40d610:	304201ff 	andi	v0,v0,0x1ff
  40d614:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:306
    }
    if(!tmp || errno) {
  40d618:	8fc2001c 	lw	v0,28(s8)
  40d61c:	10400006 	beqz	v0,40d638 <do_send+0xb0>
  40d620:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:306 (discriminator 1)
  40d624:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d628:	00000000 	nop
  40d62c:	8c420000 	lw	v0,0(v0)
  40d630:	10400004 	beqz	v0,40d644 <do_send+0xbc>
  40d634:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:307
        mode = 0644;
  40d638:	240201a4 	li	v0,420
  40d63c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:308
        is_link = 0;
  40d640:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/file_sync_service.c:311
    }

    adb_unlink(path);
  40d644:	8fc40034 	lw	a0,52(s8)
  40d648:	0c103261 	jal	40c984 <adb_unlink>
  40d64c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:322
    else {
#else
    {
#endif
        /* copy user permission bits to "group" and "other" permissions */
        mode |= ((mode >> 3) & 0070);
  40d650:	8fc20018 	lw	v0,24(s8)
  40d654:	000210c2 	srl	v0,v0,0x3
  40d658:	30420038 	andi	v0,v0,0x38
  40d65c:	8fc30018 	lw	v1,24(s8)
  40d660:	00621025 	or	v0,v1,v0
  40d664:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:323
        mode |= ((mode >> 3) & 0007);
  40d668:	8fc20018 	lw	v0,24(s8)
  40d66c:	000210c2 	srl	v0,v0,0x3
  40d670:	30420007 	andi	v0,v0,0x7
  40d674:	8fc30018 	lw	v1,24(s8)
  40d678:	00621025 	or	v0,v1,v0
  40d67c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:325

        ret = handle_send_file(s, path, mode, buffer);
  40d680:	8fc40030 	lw	a0,48(s8)
  40d684:	8fc50034 	lw	a1,52(s8)
  40d688:	8fc60018 	lw	a2,24(s8)
  40d68c:	8fc70038 	lw	a3,56(s8)
  40d690:	0c103462 	jal	40d188 <handle_send_file>
  40d694:	00000000 	nop
  40d698:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/file_sync_service.c:328
    }

    return ret;
  40d69c:	8fc20024 	lw	v0,36(s8)
/home_a/ppchen/adb/file_sync_service.c:329
}
  40d6a0:	03c0e821 	move	sp,s8
  40d6a4:	8fbf002c 	lw	ra,44(sp)
  40d6a8:	8fbe0028 	lw	s8,40(sp)
  40d6ac:	27bd0030 	addiu	sp,sp,48
  40d6b0:	03e00008 	jr	ra
  40d6b4:	00000000 	nop

0040d6b8 <do_recv>:
do_recv():
/home_a/ppchen/adb/file_sync_service.c:332

static int do_recv(int s, const char *path, char *buffer)
{
  40d6b8:	27bdffc0 	addiu	sp,sp,-64
  40d6bc:	afbf003c 	sw	ra,60(sp)
  40d6c0:	afbe0038 	sw	s8,56(sp)
  40d6c4:	03a0f021 	move	s8,sp
  40d6c8:	afc40040 	sw	a0,64(s8)
  40d6cc:	afc50044 	sw	a1,68(s8)
  40d6d0:	afc60048 	sw	a2,72(s8)
/home_a/ppchen/adb/file_sync_service.c:335
    syncmsg msg;
    int fd, r;
    printf("<====> enter do_recv \n");
  40d6d4:	3c020041 	lui	v0,0x41
  40d6d8:	24443fdc 	addiu	a0,v0,16348
  40d6dc:	0c10540c 	jal	415030 <puts@plt>
  40d6e0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:336
    fd = adb_open(path, O_RDONLY);
  40d6e4:	8fc40044 	lw	a0,68(s8)
  40d6e8:	00002821 	move	a1,zero
  40d6ec:	0c103226 	jal	40c898 <adb_open>
  40d6f0:	00000000 	nop
  40d6f4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:337
    if(fd < 0) {
  40d6f8:	8fc20018 	lw	v0,24(s8)
  40d6fc:	0441000c 	bgez	v0,40d730 <do_recv+0x78>
  40d700:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:338
        if(fail_errno(s)) return -1;
  40d704:	8fc40040 	lw	a0,64(s8)
  40d708:	0c10344d 	jal	40d134 <fail_errno>
  40d70c:	00000000 	nop
  40d710:	10400004 	beqz	v0,40d724 <do_recv+0x6c>
  40d714:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:338 (discriminator 1)
  40d718:	2402ffff 	li	v0,-1
  40d71c:	10000060 	b	40d8a0 <do_recv+0x1e8>
  40d720:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:339
        return 0;
  40d724:	00001021 	move	v0,zero
  40d728:	1000005d 	b	40d8a0 <do_recv+0x1e8>
  40d72c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:342
    }

    msg.data.id = ID_DATA;
  40d730:	24040044 	li	a0,68
  40d734:	24050041 	li	a1,65
  40d738:	24060054 	li	a2,84
  40d73c:	24070041 	li	a3,65
  40d740:	0c1032ad 	jal	40cab4 <MKID>
  40d744:	00000000 	nop
  40d748:	afc20020 	sw	v0,32(s8)
  40d74c:	10000002 	b	40d758 <do_recv+0xa0>
  40d750:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:358
        if(writex(s, &msg.data, sizeof(msg.data)) ||
           writex(s, buffer, r)) {
            adb_close(fd);
            return -1;
        }
    }
  40d754:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:344
        return 0;
    }

    msg.data.id = ID_DATA;
    for(;;) {
        r = adb_read(fd, buffer, SYNC_DATA_MAX);
  40d758:	8fc40018 	lw	a0,24(s8)
  40d75c:	8fc50048 	lw	a1,72(s8)
  40d760:	3c060001 	lui	a2,0x1
  40d764:	0c10324f 	jal	40c93c <adb_read>
  40d768:	00000000 	nop
  40d76c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:345
        if(r <= 0) {
  40d770:	8fc2001c 	lw	v0,28(s8)
  40d774:	1c400014 	bgtz	v0,40d7c8 <do_recv+0x110>
  40d778:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:346
            if(r == 0) break;
  40d77c:	8fc2001c 	lw	v0,28(s8)
  40d780:	1040002f 	beqz	v0,40d840 <do_recv+0x188>
  40d784:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:347
            if(errno == EINTR) continue;
  40d788:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d78c:	00000000 	nop
  40d790:	8c430000 	lw	v1,0(v0)
  40d794:	24020004 	li	v0,4
  40d798:	10620026 	beq	v1,v0,40d834 <do_recv+0x17c>
  40d79c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:348
            r = fail_errno(s);
  40d7a0:	8fc40040 	lw	a0,64(s8)
  40d7a4:	0c10344d 	jal	40d134 <fail_errno>
  40d7a8:	00000000 	nop
  40d7ac:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/file_sync_service.c:349
            adb_close(fd);
  40d7b0:	8fc40018 	lw	a0,24(s8)
  40d7b4:	0c103241 	jal	40c904 <adb_close>
  40d7b8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:350
            return r;
  40d7bc:	8fc2001c 	lw	v0,28(s8)
  40d7c0:	10000037 	b	40d8a0 <do_recv+0x1e8>
  40d7c4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:352
        }
        msg.data.size = htoll(r);
  40d7c8:	8fc2001c 	lw	v0,28(s8)
  40d7cc:	00402021 	move	a0,v0
  40d7d0:	0c10328f 	jal	40ca3c <__swap_uint32>
  40d7d4:	00000000 	nop
  40d7d8:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/file_sync_service.c:353
        if(writex(s, &msg.data, sizeof(msg.data)) ||
  40d7dc:	27c20020 	addiu	v0,s8,32
  40d7e0:	8fc40040 	lw	a0,64(s8)
  40d7e4:	00402821 	move	a1,v0
  40d7e8:	24060008 	li	a2,8
  40d7ec:	0c101f4e 	jal	407d38 <writex>
  40d7f0:	00000000 	nop
  40d7f4:	14400009 	bnez	v0,40d81c <do_recv+0x164>
  40d7f8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:354 (discriminator 1)
           writex(s, buffer, r)) {
  40d7fc:	8fc2001c 	lw	v0,28(s8)
  40d800:	8fc40040 	lw	a0,64(s8)
  40d804:	8fc50048 	lw	a1,72(s8)
  40d808:	00403021 	move	a2,v0
  40d80c:	0c101f4e 	jal	407d38 <writex>
  40d810:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:353 (discriminator 1)
            r = fail_errno(s);
            adb_close(fd);
            return r;
        }
        msg.data.size = htoll(r);
        if(writex(s, &msg.data, sizeof(msg.data)) ||
  40d814:	1040ffcf 	beqz	v0,40d754 <do_recv+0x9c>
  40d818:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:355
           writex(s, buffer, r)) {
            adb_close(fd);
  40d81c:	8fc40018 	lw	a0,24(s8)
  40d820:	0c103241 	jal	40c904 <adb_close>
  40d824:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:356
            return -1;
  40d828:	2402ffff 	li	v0,-1
  40d82c:	1000001c 	b	40d8a0 <do_recv+0x1e8>
  40d830:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:347
    msg.data.id = ID_DATA;
    for(;;) {
        r = adb_read(fd, buffer, SYNC_DATA_MAX);
        if(r <= 0) {
            if(r == 0) break;
            if(errno == EINTR) continue;
  40d834:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:358
        if(writex(s, &msg.data, sizeof(msg.data)) ||
           writex(s, buffer, r)) {
            adb_close(fd);
            return -1;
        }
    }
  40d838:	1000ffc6 	b	40d754 <do_recv+0x9c>
  40d83c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:346

    msg.data.id = ID_DATA;
    for(;;) {
        r = adb_read(fd, buffer, SYNC_DATA_MAX);
        if(r <= 0) {
            if(r == 0) break;
  40d840:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:360
            adb_close(fd);
            return -1;
        }
    }

    adb_close(fd);
  40d844:	8fc40018 	lw	a0,24(s8)
  40d848:	0c103241 	jal	40c904 <adb_close>
  40d84c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:362

    msg.data.id = ID_DONE;
  40d850:	24040044 	li	a0,68
  40d854:	2405004f 	li	a1,79
  40d858:	2406004e 	li	a2,78
  40d85c:	24070045 	li	a3,69
  40d860:	0c1032ad 	jal	40cab4 <MKID>
  40d864:	00000000 	nop
  40d868:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:363
    msg.data.size = 0;
  40d86c:	afc00024 	sw	zero,36(s8)
/home_a/ppchen/adb/file_sync_service.c:364
    if(writex(s, &msg.data, sizeof(msg.data))) {
  40d870:	27c20020 	addiu	v0,s8,32
  40d874:	8fc40040 	lw	a0,64(s8)
  40d878:	00402821 	move	a1,v0
  40d87c:	24060008 	li	a2,8
  40d880:	0c101f4e 	jal	407d38 <writex>
  40d884:	00000000 	nop
  40d888:	10400004 	beqz	v0,40d89c <do_recv+0x1e4>
  40d88c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:365
        return -1;
  40d890:	2402ffff 	li	v0,-1
  40d894:	10000002 	b	40d8a0 <do_recv+0x1e8>
  40d898:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:368
    }

    return 0;
  40d89c:	00001021 	move	v0,zero
/home_a/ppchen/adb/file_sync_service.c:369
}
  40d8a0:	03c0e821 	move	sp,s8
  40d8a4:	8fbf003c 	lw	ra,60(sp)
  40d8a8:	8fbe0038 	lw	s8,56(sp)
  40d8ac:	27bd0040 	addiu	sp,sp,64
  40d8b0:	03e00008 	jr	ra
  40d8b4:	00000000 	nop

0040d8b8 <file_sync_service>:
file_sync_service():
/home_a/ppchen/adb/file_sync_service.c:372

void file_sync_service(int fd, void *cookie)
{
  40d8b8:	27bdfbb8 	addiu	sp,sp,-1096
  40d8bc:	afbf0444 	sw	ra,1092(sp)
  40d8c0:	afbe0440 	sw	s8,1088(sp)
  40d8c4:	03a0f021 	move	s8,sp
  40d8c8:	afc40448 	sw	a0,1096(s8)
  40d8cc:	afc5044c 	sw	a1,1100(s8)
/home_a/ppchen/adb/file_sync_service.c:377
    syncmsg msg;
    char name[1025];
    unsigned namelen;

    char *buffer = malloc(SYNC_DATA_MAX);
  40d8d0:	3c040001 	lui	a0,0x1
  40d8d4:	0c105300 	jal	414c00 <malloc@plt>
  40d8d8:	00000000 	nop
  40d8dc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/file_sync_service.c:378
    if(buffer == 0) goto fail;
  40d8e0:	8fc20018 	lw	v0,24(s8)
  40d8e4:	10400105 	beqz	v0,40dcfc <file_sync_service+0x444>
  40d8e8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:381

    for(;;) {
        D("sync: waiting for command\n");
  40d8ec:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d8f0:	00000000 	nop
  40d8f4:	8c420000 	lw	v0,0(v0)
  40d8f8:	afc2001c 	sw	v0,28(s8)
  40d8fc:	3c020042 	lui	v0,0x42
  40d900:	244457f0 	addiu	a0,v0,22512
  40d904:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40d908:	00000000 	nop
  40d90c:	3c020042 	lui	v0,0x42
  40d910:	8c4257c4 	lw	v0,22468(v0)
  40d914:	00402021 	move	a0,v0
  40d918:	3c020041 	lui	v0,0x41
  40d91c:	24453e30 	addiu	a1,v0,15920
  40d920:	3c020041 	lui	v0,0x41
  40d924:	24463e3c 	addiu	a2,v0,15932
  40d928:	3c020041 	lui	v0,0x41
  40d92c:	24474238 	addiu	a3,v0,16952
  40d930:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40d934:	00000000 	nop
  40d938:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d93c:	00000000 	nop
  40d940:	8fc3001c 	lw	v1,28(s8)
  40d944:	ac430000 	sw	v1,0(v0)
  40d948:	3c020042 	lui	v0,0x42
  40d94c:	8c4257c4 	lw	v0,22468(v0)
  40d950:	3c030041 	lui	v1,0x41
  40d954:	24643ff4 	addiu	a0,v1,16372
  40d958:	24050001 	li	a1,1
  40d95c:	2406001a 	li	a2,26
  40d960:	00403821 	move	a3,v0
  40d964:	0c1052d0 	jal	414b40 <fwrite@plt>
  40d968:	00000000 	nop
  40d96c:	3c020042 	lui	v0,0x42
  40d970:	8c4257c4 	lw	v0,22468(v0)
  40d974:	00402021 	move	a0,v0
  40d978:	0c1053a8 	jal	414ea0 <fflush@plt>
  40d97c:	00000000 	nop
  40d980:	3c020042 	lui	v0,0x42
  40d984:	244457f0 	addiu	a0,v0,22512
  40d988:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40d98c:	00000000 	nop
  40d990:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40d994:	00000000 	nop
  40d998:	8fc3001c 	lw	v1,28(s8)
  40d99c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:382
	 printf("<=====>file_sync_service   waiting for command\n");
  40d9a0:	3c020041 	lui	v0,0x41
  40d9a4:	24444010 	addiu	a0,v0,16400
  40d9a8:	0c10540c 	jal	415030 <puts@plt>
  40d9ac:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:384

        if(readx(fd, &msg.req, sizeof(msg.req))) {
  40d9b0:	27c20028 	addiu	v0,s8,40
  40d9b4:	8fc40448 	lw	a0,1096(s8)
  40d9b8:	00402821 	move	a1,v0
  40d9bc:	24060008 	li	a2,8
  40d9c0:	0c101f12 	jal	407c48 <readx>
  40d9c4:	00000000 	nop
  40d9c8:	1040000c 	beqz	v0,40d9fc <file_sync_service+0x144>
  40d9cc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:385
	     printf("<=====>file_sync_service   command read failure\n");
  40d9d0:	3c020041 	lui	v0,0x41
  40d9d4:	24444040 	addiu	a0,v0,16448
  40d9d8:	0c10540c 	jal	415030 <puts@plt>
  40d9dc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:386
            fail_message(fd, "command read failure");
  40d9e0:	8fc40448 	lw	a0,1096(s8)
  40d9e4:	3c020041 	lui	v0,0x41
  40d9e8:	24454070 	addiu	a1,v0,16496
  40d9ec:	0c103410 	jal	40d040 <fail_message>
  40d9f0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:387
            break;
  40d9f4:	100000ce 	b	40dd30 <file_sync_service+0x478>
  40d9f8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:389
        }
        namelen = ltohl(msg.req.namelen);
  40d9fc:	8fc2002c 	lw	v0,44(s8)
  40da00:	00402021 	move	a0,v0
  40da04:	0c10328f 	jal	40ca3c <__swap_uint32>
  40da08:	00000000 	nop
  40da0c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/file_sync_service.c:391

	 printf("<=====>file_sync_service   %d\n",__LINE__);
  40da10:	3c020041 	lui	v0,0x41
  40da14:	24444088 	addiu	a0,v0,16520
  40da18:	24050187 	li	a1,391
  40da1c:	0c105400 	jal	415000 <printf@plt>
  40da20:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:392
        if(namelen > 1024) {
  40da24:	8fc20020 	lw	v0,32(s8)
  40da28:	2c420401 	sltiu	v0,v0,1025
  40da2c:	1440000c 	bnez	v0,40da60 <file_sync_service+0x1a8>
  40da30:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:393
	     printf("<=====>file_sync_service   invalid namelen\n");
  40da34:	3c020041 	lui	v0,0x41
  40da38:	244440a8 	addiu	a0,v0,16552
  40da3c:	0c10540c 	jal	415030 <puts@plt>
  40da40:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:394
            fail_message(fd, "invalid namelen");
  40da44:	8fc40448 	lw	a0,1096(s8)
  40da48:	3c020041 	lui	v0,0x41
  40da4c:	244540d4 	addiu	a1,v0,16596
  40da50:	0c103410 	jal	40d040 <fail_message>
  40da54:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:395
            break;
  40da58:	100000b5 	b	40dd30 <file_sync_service+0x478>
  40da5c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:398
        }
		
	 printf("<=====>file_sync_service   %d\n",__LINE__);
  40da60:	3c020041 	lui	v0,0x41
  40da64:	24444088 	addiu	a0,v0,16520
  40da68:	2405018e 	li	a1,398
  40da6c:	0c105400 	jal	415000 <printf@plt>
  40da70:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:399
        if(readx(fd, name, namelen)) {
  40da74:	27c2003c 	addiu	v0,s8,60
  40da78:	8fc40448 	lw	a0,1096(s8)
  40da7c:	00402821 	move	a1,v0
  40da80:	8fc60020 	lw	a2,32(s8)
  40da84:	0c101f12 	jal	407c48 <readx>
  40da88:	00000000 	nop
  40da8c:	1040000c 	beqz	v0,40dac0 <file_sync_service+0x208>
  40da90:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:400
	     printf("<=====>file_sync_service   filename read failure\n");
  40da94:	3c020041 	lui	v0,0x41
  40da98:	244440e4 	addiu	a0,v0,16612
  40da9c:	0c10540c 	jal	415030 <puts@plt>
  40daa0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:401
            fail_message(fd, "filename read failure");
  40daa4:	8fc40448 	lw	a0,1096(s8)
  40daa8:	3c020041 	lui	v0,0x41
  40daac:	24454118 	addiu	a1,v0,16664
  40dab0:	0c103410 	jal	40d040 <fail_message>
  40dab4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:402
            break;
  40dab8:	1000009d 	b	40dd30 <file_sync_service+0x478>
  40dabc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:404
        }
        name[namelen] = 0;
  40dac0:	8fc20020 	lw	v0,32(s8)
  40dac4:	27c30018 	addiu	v1,s8,24
  40dac8:	00621021 	addu	v0,v1,v0
  40dacc:	a0400024 	sb	zero,36(v0)
/home_a/ppchen/adb/file_sync_service.c:406

        msg.req.namelen = 0;
  40dad0:	afc0002c 	sw	zero,44(s8)
/home_a/ppchen/adb/file_sync_service.c:409
        //D("sync: '%s' '%s'\n", (char*) &msg.req, name);
	 //printf("<=====>file_sync_service    sync: req='%s',name= '%s' \n");
        printf("<=====>file_sync_service   %d\n",__LINE__);
  40dad4:	3c020041 	lui	v0,0x41
  40dad8:	24444088 	addiu	a0,v0,16520
  40dadc:	24050199 	li	a1,409
  40dae0:	0c105400 	jal	415000 <printf@plt>
  40dae4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:442
        default:
            fail_message(fd, "unknown command");
            goto fail;
        }
        #else
        if(ID_STAT == msg.req.id)
  40dae8:	24040053 	li	a0,83
  40daec:	24050054 	li	a1,84
  40daf0:	24060041 	li	a2,65
  40daf4:	24070054 	li	a3,84
  40daf8:	0c1032ad 	jal	40cab4 <MKID>
  40dafc:	00000000 	nop
  40db00:	00401821 	move	v1,v0
  40db04:	8fc20028 	lw	v0,40(s8)
  40db08:	14620012 	bne	v1,v0,40db54 <file_sync_service+0x29c>
  40db0c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:444
        {
            printf("<====> sync  ID_STAT \n");
  40db10:	3c020041 	lui	v0,0x41
  40db14:	24444130 	addiu	a0,v0,16688
  40db18:	0c10540c 	jal	415030 <puts@plt>
  40db1c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:445
            if(do_stat(fd, name)) goto fail;
  40db20:	27c2003c 	addiu	v0,s8,60
  40db24:	8fc40448 	lw	a0,1096(s8)
  40db28:	00402821 	move	a1,v0
  40db2c:	0c103346 	jal	40cd18 <do_stat>
  40db30:	00000000 	nop
  40db34:	14400074 	bnez	v0,40dd08 <file_sync_service+0x450>
  40db38:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:446
            printf("<====> do_stat over \n");
  40db3c:	3c020041 	lui	v0,0x41
  40db40:	24444148 	addiu	a0,v0,16712
  40db44:	0c10540c 	jal	415030 <puts@plt>
  40db48:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:478
            fail_message(fd, "unknown command");
            goto fail;
        }
        #endif
        /* ADB:auto fix endian.[ */
    }
  40db4c:	1000ff67 	b	40d8ec <file_sync_service+0x34>
  40db50:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:448
        {
            printf("<====> sync  ID_STAT \n");
            if(do_stat(fd, name)) goto fail;
            printf("<====> do_stat over \n");
        }
        else if(ID_LIST == msg.req.id)
  40db54:	2404004c 	li	a0,76
  40db58:	24050049 	li	a1,73
  40db5c:	24060053 	li	a2,83
  40db60:	24070054 	li	a3,84
  40db64:	0c1032ad 	jal	40cab4 <MKID>
  40db68:	00000000 	nop
  40db6c:	00401821 	move	v1,v0
  40db70:	8fc20028 	lw	v0,40(s8)
  40db74:	14620012 	bne	v1,v0,40dbc0 <file_sync_service+0x308>
  40db78:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:450
        {
            printf("<====> sync  ID_LIST \n");
  40db7c:	3c020041 	lui	v0,0x41
  40db80:	24444160 	addiu	a0,v0,16736
  40db84:	0c10540c 	jal	415030 <puts@plt>
  40db88:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:451
           	if(do_list(fd, name)) goto fail;
  40db8c:	27c2003c 	addiu	v0,s8,60
  40db90:	8fc40448 	lw	a0,1096(s8)
  40db94:	00402821 	move	a1,v0
  40db98:	0c103382 	jal	40ce08 <do_list>
  40db9c:	00000000 	nop
  40dba0:	1440005c 	bnez	v0,40dd14 <file_sync_service+0x45c>
  40dba4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:452
            printf("<====> do_list over \n");
  40dba8:	3c020041 	lui	v0,0x41
  40dbac:	24444178 	addiu	a0,v0,16760
  40dbb0:	0c10540c 	jal	415030 <puts@plt>
  40dbb4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:478
            fail_message(fd, "unknown command");
            goto fail;
        }
        #endif
        /* ADB:auto fix endian.[ */
    }
  40dbb8:	1000ff4c 	b	40d8ec <file_sync_service+0x34>
  40dbbc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:454
        {
            printf("<====> sync  ID_LIST \n");
           	if(do_list(fd, name)) goto fail;
            printf("<====> do_list over \n");
        }
        else if(ID_SEND == msg.req.id)
  40dbc0:	24040053 	li	a0,83
  40dbc4:	24050045 	li	a1,69
  40dbc8:	2406004e 	li	a2,78
  40dbcc:	24070044 	li	a3,68
  40dbd0:	0c1032ad 	jal	40cab4 <MKID>
  40dbd4:	00000000 	nop
  40dbd8:	00401821 	move	v1,v0
  40dbdc:	8fc20028 	lw	v0,40(s8)
  40dbe0:	14620013 	bne	v1,v0,40dc30 <file_sync_service+0x378>
  40dbe4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:456
        {
            printf("<====> sync  ID_SEND \n");
  40dbe8:	3c020041 	lui	v0,0x41
  40dbec:	24444190 	addiu	a0,v0,16784
  40dbf0:	0c10540c 	jal	415030 <puts@plt>
  40dbf4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:457
           	if(do_send(fd, name, buffer)) goto fail;
  40dbf8:	27c2003c 	addiu	v0,s8,60
  40dbfc:	8fc40448 	lw	a0,1096(s8)
  40dc00:	00402821 	move	a1,v0
  40dc04:	8fc60018 	lw	a2,24(s8)
  40dc08:	0c103562 	jal	40d588 <do_send>
  40dc0c:	00000000 	nop
  40dc10:	14400043 	bnez	v0,40dd20 <file_sync_service+0x468>
  40dc14:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:458
            printf("<====> do_send over \n");
  40dc18:	3c020041 	lui	v0,0x41
  40dc1c:	244441a8 	addiu	a0,v0,16808
  40dc20:	0c10540c 	jal	415030 <puts@plt>
  40dc24:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:478
            fail_message(fd, "unknown command");
            goto fail;
        }
        #endif
        /* ADB:auto fix endian.[ */
    }
  40dc28:	1000ff30 	b	40d8ec <file_sync_service+0x34>
  40dc2c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:460
        {
            printf("<====> sync  ID_SEND \n");
           	if(do_send(fd, name, buffer)) goto fail;
            printf("<====> do_send over \n");
        }
        else if(ID_RECV == msg.req.id)
  40dc30:	24040052 	li	a0,82
  40dc34:	24050045 	li	a1,69
  40dc38:	24060043 	li	a2,67
  40dc3c:	24070056 	li	a3,86
  40dc40:	0c1032ad 	jal	40cab4 <MKID>
  40dc44:	00000000 	nop
  40dc48:	00401821 	move	v1,v0
  40dc4c:	8fc20028 	lw	v0,40(s8)
  40dc50:	14620013 	bne	v1,v0,40dca0 <file_sync_service+0x3e8>
  40dc54:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:462
        {
            printf("<====> sync  ID_RECV \n");
  40dc58:	3c020041 	lui	v0,0x41
  40dc5c:	244441c0 	addiu	a0,v0,16832
  40dc60:	0c10540c 	jal	415030 <puts@plt>
  40dc64:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:463
           	if(do_recv(fd, name, buffer)) goto fail;
  40dc68:	27c2003c 	addiu	v0,s8,60
  40dc6c:	8fc40448 	lw	a0,1096(s8)
  40dc70:	00402821 	move	a1,v0
  40dc74:	8fc60018 	lw	a2,24(s8)
  40dc78:	0c1035ae 	jal	40d6b8 <do_recv>
  40dc7c:	00000000 	nop
  40dc80:	1440002a 	bnez	v0,40dd2c <file_sync_service+0x474>
  40dc84:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:464
            printf("<====> do_recv over \n");
  40dc88:	3c020041 	lui	v0,0x41
  40dc8c:	244441d8 	addiu	a0,v0,16856
  40dc90:	0c10540c 	jal	415030 <puts@plt>
  40dc94:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:478
            fail_message(fd, "unknown command");
            goto fail;
        }
        #endif
        /* ADB:auto fix endian.[ */
    }
  40dc98:	1000ff14 	b	40d8ec <file_sync_service+0x34>
  40dc9c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:466
        {
            printf("<====> sync  ID_RECV \n");
           	if(do_recv(fd, name, buffer)) goto fail;
            printf("<====> do_recv over \n");
        }
        else if(ID_QUIT == msg.req.id)
  40dca0:	24040051 	li	a0,81
  40dca4:	24050055 	li	a1,85
  40dca8:	24060049 	li	a2,73
  40dcac:	24070054 	li	a3,84
  40dcb0:	0c1032ad 	jal	40cab4 <MKID>
  40dcb4:	00000000 	nop
  40dcb8:	00401821 	move	v1,v0
  40dcbc:	8fc20028 	lw	v0,40(s8)
  40dcc0:	14620007 	bne	v1,v0,40dce0 <file_sync_service+0x428>
  40dcc4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:468
        {
            printf("<====> sync  ID_QUIT \n");
  40dcc8:	3c020041 	lui	v0,0x41
  40dccc:	244441f0 	addiu	a0,v0,16880
  40dcd0:	0c10540c 	jal	415030 <puts@plt>
  40dcd4:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:469
          	goto fail;
  40dcd8:	10000015 	b	40dd30 <file_sync_service+0x478>
  40dcdc:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:473
        }
        else
        {
            fail_message(fd, "unknown command");
  40dce0:	8fc40448 	lw	a0,1096(s8)
  40dce4:	3c020041 	lui	v0,0x41
  40dce8:	24454208 	addiu	a1,v0,16904
  40dcec:	0c103410 	jal	40d040 <fail_message>
  40dcf0:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:474
            goto fail;
  40dcf4:	1000000e 	b	40dd30 <file_sync_service+0x478>
  40dcf8:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:378
    syncmsg msg;
    char name[1025];
    unsigned namelen;

    char *buffer = malloc(SYNC_DATA_MAX);
    if(buffer == 0) goto fail;
  40dcfc:	00000000 	nop
  40dd00:	1000000b 	b	40dd30 <file_sync_service+0x478>
  40dd04:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:445
        }
        #else
        if(ID_STAT == msg.req.id)
        {
            printf("<====> sync  ID_STAT \n");
            if(do_stat(fd, name)) goto fail;
  40dd08:	00000000 	nop
  40dd0c:	10000008 	b	40dd30 <file_sync_service+0x478>
  40dd10:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:451
            printf("<====> do_stat over \n");
        }
        else if(ID_LIST == msg.req.id)
        {
            printf("<====> sync  ID_LIST \n");
           	if(do_list(fd, name)) goto fail;
  40dd14:	00000000 	nop
  40dd18:	10000005 	b	40dd30 <file_sync_service+0x478>
  40dd1c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:457
            printf("<====> do_list over \n");
        }
        else if(ID_SEND == msg.req.id)
        {
            printf("<====> sync  ID_SEND \n");
           	if(do_send(fd, name, buffer)) goto fail;
  40dd20:	00000000 	nop
  40dd24:	10000002 	b	40dd30 <file_sync_service+0x478>
  40dd28:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:463
            printf("<====> do_send over \n");
        }
        else if(ID_RECV == msg.req.id)
        {
            printf("<====> sync  ID_RECV \n");
           	if(do_recv(fd, name, buffer)) goto fail;
  40dd2c:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:481
        #endif
        /* ADB:auto fix endian.[ */
    }

fail:
    if(buffer != 0) free(buffer);
  40dd30:	8fc20018 	lw	v0,24(s8)
  40dd34:	10400004 	beqz	v0,40dd48 <file_sync_service+0x490>
  40dd38:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:481 (discriminator 1)
  40dd3c:	8fc40018 	lw	a0,24(s8)
  40dd40:	0c1053e4 	jal	414f90 <free@plt>
  40dd44:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:482 (discriminator 1)
    D("sync: done\n");
  40dd48:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40dd4c:	00000000 	nop
  40dd50:	8c420000 	lw	v0,0(v0)
  40dd54:	afc20024 	sw	v0,36(s8)
  40dd58:	3c020042 	lui	v0,0x42
  40dd5c:	244457f0 	addiu	a0,v0,22512
  40dd60:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40dd64:	00000000 	nop
  40dd68:	3c020042 	lui	v0,0x42
  40dd6c:	8c4257c4 	lw	v0,22468(v0)
  40dd70:	00402021 	move	a0,v0
  40dd74:	3c020041 	lui	v0,0x41
  40dd78:	24453e30 	addiu	a1,v0,15920
  40dd7c:	3c020041 	lui	v0,0x41
  40dd80:	24463e3c 	addiu	a2,v0,15932
  40dd84:	3c020041 	lui	v0,0x41
  40dd88:	24474238 	addiu	a3,v0,16952
  40dd8c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40dd90:	00000000 	nop
  40dd94:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40dd98:	00000000 	nop
  40dd9c:	8fc30024 	lw	v1,36(s8)
  40dda0:	ac430000 	sw	v1,0(v0)
  40dda4:	3c020042 	lui	v0,0x42
  40dda8:	8c4257c4 	lw	v0,22468(v0)
  40ddac:	3c030041 	lui	v1,0x41
  40ddb0:	24644218 	addiu	a0,v1,16920
  40ddb4:	24050001 	li	a1,1
  40ddb8:	2406000b 	li	a2,11
  40ddbc:	00403821 	move	a3,v0
  40ddc0:	0c1052d0 	jal	414b40 <fwrite@plt>
  40ddc4:	00000000 	nop
  40ddc8:	3c020042 	lui	v0,0x42
  40ddcc:	8c4257c4 	lw	v0,22468(v0)
  40ddd0:	00402021 	move	a0,v0
  40ddd4:	0c1053a8 	jal	414ea0 <fflush@plt>
  40ddd8:	00000000 	nop
  40dddc:	3c020042 	lui	v0,0x42
  40dde0:	244457f0 	addiu	a0,v0,22512
  40dde4:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40dde8:	00000000 	nop
  40ddec:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ddf0:	00000000 	nop
  40ddf4:	8fc30024 	lw	v1,36(s8)
  40ddf8:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/file_sync_service.c:483 (discriminator 1)
    printf("<====> sync: done\n");
  40ddfc:	3c020041 	lui	v0,0x41
  40de00:	24444224 	addiu	a0,v0,16932
  40de04:	0c10540c 	jal	415030 <puts@plt>
  40de08:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:484 (discriminator 1)
    adb_close(fd);
  40de0c:	8fc40448 	lw	a0,1096(s8)
  40de10:	0c103241 	jal	40c904 <adb_close>
  40de14:	00000000 	nop
/home_a/ppchen/adb/file_sync_service.c:485 (discriminator 1)
}
  40de18:	03c0e821 	move	sp,s8
  40de1c:	8fbf0444 	lw	ra,1092(sp)
  40de20:	8fbe0440 	lw	s8,1088(sp)
  40de24:	27bd0448 	addiu	sp,sp,1096
  40de28:	03e00008 	jr	ra
  40de2c:	00000000 	nop

0040de30 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  40de30:	27bdffe0 	addiu	sp,sp,-32
  40de34:	afbf001c 	sw	ra,28(sp)
  40de38:	afbe0018 	sw	s8,24(sp)
  40de3c:	03a0f021 	move	s8,sp
  40de40:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  40de44:	8fc40020 	lw	a0,32(s8)
  40de48:	24050002 	li	a1,2
  40de4c:	24060001 	li	a2,1
  40de50:	0c10532c 	jal	414cb0 <fcntl@plt>
  40de54:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  40de58:	03c0e821 	move	sp,s8
  40de5c:	8fbf001c 	lw	ra,28(sp)
  40de60:	8fbe0018 	lw	s8,24(sp)
  40de64:	27bd0020 	addiu	sp,sp,32
  40de68:	03e00008 	jr	ra
  40de6c:	00000000 	nop

0040de70 <adb_shutdown>:
adb_shutdown():
/home_a/ppchen/adb/sysdeps.h:344
}
#undef   open
#define  open    ___xxx_open

static __inline__ int  adb_shutdown(int fd)
{
  40de70:	27bdffe0 	addiu	sp,sp,-32
  40de74:	afbf001c 	sw	ra,28(sp)
  40de78:	afbe0018 	sw	s8,24(sp)
  40de7c:	03a0f021 	move	s8,sp
  40de80:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:345
    return shutdown(fd, SHUT_RDWR);
  40de84:	8fc40020 	lw	a0,32(s8)
  40de88:	24050002 	li	a1,2
  40de8c:	0c105420 	jal	415080 <shutdown@plt>
  40de90:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:346
}
  40de94:	03c0e821 	move	sp,s8
  40de98:	8fbf001c 	lw	ra,28(sp)
  40de9c:	8fbe0018 	lw	s8,24(sp)
  40dea0:	27bd0020 	addiu	sp,sp,32
  40dea4:	03e00008 	jr	ra
  40dea8:	00000000 	nop

0040deac <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  40deac:	27bdffe0 	addiu	sp,sp,-32
  40deb0:	afbf001c 	sw	ra,28(sp)
  40deb4:	afbe0018 	sw	s8,24(sp)
  40deb8:	03a0f021 	move	s8,sp
  40debc:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  40dec0:	8fc40020 	lw	a0,32(s8)
  40dec4:	0c105378 	jal	414de0 <close@plt>
  40dec8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  40decc:	03c0e821 	move	sp,s8
  40ded0:	8fbf001c 	lw	ra,28(sp)
  40ded4:	8fbe0018 	lw	s8,24(sp)
  40ded8:	27bd0020 	addiu	sp,sp,32
  40dedc:	03e00008 	jr	ra
  40dee0:	00000000 	nop

0040dee4 <adb_socket_accept>:
adb_socket_accept():
/home_a/ppchen/adb/sysdeps.h:401
}
#undef   creat
#define  creat  ___xxx_creat

static __inline__ int  adb_socket_accept(int  serverfd, struct sockaddr*  addr, socklen_t  *addrlen)
{
  40dee4:	27bdffd8 	addiu	sp,sp,-40
  40dee8:	afbf0024 	sw	ra,36(sp)
  40deec:	afbe0020 	sw	s8,32(sp)
  40def0:	03a0f021 	move	s8,sp
  40def4:	afc40028 	sw	a0,40(s8)
  40def8:	afc5002c 	sw	a1,44(s8)
  40defc:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/sysdeps.h:404
    int fd;

    fd = accept(serverfd, addr, addrlen);
  40df00:	8fc2002c 	lw	v0,44(s8)
  40df04:	8fc40028 	lw	a0,40(s8)
  40df08:	00402821 	move	a1,v0
  40df0c:	8fc60030 	lw	a2,48(s8)
  40df10:	0c1053e0 	jal	414f80 <accept@plt>
  40df14:	00000000 	nop
  40df18:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:406

    if (fd >= 0)
  40df1c:	8fc20018 	lw	v0,24(s8)
  40df20:	04400004 	bltz	v0,40df34 <adb_socket_accept+0x50>
  40df24:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:407
        close_on_exec(fd);
  40df28:	8fc40018 	lw	a0,24(s8)
  40df2c:	0c10378c 	jal	40de30 <close_on_exec>
  40df30:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:409

    return fd;
  40df34:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:410
}
  40df38:	03c0e821 	move	sp,s8
  40df3c:	8fbf0024 	lw	ra,36(sp)
  40df40:	8fbe0020 	lw	s8,32(sp)
  40df44:	27bd0028 	addiu	sp,sp,40
  40df48:	03e00008 	jr	ra
  40df4c:	00000000 	nop

0040df50 <unix_socketpair>:
unix_socketpair():
/home_a/ppchen/adb/sysdeps.h:453
    setsockopt( fd, IPPROTO_TCP, TCP_NODELAY, (void*)&on, sizeof(on) );
}


static __inline__ int  unix_socketpair( int  d, int  type, int  protocol, int sv[2] )
{
  40df50:	27bdffe0 	addiu	sp,sp,-32
  40df54:	afbf001c 	sw	ra,28(sp)
  40df58:	afbe0018 	sw	s8,24(sp)
  40df5c:	03a0f021 	move	s8,sp
  40df60:	afc40020 	sw	a0,32(s8)
  40df64:	afc50024 	sw	a1,36(s8)
  40df68:	afc60028 	sw	a2,40(s8)
  40df6c:	afc7002c 	sw	a3,44(s8)
/home_a/ppchen/adb/sysdeps.h:454
    return socketpair( d, type, protocol, sv );
  40df70:	8fc40020 	lw	a0,32(s8)
  40df74:	8fc50024 	lw	a1,36(s8)
  40df78:	8fc60028 	lw	a2,40(s8)
  40df7c:	8fc7002c 	lw	a3,44(s8)
  40df80:	0c105394 	jal	414e50 <socketpair@plt>
  40df84:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:455
}
  40df88:	03c0e821 	move	sp,s8
  40df8c:	8fbf001c 	lw	ra,28(sp)
  40df90:	8fbe0018 	lw	s8,24(sp)
  40df94:	27bd0020 	addiu	sp,sp,32
  40df98:	03e00008 	jr	ra
  40df9c:	00000000 	nop

0040dfa0 <adb_socketpair>:
adb_socketpair():
/home_a/ppchen/adb/sysdeps.h:458

static __inline__ int  adb_socketpair( int  sv[2] )
{
  40dfa0:	27bdffd8 	addiu	sp,sp,-40
  40dfa4:	afbf0024 	sw	ra,36(sp)
  40dfa8:	afbe0020 	sw	s8,32(sp)
  40dfac:	03a0f021 	move	s8,sp
  40dfb0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/sysdeps.h:463
    int  rc;



    rc = unix_socketpair( AF_UNIX, SOCK_STREAM, 0, sv );
  40dfb4:	24040001 	li	a0,1
  40dfb8:	24050002 	li	a1,2
  40dfbc:	00003021 	move	a2,zero
  40dfc0:	8fc70028 	lw	a3,40(s8)
  40dfc4:	0c1037d4 	jal	40df50 <unix_socketpair>
  40dfc8:	00000000 	nop
  40dfcc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:467



    if (rc < 0)
  40dfd0:	8fc20018 	lw	v0,24(s8)
  40dfd4:	04410004 	bgez	v0,40dfe8 <adb_socketpair+0x48>
  40dfd8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:468
        return -1;
  40dfdc:	2402ffff 	li	v0,-1
  40dfe0:	1000000d 	b	40e018 <adb_socketpair+0x78>
  40dfe4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:470

    close_on_exec( sv[0] );
  40dfe8:	8fc20028 	lw	v0,40(s8)
  40dfec:	8c420000 	lw	v0,0(v0)
  40dff0:	00402021 	move	a0,v0
  40dff4:	0c10378c 	jal	40de30 <close_on_exec>
  40dff8:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:471
    close_on_exec( sv[1] );
  40dffc:	8fc20028 	lw	v0,40(s8)
  40e000:	24420004 	addiu	v0,v0,4
  40e004:	8c420000 	lw	v0,0(v0)
  40e008:	00402021 	move	a0,v0
  40e00c:	0c10378c 	jal	40de30 <close_on_exec>
  40e010:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:472
    return 0;
  40e014:	00001021 	move	v0,zero
/home_a/ppchen/adb/sysdeps.h:473
}
  40e018:	03c0e821 	move	sp,s8
  40e01c:	8fbf0024 	lw	ra,36(sp)
  40e020:	8fbe0020 	lw	s8,32(sp)
  40e024:	27bd0028 	addiu	sp,sp,40
  40e028:	03e00008 	jr	ra
  40e02c:	00000000 	nop

0040e030 <jdwp_process_list>:
jdwp_process_list():
/home_a/ppchen/adb/jdwp_service.c:123

static JdwpProcess  _jdwp_list;

static int
jdwp_process_list( char*  buffer, int  bufferlen )
{
  40e030:	27bdffd0 	addiu	sp,sp,-48
  40e034:	afbf002c 	sw	ra,44(sp)
  40e038:	afbe0028 	sw	s8,40(sp)
  40e03c:	03a0f021 	move	s8,sp
  40e040:	afc40030 	sw	a0,48(s8)
  40e044:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/jdwp_service.c:124
    char*         end  = buffer + bufferlen;
  40e048:	8fc20034 	lw	v0,52(s8)
  40e04c:	8fc30030 	lw	v1,48(s8)
  40e050:	00621021 	addu	v0,v1,v0
  40e054:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/jdwp_service.c:125
    char*         p    = buffer;
  40e058:	8fc20030 	lw	v0,48(s8)
  40e05c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:126
    JdwpProcess*  proc = _jdwp_list.next;
  40e060:	3c020042 	lui	v0,0x42
  40e064:	8c425a10 	lw	v0,23056(v0)
  40e068:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:128

    for ( ; proc != &_jdwp_list; proc = proc->next ) {
  40e06c:	10000024 	b	40e100 <jdwp_process_list+0xd0>
  40e070:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:132
        int  len;

        /* skip transient connections */
        if (proc->pid < 0)
  40e074:	8fc2001c 	lw	v0,28(s8)
  40e078:	8c420008 	lw	v0,8(v0)
  40e07c:	0440001c 	bltz	v0,40e0f0 <jdwp_process_list+0xc0>
  40e080:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:135
            continue;

        len = snprintf(p, end-p, "%d\n", proc->pid);
  40e084:	8fc30020 	lw	v1,32(s8)
  40e088:	8fc20018 	lw	v0,24(s8)
  40e08c:	00621023 	subu	v0,v1,v0
  40e090:	00401821 	move	v1,v0
  40e094:	8fc2001c 	lw	v0,28(s8)
  40e098:	8c420008 	lw	v0,8(v0)
  40e09c:	8fc40018 	lw	a0,24(s8)
  40e0a0:	00602821 	move	a1,v1
  40e0a4:	3c030041 	lui	v1,0x41
  40e0a8:	24664270 	addiu	a2,v1,17008
  40e0ac:	00403821 	move	a3,v0
  40e0b0:	0c105334 	jal	414cd0 <snprintf@plt>
  40e0b4:	00000000 	nop
  40e0b8:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/jdwp_service.c:136
        if (p + len >= end)
  40e0bc:	8fc20024 	lw	v0,36(s8)
  40e0c0:	8fc30018 	lw	v1,24(s8)
  40e0c4:	00621821 	addu	v1,v1,v0
  40e0c8:	8fc20020 	lw	v0,32(s8)
  40e0cc:	0062102b 	sltu	v0,v1,v0
  40e0d0:	10400012 	beqz	v0,40e11c <jdwp_process_list+0xec>
  40e0d4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:138
            break;
        p += len;
  40e0d8:	8fc20024 	lw	v0,36(s8)
  40e0dc:	8fc30018 	lw	v1,24(s8)
  40e0e0:	00621021 	addu	v0,v1,v0
  40e0e4:	afc20018 	sw	v0,24(s8)
  40e0e8:	10000002 	b	40e0f4 <jdwp_process_list+0xc4>
  40e0ec:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:133
    for ( ; proc != &_jdwp_list; proc = proc->next ) {
        int  len;

        /* skip transient connections */
        if (proc->pid < 0)
            continue;
  40e0f0:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:128
{
    char*         end  = buffer + bufferlen;
    char*         p    = buffer;
    JdwpProcess*  proc = _jdwp_list.next;

    for ( ; proc != &_jdwp_list; proc = proc->next ) {
  40e0f4:	8fc2001c 	lw	v0,28(s8)
  40e0f8:	8c420000 	lw	v0,0(v0)
  40e0fc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:128 (discriminator 1)
  40e100:	8fc3001c 	lw	v1,28(s8)
  40e104:	3c020042 	lui	v0,0x42
  40e108:	24425a10 	addiu	v0,v0,23056
  40e10c:	1462ffd9 	bne	v1,v0,40e074 <jdwp_process_list+0x44>
  40e110:	00000000 	nop
  40e114:	10000002 	b	40e120 <jdwp_process_list+0xf0>
  40e118:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:137
        if (proc->pid < 0)
            continue;

        len = snprintf(p, end-p, "%d\n", proc->pid);
        if (p + len >= end)
            break;
  40e11c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:140
        p += len;
    }
    p[0] = 0;
  40e120:	8fc20018 	lw	v0,24(s8)
  40e124:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/jdwp_service.c:141
    return (p - buffer);
  40e128:	8fc30018 	lw	v1,24(s8)
  40e12c:	8fc20030 	lw	v0,48(s8)
  40e130:	00621023 	subu	v0,v1,v0
/home_a/ppchen/adb/jdwp_service.c:142
}
  40e134:	03c0e821 	move	sp,s8
  40e138:	8fbf002c 	lw	ra,44(sp)
  40e13c:	8fbe0028 	lw	s8,40(sp)
  40e140:	27bd0030 	addiu	sp,sp,48
  40e144:	03e00008 	jr	ra
  40e148:	00000000 	nop

0040e14c <jdwp_process_list_msg>:
jdwp_process_list_msg():
/home_a/ppchen/adb/jdwp_service.c:147


static int
jdwp_process_list_msg( char*  buffer, int  bufferlen )
{
  40e14c:	27bdffd0 	addiu	sp,sp,-48
  40e150:	afbf002c 	sw	ra,44(sp)
  40e154:	afbe0028 	sw	s8,40(sp)
  40e158:	03a0f021 	move	s8,sp
  40e15c:	afc40030 	sw	a0,48(s8)
  40e160:	afc50034 	sw	a1,52(s8)
/home_a/ppchen/adb/jdwp_service.c:149
    char  head[5];
    int   len = jdwp_process_list( buffer+4, bufferlen-4 );
  40e164:	8fc20030 	lw	v0,48(s8)
  40e168:	24430004 	addiu	v1,v0,4
  40e16c:	8fc20034 	lw	v0,52(s8)
  40e170:	2442fffc 	addiu	v0,v0,-4
  40e174:	00602021 	move	a0,v1
  40e178:	00402821 	move	a1,v0
  40e17c:	0c10380c 	jal	40e030 <jdwp_process_list>
  40e180:	00000000 	nop
  40e184:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:150
    snprintf(head, sizeof head, "%04x", len);
  40e188:	27c2001c 	addiu	v0,s8,28
  40e18c:	00402021 	move	a0,v0
  40e190:	24050005 	li	a1,5
  40e194:	3c020041 	lui	v0,0x41
  40e198:	24464274 	addiu	a2,v0,17012
  40e19c:	8fc70018 	lw	a3,24(s8)
  40e1a0:	0c105334 	jal	414cd0 <snprintf@plt>
  40e1a4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:151
    memcpy(buffer, head, 4);
  40e1a8:	27c2001c 	addiu	v0,s8,28
  40e1ac:	8fc40030 	lw	a0,48(s8)
  40e1b0:	00402821 	move	a1,v0
  40e1b4:	24060004 	li	a2,4
  40e1b8:	0c1052d8 	jal	414b60 <memcpy@plt>
  40e1bc:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:152
    return len + 4;
  40e1c0:	8fc20018 	lw	v0,24(s8)
  40e1c4:	24420004 	addiu	v0,v0,4
/home_a/ppchen/adb/jdwp_service.c:153
}
  40e1c8:	03c0e821 	move	sp,s8
  40e1cc:	8fbf002c 	lw	ra,44(sp)
  40e1d0:	8fbe0028 	lw	s8,40(sp)
  40e1d4:	27bd0030 	addiu	sp,sp,48
  40e1d8:	03e00008 	jr	ra
  40e1dc:	00000000 	nop

0040e1e0 <jdwp_process_free>:
jdwp_process_free():
/home_a/ppchen/adb/jdwp_service.c:160

static void  jdwp_process_list_updated(void);

static void
jdwp_process_free( JdwpProcess*  proc )
{
  40e1e0:	27bdffd8 	addiu	sp,sp,-40
  40e1e4:	afbf0024 	sw	ra,36(sp)
  40e1e8:	afbe0020 	sw	s8,32(sp)
  40e1ec:	03a0f021 	move	s8,sp
  40e1f0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:161
    if (proc) {
  40e1f4:	8fc20028 	lw	v0,40(s8)
  40e1f8:	10400046 	beqz	v0,40e314 <jdwp_process_free+0x134>
  40e1fc:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:164
        int  n;

        proc->prev->next = proc->next;
  40e200:	8fc20028 	lw	v0,40(s8)
  40e204:	8c420004 	lw	v0,4(v0)
  40e208:	8fc30028 	lw	v1,40(s8)
  40e20c:	8c630000 	lw	v1,0(v1)
  40e210:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:165
        proc->next->prev = proc->prev;
  40e214:	8fc20028 	lw	v0,40(s8)
  40e218:	8c420000 	lw	v0,0(v0)
  40e21c:	8fc30028 	lw	v1,40(s8)
  40e220:	8c630004 	lw	v1,4(v1)
  40e224:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:167

        if (proc->socket >= 0) {
  40e228:	8fc20028 	lw	v0,40(s8)
  40e22c:	8c42000c 	lw	v0,12(v0)
  40e230:	0440000e 	bltz	v0,40e26c <jdwp_process_free+0x8c>
  40e234:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:168
            adb_shutdown(proc->socket);
  40e238:	8fc20028 	lw	v0,40(s8)
  40e23c:	8c42000c 	lw	v0,12(v0)
  40e240:	00402021 	move	a0,v0
  40e244:	0c10379c 	jal	40de70 <adb_shutdown>
  40e248:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:169
            adb_close(proc->socket);
  40e24c:	8fc20028 	lw	v0,40(s8)
  40e250:	8c42000c 	lw	v0,12(v0)
  40e254:	00402021 	move	a0,v0
  40e258:	0c1037ab 	jal	40deac <adb_close>
  40e25c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:170
            proc->socket = -1;
  40e260:	8fc20028 	lw	v0,40(s8)
  40e264:	2403ffff 	li	v1,-1
  40e268:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/jdwp_service.c:173
        }

        if (proc->fde != NULL) {
  40e26c:	8fc20028 	lw	v0,40(s8)
  40e270:	8c420010 	lw	v0,16(v0)
  40e274:	10400008 	beqz	v0,40e298 <jdwp_process_free+0xb8>
  40e278:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:174
            fdevent_destroy(proc->fde);
  40e27c:	8fc20028 	lw	v0,40(s8)
  40e280:	8c420010 	lw	v0,16(v0)
  40e284:	00402021 	move	a0,v0
  40e288:	0c101669 	jal	4059a4 <fdevent_destroy>
  40e28c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:175
            proc->fde = NULL;
  40e290:	8fc20028 	lw	v0,40(s8)
  40e294:	ac400010 	sw	zero,16(v0)
/home_a/ppchen/adb/jdwp_service.c:177
        }
        proc->pid = -1;
  40e298:	8fc20028 	lw	v0,40(s8)
  40e29c:	2403ffff 	li	v1,-1
  40e2a0:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/jdwp_service.c:179

        for (n = 0; n < proc->out_count; n++) {
  40e2a4:	afc00018 	sw	zero,24(s8)
  40e2a8:	1000000d 	b	40e2e0 <jdwp_process_free+0x100>
  40e2ac:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:180 (discriminator 2)
            adb_close(proc->out_fds[n]);
  40e2b0:	8fc30028 	lw	v1,40(s8)
  40e2b4:	8fc20018 	lw	v0,24(s8)
  40e2b8:	24420006 	addiu	v0,v0,6
  40e2bc:	00021080 	sll	v0,v0,0x2
  40e2c0:	00621021 	addu	v0,v1,v0
  40e2c4:	8c420004 	lw	v0,4(v0)
  40e2c8:	00402021 	move	a0,v0
  40e2cc:	0c1037ab 	jal	40deac <adb_close>
  40e2d0:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:179 (discriminator 2)
            fdevent_destroy(proc->fde);
            proc->fde = NULL;
        }
        proc->pid = -1;

        for (n = 0; n < proc->out_count; n++) {
  40e2d4:	8fc20018 	lw	v0,24(s8)
  40e2d8:	24420001 	addiu	v0,v0,1
  40e2dc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:179 (discriminator 1)
  40e2e0:	8fc20028 	lw	v0,40(s8)
  40e2e4:	8c43002c 	lw	v1,44(v0)
  40e2e8:	8fc20018 	lw	v0,24(s8)
  40e2ec:	0043102a 	slt	v0,v0,v1
  40e2f0:	1440ffef 	bnez	v0,40e2b0 <jdwp_process_free+0xd0>
  40e2f4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:182
            adb_close(proc->out_fds[n]);
        }
        proc->out_count = 0;
  40e2f8:	8fc20028 	lw	v0,40(s8)
  40e2fc:	ac40002c 	sw	zero,44(v0)
/home_a/ppchen/adb/jdwp_service.c:184

        free(proc);
  40e300:	8fc40028 	lw	a0,40(s8)
  40e304:	0c1053e4 	jal	414f90 <free@plt>
  40e308:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:186

        jdwp_process_list_updated();
  40e30c:	0c1040c7 	jal	41031c <jdwp_process_list_updated>
  40e310:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:188
    }
}
  40e314:	03c0e821 	move	sp,s8
  40e318:	8fbf0024 	lw	ra,36(sp)
  40e31c:	8fbe0020 	lw	s8,32(sp)
  40e320:	27bd0028 	addiu	sp,sp,40
  40e324:	03e00008 	jr	ra
  40e328:	00000000 	nop

0040e32c <jdwp_process_alloc>:
jdwp_process_alloc():
/home_a/ppchen/adb/jdwp_service.c:196
static void  jdwp_process_event(int, unsigned, void*);  /* forward */


static JdwpProcess*
jdwp_process_alloc( int  socket )
{
  40e32c:	27bdffd8 	addiu	sp,sp,-40
  40e330:	afbf0024 	sw	ra,36(sp)
  40e334:	afbe0020 	sw	s8,32(sp)
  40e338:	03a0f021 	move	s8,sp
  40e33c:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:197
    JdwpProcess*  proc = calloc(1,sizeof(*proc));
  40e340:	24040001 	li	a0,1
  40e344:	24050030 	li	a1,48
  40e348:	0c1052b8 	jal	414ae0 <calloc@plt>
  40e34c:	00000000 	nop
  40e350:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:199

    if (proc == NULL) {
  40e354:	8fc20018 	lw	v0,24(s8)
  40e358:	14400004 	bnez	v0,40e36c <jdwp_process_alloc+0x40>
  40e35c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:201
       
        return NULL;
  40e360:	00001021 	move	v0,zero
  40e364:	10000044 	b	40e478 <jdwp_process_alloc+0x14c>
  40e368:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:204
    }

    proc->socket = socket;
  40e36c:	8fc20018 	lw	v0,24(s8)
  40e370:	8fc30028 	lw	v1,40(s8)
  40e374:	ac43000c 	sw	v1,12(v0)
/home_a/ppchen/adb/jdwp_service.c:205
    proc->pid    = -1;
  40e378:	8fc20018 	lw	v0,24(s8)
  40e37c:	2403ffff 	li	v1,-1
  40e380:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/jdwp_service.c:206
    proc->next   = proc;
  40e384:	8fc20018 	lw	v0,24(s8)
  40e388:	8fc30018 	lw	v1,24(s8)
  40e38c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:207
    proc->prev   = proc;
  40e390:	8fc20018 	lw	v0,24(s8)
  40e394:	8fc30018 	lw	v1,24(s8)
  40e398:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:209

    proc->fde = fdevent_create( socket, jdwp_process_event, proc );
  40e39c:	8fc40028 	lw	a0,40(s8)
  40e3a0:	3c020041 	lui	v0,0x41
  40e3a4:	2445e490 	addiu	a1,v0,-7024
  40e3a8:	8fc60018 	lw	a2,24(s8)
  40e3ac:	0c101645 	jal	405914 <fdevent_create>
  40e3b0:	00000000 	nop
  40e3b4:	00401821 	move	v1,v0
  40e3b8:	8fc20018 	lw	v0,24(s8)
  40e3bc:	ac430010 	sw	v1,16(v0)
/home_a/ppchen/adb/jdwp_service.c:210
    if (proc->fde == NULL) {
  40e3c0:	8fc20018 	lw	v0,24(s8)
  40e3c4:	8c420010 	lw	v0,16(v0)
  40e3c8:	14400007 	bnez	v0,40e3e8 <jdwp_process_alloc+0xbc>
  40e3cc:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:212
       
        free(proc);
  40e3d0:	8fc40018 	lw	a0,24(s8)
  40e3d4:	0c1053e4 	jal	414f90 <free@plt>
  40e3d8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:213
        return NULL;
  40e3dc:	00001021 	move	v0,zero
  40e3e0:	10000025 	b	40e478 <jdwp_process_alloc+0x14c>
  40e3e4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:216
    }

    proc->fde->state |= FDE_DONT_CLOSE;
  40e3e8:	8fc20018 	lw	v0,24(s8)
  40e3ec:	8c420010 	lw	v0,16(v0)
  40e3f0:	8fc30018 	lw	v1,24(s8)
  40e3f4:	8c630010 	lw	v1,16(v1)
  40e3f8:	94630010 	lhu	v1,16(v1)
  40e3fc:	34630080 	ori	v1,v1,0x80
  40e400:	3063ffff 	andi	v1,v1,0xffff
  40e404:	a4430010 	sh	v1,16(v0)
/home_a/ppchen/adb/jdwp_service.c:217
    proc->in_len      = 0;
  40e408:	8fc20018 	lw	v0,24(s8)
  40e40c:	ac400018 	sw	zero,24(v0)
/home_a/ppchen/adb/jdwp_service.c:218
    proc->out_count   = 0;
  40e410:	8fc20018 	lw	v0,24(s8)
  40e414:	ac40002c 	sw	zero,44(v0)
/home_a/ppchen/adb/jdwp_service.c:221

    /* append to list */
    proc->next = &_jdwp_list;
  40e418:	8fc20018 	lw	v0,24(s8)
  40e41c:	3c030042 	lui	v1,0x42
  40e420:	24635a10 	addiu	v1,v1,23056
  40e424:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:222
    proc->prev = proc->next->prev;
  40e428:	8fc20018 	lw	v0,24(s8)
  40e42c:	8c420000 	lw	v0,0(v0)
  40e430:	8c430004 	lw	v1,4(v0)
  40e434:	8fc20018 	lw	v0,24(s8)
  40e438:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:224

    proc->prev->next = proc;
  40e43c:	8fc20018 	lw	v0,24(s8)
  40e440:	8c420004 	lw	v0,4(v0)
  40e444:	8fc30018 	lw	v1,24(s8)
  40e448:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:225
    proc->next->prev = proc;
  40e44c:	8fc20018 	lw	v0,24(s8)
  40e450:	8c420000 	lw	v0,0(v0)
  40e454:	8fc30018 	lw	v1,24(s8)
  40e458:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:228

    /* start by waiting for the PID */
    fdevent_add(proc->fde, FDE_READ);
  40e45c:	8fc20018 	lw	v0,24(s8)
  40e460:	8c420010 	lw	v0,16(v0)
  40e464:	00402021 	move	a0,v0
  40e468:	24050001 	li	a1,1
  40e46c:	0c101735 	jal	405cd4 <fdevent_add>
  40e470:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:230

    return proc;
  40e474:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:231
}
  40e478:	03c0e821 	move	sp,s8
  40e47c:	8fbf0024 	lw	ra,36(sp)
  40e480:	8fbe0020 	lw	s8,32(sp)
  40e484:	27bd0028 	addiu	sp,sp,40
  40e488:	03e00008 	jr	ra
  40e48c:	00000000 	nop

0040e490 <jdwp_process_event>:
jdwp_process_event():
/home_a/ppchen/adb/jdwp_service.c:236


static void
jdwp_process_event( int  socket, unsigned  events, void*  _proc )
{
  40e490:	27bdff10 	addiu	sp,sp,-240
  40e494:	afbf00ec 	sw	ra,236(sp)
  40e498:	afbe00e8 	sw	s8,232(sp)
  40e49c:	afb100e4 	sw	s1,228(sp)
  40e4a0:	afb000e0 	sw	s0,224(sp)
  40e4a4:	03a0f021 	move	s8,sp
  40e4a8:	afc400f0 	sw	a0,240(s8)
  40e4ac:	afc500f4 	sw	a1,244(s8)
  40e4b0:	afc600f8 	sw	a2,248(s8)
/home_a/ppchen/adb/jdwp_service.c:237
    JdwpProcess*  proc = _proc;
  40e4b4:	8fc200f8 	lw	v0,248(s8)
  40e4b8:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/jdwp_service.c:239

    if (events & FDE_READ) {
  40e4bc:	8fc200f4 	lw	v0,244(s8)
  40e4c0:	30420001 	andi	v0,v0,0x1
  40e4c4:	104001db 	beqz	v0,40ec34 <jdwp_process_event+0x7a4>
  40e4c8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:240
        if (proc->pid < 0) {
  40e4cc:	8fc2002c 	lw	v0,44(s8)
  40e4d0:	8c420008 	lw	v0,8(v0)
  40e4d4:	04410118 	bgez	v0,40e938 <jdwp_process_event+0x4a8>
  40e4d8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:242
            /* read the PID as a 4-hexchar string */
            char*  p    = proc->in_buff + proc->in_len;
  40e4dc:	8fc2002c 	lw	v0,44(s8)
  40e4e0:	8c420018 	lw	v0,24(v0)
  40e4e4:	24420010 	addiu	v0,v0,16
  40e4e8:	8fc3002c 	lw	v1,44(s8)
  40e4ec:	00621021 	addu	v0,v1,v0
  40e4f0:	24420004 	addiu	v0,v0,4
  40e4f4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/jdwp_service.c:243
            int    size = 4 - proc->in_len;
  40e4f8:	8fc2002c 	lw	v0,44(s8)
  40e4fc:	8c420018 	lw	v0,24(v0)
  40e500:	24030004 	li	v1,4
  40e504:	00621023 	subu	v0,v1,v0
  40e508:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/jdwp_service.c:245
            char   temp[5];
            while (size > 0) {
  40e50c:	1000008f 	b	40e74c <jdwp_process_event+0x2bc>
  40e510:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:246
                int  len = recv( socket, p, size, 0 );
  40e514:	8fc20024 	lw	v0,36(s8)
  40e518:	8fc400f0 	lw	a0,240(s8)
  40e51c:	8fc50020 	lw	a1,32(s8)
  40e520:	00403021 	move	a2,v0
  40e524:	00003821 	move	a3,zero
  40e528:	0c105318 	jal	414c60 <recv@plt>
  40e52c:	00000000 	nop
  40e530:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/jdwp_service.c:247
                if (len < 0) {
  40e534:	8fc20030 	lw	v0,48(s8)
  40e538:	04410041 	bgez	v0,40e640 <jdwp_process_event+0x1b0>
  40e53c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:248
                    if (errno == EINTR)
  40e540:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e544:	00000000 	nop
  40e548:	8c430000 	lw	v1,0(v0)
  40e54c:	24020004 	li	v0,4
  40e550:	1062007d 	beq	v1,v0,40e748 <jdwp_process_event+0x2b8>
  40e554:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:250
                        continue;
                    if (errno == EAGAIN)
  40e558:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e55c:	00000000 	nop
  40e560:	8c430000 	lw	v1,0(v0)
  40e564:	2402000b 	li	v0,11
  40e568:	10620387 	beq	v1,v0,40f388 <jdwp_process_event+0xef8>
  40e56c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:253 (discriminator 1)
                        return;
                    /* this can fail here if the JDWP process crashes very fast */
                    D("weird unknown JDWP process failure: %s\n",
  40e570:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e574:	00000000 	nop
  40e578:	8c420000 	lw	v0,0(v0)
  40e57c:	afc20034 	sw	v0,52(s8)
  40e580:	3c020042 	lui	v0,0x42
  40e584:	244457f0 	addiu	a0,v0,22512
  40e588:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40e58c:	00000000 	nop
  40e590:	3c020042 	lui	v0,0x42
  40e594:	8c4257c4 	lw	v0,22468(v0)
  40e598:	00402021 	move	a0,v0
  40e59c:	3c020041 	lui	v0,0x41
  40e5a0:	2445427c 	addiu	a1,v0,17020
  40e5a4:	3c020041 	lui	v0,0x41
  40e5a8:	24464288 	addiu	a2,v0,17032
  40e5ac:	3c020041 	lui	v0,0x41
  40e5b0:	24474790 	addiu	a3,v0,18320
  40e5b4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e5b8:	00000000 	nop
  40e5bc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e5c0:	00000000 	nop
  40e5c4:	8fc30034 	lw	v1,52(s8)
  40e5c8:	ac430000 	sw	v1,0(v0)
  40e5cc:	3c020042 	lui	v0,0x42
  40e5d0:	8c5057c4 	lw	s0,22468(v0)
  40e5d4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e5d8:	00000000 	nop
  40e5dc:	8c420000 	lw	v0,0(v0)
  40e5e0:	00402021 	move	a0,v0
  40e5e4:	0c1053f8 	jal	414fe0 <strerror@plt>
  40e5e8:	00000000 	nop
  40e5ec:	02002021 	move	a0,s0
  40e5f0:	3c030041 	lui	v1,0x41
  40e5f4:	24654298 	addiu	a1,v1,17048
  40e5f8:	00403021 	move	a2,v0
  40e5fc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e600:	00000000 	nop
  40e604:	3c020042 	lui	v0,0x42
  40e608:	8c4257c4 	lw	v0,22468(v0)
  40e60c:	00402021 	move	a0,v0
  40e610:	0c1053a8 	jal	414ea0 <fflush@plt>
  40e614:	00000000 	nop
  40e618:	3c020042 	lui	v0,0x42
  40e61c:	244457f0 	addiu	a0,v0,22512
  40e620:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40e624:	00000000 	nop
  40e628:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e62c:	00000000 	nop
  40e630:	8fc30034 	lw	v1,52(s8)
  40e634:	ac430000 	sw	v1,0(v0)
  40e638:	10000147 	b	40eb58 <jdwp_process_event+0x6c8>
  40e63c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:258
                      strerror(errno));

                    goto CloseProcess;
                }
                if (len == 0) {  /* end of stream ? */
  40e640:	8fc20030 	lw	v0,48(s8)
  40e644:	14400030 	bnez	v0,40e708 <jdwp_process_event+0x278>
  40e648:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:259 (discriminator 1)
                    D("weird end-of-stream from unknown JDWP process\n");
  40e64c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e650:	00000000 	nop
  40e654:	8c420000 	lw	v0,0(v0)
  40e658:	afc20038 	sw	v0,56(s8)
  40e65c:	3c020042 	lui	v0,0x42
  40e660:	244457f0 	addiu	a0,v0,22512
  40e664:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40e668:	00000000 	nop
  40e66c:	3c020042 	lui	v0,0x42
  40e670:	8c4257c4 	lw	v0,22468(v0)
  40e674:	00402021 	move	a0,v0
  40e678:	3c020041 	lui	v0,0x41
  40e67c:	2445427c 	addiu	a1,v0,17020
  40e680:	3c020041 	lui	v0,0x41
  40e684:	24464288 	addiu	a2,v0,17032
  40e688:	3c020041 	lui	v0,0x41
  40e68c:	24474790 	addiu	a3,v0,18320
  40e690:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e694:	00000000 	nop
  40e698:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e69c:	00000000 	nop
  40e6a0:	8fc30038 	lw	v1,56(s8)
  40e6a4:	ac430000 	sw	v1,0(v0)
  40e6a8:	3c020042 	lui	v0,0x42
  40e6ac:	8c4257c4 	lw	v0,22468(v0)
  40e6b0:	3c030041 	lui	v1,0x41
  40e6b4:	246442c0 	addiu	a0,v1,17088
  40e6b8:	24050001 	li	a1,1
  40e6bc:	2406002e 	li	a2,46
  40e6c0:	00403821 	move	a3,v0
  40e6c4:	0c1052d0 	jal	414b40 <fwrite@plt>
  40e6c8:	00000000 	nop
  40e6cc:	3c020042 	lui	v0,0x42
  40e6d0:	8c4257c4 	lw	v0,22468(v0)
  40e6d4:	00402021 	move	a0,v0
  40e6d8:	0c1053a8 	jal	414ea0 <fflush@plt>
  40e6dc:	00000000 	nop
  40e6e0:	3c020042 	lui	v0,0x42
  40e6e4:	244457f0 	addiu	a0,v0,22512
  40e6e8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40e6ec:	00000000 	nop
  40e6f0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e6f4:	00000000 	nop
  40e6f8:	8fc30038 	lw	v1,56(s8)
  40e6fc:	ac430000 	sw	v1,0(v0)
  40e700:	10000115 	b	40eb58 <jdwp_process_event+0x6c8>
  40e704:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:262
                    goto CloseProcess;
                }
                p            += len;
  40e708:	8fc20030 	lw	v0,48(s8)
  40e70c:	8fc30020 	lw	v1,32(s8)
  40e710:	00621021 	addu	v0,v1,v0
  40e714:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/jdwp_service.c:263
                proc->in_len += len;
  40e718:	8fc2002c 	lw	v0,44(s8)
  40e71c:	8c430018 	lw	v1,24(v0)
  40e720:	8fc20030 	lw	v0,48(s8)
  40e724:	00621821 	addu	v1,v1,v0
  40e728:	8fc2002c 	lw	v0,44(s8)
  40e72c:	ac430018 	sw	v1,24(v0)
/home_a/ppchen/adb/jdwp_service.c:264
                size         -= len;
  40e730:	8fc30024 	lw	v1,36(s8)
  40e734:	8fc20030 	lw	v0,48(s8)
  40e738:	00621023 	subu	v0,v1,v0
  40e73c:	afc20024 	sw	v0,36(s8)
  40e740:	10000002 	b	40e74c <jdwp_process_event+0x2bc>
  40e744:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:249
            char   temp[5];
            while (size > 0) {
                int  len = recv( socket, p, size, 0 );
                if (len < 0) {
                    if (errno == EINTR)
                        continue;
  40e748:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:245 (discriminator 1)
        if (proc->pid < 0) {
            /* read the PID as a 4-hexchar string */
            char*  p    = proc->in_buff + proc->in_len;
            int    size = 4 - proc->in_len;
            char   temp[5];
            while (size > 0) {
  40e74c:	8fc20024 	lw	v0,36(s8)
  40e750:	1c40ff70 	bgtz	v0,40e514 <jdwp_process_event+0x84>
  40e754:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:267
                p            += len;
                proc->in_len += len;
                size         -= len;
            }
            /* we have read 4 characters, now decode the pid */
            memcpy(temp, proc->in_buff, 4);
  40e758:	8fc2002c 	lw	v0,44(s8)
  40e75c:	24420014 	addiu	v0,v0,20
  40e760:	27c3007c 	addiu	v1,s8,124
  40e764:	00602021 	move	a0,v1
  40e768:	00402821 	move	a1,v0
  40e76c:	24060004 	li	a2,4
  40e770:	0c1052d8 	jal	414b60 <memcpy@plt>
  40e774:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:268
            temp[4] = 0;
  40e778:	a3c00080 	sb	zero,128(s8)
/home_a/ppchen/adb/jdwp_service.c:270

            if (sscanf( temp, "%04x", &proc->pid ) != 1) {
  40e77c:	8fc2002c 	lw	v0,44(s8)
  40e780:	24420008 	addiu	v0,v0,8
  40e784:	27c3007c 	addiu	v1,s8,124
  40e788:	00602021 	move	a0,v1
  40e78c:	3c030041 	lui	v1,0x41
  40e790:	24654274 	addiu	a1,v1,17012
  40e794:	00403021 	move	a2,v0
  40e798:	0c105390 	jal	414e40 <sscanf@plt>
  40e79c:	00000000 	nop
  40e7a0:	00401821 	move	v1,v0
  40e7a4:	24020001 	li	v0,1
  40e7a8:	10620031 	beq	v1,v0,40e870 <jdwp_process_event+0x3e0>
  40e7ac:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:271 (discriminator 1)
                D("could not decode JDWP %p PID number: '%s'\n", proc, temp);
  40e7b0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e7b4:	00000000 	nop
  40e7b8:	8c420000 	lw	v0,0(v0)
  40e7bc:	afc2003c 	sw	v0,60(s8)
  40e7c0:	3c020042 	lui	v0,0x42
  40e7c4:	244457f0 	addiu	a0,v0,22512
  40e7c8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40e7cc:	00000000 	nop
  40e7d0:	3c020042 	lui	v0,0x42
  40e7d4:	8c4257c4 	lw	v0,22468(v0)
  40e7d8:	00402021 	move	a0,v0
  40e7dc:	3c020041 	lui	v0,0x41
  40e7e0:	2445427c 	addiu	a1,v0,17020
  40e7e4:	3c020041 	lui	v0,0x41
  40e7e8:	24464288 	addiu	a2,v0,17032
  40e7ec:	3c020041 	lui	v0,0x41
  40e7f0:	24474790 	addiu	a3,v0,18320
  40e7f4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e7f8:	00000000 	nop
  40e7fc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e800:	00000000 	nop
  40e804:	8fc3003c 	lw	v1,60(s8)
  40e808:	ac430000 	sw	v1,0(v0)
  40e80c:	3c020042 	lui	v0,0x42
  40e810:	8c4357c4 	lw	v1,22468(v0)
  40e814:	27c2007c 	addiu	v0,s8,124
  40e818:	00602021 	move	a0,v1
  40e81c:	3c030041 	lui	v1,0x41
  40e820:	246542f0 	addiu	a1,v1,17136
  40e824:	8fc6002c 	lw	a2,44(s8)
  40e828:	00403821 	move	a3,v0
  40e82c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e830:	00000000 	nop
  40e834:	3c020042 	lui	v0,0x42
  40e838:	8c4257c4 	lw	v0,22468(v0)
  40e83c:	00402021 	move	a0,v0
  40e840:	0c1053a8 	jal	414ea0 <fflush@plt>
  40e844:	00000000 	nop
  40e848:	3c020042 	lui	v0,0x42
  40e84c:	244457f0 	addiu	a0,v0,22512
  40e850:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40e854:	00000000 	nop
  40e858:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e85c:	00000000 	nop
  40e860:	8fc3003c 	lw	v1,60(s8)
  40e864:	ac430000 	sw	v1,0(v0)
  40e868:	100000bb 	b	40eb58 <jdwp_process_event+0x6c8>
  40e86c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:276 (discriminator 1)
                goto CloseProcess;
            }

            /* all is well, keep reading to detect connection closure */
            D("Adding pid %d to jdwp process list\n", proc->pid);
  40e870:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e874:	00000000 	nop
  40e878:	8c420000 	lw	v0,0(v0)
  40e87c:	afc20040 	sw	v0,64(s8)
  40e880:	3c020042 	lui	v0,0x42
  40e884:	244457f0 	addiu	a0,v0,22512
  40e888:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40e88c:	00000000 	nop
  40e890:	3c020042 	lui	v0,0x42
  40e894:	8c4257c4 	lw	v0,22468(v0)
  40e898:	00402021 	move	a0,v0
  40e89c:	3c020041 	lui	v0,0x41
  40e8a0:	2445427c 	addiu	a1,v0,17020
  40e8a4:	3c020041 	lui	v0,0x41
  40e8a8:	24464288 	addiu	a2,v0,17032
  40e8ac:	3c020041 	lui	v0,0x41
  40e8b0:	24474790 	addiu	a3,v0,18320
  40e8b4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e8b8:	00000000 	nop
  40e8bc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e8c0:	00000000 	nop
  40e8c4:	8fc30040 	lw	v1,64(s8)
  40e8c8:	ac430000 	sw	v1,0(v0)
  40e8cc:	3c020042 	lui	v0,0x42
  40e8d0:	8c4357c4 	lw	v1,22468(v0)
  40e8d4:	8fc2002c 	lw	v0,44(s8)
  40e8d8:	8c420008 	lw	v0,8(v0)
  40e8dc:	00602021 	move	a0,v1
  40e8e0:	3c030041 	lui	v1,0x41
  40e8e4:	2465431c 	addiu	a1,v1,17180
  40e8e8:	00403021 	move	a2,v0
  40e8ec:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e8f0:	00000000 	nop
  40e8f4:	3c020042 	lui	v0,0x42
  40e8f8:	8c4257c4 	lw	v0,22468(v0)
  40e8fc:	00402021 	move	a0,v0
  40e900:	0c1053a8 	jal	414ea0 <fflush@plt>
  40e904:	00000000 	nop
  40e908:	3c020042 	lui	v0,0x42
  40e90c:	244457f0 	addiu	a0,v0,22512
  40e910:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40e914:	00000000 	nop
  40e918:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e91c:	00000000 	nop
  40e920:	8fc30040 	lw	v1,64(s8)
  40e924:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:277 (discriminator 1)
            jdwp_process_list_updated();
  40e928:	0c1040c7 	jal	41031c <jdwp_process_list_updated>
  40e92c:	00000000 	nop
  40e930:	100000c0 	b	40ec34 <jdwp_process_event+0x7a4>
  40e934:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:286
            /* the pid was read, if we get there it's probably because the connection
             * was closed (e.g. the JDWP process exited or crashed) */
            char  buf[32];

            for (;;) {
                int  len = recv(socket, buf, sizeof(buf), 0);
  40e938:	27c200bc 	addiu	v0,s8,188
  40e93c:	8fc400f0 	lw	a0,240(s8)
  40e940:	00402821 	move	a1,v0
  40e944:	24060020 	li	a2,32
  40e948:	00003821 	move	a3,zero
  40e94c:	0c105318 	jal	414c60 <recv@plt>
  40e950:	00000000 	nop
  40e954:	afc20044 	sw	v0,68(s8)
/home_a/ppchen/adb/jdwp_service.c:288

                if (len <= 0) {
  40e958:	8fc20044 	lw	v0,68(s8)
  40e95c:	1c40004a 	bgtz	v0,40ea88 <jdwp_process_event+0x5f8>
  40e960:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:289
                    if (len < 0 && errno == EINTR)
  40e964:	8fc20044 	lw	v0,68(s8)
  40e968:	04410007 	bgez	v0,40e988 <jdwp_process_event+0x4f8>
  40e96c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:289 (discriminator 1)
  40e970:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e974:	00000000 	nop
  40e978:	8c430000 	lw	v1,0(v0)
  40e97c:	24020004 	li	v0,4
  40e980:	10620072 	beq	v1,v0,40eb4c <jdwp_process_event+0x6bc>
  40e984:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:291
                        continue;
                    if (len < 0 && errno == EAGAIN)
  40e988:	8fc20044 	lw	v0,68(s8)
  40e98c:	04410007 	bgez	v0,40e9ac <jdwp_process_event+0x51c>
  40e990:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:291 (discriminator 1)
  40e994:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e998:	00000000 	nop
  40e99c:	8c430000 	lw	v1,0(v0)
  40e9a0:	2402000b 	li	v0,11
  40e9a4:	10620278 	beq	v1,v0,40f388 <jdwp_process_event+0xef8>
  40e9a8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:294 (discriminator 1)
                        return;
                    else {
                        D("terminating JDWP %d connection: %s\n", proc->pid,
  40e9ac:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e9b0:	00000000 	nop
  40e9b4:	8c420000 	lw	v0,0(v0)
  40e9b8:	afc20048 	sw	v0,72(s8)
  40e9bc:	3c020042 	lui	v0,0x42
  40e9c0:	244457f0 	addiu	a0,v0,22512
  40e9c4:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40e9c8:	00000000 	nop
  40e9cc:	3c020042 	lui	v0,0x42
  40e9d0:	8c4257c4 	lw	v0,22468(v0)
  40e9d4:	00402021 	move	a0,v0
  40e9d8:	3c020041 	lui	v0,0x41
  40e9dc:	2445427c 	addiu	a1,v0,17020
  40e9e0:	3c020041 	lui	v0,0x41
  40e9e4:	24464288 	addiu	a2,v0,17032
  40e9e8:	3c020041 	lui	v0,0x41
  40e9ec:	24474790 	addiu	a3,v0,18320
  40e9f0:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40e9f4:	00000000 	nop
  40e9f8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40e9fc:	00000000 	nop
  40ea00:	8fc30048 	lw	v1,72(s8)
  40ea04:	ac430000 	sw	v1,0(v0)
  40ea08:	3c020042 	lui	v0,0x42
  40ea0c:	8c5157c4 	lw	s1,22468(v0)
  40ea10:	8fc2002c 	lw	v0,44(s8)
  40ea14:	8c500008 	lw	s0,8(v0)
  40ea18:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ea1c:	00000000 	nop
  40ea20:	8c420000 	lw	v0,0(v0)
  40ea24:	00402021 	move	a0,v0
  40ea28:	0c1053f8 	jal	414fe0 <strerror@plt>
  40ea2c:	00000000 	nop
  40ea30:	02202021 	move	a0,s1
  40ea34:	3c030041 	lui	v1,0x41
  40ea38:	24654340 	addiu	a1,v1,17216
  40ea3c:	02003021 	move	a2,s0
  40ea40:	00403821 	move	a3,v0
  40ea44:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ea48:	00000000 	nop
  40ea4c:	3c020042 	lui	v0,0x42
  40ea50:	8c4257c4 	lw	v0,22468(v0)
  40ea54:	00402021 	move	a0,v0
  40ea58:	0c1053a8 	jal	414ea0 <fflush@plt>
  40ea5c:	00000000 	nop
  40ea60:	3c020042 	lui	v0,0x42
  40ea64:	244457f0 	addiu	a0,v0,22512
  40ea68:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40ea6c:	00000000 	nop
  40ea70:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ea74:	00000000 	nop
  40ea78:	8fc30048 	lw	v1,72(s8)
  40ea7c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:296 (discriminator 1)
                          strerror(errno));
                        break;
  40ea80:	10000035 	b	40eb58 <jdwp_process_event+0x6c8>
  40ea84:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:300 (discriminator 1)
                    }
                }
                else {
                    D( "ignoring unexpected JDWP %d control socket activity (%d bytes)\n",
  40ea88:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ea8c:	00000000 	nop
  40ea90:	8c420000 	lw	v0,0(v0)
  40ea94:	afc2004c 	sw	v0,76(s8)
  40ea98:	3c020042 	lui	v0,0x42
  40ea9c:	244457f0 	addiu	a0,v0,22512
  40eaa0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40eaa4:	00000000 	nop
  40eaa8:	3c020042 	lui	v0,0x42
  40eaac:	8c4257c4 	lw	v0,22468(v0)
  40eab0:	00402021 	move	a0,v0
  40eab4:	3c020041 	lui	v0,0x41
  40eab8:	2445427c 	addiu	a1,v0,17020
  40eabc:	3c020041 	lui	v0,0x41
  40eac0:	24464288 	addiu	a2,v0,17032
  40eac4:	3c020041 	lui	v0,0x41
  40eac8:	24474790 	addiu	a3,v0,18320
  40eacc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ead0:	00000000 	nop
  40ead4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ead8:	00000000 	nop
  40eadc:	8fc3004c 	lw	v1,76(s8)
  40eae0:	ac430000 	sw	v1,0(v0)
  40eae4:	3c020042 	lui	v0,0x42
  40eae8:	8c4357c4 	lw	v1,22468(v0)
  40eaec:	8fc2002c 	lw	v0,44(s8)
  40eaf0:	8c420008 	lw	v0,8(v0)
  40eaf4:	00602021 	move	a0,v1
  40eaf8:	3c030041 	lui	v1,0x41
  40eafc:	24654364 	addiu	a1,v1,17252
  40eb00:	00403021 	move	a2,v0
  40eb04:	8fc70044 	lw	a3,68(s8)
  40eb08:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40eb0c:	00000000 	nop
  40eb10:	3c020042 	lui	v0,0x42
  40eb14:	8c4257c4 	lw	v0,22468(v0)
  40eb18:	00402021 	move	a0,v0
  40eb1c:	0c1053a8 	jal	414ea0 <fflush@plt>
  40eb20:	00000000 	nop
  40eb24:	3c020042 	lui	v0,0x42
  40eb28:	244457f0 	addiu	a0,v0,22512
  40eb2c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40eb30:	00000000 	nop
  40eb34:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40eb38:	00000000 	nop
  40eb3c:	8fc3004c 	lw	v1,76(s8)
  40eb40:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:303 (discriminator 1)
                       proc->pid, len );
                }
            }
  40eb44:	1000ff7c 	b	40e938 <jdwp_process_event+0x4a8>
  40eb48:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:290
            for (;;) {
                int  len = recv(socket, buf, sizeof(buf), 0);

                if (len <= 0) {
                    if (len < 0 && errno == EINTR)
                        continue;
  40eb4c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:303
                }
                else {
                    D( "ignoring unexpected JDWP %d control socket activity (%d bytes)\n",
                       proc->pid, len );
                }
            }
  40eb50:	1000ff79 	b	40e938 <jdwp_process_event+0x4a8>
  40eb54:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:306

        CloseProcess:
            if (proc->pid >= 0)
  40eb58:	8fc2002c 	lw	v0,44(s8)
  40eb5c:	8c420008 	lw	v0,8(v0)
  40eb60:	0440002f 	bltz	v0,40ec20 <jdwp_process_event+0x790>
  40eb64:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:307 (discriminator 1)
                D( "remove pid %d to jdwp process list\n", proc->pid );
  40eb68:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40eb6c:	00000000 	nop
  40eb70:	8c420000 	lw	v0,0(v0)
  40eb74:	afc20078 	sw	v0,120(s8)
  40eb78:	3c020042 	lui	v0,0x42
  40eb7c:	244457f0 	addiu	a0,v0,22512
  40eb80:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40eb84:	00000000 	nop
  40eb88:	3c020042 	lui	v0,0x42
  40eb8c:	8c4257c4 	lw	v0,22468(v0)
  40eb90:	00402021 	move	a0,v0
  40eb94:	3c020041 	lui	v0,0x41
  40eb98:	2445427c 	addiu	a1,v0,17020
  40eb9c:	3c020041 	lui	v0,0x41
  40eba0:	24464288 	addiu	a2,v0,17032
  40eba4:	3c020041 	lui	v0,0x41
  40eba8:	24474790 	addiu	a3,v0,18320
  40ebac:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ebb0:	00000000 	nop
  40ebb4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ebb8:	00000000 	nop
  40ebbc:	8fc30078 	lw	v1,120(s8)
  40ebc0:	ac430000 	sw	v1,0(v0)
  40ebc4:	3c020042 	lui	v0,0x42
  40ebc8:	8c4357c4 	lw	v1,22468(v0)
  40ebcc:	8fc2002c 	lw	v0,44(s8)
  40ebd0:	8c420008 	lw	v0,8(v0)
  40ebd4:	00602021 	move	a0,v1
  40ebd8:	3c030041 	lui	v1,0x41
  40ebdc:	246543a4 	addiu	a1,v1,17316
  40ebe0:	00403021 	move	a2,v0
  40ebe4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ebe8:	00000000 	nop
  40ebec:	3c020042 	lui	v0,0x42
  40ebf0:	8c4257c4 	lw	v0,22468(v0)
  40ebf4:	00402021 	move	a0,v0
  40ebf8:	0c1053a8 	jal	414ea0 <fflush@plt>
  40ebfc:	00000000 	nop
  40ec00:	3c020042 	lui	v0,0x42
  40ec04:	244457f0 	addiu	a0,v0,22512
  40ec08:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40ec0c:	00000000 	nop
  40ec10:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ec14:	00000000 	nop
  40ec18:	8fc30078 	lw	v1,120(s8)
  40ec1c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:308
            jdwp_process_free(proc);
  40ec20:	8fc4002c 	lw	a0,44(s8)
  40ec24:	0c103878 	jal	40e1e0 <jdwp_process_free>
  40ec28:	00000000 	nop
  40ec2c:	100001d6 	b	40f388 <jdwp_process_event+0xef8>
  40ec30:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:313
            return;
        }
    }

    if (events & FDE_WRITE) {
  40ec34:	8fc200f4 	lw	v0,244(s8)
  40ec38:	30420002 	andi	v0,v0,0x2
  40ec3c:	104001d2 	beqz	v0,40f388 <jdwp_process_event+0xef8>
  40ec40:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:314 (discriminator 1)
        D("trying to write to JDWP pid controli (count=%d first=%d) %d\n",
  40ec44:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ec48:	00000000 	nop
  40ec4c:	8c420000 	lw	v0,0(v0)
  40ec50:	afc20050 	sw	v0,80(s8)
  40ec54:	3c020042 	lui	v0,0x42
  40ec58:	244457f0 	addiu	a0,v0,22512
  40ec5c:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40ec60:	00000000 	nop
  40ec64:	3c020042 	lui	v0,0x42
  40ec68:	8c4257c4 	lw	v0,22468(v0)
  40ec6c:	00402021 	move	a0,v0
  40ec70:	3c020041 	lui	v0,0x41
  40ec74:	2445427c 	addiu	a1,v0,17020
  40ec78:	3c020041 	lui	v0,0x41
  40ec7c:	24464288 	addiu	a2,v0,17032
  40ec80:	3c020041 	lui	v0,0x41
  40ec84:	24474790 	addiu	a3,v0,18320
  40ec88:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ec8c:	00000000 	nop
  40ec90:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ec94:	00000000 	nop
  40ec98:	8fc30050 	lw	v1,80(s8)
  40ec9c:	ac430000 	sw	v1,0(v0)
  40eca0:	3c020042 	lui	v0,0x42
  40eca4:	8c4457c4 	lw	a0,22468(v0)
  40eca8:	8fc2002c 	lw	v0,44(s8)
  40ecac:	8c430008 	lw	v1,8(v0)
  40ecb0:	8fc2002c 	lw	v0,44(s8)
  40ecb4:	8c42002c 	lw	v0,44(v0)
  40ecb8:	8fc5002c 	lw	a1,44(s8)
  40ecbc:	8ca5001c 	lw	a1,28(a1)
  40ecc0:	afa50010 	sw	a1,16(sp)
  40ecc4:	3c050041 	lui	a1,0x41
  40ecc8:	24a543c8 	addiu	a1,a1,17352
  40eccc:	00603021 	move	a2,v1
  40ecd0:	00403821 	move	a3,v0
  40ecd4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ecd8:	00000000 	nop
  40ecdc:	3c020042 	lui	v0,0x42
  40ece0:	8c4257c4 	lw	v0,22468(v0)
  40ece4:	00402021 	move	a0,v0
  40ece8:	0c1053a8 	jal	414ea0 <fflush@plt>
  40ecec:	00000000 	nop
  40ecf0:	3c020042 	lui	v0,0x42
  40ecf4:	244457f0 	addiu	a0,v0,22512
  40ecf8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40ecfc:	00000000 	nop
  40ed00:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ed04:	00000000 	nop
  40ed08:	8fc30050 	lw	v1,80(s8)
  40ed0c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:316 (discriminator 1)
          proc->pid, proc->out_count, proc->out_fds[0]);
        if (proc->out_count > 0) {
  40ed10:	8fc2002c 	lw	v0,44(s8)
  40ed14:	8c42002c 	lw	v0,44(v0)
  40ed18:	1840019b 	blez	v0,40f388 <jdwp_process_event+0xef8>
  40ed1c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:317
            int  fd = proc->out_fds[0];
  40ed20:	8fc2002c 	lw	v0,44(s8)
  40ed24:	8c42001c 	lw	v0,28(v0)
  40ed28:	afc20054 	sw	v0,84(s8)
/home_a/ppchen/adb/jdwp_service.c:322
            int  n, ret;
            struct cmsghdr*  cmsg;
            struct msghdr    msg;
            struct iovec     iov;
            char             dummy = '!';
  40ed2c:	24020021 	li	v0,33
  40ed30:	a3c200a8 	sb	v0,168(s8)
/home_a/ppchen/adb/jdwp_service.c:326
            char             buffer[sizeof(struct cmsghdr) + sizeof(int)];
            int flags;

            iov.iov_base       = &dummy;
  40ed34:	27c200a8 	addiu	v0,s8,168
  40ed38:	afc200a0 	sw	v0,160(s8)
/home_a/ppchen/adb/jdwp_service.c:327
            iov.iov_len        = 1;
  40ed3c:	24020001 	li	v0,1
  40ed40:	afc200a4 	sw	v0,164(s8)
/home_a/ppchen/adb/jdwp_service.c:328
            msg.msg_name       = NULL;
  40ed44:	afc00084 	sw	zero,132(s8)
/home_a/ppchen/adb/jdwp_service.c:329
            msg.msg_namelen    = 0;
  40ed48:	afc00088 	sw	zero,136(s8)
/home_a/ppchen/adb/jdwp_service.c:330
            msg.msg_iov        = &iov;
  40ed4c:	27c200a0 	addiu	v0,s8,160
  40ed50:	afc2008c 	sw	v0,140(s8)
/home_a/ppchen/adb/jdwp_service.c:331
            msg.msg_iovlen     = 1;
  40ed54:	24020001 	li	v0,1
  40ed58:	afc20090 	sw	v0,144(s8)
/home_a/ppchen/adb/jdwp_service.c:332
            msg.msg_flags      = 0;
  40ed5c:	afc0009c 	sw	zero,156(s8)
/home_a/ppchen/adb/jdwp_service.c:333
            msg.msg_control    = buffer;
  40ed60:	27c200ac 	addiu	v0,s8,172
  40ed64:	afc20094 	sw	v0,148(s8)
/home_a/ppchen/adb/jdwp_service.c:334
            msg.msg_controllen = sizeof(buffer);
  40ed68:	24020010 	li	v0,16
  40ed6c:	afc20098 	sw	v0,152(s8)
/home_a/ppchen/adb/jdwp_service.c:336

            cmsg = CMSG_FIRSTHDR(&msg);
  40ed70:	8fc20098 	lw	v0,152(s8)
  40ed74:	2c42000c 	sltiu	v0,v0,12
  40ed78:	14400004 	bnez	v0,40ed8c <jdwp_process_event+0x8fc>
  40ed7c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:336 (discriminator 1)
  40ed80:	8fc20094 	lw	v0,148(s8)
  40ed84:	10000002 	b	40ed90 <jdwp_process_event+0x900>
  40ed88:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:336 (discriminator 2)
  40ed8c:	00001021 	move	v0,zero
/home_a/ppchen/adb/jdwp_service.c:336 (discriminator 3)
  40ed90:	afc20058 	sw	v0,88(s8)
/home_a/ppchen/adb/jdwp_service.c:337 (discriminator 3)
            cmsg->cmsg_len   = msg.msg_controllen;
  40ed94:	8fc30098 	lw	v1,152(s8)
  40ed98:	8fc20058 	lw	v0,88(s8)
  40ed9c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:338 (discriminator 3)
            cmsg->cmsg_level = SOL_SOCKET;
  40eda0:	8fc20058 	lw	v0,88(s8)
  40eda4:	3403ffff 	li	v1,0xffff
  40eda8:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:339 (discriminator 3)
            cmsg->cmsg_type  = SCM_RIGHTS;
  40edac:	8fc20058 	lw	v0,88(s8)
  40edb0:	24030001 	li	v1,1
  40edb4:	ac430008 	sw	v1,8(v0)
/home_a/ppchen/adb/jdwp_service.c:340 (discriminator 3)
            ((int*)CMSG_DATA(cmsg))[0] = fd;
  40edb8:	8fc20058 	lw	v0,88(s8)
  40edbc:	2442000c 	addiu	v0,v0,12
  40edc0:	8fc30054 	lw	v1,84(s8)
  40edc4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:342 (discriminator 3)

            flags = fcntl(proc->socket,F_GETFL,0);
  40edc8:	8fc2002c 	lw	v0,44(s8)
  40edcc:	8c42000c 	lw	v0,12(v0)
  40edd0:	00402021 	move	a0,v0
  40edd4:	24050003 	li	a1,3
  40edd8:	00003021 	move	a2,zero
  40eddc:	0c10532c 	jal	414cb0 <fcntl@plt>
  40ede0:	00000000 	nop
  40ede4:	afc2005c 	sw	v0,92(s8)
/home_a/ppchen/adb/jdwp_service.c:344 (discriminator 3)

            if (flags == -1) {
  40ede8:	8fc3005c 	lw	v1,92(s8)
  40edec:	2402ffff 	li	v0,-1
  40edf0:	14620038 	bne	v1,v0,40eed4 <jdwp_process_event+0xa44>
  40edf4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:345 (discriminator 1)
                D("failed to get cntl flags for socket %d: %s\n",
  40edf8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40edfc:	00000000 	nop
  40ee00:	8c420000 	lw	v0,0(v0)
  40ee04:	afc20060 	sw	v0,96(s8)
  40ee08:	3c020042 	lui	v0,0x42
  40ee0c:	244457f0 	addiu	a0,v0,22512
  40ee10:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40ee14:	00000000 	nop
  40ee18:	3c020042 	lui	v0,0x42
  40ee1c:	8c4257c4 	lw	v0,22468(v0)
  40ee20:	00402021 	move	a0,v0
  40ee24:	3c020041 	lui	v0,0x41
  40ee28:	2445427c 	addiu	a1,v0,17020
  40ee2c:	3c020041 	lui	v0,0x41
  40ee30:	24464288 	addiu	a2,v0,17032
  40ee34:	3c020041 	lui	v0,0x41
  40ee38:	24474790 	addiu	a3,v0,18320
  40ee3c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ee40:	00000000 	nop
  40ee44:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ee48:	00000000 	nop
  40ee4c:	8fc30060 	lw	v1,96(s8)
  40ee50:	ac430000 	sw	v1,0(v0)
  40ee54:	3c020042 	lui	v0,0x42
  40ee58:	8c5157c4 	lw	s1,22468(v0)
  40ee5c:	8fc2002c 	lw	v0,44(s8)
  40ee60:	8c500008 	lw	s0,8(v0)
  40ee64:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ee68:	00000000 	nop
  40ee6c:	8c420000 	lw	v0,0(v0)
  40ee70:	00402021 	move	a0,v0
  40ee74:	0c1053f8 	jal	414fe0 <strerror@plt>
  40ee78:	00000000 	nop
  40ee7c:	02202021 	move	a0,s1
  40ee80:	3c030041 	lui	v1,0x41
  40ee84:	24654408 	addiu	a1,v1,17416
  40ee88:	02003021 	move	a2,s0
  40ee8c:	00403821 	move	a3,v0
  40ee90:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ee94:	00000000 	nop
  40ee98:	3c020042 	lui	v0,0x42
  40ee9c:	8c4257c4 	lw	v0,22468(v0)
  40eea0:	00402021 	move	a0,v0
  40eea4:	0c1053a8 	jal	414ea0 <fflush@plt>
  40eea8:	00000000 	nop
  40eeac:	3c020042 	lui	v0,0x42
  40eeb0:	244457f0 	addiu	a0,v0,22512
  40eeb4:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40eeb8:	00000000 	nop
  40eebc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40eec0:	00000000 	nop
  40eec4:	8fc30060 	lw	v1,96(s8)
  40eec8:	ac430000 	sw	v1,0(v0)
  40eecc:	1000ff22 	b	40eb58 <jdwp_process_event+0x6c8>
  40eed0:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:351
                  proc->pid, strerror(errno));
                goto CloseProcess;

            }

            if (fcntl(proc->socket, F_SETFL, flags & ~O_NONBLOCK) == -1) {
  40eed4:	8fc2002c 	lw	v0,44(s8)
  40eed8:	8c43000c 	lw	v1,12(v0)
  40eedc:	8fc4005c 	lw	a0,92(s8)
  40eee0:	2402ff7f 	li	v0,-129
  40eee4:	00821024 	and	v0,a0,v0
  40eee8:	00602021 	move	a0,v1
  40eeec:	24050004 	li	a1,4
  40eef0:	00403021 	move	a2,v0
  40eef4:	0c10532c 	jal	414cb0 <fcntl@plt>
  40eef8:	00000000 	nop
  40eefc:	00401821 	move	v1,v0
  40ef00:	2402ffff 	li	v0,-1
  40ef04:	14620039 	bne	v1,v0,40efec <jdwp_process_event+0xb5c>
  40ef08:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:352 (discriminator 1)
                D("failed to remove O_NONBLOCK flag for socket %d: %s\n",
  40ef0c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ef10:	00000000 	nop
  40ef14:	8c420000 	lw	v0,0(v0)
  40ef18:	afc20064 	sw	v0,100(s8)
  40ef1c:	3c020042 	lui	v0,0x42
  40ef20:	244457f0 	addiu	a0,v0,22512
  40ef24:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40ef28:	00000000 	nop
  40ef2c:	3c020042 	lui	v0,0x42
  40ef30:	8c4257c4 	lw	v0,22468(v0)
  40ef34:	00402021 	move	a0,v0
  40ef38:	3c020041 	lui	v0,0x41
  40ef3c:	2445427c 	addiu	a1,v0,17020
  40ef40:	3c020041 	lui	v0,0x41
  40ef44:	24464288 	addiu	a2,v0,17032
  40ef48:	3c020041 	lui	v0,0x41
  40ef4c:	24474790 	addiu	a3,v0,18320
  40ef50:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ef54:	00000000 	nop
  40ef58:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ef5c:	00000000 	nop
  40ef60:	8fc30064 	lw	v1,100(s8)
  40ef64:	ac430000 	sw	v1,0(v0)
  40ef68:	3c020042 	lui	v0,0x42
  40ef6c:	8c5157c4 	lw	s1,22468(v0)
  40ef70:	8fc2002c 	lw	v0,44(s8)
  40ef74:	8c500008 	lw	s0,8(v0)
  40ef78:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ef7c:	00000000 	nop
  40ef80:	8c420000 	lw	v0,0(v0)
  40ef84:	00402021 	move	a0,v0
  40ef88:	0c1053f8 	jal	414fe0 <strerror@plt>
  40ef8c:	00000000 	nop
  40ef90:	02202021 	move	a0,s1
  40ef94:	3c030041 	lui	v1,0x41
  40ef98:	24654434 	addiu	a1,v1,17460
  40ef9c:	02003021 	move	a2,s0
  40efa0:	00403821 	move	a3,v0
  40efa4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40efa8:	00000000 	nop
  40efac:	3c020042 	lui	v0,0x42
  40efb0:	8c4257c4 	lw	v0,22468(v0)
  40efb4:	00402021 	move	a0,v0
  40efb8:	0c1053a8 	jal	414ea0 <fflush@plt>
  40efbc:	00000000 	nop
  40efc0:	3c020042 	lui	v0,0x42
  40efc4:	244457f0 	addiu	a0,v0,22512
  40efc8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40efcc:	00000000 	nop
  40efd0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40efd4:	00000000 	nop
  40efd8:	8fc30064 	lw	v1,100(s8)
  40efdc:	ac430000 	sw	v1,0(v0)
  40efe0:	1000fedd 	b	40eb58 <jdwp_process_event+0x6c8>
  40efe4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:368
                if (errno == EINTR)
                    continue;
                D("sending new file descriptor to JDWP %d failed: %s\n",
                  proc->pid, strerror(errno));
                goto CloseProcess;
            }
  40efe8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:358
                  proc->pid, strerror(errno));
                goto CloseProcess;
            }

            for (;;) {
                ret = sendmsg(proc->socket, &msg, 0);
  40efec:	8fc2002c 	lw	v0,44(s8)
  40eff0:	8c43000c 	lw	v1,12(v0)
  40eff4:	27c20084 	addiu	v0,s8,132
  40eff8:	00602021 	move	a0,v1
  40effc:	00402821 	move	a1,v0
  40f000:	00003021 	move	a2,zero
  40f004:	0c105330 	jal	414cc0 <sendmsg@plt>
  40f008:	00000000 	nop
  40f00c:	afc20068 	sw	v0,104(s8)
/home_a/ppchen/adb/jdwp_service.c:359
                if (ret >= 0) {
  40f010:	8fc20068 	lw	v0,104(s8)
  40f014:	04400038 	bltz	v0,40f0f8 <jdwp_process_event+0xc68>
  40f018:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:360
                    adb_close(fd);
  40f01c:	8fc40054 	lw	a0,84(s8)
  40f020:	0c1037ab 	jal	40deac <adb_close>
  40f024:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:361
                    break;
  40f028:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:370
                D("sending new file descriptor to JDWP %d failed: %s\n",
                  proc->pid, strerror(errno));
                goto CloseProcess;
            }

            D("sent file descriptor %d to JDWP process %d\n",
  40f02c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f030:	00000000 	nop
  40f034:	8c420000 	lw	v0,0(v0)
  40f038:	afc2006c 	sw	v0,108(s8)
  40f03c:	3c020042 	lui	v0,0x42
  40f040:	244457f0 	addiu	a0,v0,22512
  40f044:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f048:	00000000 	nop
  40f04c:	3c020042 	lui	v0,0x42
  40f050:	8c4257c4 	lw	v0,22468(v0)
  40f054:	00402021 	move	a0,v0
  40f058:	3c020041 	lui	v0,0x41
  40f05c:	2445427c 	addiu	a1,v0,17020
  40f060:	3c020041 	lui	v0,0x41
  40f064:	24464288 	addiu	a2,v0,17032
  40f068:	3c020041 	lui	v0,0x41
  40f06c:	24474790 	addiu	a3,v0,18320
  40f070:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f074:	00000000 	nop
  40f078:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f07c:	00000000 	nop
  40f080:	8fc3006c 	lw	v1,108(s8)
  40f084:	ac430000 	sw	v1,0(v0)
  40f088:	3c020042 	lui	v0,0x42
  40f08c:	8c4357c4 	lw	v1,22468(v0)
  40f090:	8fc2002c 	lw	v0,44(s8)
  40f094:	8c420008 	lw	v0,8(v0)
  40f098:	00602021 	move	a0,v1
  40f09c:	3c030041 	lui	v1,0x41
  40f0a0:	2465449c 	addiu	a1,v1,17564
  40f0a4:	8fc60054 	lw	a2,84(s8)
  40f0a8:	00403821 	move	a3,v0
  40f0ac:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f0b0:	00000000 	nop
  40f0b4:	3c020042 	lui	v0,0x42
  40f0b8:	8c4257c4 	lw	v0,22468(v0)
  40f0bc:	00402021 	move	a0,v0
  40f0c0:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f0c4:	00000000 	nop
  40f0c8:	3c020042 	lui	v0,0x42
  40f0cc:	244457f0 	addiu	a0,v0,22512
  40f0d0:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f0d4:	00000000 	nop
  40f0d8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f0dc:	00000000 	nop
  40f0e0:	8fc3006c 	lw	v1,108(s8)
  40f0e4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:373
              fd, proc->pid);

            for (n = 1; n < proc->out_count; n++)
  40f0e8:	24020001 	li	v0,1
  40f0ec:	afc20028 	sw	v0,40(s8)
  40f0f0:	1000004e 	b	40f22c <jdwp_process_event+0xd9c>
  40f0f4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:363
                ret = sendmsg(proc->socket, &msg, 0);
                if (ret >= 0) {
                    adb_close(fd);
                    break;
                }
                if (errno == EINTR)
  40f0f8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f0fc:	00000000 	nop
  40f100:	8c430000 	lw	v1,0(v0)
  40f104:	24020004 	li	v0,4
  40f108:	1062ffb7 	beq	v1,v0,40efe8 <jdwp_process_event+0xb58>
  40f10c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:365 (discriminator 1)
                    continue;
                D("sending new file descriptor to JDWP %d failed: %s\n",
  40f110:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f114:	00000000 	nop
  40f118:	8c420000 	lw	v0,0(v0)
  40f11c:	afc20074 	sw	v0,116(s8)
  40f120:	3c020042 	lui	v0,0x42
  40f124:	244457f0 	addiu	a0,v0,22512
  40f128:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f12c:	00000000 	nop
  40f130:	3c020042 	lui	v0,0x42
  40f134:	8c4257c4 	lw	v0,22468(v0)
  40f138:	00402021 	move	a0,v0
  40f13c:	3c020041 	lui	v0,0x41
  40f140:	2445427c 	addiu	a1,v0,17020
  40f144:	3c020041 	lui	v0,0x41
  40f148:	24464288 	addiu	a2,v0,17032
  40f14c:	3c020041 	lui	v0,0x41
  40f150:	24474790 	addiu	a3,v0,18320
  40f154:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f158:	00000000 	nop
  40f15c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f160:	00000000 	nop
  40f164:	8fc30074 	lw	v1,116(s8)
  40f168:	ac430000 	sw	v1,0(v0)
  40f16c:	3c020042 	lui	v0,0x42
  40f170:	8c5157c4 	lw	s1,22468(v0)
  40f174:	8fc2002c 	lw	v0,44(s8)
  40f178:	8c500008 	lw	s0,8(v0)
  40f17c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f180:	00000000 	nop
  40f184:	8c420000 	lw	v0,0(v0)
  40f188:	00402021 	move	a0,v0
  40f18c:	0c1053f8 	jal	414fe0 <strerror@plt>
  40f190:	00000000 	nop
  40f194:	02202021 	move	a0,s1
  40f198:	3c030041 	lui	v1,0x41
  40f19c:	24654468 	addiu	a1,v1,17512
  40f1a0:	02003021 	move	a2,s0
  40f1a4:	00403821 	move	a3,v0
  40f1a8:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f1ac:	00000000 	nop
  40f1b0:	3c020042 	lui	v0,0x42
  40f1b4:	8c4257c4 	lw	v0,22468(v0)
  40f1b8:	00402021 	move	a0,v0
  40f1bc:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f1c0:	00000000 	nop
  40f1c4:	3c020042 	lui	v0,0x42
  40f1c8:	244457f0 	addiu	a0,v0,22512
  40f1cc:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f1d0:	00000000 	nop
  40f1d4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f1d8:	00000000 	nop
  40f1dc:	8fc30074 	lw	v1,116(s8)
  40f1e0:	ac430000 	sw	v1,0(v0)
  40f1e4:	1000fe5c 	b	40eb58 <jdwp_process_event+0x6c8>
  40f1e8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:374 (discriminator 2)

            D("sent file descriptor %d to JDWP process %d\n",
              fd, proc->pid);

            for (n = 1; n < proc->out_count; n++)
                proc->out_fds[n-1] = proc->out_fds[n];
  40f1ec:	8fc20028 	lw	v0,40(s8)
  40f1f0:	2445ffff 	addiu	a1,v0,-1
  40f1f4:	8fc3002c 	lw	v1,44(s8)
  40f1f8:	8fc20028 	lw	v0,40(s8)
  40f1fc:	24420006 	addiu	v0,v0,6
  40f200:	00021080 	sll	v0,v0,0x2
  40f204:	00621021 	addu	v0,v1,v0
  40f208:	8c430004 	lw	v1,4(v0)
  40f20c:	8fc4002c 	lw	a0,44(s8)
  40f210:	24a20006 	addiu	v0,a1,6
  40f214:	00021080 	sll	v0,v0,0x2
  40f218:	00821021 	addu	v0,a0,v0
  40f21c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:373 (discriminator 2)
            }

            D("sent file descriptor %d to JDWP process %d\n",
              fd, proc->pid);

            for (n = 1; n < proc->out_count; n++)
  40f220:	8fc20028 	lw	v0,40(s8)
  40f224:	24420001 	addiu	v0,v0,1
  40f228:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:373 (discriminator 1)
  40f22c:	8fc2002c 	lw	v0,44(s8)
  40f230:	8c43002c 	lw	v1,44(v0)
  40f234:	8fc20028 	lw	v0,40(s8)
  40f238:	0043102a 	slt	v0,v0,v1
  40f23c:	1440ffeb 	bnez	v0,40f1ec <jdwp_process_event+0xd5c>
  40f240:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:376
                proc->out_fds[n-1] = proc->out_fds[n];

            if (fcntl(proc->socket, F_SETFL, flags) == -1) {
  40f244:	8fc2002c 	lw	v0,44(s8)
  40f248:	8c42000c 	lw	v0,12(v0)
  40f24c:	00402021 	move	a0,v0
  40f250:	24050004 	li	a1,4
  40f254:	8fc6005c 	lw	a2,92(s8)
  40f258:	0c10532c 	jal	414cb0 <fcntl@plt>
  40f25c:	00000000 	nop
  40f260:	00401821 	move	v1,v0
  40f264:	2402ffff 	li	v0,-1
  40f268:	14620038 	bne	v1,v0,40f34c <jdwp_process_event+0xebc>
  40f26c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:377 (discriminator 1)
                D("failed to set O_NONBLOCK flag for socket %d: %s\n",
  40f270:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f274:	00000000 	nop
  40f278:	8c420000 	lw	v0,0(v0)
  40f27c:	afc20070 	sw	v0,112(s8)
  40f280:	3c020042 	lui	v0,0x42
  40f284:	244457f0 	addiu	a0,v0,22512
  40f288:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f28c:	00000000 	nop
  40f290:	3c020042 	lui	v0,0x42
  40f294:	8c4257c4 	lw	v0,22468(v0)
  40f298:	00402021 	move	a0,v0
  40f29c:	3c020041 	lui	v0,0x41
  40f2a0:	2445427c 	addiu	a1,v0,17020
  40f2a4:	3c020041 	lui	v0,0x41
  40f2a8:	24464288 	addiu	a2,v0,17032
  40f2ac:	3c020041 	lui	v0,0x41
  40f2b0:	24474790 	addiu	a3,v0,18320
  40f2b4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f2b8:	00000000 	nop
  40f2bc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f2c0:	00000000 	nop
  40f2c4:	8fc30070 	lw	v1,112(s8)
  40f2c8:	ac430000 	sw	v1,0(v0)
  40f2cc:	3c020042 	lui	v0,0x42
  40f2d0:	8c5157c4 	lw	s1,22468(v0)
  40f2d4:	8fc2002c 	lw	v0,44(s8)
  40f2d8:	8c500008 	lw	s0,8(v0)
  40f2dc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f2e0:	00000000 	nop
  40f2e4:	8c420000 	lw	v0,0(v0)
  40f2e8:	00402021 	move	a0,v0
  40f2ec:	0c1053f8 	jal	414fe0 <strerror@plt>
  40f2f0:	00000000 	nop
  40f2f4:	02202021 	move	a0,s1
  40f2f8:	3c030041 	lui	v1,0x41
  40f2fc:	246544c8 	addiu	a1,v1,17608
  40f300:	02003021 	move	a2,s0
  40f304:	00403821 	move	a3,v0
  40f308:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f30c:	00000000 	nop
  40f310:	3c020042 	lui	v0,0x42
  40f314:	8c4257c4 	lw	v0,22468(v0)
  40f318:	00402021 	move	a0,v0
  40f31c:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f320:	00000000 	nop
  40f324:	3c020042 	lui	v0,0x42
  40f328:	244457f0 	addiu	a0,v0,22512
  40f32c:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f330:	00000000 	nop
  40f334:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f338:	00000000 	nop
  40f33c:	8fc30070 	lw	v1,112(s8)
  40f340:	ac430000 	sw	v1,0(v0)
  40f344:	1000fe04 	b	40eb58 <jdwp_process_event+0x6c8>
  40f348:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:382
                  proc->pid, strerror(errno));
                goto CloseProcess;
            }

            if (--proc->out_count == 0)
  40f34c:	8fc2002c 	lw	v0,44(s8)
  40f350:	8c42002c 	lw	v0,44(v0)
  40f354:	2443ffff 	addiu	v1,v0,-1
  40f358:	8fc2002c 	lw	v0,44(s8)
  40f35c:	ac43002c 	sw	v1,44(v0)
  40f360:	8fc2002c 	lw	v0,44(s8)
  40f364:	8c42002c 	lw	v0,44(v0)
  40f368:	14400007 	bnez	v0,40f388 <jdwp_process_event+0xef8>
  40f36c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:383
                fdevent_del( proc->fde, FDE_WRITE );
  40f370:	8fc2002c 	lw	v0,44(s8)
  40f374:	8c420010 	lw	v0,16(v0)
  40f378:	00402021 	move	a0,v0
  40f37c:	24050002 	li	a1,2
  40f380:	0c10174b 	jal	405d2c <fdevent_del>
  40f384:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:386
        }
    }
}
  40f388:	03c0e821 	move	sp,s8
  40f38c:	8fbf00ec 	lw	ra,236(sp)
  40f390:	8fbe00e8 	lw	s8,232(sp)
  40f394:	8fb100e4 	lw	s1,228(sp)
  40f398:	8fb000e0 	lw	s0,224(sp)
  40f39c:	27bd00f0 	addiu	sp,sp,240
  40f3a0:	03e00008 	jr	ra
  40f3a4:	00000000 	nop

0040f3a8 <create_jdwp_connection_fd>:
create_jdwp_connection_fd():
/home_a/ppchen/adb/jdwp_service.c:391


int
create_jdwp_connection_fd(int  pid)
{
  40f3a8:	27bdffb8 	addiu	sp,sp,-72
  40f3ac:	afbf0044 	sw	ra,68(sp)
  40f3b0:	afbe0040 	sw	s8,64(sp)
  40f3b4:	afb0003c 	sw	s0,60(sp)
  40f3b8:	03a0f021 	move	s8,sp
  40f3bc:	afc40048 	sw	a0,72(s8)
/home_a/ppchen/adb/jdwp_service.c:392
    JdwpProcess*  proc = _jdwp_list.next;
  40f3c0:	3c020042 	lui	v0,0x42
  40f3c4:	8c425a10 	lw	v0,23056(v0)
  40f3c8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:394

    D("looking for pid %d in JDWP process list\n", pid);
  40f3cc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f3d0:	00000000 	nop
  40f3d4:	8c420000 	lw	v0,0(v0)
  40f3d8:	afc2001c 	sw	v0,28(s8)
  40f3dc:	3c020042 	lui	v0,0x42
  40f3e0:	244457f0 	addiu	a0,v0,22512
  40f3e4:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f3e8:	00000000 	nop
  40f3ec:	3c020042 	lui	v0,0x42
  40f3f0:	8c4257c4 	lw	v0,22468(v0)
  40f3f4:	00402021 	move	a0,v0
  40f3f8:	3c020041 	lui	v0,0x41
  40f3fc:	2445427c 	addiu	a1,v0,17020
  40f400:	3c020041 	lui	v0,0x41
  40f404:	24464288 	addiu	a2,v0,17032
  40f408:	3c020041 	lui	v0,0x41
  40f40c:	24474774 	addiu	a3,v0,18292
  40f410:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f414:	00000000 	nop
  40f418:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f41c:	00000000 	nop
  40f420:	8fc3001c 	lw	v1,28(s8)
  40f424:	ac430000 	sw	v1,0(v0)
  40f428:	3c020042 	lui	v0,0x42
  40f42c:	8c4257c4 	lw	v0,22468(v0)
  40f430:	00402021 	move	a0,v0
  40f434:	3c020041 	lui	v0,0x41
  40f438:	244544fc 	addiu	a1,v0,17660
  40f43c:	8fc60048 	lw	a2,72(s8)
  40f440:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f444:	00000000 	nop
  40f448:	3c020042 	lui	v0,0x42
  40f44c:	8c4257c4 	lw	v0,22468(v0)
  40f450:	00402021 	move	a0,v0
  40f454:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f458:	00000000 	nop
  40f45c:	3c020042 	lui	v0,0x42
  40f460:	244457f0 	addiu	a0,v0,22512
  40f464:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f468:	00000000 	nop
  40f46c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f470:	00000000 	nop
  40f474:	8fc3001c 	lw	v1,28(s8)
  40f478:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:395
    for ( ; proc != &_jdwp_list; proc = proc->next ) {
  40f47c:	10000009 	b	40f4a4 <create_jdwp_connection_fd+0xfc>
  40f480:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:396
        if (proc->pid == pid) {
  40f484:	8fc20018 	lw	v0,24(s8)
  40f488:	8c430008 	lw	v1,8(v0)
  40f48c:	8fc20048 	lw	v0,72(s8)
  40f490:	10620039 	beq	v1,v0,40f578 <create_jdwp_connection_fd+0x1d0>
  40f494:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:395
create_jdwp_connection_fd(int  pid)
{
    JdwpProcess*  proc = _jdwp_list.next;

    D("looking for pid %d in JDWP process list\n", pid);
    for ( ; proc != &_jdwp_list; proc = proc->next ) {
  40f498:	8fc20018 	lw	v0,24(s8)
  40f49c:	8c420000 	lw	v0,0(v0)
  40f4a0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:395 (discriminator 1)
  40f4a4:	8fc30018 	lw	v1,24(s8)
  40f4a8:	3c020042 	lui	v0,0x42
  40f4ac:	24425a10 	addiu	v0,v0,23056
  40f4b0:	1462fff4 	bne	v1,v0,40f484 <create_jdwp_connection_fd+0xdc>
  40f4b4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:400 (discriminator 1)
        if (proc->pid == pid) {
            goto FoundIt;
        }
    }
    D("search failed !!\n");
  40f4b8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f4bc:	00000000 	nop
  40f4c0:	8c420000 	lw	v0,0(v0)
  40f4c4:	afc20028 	sw	v0,40(s8)
  40f4c8:	3c020042 	lui	v0,0x42
  40f4cc:	244457f0 	addiu	a0,v0,22512
  40f4d0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f4d4:	00000000 	nop
  40f4d8:	3c020042 	lui	v0,0x42
  40f4dc:	8c4257c4 	lw	v0,22468(v0)
  40f4e0:	00402021 	move	a0,v0
  40f4e4:	3c020041 	lui	v0,0x41
  40f4e8:	2445427c 	addiu	a1,v0,17020
  40f4ec:	3c020041 	lui	v0,0x41
  40f4f0:	24464288 	addiu	a2,v0,17032
  40f4f4:	3c020041 	lui	v0,0x41
  40f4f8:	24474774 	addiu	a3,v0,18292
  40f4fc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f500:	00000000 	nop
  40f504:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f508:	00000000 	nop
  40f50c:	8fc30028 	lw	v1,40(s8)
  40f510:	ac430000 	sw	v1,0(v0)
  40f514:	3c020042 	lui	v0,0x42
  40f518:	8c4257c4 	lw	v0,22468(v0)
  40f51c:	3c030041 	lui	v1,0x41
  40f520:	24644528 	addiu	a0,v1,17704
  40f524:	24050001 	li	a1,1
  40f528:	24060011 	li	a2,17
  40f52c:	00403821 	move	a3,v0
  40f530:	0c1052d0 	jal	414b40 <fwrite@plt>
  40f534:	00000000 	nop
  40f538:	3c020042 	lui	v0,0x42
  40f53c:	8c4257c4 	lw	v0,22468(v0)
  40f540:	00402021 	move	a0,v0
  40f544:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f548:	00000000 	nop
  40f54c:	3c020042 	lui	v0,0x42
  40f550:	244457f0 	addiu	a0,v0,22512
  40f554:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f558:	00000000 	nop
  40f55c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f560:	00000000 	nop
  40f564:	8fc30028 	lw	v1,40(s8)
  40f568:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:401 (discriminator 1)
    return -1;
  40f56c:	2402ffff 	li	v0,-1
  40f570:	10000092 	b	40f7bc <create_jdwp_connection_fd+0x414>
  40f574:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:397
    JdwpProcess*  proc = _jdwp_list.next;

    D("looking for pid %d in JDWP process list\n", pid);
    for ( ; proc != &_jdwp_list; proc = proc->next ) {
        if (proc->pid == pid) {
            goto FoundIt;
  40f578:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:407

FoundIt:
    {
        int  fds[2];

        if (proc->out_count >= MAX_OUT_FDS) {
  40f57c:	8fc20018 	lw	v0,24(s8)
  40f580:	8c42002c 	lw	v0,44(v0)
  40f584:	28420004 	slti	v0,v0,4
  40f588:	14400032 	bnez	v0,40f654 <create_jdwp_connection_fd+0x2ac>
  40f58c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:408 (discriminator 1)
            D("%s: too many pending JDWP connection for pid %d\n",
  40f590:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f594:	00000000 	nop
  40f598:	8c420000 	lw	v0,0(v0)
  40f59c:	afc20020 	sw	v0,32(s8)
  40f5a0:	3c020042 	lui	v0,0x42
  40f5a4:	244457f0 	addiu	a0,v0,22512
  40f5a8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f5ac:	00000000 	nop
  40f5b0:	3c020042 	lui	v0,0x42
  40f5b4:	8c4257c4 	lw	v0,22468(v0)
  40f5b8:	00402021 	move	a0,v0
  40f5bc:	3c020041 	lui	v0,0x41
  40f5c0:	2445427c 	addiu	a1,v0,17020
  40f5c4:	3c020041 	lui	v0,0x41
  40f5c8:	24464288 	addiu	a2,v0,17032
  40f5cc:	3c020041 	lui	v0,0x41
  40f5d0:	24474774 	addiu	a3,v0,18292
  40f5d4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f5d8:	00000000 	nop
  40f5dc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f5e0:	00000000 	nop
  40f5e4:	8fc30020 	lw	v1,32(s8)
  40f5e8:	ac430000 	sw	v1,0(v0)
  40f5ec:	3c020042 	lui	v0,0x42
  40f5f0:	8c4257c4 	lw	v0,22468(v0)
  40f5f4:	00402021 	move	a0,v0
  40f5f8:	3c020041 	lui	v0,0x41
  40f5fc:	2445453c 	addiu	a1,v0,17724
  40f600:	3c020041 	lui	v0,0x41
  40f604:	24464774 	addiu	a2,v0,18292
  40f608:	8fc70048 	lw	a3,72(s8)
  40f60c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f610:	00000000 	nop
  40f614:	3c020042 	lui	v0,0x42
  40f618:	8c4257c4 	lw	v0,22468(v0)
  40f61c:	00402021 	move	a0,v0
  40f620:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f624:	00000000 	nop
  40f628:	3c020042 	lui	v0,0x42
  40f62c:	244457f0 	addiu	a0,v0,22512
  40f630:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f634:	00000000 	nop
  40f638:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f63c:	00000000 	nop
  40f640:	8fc30020 	lw	v1,32(s8)
  40f644:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:410 (discriminator 1)
              __FUNCTION__, pid);
            return -1;
  40f648:	2402ffff 	li	v0,-1
  40f64c:	1000005b 	b	40f7bc <create_jdwp_connection_fd+0x414>
  40f650:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:413
        }
        
        printf("create_jdwp_connection_fd start\n");
  40f654:	3c020041 	lui	v0,0x41
  40f658:	24444570 	addiu	a0,v0,17776
  40f65c:	0c10540c 	jal	415030 <puts@plt>
  40f660:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:414
        if (adb_socketpair(fds) < 0) {
  40f664:	27c2002c 	addiu	v0,s8,44
  40f668:	00402021 	move	a0,v0
  40f66c:	0c1037e8 	jal	40dfa0 <adb_socketpair>
  40f670:	00000000 	nop
  40f674:	04410038 	bgez	v0,40f758 <create_jdwp_connection_fd+0x3b0>
  40f678:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:415 (discriminator 1)
            D("%s: socket pair creation failed: %s\n",
  40f67c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f680:	00000000 	nop
  40f684:	8c420000 	lw	v0,0(v0)
  40f688:	afc20024 	sw	v0,36(s8)
  40f68c:	3c020042 	lui	v0,0x42
  40f690:	244457f0 	addiu	a0,v0,22512
  40f694:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f698:	00000000 	nop
  40f69c:	3c020042 	lui	v0,0x42
  40f6a0:	8c4257c4 	lw	v0,22468(v0)
  40f6a4:	00402021 	move	a0,v0
  40f6a8:	3c020041 	lui	v0,0x41
  40f6ac:	2445427c 	addiu	a1,v0,17020
  40f6b0:	3c020041 	lui	v0,0x41
  40f6b4:	24464288 	addiu	a2,v0,17032
  40f6b8:	3c020041 	lui	v0,0x41
  40f6bc:	24474774 	addiu	a3,v0,18292
  40f6c0:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f6c4:	00000000 	nop
  40f6c8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f6cc:	00000000 	nop
  40f6d0:	8fc30024 	lw	v1,36(s8)
  40f6d4:	ac430000 	sw	v1,0(v0)
  40f6d8:	3c020042 	lui	v0,0x42
  40f6dc:	8c5057c4 	lw	s0,22468(v0)
  40f6e0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f6e4:	00000000 	nop
  40f6e8:	8c420000 	lw	v0,0(v0)
  40f6ec:	00402021 	move	a0,v0
  40f6f0:	0c1053f8 	jal	414fe0 <strerror@plt>
  40f6f4:	00000000 	nop
  40f6f8:	02002021 	move	a0,s0
  40f6fc:	3c030041 	lui	v1,0x41
  40f700:	24654590 	addiu	a1,v1,17808
  40f704:	3c030041 	lui	v1,0x41
  40f708:	24664774 	addiu	a2,v1,18292
  40f70c:	00403821 	move	a3,v0
  40f710:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f714:	00000000 	nop
  40f718:	3c020042 	lui	v0,0x42
  40f71c:	8c4257c4 	lw	v0,22468(v0)
  40f720:	00402021 	move	a0,v0
  40f724:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f728:	00000000 	nop
  40f72c:	3c020042 	lui	v0,0x42
  40f730:	244457f0 	addiu	a0,v0,22512
  40f734:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f738:	00000000 	nop
  40f73c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f740:	00000000 	nop
  40f744:	8fc30024 	lw	v1,36(s8)
  40f748:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:417 (discriminator 1)
              __FUNCTION__, strerror(errno));
            return -1;
  40f74c:	2402ffff 	li	v0,-1
  40f750:	1000001a 	b	40f7bc <create_jdwp_connection_fd+0x414>
  40f754:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:420
        }

        proc->out_fds[ proc->out_count ] = fds[1];
  40f758:	8fc20018 	lw	v0,24(s8)
  40f75c:	8c42002c 	lw	v0,44(v0)
  40f760:	8fc30030 	lw	v1,48(s8)
  40f764:	8fc40018 	lw	a0,24(s8)
  40f768:	24420006 	addiu	v0,v0,6
  40f76c:	00021080 	sll	v0,v0,0x2
  40f770:	00821021 	addu	v0,a0,v0
  40f774:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:421
        if (++proc->out_count == 1)
  40f778:	8fc20018 	lw	v0,24(s8)
  40f77c:	8c42002c 	lw	v0,44(v0)
  40f780:	24430001 	addiu	v1,v0,1
  40f784:	8fc20018 	lw	v0,24(s8)
  40f788:	ac43002c 	sw	v1,44(v0)
  40f78c:	8fc20018 	lw	v0,24(s8)
  40f790:	8c43002c 	lw	v1,44(v0)
  40f794:	24020001 	li	v0,1
  40f798:	14620007 	bne	v1,v0,40f7b8 <create_jdwp_connection_fd+0x410>
  40f79c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:422
            fdevent_add( proc->fde, FDE_WRITE );
  40f7a0:	8fc20018 	lw	v0,24(s8)
  40f7a4:	8c420010 	lw	v0,16(v0)
  40f7a8:	00402021 	move	a0,v0
  40f7ac:	24050002 	li	a1,2
  40f7b0:	0c101735 	jal	405cd4 <fdevent_add>
  40f7b4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:424

        return fds[0];
  40f7b8:	8fc2002c 	lw	v0,44(s8)
/home_a/ppchen/adb/jdwp_service.c:426
    }
}
  40f7bc:	03c0e821 	move	sp,s8
  40f7c0:	8fbf0044 	lw	ra,68(sp)
  40f7c4:	8fbe0040 	lw	s8,64(sp)
  40f7c8:	8fb0003c 	lw	s0,60(sp)
  40f7cc:	27bd0048 	addiu	sp,sp,72
  40f7d0:	03e00008 	jr	ra
  40f7d4:	00000000 	nop

0040f7d8 <jdwp_control_init>:
jdwp_control_init():
/home_a/ppchen/adb/jdwp_service.c:452

static int
jdwp_control_init( JdwpControl*  control,
                   const char*   sockname,
                   int           socknamelen )
{
  40f7d8:	27bdff40 	addiu	sp,sp,-192
  40f7dc:	afbf00bc 	sw	ra,188(sp)
  40f7e0:	afbe00b8 	sw	s8,184(sp)
  40f7e4:	afb100b4 	sw	s1,180(sp)
  40f7e8:	afb000b0 	sw	s0,176(sp)
  40f7ec:	03a0f021 	move	s8,sp
  40f7f0:	afc400c0 	sw	a0,192(s8)
  40f7f4:	afc500c4 	sw	a1,196(s8)
  40f7f8:	afc600c8 	sw	a2,200(s8)
/home_a/ppchen/adb/jdwp_service.c:456
    struct sockaddr_un   addr;
    socklen_t            addrlen;
    int                  s;
    int                  maxpath = sizeof(addr.sun_path);
  40f7fc:	2402006c 	li	v0,108
  40f800:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:457
    int                  pathlen = socknamelen;
  40f804:	8fc200c8 	lw	v0,200(s8)
  40f808:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:459

    if (pathlen >= maxpath) {
  40f80c:	8fc3001c 	lw	v1,28(s8)
  40f810:	8fc20018 	lw	v0,24(s8)
  40f814:	0062102a 	slt	v0,v1,v0
  40f818:	14400034 	bnez	v0,40f8ec <jdwp_control_init+0x114>
  40f81c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:460 (discriminator 1)
        D( "vm debug control socket name too long (%d extra chars)\n",
  40f820:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f824:	00000000 	nop
  40f828:	8c420000 	lw	v0,0(v0)
  40f82c:	afc20020 	sw	v0,32(s8)
  40f830:	3c020042 	lui	v0,0x42
  40f834:	244457f0 	addiu	a0,v0,22512
  40f838:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f83c:	00000000 	nop
  40f840:	3c020042 	lui	v0,0x42
  40f844:	8c4257c4 	lw	v0,22468(v0)
  40f848:	00402021 	move	a0,v0
  40f84c:	3c020041 	lui	v0,0x41
  40f850:	2445427c 	addiu	a1,v0,17020
  40f854:	3c020041 	lui	v0,0x41
  40f858:	24464288 	addiu	a2,v0,17032
  40f85c:	3c020041 	lui	v0,0x41
  40f860:	24474760 	addiu	a3,v0,18272
  40f864:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f868:	00000000 	nop
  40f86c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f870:	00000000 	nop
  40f874:	8fc30020 	lw	v1,32(s8)
  40f878:	ac430000 	sw	v1,0(v0)
  40f87c:	3c020042 	lui	v0,0x42
  40f880:	8c4357c4 	lw	v1,22468(v0)
  40f884:	8fc2001c 	lw	v0,28(s8)
  40f888:	24440001 	addiu	a0,v0,1
  40f88c:	8fc20018 	lw	v0,24(s8)
  40f890:	00821023 	subu	v0,a0,v0
  40f894:	00602021 	move	a0,v1
  40f898:	3c030041 	lui	v1,0x41
  40f89c:	246545b8 	addiu	a1,v1,17848
  40f8a0:	00403021 	move	a2,v0
  40f8a4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f8a8:	00000000 	nop
  40f8ac:	3c020042 	lui	v0,0x42
  40f8b0:	8c4257c4 	lw	v0,22468(v0)
  40f8b4:	00402021 	move	a0,v0
  40f8b8:	0c1053a8 	jal	414ea0 <fflush@plt>
  40f8bc:	00000000 	nop
  40f8c0:	3c020042 	lui	v0,0x42
  40f8c4:	244457f0 	addiu	a0,v0,22512
  40f8c8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40f8cc:	00000000 	nop
  40f8d0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f8d4:	00000000 	nop
  40f8d8:	8fc30020 	lw	v1,32(s8)
  40f8dc:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:462 (discriminator 1)
           pathlen+1-maxpath );
        return -1;
  40f8e0:	2402ffff 	li	v0,-1
  40f8e4:	10000157 	b	40fe44 <jdwp_control_init+0x66c>
  40f8e8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:465
    }

    memset(&addr, 0, sizeof(addr));
  40f8ec:	27c20040 	addiu	v0,s8,64
  40f8f0:	00402021 	move	a0,v0
  40f8f4:	00002821 	move	a1,zero
  40f8f8:	2406006e 	li	a2,110
  40f8fc:	0c1053ac 	jal	414eb0 <memset@plt>
  40f900:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:466
    addr.sun_family = AF_UNIX;
  40f904:	24020001 	li	v0,1
  40f908:	a7c20040 	sh	v0,64(s8)
/home_a/ppchen/adb/jdwp_service.c:467
    memcpy(addr.sun_path, sockname, socknamelen);
  40f90c:	8fc200c8 	lw	v0,200(s8)
  40f910:	27c30040 	addiu	v1,s8,64
  40f914:	24630002 	addiu	v1,v1,2
  40f918:	00602021 	move	a0,v1
  40f91c:	8fc500c4 	lw	a1,196(s8)
  40f920:	00403021 	move	a2,v0
  40f924:	0c1052d8 	jal	414b60 <memcpy@plt>
  40f928:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:469

    s = socket( AF_UNIX, SOCK_STREAM, 0 );
  40f92c:	24040001 	li	a0,1
  40f930:	24050002 	li	a1,2
  40f934:	00003021 	move	a2,zero
  40f938:	0c1053c4 	jal	414f10 <socket@plt>
  40f93c:	00000000 	nop
  40f940:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/jdwp_service.c:470
    if (s < 0) {
  40f944:	8fc20024 	lw	v0,36(s8)
  40f948:	0441003a 	bgez	v0,40fa34 <jdwp_control_init+0x25c>
  40f94c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:471 (discriminator 1)
        D( "could not create vm debug control socket. %d: %s\n",
  40f950:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f954:	00000000 	nop
  40f958:	8c420000 	lw	v0,0(v0)
  40f95c:	afc20028 	sw	v0,40(s8)
  40f960:	3c020042 	lui	v0,0x42
  40f964:	244457f0 	addiu	a0,v0,22512
  40f968:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40f96c:	00000000 	nop
  40f970:	3c020042 	lui	v0,0x42
  40f974:	8c4257c4 	lw	v0,22468(v0)
  40f978:	00402021 	move	a0,v0
  40f97c:	3c020041 	lui	v0,0x41
  40f980:	2445427c 	addiu	a1,v0,17020
  40f984:	3c020041 	lui	v0,0x41
  40f988:	24464288 	addiu	a2,v0,17032
  40f98c:	3c020041 	lui	v0,0x41
  40f990:	24474760 	addiu	a3,v0,18272
  40f994:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f998:	00000000 	nop
  40f99c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f9a0:	00000000 	nop
  40f9a4:	8fc30028 	lw	v1,40(s8)
  40f9a8:	ac430000 	sw	v1,0(v0)
  40f9ac:	3c020042 	lui	v0,0x42
  40f9b0:	8c5157c4 	lw	s1,22468(v0)
  40f9b4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f9b8:	00000000 	nop
  40f9bc:	8c500000 	lw	s0,0(v0)
  40f9c0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40f9c4:	00000000 	nop
  40f9c8:	8c420000 	lw	v0,0(v0)
  40f9cc:	00402021 	move	a0,v0
  40f9d0:	0c1053f8 	jal	414fe0 <strerror@plt>
  40f9d4:	00000000 	nop
  40f9d8:	02202021 	move	a0,s1
  40f9dc:	3c030041 	lui	v1,0x41
  40f9e0:	246545f0 	addiu	a1,v1,17904
  40f9e4:	02003021 	move	a2,s0
  40f9e8:	00403821 	move	a3,v0
  40f9ec:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40f9f0:	00000000 	nop
  40f9f4:	3c020042 	lui	v0,0x42
  40f9f8:	8c4257c4 	lw	v0,22468(v0)
  40f9fc:	00402021 	move	a0,v0
  40fa00:	0c1053a8 	jal	414ea0 <fflush@plt>
  40fa04:	00000000 	nop
  40fa08:	3c020042 	lui	v0,0x42
  40fa0c:	244457f0 	addiu	a0,v0,22512
  40fa10:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40fa14:	00000000 	nop
  40fa18:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fa1c:	00000000 	nop
  40fa20:	8fc30028 	lw	v1,40(s8)
  40fa24:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:473 (discriminator 1)
           errno, strerror(errno));
        return -1;
  40fa28:	2402ffff 	li	v0,-1
  40fa2c:	10000105 	b	40fe44 <jdwp_control_init+0x66c>
  40fa30:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:476
    }

    addrlen = (pathlen + sizeof(addr.sun_family));
  40fa34:	8fc2001c 	lw	v0,28(s8)
  40fa38:	24420002 	addiu	v0,v0,2
  40fa3c:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/jdwp_service.c:478

    if (bind(s, (struct sockaddr*)&addr, addrlen) < 0) {
  40fa40:	27c20040 	addiu	v0,s8,64
  40fa44:	8fc40024 	lw	a0,36(s8)
  40fa48:	00402821 	move	a1,v0
  40fa4c:	8fc6002c 	lw	a2,44(s8)
  40fa50:	0c1052a8 	jal	414aa0 <bind@plt>
  40fa54:	00000000 	nop
  40fa58:	0441003d 	bgez	v0,40fb50 <jdwp_control_init+0x378>
  40fa5c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:479 (discriminator 1)
        D( "could not bind vm debug control socket: %d: %s\n",
  40fa60:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fa64:	00000000 	nop
  40fa68:	8c420000 	lw	v0,0(v0)
  40fa6c:	afc20030 	sw	v0,48(s8)
  40fa70:	3c020042 	lui	v0,0x42
  40fa74:	244457f0 	addiu	a0,v0,22512
  40fa78:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40fa7c:	00000000 	nop
  40fa80:	3c020042 	lui	v0,0x42
  40fa84:	8c4257c4 	lw	v0,22468(v0)
  40fa88:	00402021 	move	a0,v0
  40fa8c:	3c020041 	lui	v0,0x41
  40fa90:	2445427c 	addiu	a1,v0,17020
  40fa94:	3c020041 	lui	v0,0x41
  40fa98:	24464288 	addiu	a2,v0,17032
  40fa9c:	3c020041 	lui	v0,0x41
  40faa0:	24474760 	addiu	a3,v0,18272
  40faa4:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40faa8:	00000000 	nop
  40faac:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fab0:	00000000 	nop
  40fab4:	8fc30030 	lw	v1,48(s8)
  40fab8:	ac430000 	sw	v1,0(v0)
  40fabc:	3c020042 	lui	v0,0x42
  40fac0:	8c5157c4 	lw	s1,22468(v0)
  40fac4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fac8:	00000000 	nop
  40facc:	8c500000 	lw	s0,0(v0)
  40fad0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fad4:	00000000 	nop
  40fad8:	8c420000 	lw	v0,0(v0)
  40fadc:	00402021 	move	a0,v0
  40fae0:	0c1053f8 	jal	414fe0 <strerror@plt>
  40fae4:	00000000 	nop
  40fae8:	02202021 	move	a0,s1
  40faec:	3c030041 	lui	v1,0x41
  40faf0:	24654624 	addiu	a1,v1,17956
  40faf4:	02003021 	move	a2,s0
  40faf8:	00403821 	move	a3,v0
  40fafc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fb00:	00000000 	nop
  40fb04:	3c020042 	lui	v0,0x42
  40fb08:	8c4257c4 	lw	v0,22468(v0)
  40fb0c:	00402021 	move	a0,v0
  40fb10:	0c1053a8 	jal	414ea0 <fflush@plt>
  40fb14:	00000000 	nop
  40fb18:	3c020042 	lui	v0,0x42
  40fb1c:	244457f0 	addiu	a0,v0,22512
  40fb20:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40fb24:	00000000 	nop
  40fb28:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fb2c:	00000000 	nop
  40fb30:	8fc30030 	lw	v1,48(s8)
  40fb34:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:481 (discriminator 1)
           errno, strerror(errno) );
        adb_close(s);
  40fb38:	8fc40024 	lw	a0,36(s8)
  40fb3c:	0c1037ab 	jal	40deac <adb_close>
  40fb40:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:482 (discriminator 1)
        return -1;
  40fb44:	2402ffff 	li	v0,-1
  40fb48:	100000be 	b	40fe44 <jdwp_control_init+0x66c>
  40fb4c:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:485
    }

    if ( listen(s, 4) < 0 ) {
  40fb50:	8fc40024 	lw	a0,36(s8)
  40fb54:	24050004 	li	a1,4
  40fb58:	0c1053fc 	jal	414ff0 <listen@plt>
  40fb5c:	00000000 	nop
  40fb60:	0441003d 	bgez	v0,40fc58 <jdwp_control_init+0x480>
  40fb64:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:486 (discriminator 1)
        D("listen failed in jdwp control socket: %d: %s\n",
  40fb68:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fb6c:	00000000 	nop
  40fb70:	8c420000 	lw	v0,0(v0)
  40fb74:	afc20034 	sw	v0,52(s8)
  40fb78:	3c020042 	lui	v0,0x42
  40fb7c:	244457f0 	addiu	a0,v0,22512
  40fb80:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40fb84:	00000000 	nop
  40fb88:	3c020042 	lui	v0,0x42
  40fb8c:	8c4257c4 	lw	v0,22468(v0)
  40fb90:	00402021 	move	a0,v0
  40fb94:	3c020041 	lui	v0,0x41
  40fb98:	2445427c 	addiu	a1,v0,17020
  40fb9c:	3c020041 	lui	v0,0x41
  40fba0:	24464288 	addiu	a2,v0,17032
  40fba4:	3c020041 	lui	v0,0x41
  40fba8:	24474760 	addiu	a3,v0,18272
  40fbac:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fbb0:	00000000 	nop
  40fbb4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fbb8:	00000000 	nop
  40fbbc:	8fc30034 	lw	v1,52(s8)
  40fbc0:	ac430000 	sw	v1,0(v0)
  40fbc4:	3c020042 	lui	v0,0x42
  40fbc8:	8c5157c4 	lw	s1,22468(v0)
  40fbcc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fbd0:	00000000 	nop
  40fbd4:	8c500000 	lw	s0,0(v0)
  40fbd8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fbdc:	00000000 	nop
  40fbe0:	8c420000 	lw	v0,0(v0)
  40fbe4:	00402021 	move	a0,v0
  40fbe8:	0c1053f8 	jal	414fe0 <strerror@plt>
  40fbec:	00000000 	nop
  40fbf0:	02202021 	move	a0,s1
  40fbf4:	3c030041 	lui	v1,0x41
  40fbf8:	24654654 	addiu	a1,v1,18004
  40fbfc:	02003021 	move	a2,s0
  40fc00:	00403821 	move	a3,v0
  40fc04:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fc08:	00000000 	nop
  40fc0c:	3c020042 	lui	v0,0x42
  40fc10:	8c4257c4 	lw	v0,22468(v0)
  40fc14:	00402021 	move	a0,v0
  40fc18:	0c1053a8 	jal	414ea0 <fflush@plt>
  40fc1c:	00000000 	nop
  40fc20:	3c020042 	lui	v0,0x42
  40fc24:	244457f0 	addiu	a0,v0,22512
  40fc28:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40fc2c:	00000000 	nop
  40fc30:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fc34:	00000000 	nop
  40fc38:	8fc30034 	lw	v1,52(s8)
  40fc3c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:488 (discriminator 1)
          errno, strerror(errno));
        adb_close(s);
  40fc40:	8fc40024 	lw	a0,36(s8)
  40fc44:	0c1037ab 	jal	40deac <adb_close>
  40fc48:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:489 (discriminator 1)
        return -1;
  40fc4c:	2402ffff 	li	v0,-1
  40fc50:	1000007c 	b	40fe44 <jdwp_control_init+0x66c>
  40fc54:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:492
    }

    control->listen_socket = s;
  40fc58:	8fc200c0 	lw	v0,192(s8)
  40fc5c:	8fc30024 	lw	v1,36(s8)
  40fc60:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:494

    control->fde = fdevent_create(s, jdwp_control_event, control);
  40fc64:	8fc40024 	lw	a0,36(s8)
  40fc68:	3c020041 	lui	v0,0x41
  40fc6c:	2445fe64 	addiu	a1,v0,-412
  40fc70:	8fc600c0 	lw	a2,192(s8)
  40fc74:	0c101645 	jal	405914 <fdevent_create>
  40fc78:	00000000 	nop
  40fc7c:	00401821 	move	v1,v0
  40fc80:	8fc200c0 	lw	v0,192(s8)
  40fc84:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:495
    if (control->fde == NULL) {
  40fc88:	8fc200c0 	lw	v0,192(s8)
  40fc8c:	8c420004 	lw	v0,4(v0)
  40fc90:	14400034 	bnez	v0,40fd64 <jdwp_control_init+0x58c>
  40fc94:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:496 (discriminator 1)
        D( "could not create fdevent for jdwp control socket\n" );
  40fc98:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fc9c:	00000000 	nop
  40fca0:	8c420000 	lw	v0,0(v0)
  40fca4:	afc20038 	sw	v0,56(s8)
  40fca8:	3c020042 	lui	v0,0x42
  40fcac:	244457f0 	addiu	a0,v0,22512
  40fcb0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40fcb4:	00000000 	nop
  40fcb8:	3c020042 	lui	v0,0x42
  40fcbc:	8c4257c4 	lw	v0,22468(v0)
  40fcc0:	00402021 	move	a0,v0
  40fcc4:	3c020041 	lui	v0,0x41
  40fcc8:	2445427c 	addiu	a1,v0,17020
  40fccc:	3c020041 	lui	v0,0x41
  40fcd0:	24464288 	addiu	a2,v0,17032
  40fcd4:	3c020041 	lui	v0,0x41
  40fcd8:	24474760 	addiu	a3,v0,18272
  40fcdc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fce0:	00000000 	nop
  40fce4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fce8:	00000000 	nop
  40fcec:	8fc30038 	lw	v1,56(s8)
  40fcf0:	ac430000 	sw	v1,0(v0)
  40fcf4:	3c020042 	lui	v0,0x42
  40fcf8:	8c4257c4 	lw	v0,22468(v0)
  40fcfc:	3c030041 	lui	v1,0x41
  40fd00:	24644684 	addiu	a0,v1,18052
  40fd04:	24050001 	li	a1,1
  40fd08:	24060031 	li	a2,49
  40fd0c:	00403821 	move	a3,v0
  40fd10:	0c1052d0 	jal	414b40 <fwrite@plt>
  40fd14:	00000000 	nop
  40fd18:	3c020042 	lui	v0,0x42
  40fd1c:	8c4257c4 	lw	v0,22468(v0)
  40fd20:	00402021 	move	a0,v0
  40fd24:	0c1053a8 	jal	414ea0 <fflush@plt>
  40fd28:	00000000 	nop
  40fd2c:	3c020042 	lui	v0,0x42
  40fd30:	244457f0 	addiu	a0,v0,22512
  40fd34:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40fd38:	00000000 	nop
  40fd3c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fd40:	00000000 	nop
  40fd44:	8fc30038 	lw	v1,56(s8)
  40fd48:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:497 (discriminator 1)
        adb_close(s);
  40fd4c:	8fc40024 	lw	a0,36(s8)
  40fd50:	0c1037ab 	jal	40deac <adb_close>
  40fd54:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:498 (discriminator 1)
        return -1;
  40fd58:	2402ffff 	li	v0,-1
  40fd5c:	10000039 	b	40fe44 <jdwp_control_init+0x66c>
  40fd60:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:502
    }

    /* only wait for incoming connections */
    fdevent_add(control->fde, FDE_READ);
  40fd64:	8fc200c0 	lw	v0,192(s8)
  40fd68:	8c420004 	lw	v0,4(v0)
  40fd6c:	00402021 	move	a0,v0
  40fd70:	24050001 	li	a1,1
  40fd74:	0c101735 	jal	405cd4 <fdevent_add>
  40fd78:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:503
    close_on_exec(s);
  40fd7c:	8fc40024 	lw	a0,36(s8)
  40fd80:	0c10378c 	jal	40de30 <close_on_exec>
  40fd84:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:505

    D("jdwp control socket started (%d)\n", control->listen_socket);
  40fd88:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fd8c:	00000000 	nop
  40fd90:	8c420000 	lw	v0,0(v0)
  40fd94:	afc2003c 	sw	v0,60(s8)
  40fd98:	3c020042 	lui	v0,0x42
  40fd9c:	244457f0 	addiu	a0,v0,22512
  40fda0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40fda4:	00000000 	nop
  40fda8:	3c020042 	lui	v0,0x42
  40fdac:	8c4257c4 	lw	v0,22468(v0)
  40fdb0:	00402021 	move	a0,v0
  40fdb4:	3c020041 	lui	v0,0x41
  40fdb8:	2445427c 	addiu	a1,v0,17020
  40fdbc:	3c020041 	lui	v0,0x41
  40fdc0:	24464288 	addiu	a2,v0,17032
  40fdc4:	3c020041 	lui	v0,0x41
  40fdc8:	24474760 	addiu	a3,v0,18272
  40fdcc:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fdd0:	00000000 	nop
  40fdd4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fdd8:	00000000 	nop
  40fddc:	8fc3003c 	lw	v1,60(s8)
  40fde0:	ac430000 	sw	v1,0(v0)
  40fde4:	3c020042 	lui	v0,0x42
  40fde8:	8c4357c4 	lw	v1,22468(v0)
  40fdec:	8fc200c0 	lw	v0,192(s8)
  40fdf0:	8c420000 	lw	v0,0(v0)
  40fdf4:	00602021 	move	a0,v1
  40fdf8:	3c030041 	lui	v1,0x41
  40fdfc:	246546b8 	addiu	a1,v1,18104
  40fe00:	00403021 	move	a2,v0
  40fe04:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40fe08:	00000000 	nop
  40fe0c:	3c020042 	lui	v0,0x42
  40fe10:	8c4257c4 	lw	v0,22468(v0)
  40fe14:	00402021 	move	a0,v0
  40fe18:	0c1053a8 	jal	414ea0 <fflush@plt>
  40fe1c:	00000000 	nop
  40fe20:	3c020042 	lui	v0,0x42
  40fe24:	244457f0 	addiu	a0,v0,22512
  40fe28:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40fe2c:	00000000 	nop
  40fe30:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fe34:	00000000 	nop
  40fe38:	8fc3003c 	lw	v1,60(s8)
  40fe3c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/jdwp_service.c:506
    return 0;
  40fe40:	00001021 	move	v0,zero
/home_a/ppchen/adb/jdwp_service.c:507
}
  40fe44:	03c0e821 	move	sp,s8
  40fe48:	8fbf00bc 	lw	ra,188(sp)
  40fe4c:	8fbe00b8 	lw	s8,184(sp)
  40fe50:	8fb100b4 	lw	s1,180(sp)
  40fe54:	8fb000b0 	lw	s0,176(sp)
  40fe58:	27bd00c0 	addiu	sp,sp,192
  40fe5c:	03e00008 	jr	ra
  40fe60:	00000000 	nop

0040fe64 <jdwp_control_event>:
jdwp_control_event():
/home_a/ppchen/adb/jdwp_service.c:512


static void
jdwp_control_event( int  s, unsigned  events, void*  _control )
{
  40fe64:	27bdffb0 	addiu	sp,sp,-80
  40fe68:	afbf004c 	sw	ra,76(sp)
  40fe6c:	afbe0048 	sw	s8,72(sp)
  40fe70:	afb00044 	sw	s0,68(sp)
  40fe74:	03a0f021 	move	s8,sp
  40fe78:	afc40050 	sw	a0,80(s8)
  40fe7c:	afc50054 	sw	a1,84(s8)
  40fe80:	afc60058 	sw	a2,88(s8)
/home_a/ppchen/adb/jdwp_service.c:513
    JdwpControl*  control = (JdwpControl*) _control;
  40fe84:	8fc20058 	lw	v0,88(s8)
  40fe88:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:515

    if (events & FDE_READ) {
  40fe8c:	8fc20054 	lw	v0,84(s8)
  40fe90:	30420001 	andi	v0,v0,0x1
  40fe94:	10400088 	beqz	v0,4100b8 <jdwp_control_event+0x254>
  40fe98:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:517
        struct sockaddr   addr;
        socklen_t         addrlen = sizeof(addr);
  40fe9c:	24020010 	li	v0,16
  40fea0:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/jdwp_service.c:518
        int               s = -1;
  40fea4:	2402ffff 	li	v0,-1
  40fea8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:522
        JdwpProcess*      proc;

        do {
            s = adb_socket_accept( control->listen_socket, &addr, &addrlen );
  40feac:	8fc20018 	lw	v0,24(s8)
  40feb0:	8c440000 	lw	a0,0(v0)
  40feb4:	27c3002c 	addiu	v1,s8,44
  40feb8:	27c2003c 	addiu	v0,s8,60
  40febc:	00602821 	move	a1,v1
  40fec0:	00403021 	move	a2,v0
  40fec4:	0c1037b9 	jal	40dee4 <adb_socket_accept>
  40fec8:	00000000 	nop
  40fecc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:523
            if (s < 0) {
  40fed0:	8fc2001c 	lw	v0,28(s8)
  40fed4:	04410071 	bgez	v0,41009c <jdwp_control_event+0x238>
  40fed8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:524
                if (errno == EINTR)
  40fedc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fee0:	00000000 	nop
  40fee4:	8c430000 	lw	v1,0(v0)
  40fee8:	24020004 	li	v0,4
  40feec:	1062006a 	beq	v1,v0,410098 <jdwp_control_event+0x234>
  40fef0:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:526
                    continue;
                if (errno == ECONNABORTED) {
  40fef4:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40fef8:	00000000 	nop
  40fefc:	8c430000 	lw	v1,0(v0)
  40ff00:	24020082 	li	v0,130
  40ff04:	14620030 	bne	v1,v0,40ffc8 <jdwp_control_event+0x164>
  40ff08:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:528 (discriminator 1)
                    /* oops, the JDWP process died really quick */
                    D("oops, the JDWP process died really quick\n");
  40ff0c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ff10:	00000000 	nop
  40ff14:	8c420000 	lw	v0,0(v0)
  40ff18:	afc20020 	sw	v0,32(s8)
  40ff1c:	3c020042 	lui	v0,0x42
  40ff20:	244457f0 	addiu	a0,v0,22512
  40ff24:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40ff28:	00000000 	nop
  40ff2c:	3c020042 	lui	v0,0x42
  40ff30:	8c4257c4 	lw	v0,22468(v0)
  40ff34:	00402021 	move	a0,v0
  40ff38:	3c020041 	lui	v0,0x41
  40ff3c:	2445427c 	addiu	a1,v0,17020
  40ff40:	3c020041 	lui	v0,0x41
  40ff44:	24464288 	addiu	a2,v0,17032
  40ff48:	3c020041 	lui	v0,0x41
  40ff4c:	2447474c 	addiu	a3,v0,18252
  40ff50:	0c1053b4 	jal	414ed0 <fprintf@plt>
  40ff54:	00000000 	nop
  40ff58:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ff5c:	00000000 	nop
  40ff60:	8fc30020 	lw	v1,32(s8)
  40ff64:	ac430000 	sw	v1,0(v0)
  40ff68:	3c020042 	lui	v0,0x42
  40ff6c:	8c4257c4 	lw	v0,22468(v0)
  40ff70:	3c030041 	lui	v1,0x41
  40ff74:	246446dc 	addiu	a0,v1,18140
  40ff78:	24050001 	li	a1,1
  40ff7c:	24060029 	li	a2,41
  40ff80:	00403821 	move	a3,v0
  40ff84:	0c1052d0 	jal	414b40 <fwrite@plt>
  40ff88:	00000000 	nop
  40ff8c:	3c020042 	lui	v0,0x42
  40ff90:	8c4257c4 	lw	v0,22468(v0)
  40ff94:	00402021 	move	a0,v0
  40ff98:	0c1053a8 	jal	414ea0 <fflush@plt>
  40ff9c:	00000000 	nop
  40ffa0:	3c020042 	lui	v0,0x42
  40ffa4:	244457f0 	addiu	a0,v0,22512
  40ffa8:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  40ffac:	00000000 	nop
  40ffb0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ffb4:	00000000 	nop
  40ffb8:	8fc30020 	lw	v1,32(s8)
  40ffbc:	ac430000 	sw	v1,0(v0)
  40ffc0:	1000003d 	b	4100b8 <jdwp_control_event+0x254>
  40ffc4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:532 (discriminator 1)
                    return;
                }
                /* the socket is probably closed ? */
                D( "weird accept() failed on jdwp control socket: %s\n",
  40ffc8:	0c1052c0 	jal	414b00 <__errno_location@plt>
  40ffcc:	00000000 	nop
  40ffd0:	8c420000 	lw	v0,0(v0)
  40ffd4:	afc20024 	sw	v0,36(s8)
  40ffd8:	3c020042 	lui	v0,0x42
  40ffdc:	244457f0 	addiu	a0,v0,22512
  40ffe0:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  40ffe4:	00000000 	nop
  40ffe8:	3c020042 	lui	v0,0x42
  40ffec:	8c4257c4 	lw	v0,22468(v0)
  40fff0:	00402021 	move	a0,v0
  40fff4:	3c020041 	lui	v0,0x41
  40fff8:	2445427c 	addiu	a1,v0,17020
  40fffc:	3c020041 	lui	v0,0x41
  410000:	24464288 	addiu	a2,v0,17032
  410004:	3c020041 	lui	v0,0x41
  410008:	2447474c 	addiu	a3,v0,18252
  41000c:	0c1053b4 	jal	414ed0 <fprintf@plt>
  410010:	00000000 	nop
  410014:	0c1052c0 	jal	414b00 <__errno_location@plt>
  410018:	00000000 	nop
  41001c:	8fc30024 	lw	v1,36(s8)
  410020:	ac430000 	sw	v1,0(v0)
  410024:	3c020042 	lui	v0,0x42
  410028:	8c5057c4 	lw	s0,22468(v0)
  41002c:	0c1052c0 	jal	414b00 <__errno_location@plt>
  410030:	00000000 	nop
  410034:	8c420000 	lw	v0,0(v0)
  410038:	00402021 	move	a0,v0
  41003c:	0c1053f8 	jal	414fe0 <strerror@plt>
  410040:	00000000 	nop
  410044:	02002021 	move	a0,s0
  410048:	3c030041 	lui	v1,0x41
  41004c:	24654708 	addiu	a1,v1,18184
  410050:	00403021 	move	a2,v0
  410054:	0c1053b4 	jal	414ed0 <fprintf@plt>
  410058:	00000000 	nop
  41005c:	3c020042 	lui	v0,0x42
  410060:	8c4257c4 	lw	v0,22468(v0)
  410064:	00402021 	move	a0,v0
  410068:	0c1053a8 	jal	414ea0 <fflush@plt>
  41006c:	00000000 	nop
  410070:	3c020042 	lui	v0,0x42
  410074:	244457f0 	addiu	a0,v0,22512
  410078:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  41007c:	00000000 	nop
  410080:	0c1052c0 	jal	414b00 <__errno_location@plt>
  410084:	00000000 	nop
  410088:	8fc30024 	lw	v1,36(s8)
  41008c:	ac430000 	sw	v1,0(v0)
  410090:	10000009 	b	4100b8 <jdwp_control_event+0x254>
  410094:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:525

        do {
            s = adb_socket_accept( control->listen_socket, &addr, &addrlen );
            if (s < 0) {
                if (errno == EINTR)
                    continue;
  410098:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:537
                D( "weird accept() failed on jdwp control socket: %s\n",
                   strerror(errno) );
                return;
            }
        }
        while (s < 0);
  41009c:	8fc2001c 	lw	v0,28(s8)
  4100a0:	0440ff82 	bltz	v0,40feac <jdwp_control_event+0x48>
  4100a4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:539

        proc = jdwp_process_alloc( s );
  4100a8:	8fc4001c 	lw	a0,28(s8)
  4100ac:	0c1038cb 	jal	40e32c <jdwp_process_alloc>
  4100b0:	00000000 	nop
  4100b4:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:543
        if (proc == NULL)
            return;
    }
}
  4100b8:	03c0e821 	move	sp,s8
  4100bc:	8fbf004c 	lw	ra,76(sp)
  4100c0:	8fbe0048 	lw	s8,72(sp)
  4100c4:	8fb00044 	lw	s0,68(sp)
  4100c8:	27bd0050 	addiu	sp,sp,80
  4100cc:	03e00008 	jr	ra
  4100d0:	00000000 	nop

004100d4 <jdwp_socket_close>:
jdwp_socket_close():
/home_a/ppchen/adb/jdwp_service.c:559
    int      pass;
} JdwpSocket;

static void
jdwp_socket_close( asocket*  s )
{
  4100d4:	27bdffd8 	addiu	sp,sp,-40
  4100d8:	afbf0024 	sw	ra,36(sp)
  4100dc:	afbe0020 	sw	s8,32(sp)
  4100e0:	03a0f021 	move	s8,sp
  4100e4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:560
    asocket*  peer = s->peer;
  4100e8:	8fc20028 	lw	v0,40(s8)
  4100ec:	8c420014 	lw	v0,20(v0)
  4100f0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:562

    remove_socket(s);
  4100f4:	8fc40028 	lw	a0,40(s8)
  4100f8:	0c1025cc 	jal	409730 <remove_socket>
  4100fc:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:564

    if (peer) {
  410100:	8fc20018 	lw	v0,24(s8)
  410104:	10400009 	beqz	v0,41012c <jdwp_socket_close+0x58>
  410108:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:565
        peer->peer = NULL;
  41010c:	8fc20018 	lw	v0,24(s8)
  410110:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/jdwp_service.c:566
        peer->close(peer);
  410114:	8fc20018 	lw	v0,24(s8)
  410118:	8c420048 	lw	v0,72(v0)
  41011c:	8fc40018 	lw	a0,24(s8)
  410120:	0040c821 	move	t9,v0
  410124:	0320f809 	jalr	t9
  410128:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:568
    }
    free(s);
  41012c:	8fc40028 	lw	a0,40(s8)
  410130:	0c1053e4 	jal	414f90 <free@plt>
  410134:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:569
}
  410138:	03c0e821 	move	sp,s8
  41013c:	8fbf0024 	lw	ra,36(sp)
  410140:	8fbe0020 	lw	s8,32(sp)
  410144:	27bd0028 	addiu	sp,sp,40
  410148:	03e00008 	jr	ra
  41014c:	00000000 	nop

00410150 <jdwp_socket_enqueue>:
jdwp_socket_enqueue():
/home_a/ppchen/adb/jdwp_service.c:573

static int
jdwp_socket_enqueue( asocket*  s, apacket*  p )
{
  410150:	27bdffe0 	addiu	sp,sp,-32
  410154:	afbf001c 	sw	ra,28(sp)
  410158:	afbe0018 	sw	s8,24(sp)
  41015c:	03a0f021 	move	s8,sp
  410160:	afc40020 	sw	a0,32(s8)
  410164:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/jdwp_service.c:575
    /* you can't write to this asocket */
    put_apacket(p);
  410168:	8fc40024 	lw	a0,36(s8)
  41016c:	0c10078a 	jal	401e28 <put_apacket>
  410170:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:576
    s->peer->close(s->peer);
  410174:	8fc20020 	lw	v0,32(s8)
  410178:	8c420014 	lw	v0,20(v0)
  41017c:	8c420048 	lw	v0,72(v0)
  410180:	8fc30020 	lw	v1,32(s8)
  410184:	8c630014 	lw	v1,20(v1)
  410188:	00602021 	move	a0,v1
  41018c:	0040c821 	move	t9,v0
  410190:	0320f809 	jalr	t9
  410194:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:577
    return -1;
  410198:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/jdwp_service.c:578
}
  41019c:	03c0e821 	move	sp,s8
  4101a0:	8fbf001c 	lw	ra,28(sp)
  4101a4:	8fbe0018 	lw	s8,24(sp)
  4101a8:	27bd0020 	addiu	sp,sp,32
  4101ac:	03e00008 	jr	ra
  4101b0:	00000000 	nop

004101b4 <jdwp_socket_ready>:
jdwp_socket_ready():
/home_a/ppchen/adb/jdwp_service.c:583


static void
jdwp_socket_ready( asocket*  s )
{
  4101b4:	27bdffd0 	addiu	sp,sp,-48
  4101b8:	afbf002c 	sw	ra,44(sp)
  4101bc:	afbe0028 	sw	s8,40(sp)
  4101c0:	03a0f021 	move	s8,sp
  4101c4:	afc40030 	sw	a0,48(s8)
/home_a/ppchen/adb/jdwp_service.c:584
    JdwpSocket*  jdwp = (JdwpSocket*)s;
  4101c8:	8fc20030 	lw	v0,48(s8)
  4101cc:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:585
    asocket*     peer = jdwp->socket.peer;
  4101d0:	8fc20018 	lw	v0,24(s8)
  4101d4:	8c420014 	lw	v0,20(v0)
  4101d8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:590

   /* on the first call, send the list of pids,
    * on the second one, close the connection
    */
    if (jdwp->pass == 0) {
  4101dc:	8fc20018 	lw	v0,24(s8)
  4101e0:	8c420054 	lw	v0,84(v0)
  4101e4:	14400019 	bnez	v0,41024c <jdwp_socket_ready+0x98>
  4101e8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:591
        apacket*  p = get_apacket();
  4101ec:	0c10076f 	jal	401dbc <get_apacket>
  4101f0:	00000000 	nop
  4101f4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/jdwp_service.c:592
        p->len = jdwp_process_list((char*)p->data, MAX_PAYLOAD);
  4101f8:	8fc20020 	lw	v0,32(s8)
  4101fc:	24420024 	addiu	v0,v0,36
  410200:	00402021 	move	a0,v0
  410204:	24051000 	li	a1,4096
  410208:	0c10380c 	jal	40e030 <jdwp_process_list>
  41020c:	00000000 	nop
  410210:	00401821 	move	v1,v0
  410214:	8fc20020 	lw	v0,32(s8)
  410218:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:593
        peer->enqueue(peer, p);
  41021c:	8fc2001c 	lw	v0,28(s8)
  410220:	8c420040 	lw	v0,64(v0)
  410224:	8fc4001c 	lw	a0,28(s8)
  410228:	8fc50020 	lw	a1,32(s8)
  41022c:	0040c821 	move	t9,v0
  410230:	0320f809 	jalr	t9
  410234:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:594
        jdwp->pass = 1;
  410238:	8fc20018 	lw	v0,24(s8)
  41023c:	24030001 	li	v1,1
  410240:	ac430054 	sw	v1,84(v0)
  410244:	10000007 	b	410264 <jdwp_socket_ready+0xb0>
  410248:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:597
    }
    else {
        peer->close(peer);
  41024c:	8fc2001c 	lw	v0,28(s8)
  410250:	8c420048 	lw	v0,72(v0)
  410254:	8fc4001c 	lw	a0,28(s8)
  410258:	0040c821 	move	t9,v0
  41025c:	0320f809 	jalr	t9
  410260:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:599
    }
}
  410264:	03c0e821 	move	sp,s8
  410268:	8fbf002c 	lw	ra,44(sp)
  41026c:	8fbe0028 	lw	s8,40(sp)
  410270:	27bd0030 	addiu	sp,sp,48
  410274:	03e00008 	jr	ra
  410278:	00000000 	nop

0041027c <create_jdwp_service_socket>:
create_jdwp_service_socket():
/home_a/ppchen/adb/jdwp_service.c:603

asocket*
create_jdwp_service_socket( void )
{
  41027c:	27bdffd8 	addiu	sp,sp,-40
  410280:	afbf0024 	sw	ra,36(sp)
  410284:	afbe0020 	sw	s8,32(sp)
  410288:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/jdwp_service.c:604
    JdwpSocket*  s = calloc(sizeof(*s),1);
  41028c:	24040058 	li	a0,88
  410290:	24050001 	li	a1,1
  410294:	0c1052b8 	jal	414ae0 <calloc@plt>
  410298:	00000000 	nop
  41029c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:606

    if (s == NULL)
  4102a0:	8fc20018 	lw	v0,24(s8)
  4102a4:	14400004 	bnez	v0,4102b8 <create_jdwp_service_socket+0x3c>
  4102a8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:607
        return NULL;
  4102ac:	00001021 	move	v0,zero
  4102b0:	10000014 	b	410304 <create_jdwp_service_socket+0x88>
  4102b4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:609

    install_local_socket(&s->socket);
  4102b8:	8fc20018 	lw	v0,24(s8)
  4102bc:	00402021 	move	a0,v0
  4102c0:	0c1025ad 	jal	4096b4 <install_local_socket>
  4102c4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:611

    s->socket.ready   = jdwp_socket_ready;
  4102c8:	8fc20018 	lw	v0,24(s8)
  4102cc:	3c030041 	lui	v1,0x41
  4102d0:	246301b4 	addiu	v1,v1,436
  4102d4:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/jdwp_service.c:612
    s->socket.enqueue = jdwp_socket_enqueue;
  4102d8:	8fc20018 	lw	v0,24(s8)
  4102dc:	3c030041 	lui	v1,0x41
  4102e0:	24630150 	addiu	v1,v1,336
  4102e4:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/jdwp_service.c:613
    s->socket.close   = jdwp_socket_close;
  4102e8:	8fc20018 	lw	v0,24(s8)
  4102ec:	3c030041 	lui	v1,0x41
  4102f0:	246300d4 	addiu	v1,v1,212
  4102f4:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/jdwp_service.c:614
    s->pass           = 0;
  4102f8:	8fc20018 	lw	v0,24(s8)
  4102fc:	ac400054 	sw	zero,84(v0)
/home_a/ppchen/adb/jdwp_service.c:616

    return &s->socket;
  410300:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:617
}
  410304:	03c0e821 	move	sp,s8
  410308:	8fbf0024 	lw	ra,36(sp)
  41030c:	8fbe0020 	lw	s8,32(sp)
  410310:	27bd0028 	addiu	sp,sp,40
  410314:	03e00008 	jr	ra
  410318:	00000000 	nop

0041031c <jdwp_process_list_updated>:
jdwp_process_list_updated():
/home_a/ppchen/adb/jdwp_service.c:638
static JdwpTracker   _jdwp_trackers_list;


static void
jdwp_process_list_updated(void)
{
  41031c:	27bdfbd0 	addiu	sp,sp,-1072
  410320:	afbf042c 	sw	ra,1068(sp)
  410324:	afbe0428 	sw	s8,1064(sp)
  410328:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/jdwp_service.c:641
    char             buffer[1024];
    int              len;
    JdwpTracker*  t = _jdwp_trackers_list.next;
  41032c:	3c020042 	lui	v0,0x42
  410330:	24425a48 	addiu	v0,v0,23112
  410334:	8c420054 	lw	v0,84(v0)
  410338:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:643

    len = jdwp_process_list_msg(buffer, sizeof(buffer));
  41033c:	27c20028 	addiu	v0,s8,40
  410340:	00402021 	move	a0,v0
  410344:	24050400 	li	a1,1024
  410348:	0c103853 	jal	40e14c <jdwp_process_list_msg>
  41034c:	00000000 	nop
  410350:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:645

    for ( ; t != &_jdwp_trackers_list; t = t->next ) {
  410354:	1000001c 	b	4103c8 <jdwp_process_list_updated+0xac>
  410358:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:646 (discriminator 2)
        apacket*  p    = get_apacket();
  41035c:	0c10076f 	jal	401dbc <get_apacket>
  410360:	00000000 	nop
  410364:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/jdwp_service.c:647 (discriminator 2)
        asocket*  peer = t->socket.peer;
  410368:	8fc20018 	lw	v0,24(s8)
  41036c:	8c420014 	lw	v0,20(v0)
  410370:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/jdwp_service.c:648 (discriminator 2)
        memcpy(p->data, buffer, len);
  410374:	8fc20020 	lw	v0,32(s8)
  410378:	24440024 	addiu	a0,v0,36
  41037c:	8fc2001c 	lw	v0,28(s8)
  410380:	27c30028 	addiu	v1,s8,40
  410384:	00602821 	move	a1,v1
  410388:	00403021 	move	a2,v0
  41038c:	0c1052d8 	jal	414b60 <memcpy@plt>
  410390:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:649 (discriminator 2)
        p->len = len;
  410394:	8fc3001c 	lw	v1,28(s8)
  410398:	8fc20020 	lw	v0,32(s8)
  41039c:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:650 (discriminator 2)
        peer->enqueue( peer, p );
  4103a0:	8fc20024 	lw	v0,36(s8)
  4103a4:	8c420040 	lw	v0,64(v0)
  4103a8:	8fc40024 	lw	a0,36(s8)
  4103ac:	8fc50020 	lw	a1,32(s8)
  4103b0:	0040c821 	move	t9,v0
  4103b4:	0320f809 	jalr	t9
  4103b8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:645 (discriminator 2)
    int              len;
    JdwpTracker*  t = _jdwp_trackers_list.next;

    len = jdwp_process_list_msg(buffer, sizeof(buffer));

    for ( ; t != &_jdwp_trackers_list; t = t->next ) {
  4103bc:	8fc20018 	lw	v0,24(s8)
  4103c0:	8c420054 	lw	v0,84(v0)
  4103c4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:645 (discriminator 1)
  4103c8:	8fc30018 	lw	v1,24(s8)
  4103cc:	3c020042 	lui	v0,0x42
  4103d0:	24425a48 	addiu	v0,v0,23112
  4103d4:	1462ffe1 	bne	v1,v0,41035c <jdwp_process_list_updated+0x40>
  4103d8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:652
        asocket*  peer = t->socket.peer;
        memcpy(p->data, buffer, len);
        p->len = len;
        peer->enqueue( peer, p );
    }
}
  4103dc:	03c0e821 	move	sp,s8
  4103e0:	8fbf042c 	lw	ra,1068(sp)
  4103e4:	8fbe0428 	lw	s8,1064(sp)
  4103e8:	27bd0430 	addiu	sp,sp,1072
  4103ec:	03e00008 	jr	ra
  4103f0:	00000000 	nop

004103f4 <jdwp_tracker_close>:
jdwp_tracker_close():
/home_a/ppchen/adb/jdwp_service.c:656

static void
jdwp_tracker_close( asocket*  s )
{
  4103f4:	27bdffd8 	addiu	sp,sp,-40
  4103f8:	afbf0024 	sw	ra,36(sp)
  4103fc:	afbe0020 	sw	s8,32(sp)
  410400:	03a0f021 	move	s8,sp
  410404:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:657
    JdwpTracker*  tracker = (JdwpTracker*) s;
  410408:	8fc20028 	lw	v0,40(s8)
  41040c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:658
    asocket*      peer    = s->peer;
  410410:	8fc20028 	lw	v0,40(s8)
  410414:	8c420014 	lw	v0,20(v0)
  410418:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:660

    if (peer) {
  41041c:	8fc2001c 	lw	v0,28(s8)
  410420:	10400009 	beqz	v0,410448 <jdwp_tracker_close+0x54>
  410424:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:661
        peer->peer = NULL;
  410428:	8fc2001c 	lw	v0,28(s8)
  41042c:	ac400014 	sw	zero,20(v0)
/home_a/ppchen/adb/jdwp_service.c:662
        peer->close(peer);
  410430:	8fc2001c 	lw	v0,28(s8)
  410434:	8c420048 	lw	v0,72(v0)
  410438:	8fc4001c 	lw	a0,28(s8)
  41043c:	0040c821 	move	t9,v0
  410440:	0320f809 	jalr	t9
  410444:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:665
    }

    remove_socket(s);
  410448:	8fc40028 	lw	a0,40(s8)
  41044c:	0c1025cc 	jal	409730 <remove_socket>
  410450:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:667

    tracker->prev->next = tracker->next;
  410454:	8fc20018 	lw	v0,24(s8)
  410458:	8c420058 	lw	v0,88(v0)
  41045c:	8fc30018 	lw	v1,24(s8)
  410460:	8c630054 	lw	v1,84(v1)
  410464:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/jdwp_service.c:668
    tracker->next->prev = tracker->prev;
  410468:	8fc20018 	lw	v0,24(s8)
  41046c:	8c420054 	lw	v0,84(v0)
  410470:	8fc30018 	lw	v1,24(s8)
  410474:	8c630058 	lw	v1,88(v1)
  410478:	ac430058 	sw	v1,88(v0)
/home_a/ppchen/adb/jdwp_service.c:670

    free(s);
  41047c:	8fc40028 	lw	a0,40(s8)
  410480:	0c1053e4 	jal	414f90 <free@plt>
  410484:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:671
}
  410488:	03c0e821 	move	sp,s8
  41048c:	8fbf0024 	lw	ra,36(sp)
  410490:	8fbe0020 	lw	s8,32(sp)
  410494:	27bd0028 	addiu	sp,sp,40
  410498:	03e00008 	jr	ra
  41049c:	00000000 	nop

004104a0 <jdwp_tracker_ready>:
jdwp_tracker_ready():
/home_a/ppchen/adb/jdwp_service.c:675

static void
jdwp_tracker_ready( asocket*  s )
{
  4104a0:	27bdffd8 	addiu	sp,sp,-40
  4104a4:	afbf0024 	sw	ra,36(sp)
  4104a8:	afbe0020 	sw	s8,32(sp)
  4104ac:	03a0f021 	move	s8,sp
  4104b0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/jdwp_service.c:676
    JdwpTracker*  t = (JdwpTracker*) s;
  4104b4:	8fc20028 	lw	v0,40(s8)
  4104b8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:678

    if (t->need_update) {
  4104bc:	8fc20018 	lw	v0,24(s8)
  4104c0:	8c42005c 	lw	v0,92(v0)
  4104c4:	10400019 	beqz	v0,41052c <jdwp_tracker_ready+0x8c>
  4104c8:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:679
        apacket*  p = get_apacket();
  4104cc:	0c10076f 	jal	401dbc <get_apacket>
  4104d0:	00000000 	nop
  4104d4:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/jdwp_service.c:680
        t->need_update = 0;
  4104d8:	8fc20018 	lw	v0,24(s8)
  4104dc:	ac40005c 	sw	zero,92(v0)
/home_a/ppchen/adb/jdwp_service.c:681
        p->len = jdwp_process_list_msg((char*)p->data, sizeof(p->data));
  4104e0:	8fc2001c 	lw	v0,28(s8)
  4104e4:	24420024 	addiu	v0,v0,36
  4104e8:	00402021 	move	a0,v0
  4104ec:	24051000 	li	a1,4096
  4104f0:	0c103853 	jal	40e14c <jdwp_process_list_msg>
  4104f4:	00000000 	nop
  4104f8:	00401821 	move	v1,v0
  4104fc:	8fc2001c 	lw	v0,28(s8)
  410500:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:682
        s->peer->enqueue(s->peer, p);
  410504:	8fc20028 	lw	v0,40(s8)
  410508:	8c420014 	lw	v0,20(v0)
  41050c:	8c420040 	lw	v0,64(v0)
  410510:	8fc30028 	lw	v1,40(s8)
  410514:	8c630014 	lw	v1,20(v1)
  410518:	00602021 	move	a0,v1
  41051c:	8fc5001c 	lw	a1,28(s8)
  410520:	0040c821 	move	t9,v0
  410524:	0320f809 	jalr	t9
  410528:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:684
    }
}
  41052c:	03c0e821 	move	sp,s8
  410530:	8fbf0024 	lw	ra,36(sp)
  410534:	8fbe0020 	lw	s8,32(sp)
  410538:	27bd0028 	addiu	sp,sp,40
  41053c:	03e00008 	jr	ra
  410540:	00000000 	nop

00410544 <jdwp_tracker_enqueue>:
jdwp_tracker_enqueue():
/home_a/ppchen/adb/jdwp_service.c:688

static int
jdwp_tracker_enqueue( asocket*  s, apacket*  p )
{
  410544:	27bdffe0 	addiu	sp,sp,-32
  410548:	afbf001c 	sw	ra,28(sp)
  41054c:	afbe0018 	sw	s8,24(sp)
  410550:	03a0f021 	move	s8,sp
  410554:	afc40020 	sw	a0,32(s8)
  410558:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/jdwp_service.c:690
    /* you can't write to this socket */
    put_apacket(p);
  41055c:	8fc40024 	lw	a0,36(s8)
  410560:	0c10078a 	jal	401e28 <put_apacket>
  410564:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:691
    s->peer->close(s->peer);
  410568:	8fc20020 	lw	v0,32(s8)
  41056c:	8c420014 	lw	v0,20(v0)
  410570:	8c420048 	lw	v0,72(v0)
  410574:	8fc30020 	lw	v1,32(s8)
  410578:	8c630014 	lw	v1,20(v1)
  41057c:	00602021 	move	a0,v1
  410580:	0040c821 	move	t9,v0
  410584:	0320f809 	jalr	t9
  410588:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:692
    return -1;
  41058c:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/jdwp_service.c:693
}
  410590:	03c0e821 	move	sp,s8
  410594:	8fbf001c 	lw	ra,28(sp)
  410598:	8fbe0018 	lw	s8,24(sp)
  41059c:	27bd0020 	addiu	sp,sp,32
  4105a0:	03e00008 	jr	ra
  4105a4:	00000000 	nop

004105a8 <create_jdwp_tracker_service_socket>:
create_jdwp_tracker_service_socket():
/home_a/ppchen/adb/jdwp_service.c:698


asocket*
create_jdwp_tracker_service_socket( void )
{
  4105a8:	27bdffd8 	addiu	sp,sp,-40
  4105ac:	afbf0024 	sw	ra,36(sp)
  4105b0:	afbe0020 	sw	s8,32(sp)
  4105b4:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/jdwp_service.c:699
    JdwpTracker*  t = calloc(sizeof(*t),1);
  4105b8:	24040060 	li	a0,96
  4105bc:	24050001 	li	a1,1
  4105c0:	0c1052b8 	jal	414ae0 <calloc@plt>
  4105c4:	00000000 	nop
  4105c8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:701

    if (t == NULL)
  4105cc:	8fc20018 	lw	v0,24(s8)
  4105d0:	14400004 	bnez	v0,4105e4 <create_jdwp_tracker_service_socket+0x3c>
  4105d4:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:702
        return NULL;
  4105d8:	00001021 	move	v0,zero
  4105dc:	10000026 	b	410678 <create_jdwp_tracker_service_socket+0xd0>
  4105e0:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:704

    t->next = &_jdwp_trackers_list;
  4105e4:	8fc20018 	lw	v0,24(s8)
  4105e8:	3c030042 	lui	v1,0x42
  4105ec:	24635a48 	addiu	v1,v1,23112
  4105f0:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/jdwp_service.c:705
    t->prev = t->next->prev;
  4105f4:	8fc20018 	lw	v0,24(s8)
  4105f8:	8c420054 	lw	v0,84(v0)
  4105fc:	8c430058 	lw	v1,88(v0)
  410600:	8fc20018 	lw	v0,24(s8)
  410604:	ac430058 	sw	v1,88(v0)
/home_a/ppchen/adb/jdwp_service.c:707

    t->next->prev = t;
  410608:	8fc20018 	lw	v0,24(s8)
  41060c:	8c420054 	lw	v0,84(v0)
  410610:	8fc30018 	lw	v1,24(s8)
  410614:	ac430058 	sw	v1,88(v0)
/home_a/ppchen/adb/jdwp_service.c:708
    t->prev->next = t;
  410618:	8fc20018 	lw	v0,24(s8)
  41061c:	8c420058 	lw	v0,88(v0)
  410620:	8fc30018 	lw	v1,24(s8)
  410624:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/jdwp_service.c:710

    install_local_socket(&t->socket);
  410628:	8fc20018 	lw	v0,24(s8)
  41062c:	00402021 	move	a0,v0
  410630:	0c1025ad 	jal	4096b4 <install_local_socket>
  410634:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:712

    t->socket.ready   = jdwp_tracker_ready;
  410638:	8fc20018 	lw	v0,24(s8)
  41063c:	3c030041 	lui	v1,0x41
  410640:	246304a0 	addiu	v1,v1,1184
  410644:	ac430044 	sw	v1,68(v0)
/home_a/ppchen/adb/jdwp_service.c:713
    t->socket.enqueue = jdwp_tracker_enqueue;
  410648:	8fc20018 	lw	v0,24(s8)
  41064c:	3c030041 	lui	v1,0x41
  410650:	24630544 	addiu	v1,v1,1348
  410654:	ac430040 	sw	v1,64(v0)
/home_a/ppchen/adb/jdwp_service.c:714
    t->socket.close   = jdwp_tracker_close;
  410658:	8fc20018 	lw	v0,24(s8)
  41065c:	3c030041 	lui	v1,0x41
  410660:	246303f4 	addiu	v1,v1,1012
  410664:	ac430048 	sw	v1,72(v0)
/home_a/ppchen/adb/jdwp_service.c:715
    t->need_update    = 1;
  410668:	8fc20018 	lw	v0,24(s8)
  41066c:	24030001 	li	v1,1
  410670:	ac43005c 	sw	v1,92(v0)
/home_a/ppchen/adb/jdwp_service.c:717

    return &t->socket;
  410674:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/jdwp_service.c:718
}
  410678:	03c0e821 	move	sp,s8
  41067c:	8fbf0024 	lw	ra,36(sp)
  410680:	8fbe0020 	lw	s8,32(sp)
  410684:	27bd0028 	addiu	sp,sp,40
  410688:	03e00008 	jr	ra
  41068c:	00000000 	nop

00410690 <init_jdwp>:
init_jdwp():
/home_a/ppchen/adb/jdwp_service.c:723


int
init_jdwp(void)
{
  410690:	27bdffe0 	addiu	sp,sp,-32
  410694:	afbf001c 	sw	ra,28(sp)
  410698:	afbe0018 	sw	s8,24(sp)
  41069c:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/jdwp_service.c:724
    _jdwp_list.next = &_jdwp_list;
  4106a0:	3c020042 	lui	v0,0x42
  4106a4:	3c030042 	lui	v1,0x42
  4106a8:	24635a10 	addiu	v1,v1,23056
  4106ac:	ac435a10 	sw	v1,23056(v0)
/home_a/ppchen/adb/jdwp_service.c:725
    _jdwp_list.prev = &_jdwp_list;
  4106b0:	3c020042 	lui	v0,0x42
  4106b4:	24425a10 	addiu	v0,v0,23056
  4106b8:	3c030042 	lui	v1,0x42
  4106bc:	24635a10 	addiu	v1,v1,23056
  4106c0:	ac430004 	sw	v1,4(v0)
/home_a/ppchen/adb/jdwp_service.c:727

    _jdwp_trackers_list.next = &_jdwp_trackers_list;
  4106c4:	3c020042 	lui	v0,0x42
  4106c8:	24425a48 	addiu	v0,v0,23112
  4106cc:	3c030042 	lui	v1,0x42
  4106d0:	24635a48 	addiu	v1,v1,23112
  4106d4:	ac430054 	sw	v1,84(v0)
/home_a/ppchen/adb/jdwp_service.c:728
    _jdwp_trackers_list.prev = &_jdwp_trackers_list;
  4106d8:	3c020042 	lui	v0,0x42
  4106dc:	24425a48 	addiu	v0,v0,23112
  4106e0:	3c030042 	lui	v1,0x42
  4106e4:	24635a48 	addiu	v1,v1,23112
  4106e8:	ac430058 	sw	v1,88(v0)
/home_a/ppchen/adb/jdwp_service.c:730

    return jdwp_control_init( &_jdwp_control,
  4106ec:	3c020042 	lui	v0,0x42
  4106f0:	24445a40 	addiu	a0,v0,23104
  4106f4:	3c020041 	lui	v0,0x41
  4106f8:	2445473c 	addiu	a1,v0,18236
  4106fc:	2406000d 	li	a2,13
  410700:	0c103df6 	jal	40f7d8 <jdwp_control_init>
  410704:	00000000 	nop
/home_a/ppchen/adb/jdwp_service.c:733
                              JDWP_CONTROL_NAME,
                              JDWP_CONTROL_NAME_LEN );
}
  410708:	03c0e821 	move	sp,s8
  41070c:	8fbf001c 	lw	ra,28(sp)
  410710:	8fbe0018 	lw	s8,24(sp)
  410714:	27bd0020 	addiu	sp,sp,32
  410718:	03e00008 	jr	ra
  41071c:	00000000 	nop

00410720 <framebuffer_service>:
framebuffer_service():
/home_a/ppchen/adb/framebuffer_service.c:53
    unsigned int alpha_offset;
    unsigned int alpha_length;
} __attribute__((packed));

void framebuffer_service(int fd, void *cookie)
{
  410720:	27bdfd00 	addiu	sp,sp,-768
  410724:	afbf02fc 	sw	ra,764(sp)
  410728:	afbe02f8 	sw	s8,760(sp)
  41072c:	03a0f021 	move	s8,sp
  410730:	afc40300 	sw	a0,768(s8)
  410734:	afc50304 	sw	a1,772(s8)
/home_a/ppchen/adb/framebuffer_service.c:61
    char buf[640];
    int fd_screencap;
    int w, h, f;
    int fds[2];

    if (pipe(fds) < 0) goto done;
  410738:	27c202e8 	addiu	v0,s8,744
  41073c:	00402021 	move	a0,v0
  410740:	0c105414 	jal	415050 <pipe@plt>
  410744:	00000000 	nop
  410748:	0440011c 	bltz	v0,410bbc <framebuffer_service+0x49c>
  41074c:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:63

    pid_t pid = fork();
  410750:	0c1053d0 	jal	414f40 <fork@plt>
  410754:	00000000 	nop
  410758:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/framebuffer_service.c:64
    if (pid < 0) goto done;
  41075c:	8fc2001c 	lw	v0,28(s8)
  410760:	04400119 	bltz	v0,410bc8 <framebuffer_service+0x4a8>
  410764:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:66

    if (pid == 0) {
  410768:	8fc2001c 	lw	v0,28(s8)
  41076c:	1440001c 	bnez	v0,4107e0 <framebuffer_service+0xc0>
  410770:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:67
        dup2(fds[1], STDOUT_FILENO);
  410774:	8fc202ec 	lw	v0,748(s8)
  410778:	00402021 	move	a0,v0
  41077c:	24050001 	li	a1,1
  410780:	0c105338 	jal	414ce0 <dup2@plt>
  410784:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:68
        close(fds[0]);
  410788:	8fc202e8 	lw	v0,744(s8)
  41078c:	00402021 	move	a0,v0
  410790:	0c105378 	jal	414de0 <close@plt>
  410794:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:69
        close(fds[1]);
  410798:	8fc202ec 	lw	v0,748(s8)
  41079c:	00402021 	move	a0,v0
  4107a0:	0c105378 	jal	414de0 <close@plt>
  4107a4:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:70
        const char* command = "screencap";
  4107a8:	3c020041 	lui	v0,0x41
  4107ac:	244247b0 	addiu	v0,v0,18352
  4107b0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/framebuffer_service.c:71
        const char *args[2] = {command, NULL};
  4107b4:	8fc20020 	lw	v0,32(s8)
  4107b8:	afc202f0 	sw	v0,752(s8)
  4107bc:	afc002f4 	sw	zero,756(s8)
/home_a/ppchen/adb/framebuffer_service.c:72
        execvp(command, (char**)args);
  4107c0:	27c202f0 	addiu	v0,s8,752
  4107c4:	8fc40020 	lw	a0,32(s8)
  4107c8:	00402821 	move	a1,v0
  4107cc:	0c105410 	jal	415040 <execvp@plt>
  4107d0:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:73
        exit(1);
  4107d4:	24040001 	li	a0,1
  4107d8:	0c1053cc 	jal	414f30 <exit@plt>
  4107dc:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:76
    }

    fd_screencap = fds[0];
  4107e0:	8fc202e8 	lw	v0,744(s8)
  4107e4:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/framebuffer_service.c:79

    /* read w, h & format */
    if(readx(fd_screencap, &w, 4)) goto done;
  4107e8:	27c202dc 	addiu	v0,s8,732
  4107ec:	8fc40024 	lw	a0,36(s8)
  4107f0:	00402821 	move	a1,v0
  4107f4:	24060004 	li	a2,4
  4107f8:	0c101f12 	jal	407c48 <readx>
  4107fc:	00000000 	nop
  410800:	144000f4 	bnez	v0,410bd4 <framebuffer_service+0x4b4>
  410804:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:80
    if(readx(fd_screencap, &h, 4)) goto done;
  410808:	27c202e0 	addiu	v0,s8,736
  41080c:	8fc40024 	lw	a0,36(s8)
  410810:	00402821 	move	a1,v0
  410814:	24060004 	li	a2,4
  410818:	0c101f12 	jal	407c48 <readx>
  41081c:	00000000 	nop
  410820:	144000ef 	bnez	v0,410be0 <framebuffer_service+0x4c0>
  410824:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:81
    if(readx(fd_screencap, &f, 4)) goto done;
  410828:	27c202e4 	addiu	v0,s8,740
  41082c:	8fc40024 	lw	a0,36(s8)
  410830:	00402821 	move	a1,v0
  410834:	24060004 	li	a2,4
  410838:	0c101f12 	jal	407c48 <readx>
  41083c:	00000000 	nop
  410840:	144000ea 	bnez	v0,410bec <framebuffer_service+0x4cc>
  410844:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:83

    fbinfo.version = DDMS_RAWIMAGE_VERSION;
  410848:	24020001 	li	v0,1
  41084c:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/framebuffer_service.c:85
    /* see hardware/hardware.h */
    switch (f) {
  410850:	8fc202e4 	lw	v0,740(s8)
  410854:	2c430006 	sltiu	v1,v0,6
  410858:	106000e7 	beqz	v1,410bf8 <framebuffer_service+0x4d8>
  41085c:	00000000 	nop
  410860:	00021880 	sll	v1,v0,0x2
  410864:	3c020041 	lui	v0,0x41
  410868:	244247bc 	addiu	v0,v0,18364
  41086c:	00621021 	addu	v0,v1,v0
  410870:	8c420000 	lw	v0,0(v0)
  410874:	00400008 	jr	v0
  410878:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:87
        case 1: /* RGBA_8888 */
            fbinfo.bpp = 32;
  41087c:	24020020 	li	v0,32
  410880:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/framebuffer_service.c:88
            fbinfo.size = w * h * 4;
  410884:	8fc302dc 	lw	v1,732(s8)
  410888:	8fc202e0 	lw	v0,736(s8)
  41088c:	70621002 	mul	v0,v1,v0
  410890:	00021080 	sll	v0,v0,0x2
  410894:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/framebuffer_service.c:89
            fbinfo.width = w;
  410898:	8fc202dc 	lw	v0,732(s8)
  41089c:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/framebuffer_service.c:90
            fbinfo.height = h;
  4108a0:	8fc202e0 	lw	v0,736(s8)
  4108a4:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/framebuffer_service.c:91
            fbinfo.red_offset = 0;
  4108a8:	afc0003c 	sw	zero,60(s8)
/home_a/ppchen/adb/framebuffer_service.c:92
            fbinfo.red_length = 8;
  4108ac:	24020008 	li	v0,8
  4108b0:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/framebuffer_service.c:93
            fbinfo.green_offset = 8;
  4108b4:	24020008 	li	v0,8
  4108b8:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/framebuffer_service.c:94
            fbinfo.green_length = 8;
  4108bc:	24020008 	li	v0,8
  4108c0:	afc20050 	sw	v0,80(s8)
/home_a/ppchen/adb/framebuffer_service.c:95
            fbinfo.blue_offset = 16;
  4108c4:	24020010 	li	v0,16
  4108c8:	afc20044 	sw	v0,68(s8)
/home_a/ppchen/adb/framebuffer_service.c:96
            fbinfo.blue_length = 8;
  4108cc:	24020008 	li	v0,8
  4108d0:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/framebuffer_service.c:97
            fbinfo.alpha_offset = 24;
  4108d4:	24020018 	li	v0,24
  4108d8:	afc20054 	sw	v0,84(s8)
/home_a/ppchen/adb/framebuffer_service.c:98
            fbinfo.alpha_length = 8;
  4108dc:	24020008 	li	v0,8
  4108e0:	afc20058 	sw	v0,88(s8)
/home_a/ppchen/adb/framebuffer_service.c:99
            break;
  4108e4:	1000006e 	b	410aa0 <framebuffer_service+0x380>
  4108e8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:101
        case 2: /* RGBX_8888 */
            fbinfo.bpp = 32;
  4108ec:	24020020 	li	v0,32
  4108f0:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/framebuffer_service.c:102
            fbinfo.size = w * h * 4;
  4108f4:	8fc302dc 	lw	v1,732(s8)
  4108f8:	8fc202e0 	lw	v0,736(s8)
  4108fc:	70621002 	mul	v0,v1,v0
  410900:	00021080 	sll	v0,v0,0x2
  410904:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/framebuffer_service.c:103
            fbinfo.width = w;
  410908:	8fc202dc 	lw	v0,732(s8)
  41090c:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/framebuffer_service.c:104
            fbinfo.height = h;
  410910:	8fc202e0 	lw	v0,736(s8)
  410914:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/framebuffer_service.c:105
            fbinfo.red_offset = 0;
  410918:	afc0003c 	sw	zero,60(s8)
/home_a/ppchen/adb/framebuffer_service.c:106
            fbinfo.red_length = 8;
  41091c:	24020008 	li	v0,8
  410920:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/framebuffer_service.c:107
            fbinfo.green_offset = 8;
  410924:	24020008 	li	v0,8
  410928:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/framebuffer_service.c:108
            fbinfo.green_length = 8;
  41092c:	24020008 	li	v0,8
  410930:	afc20050 	sw	v0,80(s8)
/home_a/ppchen/adb/framebuffer_service.c:109
            fbinfo.blue_offset = 16;
  410934:	24020010 	li	v0,16
  410938:	afc20044 	sw	v0,68(s8)
/home_a/ppchen/adb/framebuffer_service.c:110
            fbinfo.blue_length = 8;
  41093c:	24020008 	li	v0,8
  410940:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/framebuffer_service.c:111
            fbinfo.alpha_offset = 24;
  410944:	24020018 	li	v0,24
  410948:	afc20054 	sw	v0,84(s8)
/home_a/ppchen/adb/framebuffer_service.c:112
            fbinfo.alpha_length = 0;
  41094c:	afc00058 	sw	zero,88(s8)
/home_a/ppchen/adb/framebuffer_service.c:113
            break;
  410950:	10000053 	b	410aa0 <framebuffer_service+0x380>
  410954:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:115
        case 3: /* RGB_888 */
            fbinfo.bpp = 24;
  410958:	24020018 	li	v0,24
  41095c:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/framebuffer_service.c:116
            fbinfo.size = w * h * 3;
  410960:	8fc302dc 	lw	v1,732(s8)
  410964:	8fc202e0 	lw	v0,736(s8)
  410968:	70621802 	mul	v1,v1,v0
  41096c:	00601021 	move	v0,v1
  410970:	00021040 	sll	v0,v0,0x1
  410974:	00431021 	addu	v0,v0,v1
  410978:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/framebuffer_service.c:117
            fbinfo.width = w;
  41097c:	8fc202dc 	lw	v0,732(s8)
  410980:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/framebuffer_service.c:118
            fbinfo.height = h;
  410984:	8fc202e0 	lw	v0,736(s8)
  410988:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/framebuffer_service.c:119
            fbinfo.red_offset = 0;
  41098c:	afc0003c 	sw	zero,60(s8)
/home_a/ppchen/adb/framebuffer_service.c:120
            fbinfo.red_length = 8;
  410990:	24020008 	li	v0,8
  410994:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/framebuffer_service.c:121
            fbinfo.green_offset = 8;
  410998:	24020008 	li	v0,8
  41099c:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/framebuffer_service.c:122
            fbinfo.green_length = 8;
  4109a0:	24020008 	li	v0,8
  4109a4:	afc20050 	sw	v0,80(s8)
/home_a/ppchen/adb/framebuffer_service.c:123
            fbinfo.blue_offset = 16;
  4109a8:	24020010 	li	v0,16
  4109ac:	afc20044 	sw	v0,68(s8)
/home_a/ppchen/adb/framebuffer_service.c:124
            fbinfo.blue_length = 8;
  4109b0:	24020008 	li	v0,8
  4109b4:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/framebuffer_service.c:125
            fbinfo.alpha_offset = 24;
  4109b8:	24020018 	li	v0,24
  4109bc:	afc20054 	sw	v0,84(s8)
/home_a/ppchen/adb/framebuffer_service.c:126
            fbinfo.alpha_length = 0;
  4109c0:	afc00058 	sw	zero,88(s8)
/home_a/ppchen/adb/framebuffer_service.c:127
            break;
  4109c4:	10000036 	b	410aa0 <framebuffer_service+0x380>
  4109c8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:129
        case 4: /* RGB_565 */
            fbinfo.bpp = 16;
  4109cc:	24020010 	li	v0,16
  4109d0:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/framebuffer_service.c:130
            fbinfo.size = w * h * 2;
  4109d4:	8fc302dc 	lw	v1,732(s8)
  4109d8:	8fc202e0 	lw	v0,736(s8)
  4109dc:	70621002 	mul	v0,v1,v0
  4109e0:	00021040 	sll	v0,v0,0x1
  4109e4:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/framebuffer_service.c:131
            fbinfo.width = w;
  4109e8:	8fc202dc 	lw	v0,732(s8)
  4109ec:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/framebuffer_service.c:132
            fbinfo.height = h;
  4109f0:	8fc202e0 	lw	v0,736(s8)
  4109f4:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/framebuffer_service.c:133
            fbinfo.red_offset = 11;
  4109f8:	2402000b 	li	v0,11
  4109fc:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/framebuffer_service.c:134
            fbinfo.red_length = 5;
  410a00:	24020005 	li	v0,5
  410a04:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/framebuffer_service.c:135
            fbinfo.green_offset = 5;
  410a08:	24020005 	li	v0,5
  410a0c:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/framebuffer_service.c:136
            fbinfo.green_length = 6;
  410a10:	24020006 	li	v0,6
  410a14:	afc20050 	sw	v0,80(s8)
/home_a/ppchen/adb/framebuffer_service.c:137
            fbinfo.blue_offset = 0;
  410a18:	afc00044 	sw	zero,68(s8)
/home_a/ppchen/adb/framebuffer_service.c:138
            fbinfo.blue_length = 5;
  410a1c:	24020005 	li	v0,5
  410a20:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/framebuffer_service.c:139
            fbinfo.alpha_offset = 0;
  410a24:	afc00054 	sw	zero,84(s8)
/home_a/ppchen/adb/framebuffer_service.c:140
            fbinfo.alpha_length = 0;
  410a28:	afc00058 	sw	zero,88(s8)
/home_a/ppchen/adb/framebuffer_service.c:141
            break;
  410a2c:	1000001c 	b	410aa0 <framebuffer_service+0x380>
  410a30:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:143
        case 5: /* BGRA_8888 */
            fbinfo.bpp = 32;
  410a34:	24020020 	li	v0,32
  410a38:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/framebuffer_service.c:144
            fbinfo.size = w * h * 4;
  410a3c:	8fc302dc 	lw	v1,732(s8)
  410a40:	8fc202e0 	lw	v0,736(s8)
  410a44:	70621002 	mul	v0,v1,v0
  410a48:	00021080 	sll	v0,v0,0x2
  410a4c:	afc20030 	sw	v0,48(s8)
/home_a/ppchen/adb/framebuffer_service.c:145
            fbinfo.width = w;
  410a50:	8fc202dc 	lw	v0,732(s8)
  410a54:	afc20034 	sw	v0,52(s8)
/home_a/ppchen/adb/framebuffer_service.c:146
            fbinfo.height = h;
  410a58:	8fc202e0 	lw	v0,736(s8)
  410a5c:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/framebuffer_service.c:147
            fbinfo.red_offset = 16;
  410a60:	24020010 	li	v0,16
  410a64:	afc2003c 	sw	v0,60(s8)
/home_a/ppchen/adb/framebuffer_service.c:148
            fbinfo.red_length = 8;
  410a68:	24020008 	li	v0,8
  410a6c:	afc20040 	sw	v0,64(s8)
/home_a/ppchen/adb/framebuffer_service.c:149
            fbinfo.green_offset = 8;
  410a70:	24020008 	li	v0,8
  410a74:	afc2004c 	sw	v0,76(s8)
/home_a/ppchen/adb/framebuffer_service.c:150
            fbinfo.green_length = 8;
  410a78:	24020008 	li	v0,8
  410a7c:	afc20050 	sw	v0,80(s8)
/home_a/ppchen/adb/framebuffer_service.c:151
            fbinfo.blue_offset = 0;
  410a80:	afc00044 	sw	zero,68(s8)
/home_a/ppchen/adb/framebuffer_service.c:152
            fbinfo.blue_length = 8;
  410a84:	24020008 	li	v0,8
  410a88:	afc20048 	sw	v0,72(s8)
/home_a/ppchen/adb/framebuffer_service.c:153
            fbinfo.alpha_offset = 24;
  410a8c:	24020018 	li	v0,24
  410a90:	afc20054 	sw	v0,84(s8)
/home_a/ppchen/adb/framebuffer_service.c:154
            fbinfo.alpha_length = 8;
  410a94:	24020008 	li	v0,8
  410a98:	afc20058 	sw	v0,88(s8)
/home_a/ppchen/adb/framebuffer_service.c:155
           break;
  410a9c:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:161
        default:
            goto done;
    }

    /* write header */
    if(writex(fd, &fbinfo, sizeof(fbinfo))) goto done;
  410aa0:	27c20028 	addiu	v0,s8,40
  410aa4:	8fc40300 	lw	a0,768(s8)
  410aa8:	00402821 	move	a1,v0
  410aac:	24060034 	li	a2,52
  410ab0:	0c101f4e 	jal	407d38 <writex>
  410ab4:	00000000 	nop
  410ab8:	14400052 	bnez	v0,410c04 <framebuffer_service+0x4e4>
  410abc:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:164

    /* write data */
    for(i = 0; i < fbinfo.size; i += sizeof(buf)) {
  410ac0:	afc00018 	sw	zero,24(s8)
  410ac4:	10000014 	b	410b18 <framebuffer_service+0x3f8>
  410ac8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:165
      if(readx(fd_screencap, buf, sizeof(buf))) goto done;
  410acc:	27c2005c 	addiu	v0,s8,92
  410ad0:	8fc40024 	lw	a0,36(s8)
  410ad4:	00402821 	move	a1,v0
  410ad8:	24060280 	li	a2,640
  410adc:	0c101f12 	jal	407c48 <readx>
  410ae0:	00000000 	nop
  410ae4:	1440004a 	bnez	v0,410c10 <framebuffer_service+0x4f0>
  410ae8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:166
      if(writex(fd, buf, sizeof(buf))) goto done;
  410aec:	27c2005c 	addiu	v0,s8,92
  410af0:	8fc40300 	lw	a0,768(s8)
  410af4:	00402821 	move	a1,v0
  410af8:	24060280 	li	a2,640
  410afc:	0c101f4e 	jal	407d38 <writex>
  410b00:	00000000 	nop
  410b04:	14400045 	bnez	v0,410c1c <framebuffer_service+0x4fc>
  410b08:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:164

    /* write header */
    if(writex(fd, &fbinfo, sizeof(fbinfo))) goto done;

    /* write data */
    for(i = 0; i < fbinfo.size; i += sizeof(buf)) {
  410b0c:	8fc20018 	lw	v0,24(s8)
  410b10:	24420280 	addiu	v0,v0,640
  410b14:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/framebuffer_service.c:164 (discriminator 1)
  410b18:	8fc30030 	lw	v1,48(s8)
  410b1c:	8fc20018 	lw	v0,24(s8)
  410b20:	0043102b 	sltu	v0,v0,v1
  410b24:	1440ffe9 	bnez	v0,410acc <framebuffer_service+0x3ac>
  410b28:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:168
      if(readx(fd_screencap, buf, sizeof(buf))) goto done;
      if(writex(fd, buf, sizeof(buf))) goto done;
    }
    if(readx(fd_screencap, buf, fbinfo.size % sizeof(buf))) goto done;
  410b2c:	8fc30030 	lw	v1,48(s8)
  410b30:	3c02cccc 	lui	v0,0xcccc
  410b34:	3442cccd 	ori	v0,v0,0xcccd
  410b38:	00620019 	multu	v1,v0
  410b3c:	00001010 	mfhi	v0
  410b40:	00021242 	srl	v0,v0,0x9
  410b44:	000211c0 	sll	v0,v0,0x7
  410b48:	00022080 	sll	a0,v0,0x2
  410b4c:	00441021 	addu	v0,v0,a0
  410b50:	00621023 	subu	v0,v1,v0
  410b54:	27c3005c 	addiu	v1,s8,92
  410b58:	8fc40024 	lw	a0,36(s8)
  410b5c:	00602821 	move	a1,v1
  410b60:	00403021 	move	a2,v0
  410b64:	0c101f12 	jal	407c48 <readx>
  410b68:	00000000 	nop
  410b6c:	1440002e 	bnez	v0,410c28 <framebuffer_service+0x508>
  410b70:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:169
    if(writex(fd, buf, fbinfo.size % sizeof(buf))) goto done;
  410b74:	8fc30030 	lw	v1,48(s8)
  410b78:	3c02cccc 	lui	v0,0xcccc
  410b7c:	3442cccd 	ori	v0,v0,0xcccd
  410b80:	00620019 	multu	v1,v0
  410b84:	00001010 	mfhi	v0
  410b88:	00021242 	srl	v0,v0,0x9
  410b8c:	000211c0 	sll	v0,v0,0x7
  410b90:	00022080 	sll	a0,v0,0x2
  410b94:	00441021 	addu	v0,v0,a0
  410b98:	00621023 	subu	v0,v1,v0
  410b9c:	27c3005c 	addiu	v1,s8,92
  410ba0:	8fc40300 	lw	a0,768(s8)
  410ba4:	00602821 	move	a1,v1
  410ba8:	00403021 	move	a2,v0
  410bac:	0c101f4e 	jal	407d38 <writex>
  410bb0:	00000000 	nop
  410bb4:	1000001d 	b	410c2c <framebuffer_service+0x50c>
  410bb8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:61
    char buf[640];
    int fd_screencap;
    int w, h, f;
    int fds[2];

    if (pipe(fds) < 0) goto done;
  410bbc:	00000000 	nop
  410bc0:	1000001a 	b	410c2c <framebuffer_service+0x50c>
  410bc4:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:64

    pid_t pid = fork();
    if (pid < 0) goto done;
  410bc8:	00000000 	nop
  410bcc:	10000017 	b	410c2c <framebuffer_service+0x50c>
  410bd0:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:79
    }

    fd_screencap = fds[0];

    /* read w, h & format */
    if(readx(fd_screencap, &w, 4)) goto done;
  410bd4:	00000000 	nop
  410bd8:	10000014 	b	410c2c <framebuffer_service+0x50c>
  410bdc:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:80
    if(readx(fd_screencap, &h, 4)) goto done;
  410be0:	00000000 	nop
  410be4:	10000011 	b	410c2c <framebuffer_service+0x50c>
  410be8:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:81
    if(readx(fd_screencap, &f, 4)) goto done;
  410bec:	00000000 	nop
  410bf0:	1000000e 	b	410c2c <framebuffer_service+0x50c>
  410bf4:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:157
            fbinfo.blue_length = 8;
            fbinfo.alpha_offset = 24;
            fbinfo.alpha_length = 8;
           break;
        default:
            goto done;
  410bf8:	00000000 	nop
  410bfc:	1000000b 	b	410c2c <framebuffer_service+0x50c>
  410c00:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:161
    }

    /* write header */
    if(writex(fd, &fbinfo, sizeof(fbinfo))) goto done;
  410c04:	00000000 	nop
  410c08:	10000008 	b	410c2c <framebuffer_service+0x50c>
  410c0c:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:165

    /* write data */
    for(i = 0; i < fbinfo.size; i += sizeof(buf)) {
      if(readx(fd_screencap, buf, sizeof(buf))) goto done;
  410c10:	00000000 	nop
  410c14:	10000005 	b	410c2c <framebuffer_service+0x50c>
  410c18:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:166
      if(writex(fd, buf, sizeof(buf))) goto done;
  410c1c:	00000000 	nop
  410c20:	10000002 	b	410c2c <framebuffer_service+0x50c>
  410c24:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:168
    }
    if(readx(fd_screencap, buf, fbinfo.size % sizeof(buf))) goto done;
  410c28:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:172
    if(writex(fd, buf, fbinfo.size % sizeof(buf))) goto done;

done:
    close(fds[0]);
  410c2c:	8fc202e8 	lw	v0,744(s8)
  410c30:	00402021 	move	a0,v0
  410c34:	0c105378 	jal	414de0 <close@plt>
  410c38:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:173
    close(fds[1]);
  410c3c:	8fc202ec 	lw	v0,748(s8)
  410c40:	00402021 	move	a0,v0
  410c44:	0c105378 	jal	414de0 <close@plt>
  410c48:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:174
    close(fd);
  410c4c:	8fc40300 	lw	a0,768(s8)
  410c50:	0c105378 	jal	414de0 <close@plt>
  410c54:	00000000 	nop
/home_a/ppchen/adb/framebuffer_service.c:175
}
  410c58:	03c0e821 	move	sp,s8
  410c5c:	8fbf02fc 	lw	ra,764(sp)
  410c60:	8fbe02f8 	lw	s8,760(sp)
  410c64:	27bd0300 	addiu	sp,sp,768
  410c68:	03e00008 	jr	ra
  410c6c:	00000000 	nop

00410c70 <unix_open>:
unix_open():
/home_a/ppchen/adb/sysdeps.h:310
{
    fcntl( fd, F_SETFD, FD_CLOEXEC );
}

static __inline__ int  unix_open(const char*  path, int options,...)
{
  410c70:	27bdffd8 	addiu	sp,sp,-40
  410c74:	afbf0024 	sw	ra,36(sp)
  410c78:	afbe0020 	sw	s8,32(sp)
  410c7c:	03a0f021 	move	s8,sp
  410c80:	afc40028 	sw	a0,40(s8)
  410c84:	afc60030 	sw	a2,48(s8)
  410c88:	afc70034 	sw	a3,52(s8)
  410c8c:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:311
    if ((options & O_CREAT) == 0)
  410c90:	8fc2002c 	lw	v0,44(s8)
  410c94:	30420100 	andi	v0,v0,0x100
  410c98:	14400007 	bnez	v0,410cb8 <unix_open+0x48>
  410c9c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:313
    {
        return  open(path, options);
  410ca0:	8fc40028 	lw	a0,40(s8)
  410ca4:	8fc5002c 	lw	a1,44(s8)
  410ca8:	0c1052c4 	jal	414b10 <open@plt>
  410cac:	00000000 	nop
  410cb0:	1000000d 	b	410ce8 <unix_open+0x78>
  410cb4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:319
    }
    else
    {
        int      mode;
        va_list  args;
        va_start( args, options );
  410cb8:	27c20030 	addiu	v0,s8,48
  410cbc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sysdeps.h:320
        mode = va_arg( args, int );
  410cc0:	8fc2001c 	lw	v0,28(s8)
  410cc4:	24430004 	addiu	v1,v0,4
  410cc8:	afc3001c 	sw	v1,28(s8)
  410ccc:	8c420000 	lw	v0,0(v0)
  410cd0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:322
        va_end( args );
        return open(path, options, mode);
  410cd4:	8fc40028 	lw	a0,40(s8)
  410cd8:	8fc5002c 	lw	a1,44(s8)
  410cdc:	8fc60018 	lw	a2,24(s8)
  410ce0:	0c1052c4 	jal	414b10 <open@plt>
  410ce4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:324
    }
}
  410ce8:	03c0e821 	move	sp,s8
  410cec:	8fbf0024 	lw	ra,36(sp)
  410cf0:	8fbe0020 	lw	s8,32(sp)
  410cf4:	27bd0028 	addiu	sp,sp,40
  410cf8:	03e00008 	jr	ra
  410cfc:	00000000 	nop

00410d00 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  410d00:	27bdffe0 	addiu	sp,sp,-32
  410d04:	afbf001c 	sw	ra,28(sp)
  410d08:	afbe0018 	sw	s8,24(sp)
  410d0c:	03a0f021 	move	s8,sp
  410d10:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  410d14:	8fc40020 	lw	a0,32(s8)
  410d18:	0c105378 	jal	414de0 <close@plt>
  410d1c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  410d20:	03c0e821 	move	sp,s8
  410d24:	8fbf001c 	lw	ra,28(sp)
  410d28:	8fbe0018 	lw	s8,24(sp)
  410d2c:	27bd0020 	addiu	sp,sp,32
  410d30:	03e00008 	jr	ra
  410d34:	00000000 	nop

00410d38 <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  410d38:	27bdffe0 	addiu	sp,sp,-32
  410d3c:	afbf001c 	sw	ra,28(sp)
  410d40:	afbe0018 	sw	s8,24(sp)
  410d44:	03a0f021 	move	s8,sp
  410d48:	afc40020 	sw	a0,32(s8)
  410d4c:	afc50024 	sw	a1,36(s8)
  410d50:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  410d54:	8fc40020 	lw	a0,32(s8)
  410d58:	8fc50024 	lw	a1,36(s8)
  410d5c:	8fc60028 	lw	a2,40(s8)
  410d60:	0c105340 	jal	414d00 <read@plt>
  410d64:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  410d68:	03c0e821 	move	sp,s8
  410d6c:	8fbf001c 	lw	ra,28(sp)
  410d70:	8fbe0018 	lw	s8,24(sp)
  410d74:	27bd0020 	addiu	sp,sp,32
  410d78:	03e00008 	jr	ra
  410d7c:	00000000 	nop

00410d80 <find_mount>:
find_mount():
/home_a/ppchen/adb/remount_service.c:35

static int system_ro = 1;

/* Returns the device used to mount a directory in /proc/mounts */
static char *find_mount(const char *dir)
{
  410d80:	27bdedb8 	addiu	sp,sp,-4680
  410d84:	afbf1244 	sw	ra,4676(sp)
  410d88:	afbe1240 	sw	s8,4672(sp)
  410d8c:	03a0f021 	move	s8,sp
  410d90:	afc41248 	sw	a0,4680(s8)
/home_a/ppchen/adb/remount_service.c:39
    int fd;
    int res;
    int size;
    char *token = NULL;
  410d94:	afc00020 	sw	zero,32(s8)
/home_a/ppchen/adb/remount_service.c:40
    const char delims[] = "\n";
  410d98:	2402000a 	li	v0,10
  410d9c:	a7c20030 	sh	v0,48(s8)
/home_a/ppchen/adb/remount_service.c:43
    char buf[4096];

    printf("<===>find_mount enter \n");	
  410da0:	3c020041 	lui	v0,0x41
  410da4:	244447e0 	addiu	a0,v0,18400
  410da8:	0c10540c 	jal	415030 <puts@plt>
  410dac:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:45

    fd = unix_open("/proc/mounts", O_RDONLY);
  410db0:	3c020041 	lui	v0,0x41
  410db4:	244447f8 	addiu	a0,v0,18424
  410db8:	00002821 	move	a1,zero
  410dbc:	0c10431c 	jal	410c70 <unix_open>
  410dc0:	00000000 	nop
  410dc4:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/remount_service.c:46
    if (fd < 0){
  410dc8:	8fc20024 	lw	v0,36(s8)
  410dcc:	04410008 	bgez	v0,410df0 <find_mount+0x70>
  410dd0:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:47
	 printf("<===>find_mount unix_open fail \n");
  410dd4:	3c020041 	lui	v0,0x41
  410dd8:	24444808 	addiu	a0,v0,18440
  410ddc:	0c10540c 	jal	415030 <puts@plt>
  410de0:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:48
        return NULL;
  410de4:	00001021 	move	v0,zero
  410de8:	10000065 	b	410f80 <find_mount+0x200>
  410dec:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:53
    	}

	

    buf[sizeof(buf) - 1] = '\0';
  410df0:	a3c01033 	sb	zero,4147(s8)
/home_a/ppchen/adb/remount_service.c:54
    size = adb_read(fd, buf, sizeof(buf) - 1);
  410df4:	27c20034 	addiu	v0,s8,52
  410df8:	8fc40024 	lw	a0,36(s8)
  410dfc:	00402821 	move	a1,v0
  410e00:	24060fff 	li	a2,4095
  410e04:	0c10434e 	jal	410d38 <adb_read>
  410e08:	00000000 	nop
  410e0c:	afc20028 	sw	v0,40(s8)
/home_a/ppchen/adb/remount_service.c:55
    adb_close(fd);
  410e10:	8fc40024 	lw	a0,36(s8)
  410e14:	0c104340 	jal	410d00 <adb_close>
  410e18:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:57

    printf("<===>find_mount buf=%s \n", buf);	
  410e1c:	27c20034 	addiu	v0,s8,52
  410e20:	3c030041 	lui	v1,0x41
  410e24:	24644828 	addiu	a0,v1,18472
  410e28:	00402821 	move	a1,v0
  410e2c:	0c105400 	jal	415000 <printf@plt>
  410e30:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:59

    token = strtok(buf, delims);
  410e34:	27c30034 	addiu	v1,s8,52
  410e38:	27c20030 	addiu	v0,s8,48
  410e3c:	00602021 	move	a0,v1
  410e40:	00402821 	move	a1,v0
  410e44:	0c105364 	jal	414d90 <strtok@plt>
  410e48:	00000000 	nop
  410e4c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/remount_service.c:61

    printf("<===>find_mount token=%s \n", token);		
  410e50:	3c020041 	lui	v0,0x41
  410e54:	24444844 	addiu	a0,v0,18500
  410e58:	8fc50020 	lw	a1,32(s8)
  410e5c:	0c105400 	jal	415000 <printf@plt>
  410e60:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:63

    while (token) {
  410e64:	1000003e 	b	410f60 <find_mount+0x1e0>
  410e68:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:70
        char mount_dir[256];
        int mount_freq;
        int mount_passno;

        res = sscanf(token, "%255s %255s %*s %*s %d %d\n",
                     mount_dev, mount_dir, &mount_freq, &mount_passno);
  410e6c:	27c3113c 	addiu	v1,s8,4412
  410e70:	27c2103c 	addiu	v0,s8,4156
/home_a/ppchen/adb/remount_service.c:69
        char mount_dev[256];
        char mount_dir[256];
        int mount_freq;
        int mount_passno;

        res = sscanf(token, "%255s %255s %*s %*s %d %d\n",
  410e74:	27c41034 	addiu	a0,s8,4148
  410e78:	afa40010 	sw	a0,16(sp)
  410e7c:	27c41038 	addiu	a0,s8,4152
  410e80:	afa40014 	sw	a0,20(sp)
  410e84:	8fc40020 	lw	a0,32(s8)
  410e88:	3c050041 	lui	a1,0x41
  410e8c:	24a54860 	addiu	a1,a1,18528
  410e90:	00603021 	move	a2,v1
  410e94:	00403821 	move	a3,v0
  410e98:	0c105390 	jal	414e40 <sscanf@plt>
  410e9c:	00000000 	nop
  410ea0:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/remount_service.c:71
                     mount_dev, mount_dir, &mount_freq, &mount_passno);
	 printf("<===>find_mount token=%s mount_dev=%s mount_dir=%s mount_freq=%d mount_passno=%d \n", token, mount_dev, mount_dir, mount_freq, mount_passno);		
  410ea4:	8fc51034 	lw	a1,4148(s8)
  410ea8:	8fc41038 	lw	a0,4152(s8)
  410eac:	27c3113c 	addiu	v1,s8,4412
  410eb0:	27c2103c 	addiu	v0,s8,4156
  410eb4:	afa50010 	sw	a1,16(sp)
  410eb8:	afa40014 	sw	a0,20(sp)
  410ebc:	3c040041 	lui	a0,0x41
  410ec0:	2484487c 	addiu	a0,a0,18556
  410ec4:	8fc50020 	lw	a1,32(s8)
  410ec8:	00603021 	move	a2,v1
  410ecc:	00403821 	move	a3,v0
  410ed0:	0c105400 	jal	415000 <printf@plt>
  410ed4:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:72
        mount_dev[255] = 0;
  410ed8:	a3c0123b 	sb	zero,4667(s8)
/home_a/ppchen/adb/remount_service.c:73
        mount_dir[255] = 0;
  410edc:	a3c0113b 	sb	zero,4411(s8)
/home_a/ppchen/adb/remount_service.c:74
        if (res == 4 && (strcmp(dir, mount_dir) == 0)){
  410ee0:	8fc3002c 	lw	v1,44(s8)
  410ee4:	24020004 	li	v0,4
  410ee8:	14620017 	bne	v1,v0,410f48 <find_mount+0x1c8>
  410eec:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:74 (discriminator 1)
  410ef0:	27c2103c 	addiu	v0,s8,4156
  410ef4:	8fc41248 	lw	a0,4680(s8)
  410ef8:	00402821 	move	a1,v0
  410efc:	0c1053d8 	jal	414f60 <strcmp@plt>
  410f00:	00000000 	nop
  410f04:	14400010 	bnez	v0,410f48 <find_mount+0x1c8>
  410f08:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:75
              printf("<===>find_mount return=%s \n", strdup(mount_dev));		
  410f0c:	27c2113c 	addiu	v0,s8,4412
  410f10:	00402021 	move	a0,v0
  410f14:	0c105408 	jal	415020 <strdup@plt>
  410f18:	00000000 	nop
  410f1c:	3c030041 	lui	v1,0x41
  410f20:	246448d0 	addiu	a0,v1,18640
  410f24:	00402821 	move	a1,v0
  410f28:	0c105400 	jal	415000 <printf@plt>
  410f2c:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:76
		return strdup(mount_dev);
  410f30:	27c2113c 	addiu	v0,s8,4412
  410f34:	00402021 	move	a0,v0
  410f38:	0c105408 	jal	415020 <strdup@plt>
  410f3c:	00000000 	nop
  410f40:	1000000f 	b	410f80 <find_mount+0x200>
  410f44:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:79
        	}	

        token = strtok(NULL, delims);
  410f48:	27c20030 	addiu	v0,s8,48
  410f4c:	00002021 	move	a0,zero
  410f50:	00402821 	move	a1,v0
  410f54:	0c105364 	jal	414d90 <strtok@plt>
  410f58:	00000000 	nop
  410f5c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/remount_service.c:63 (discriminator 1)

    token = strtok(buf, delims);

    printf("<===>find_mount token=%s \n", token);		

    while (token) {
  410f60:	8fc20020 	lw	v0,32(s8)
  410f64:	1440ffc1 	bnez	v0,410e6c <find_mount+0xec>
  410f68:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:82
        	}	

        token = strtok(NULL, delims);
    }

    printf("<===>find_mount end \n");
  410f6c:	3c020041 	lui	v0,0x41
  410f70:	244448ec 	addiu	a0,v0,18668
  410f74:	0c10540c 	jal	415030 <puts@plt>
  410f78:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:83
    return NULL;
  410f7c:	00001021 	move	v0,zero
/home_a/ppchen/adb/remount_service.c:84
}
  410f80:	03c0e821 	move	sp,s8
  410f84:	8fbf1244 	lw	ra,4676(sp)
  410f88:	8fbe1240 	lw	s8,4672(sp)
  410f8c:	27bd1248 	addiu	sp,sp,4680
  410f90:	03e00008 	jr	ra
  410f94:	00000000 	nop

00410f98 <remount_system>:
remount_system():
/home_a/ppchen/adb/remount_service.c:88

/* Init mounts /system as read only, remount to enable writes. */
static int remount_system()
{
  410f98:	27bdffd8 	addiu	sp,sp,-40
  410f9c:	afbf0024 	sw	ra,36(sp)
  410fa0:	afbe0020 	sw	s8,32(sp)
  410fa4:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/remount_service.c:91
    char *dev;

    if (system_ro == 0) {
  410fa8:	3c020042 	lui	v0,0x42
  410fac:	8c425780 	lw	v0,22400(v0)
  410fb0:	14400008 	bnez	v0,410fd4 <remount_system+0x3c>
  410fb4:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:92
	printf(" <===>remount_system system_ro == 0 \n");
  410fb8:	3c020041 	lui	v0,0x41
  410fbc:	24444904 	addiu	a0,v0,18692
  410fc0:	0c10540c 	jal	415030 <puts@plt>
  410fc4:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:93
        return 0;
  410fc8:	00001021 	move	v0,zero
  410fcc:	10000013 	b	41101c <remount_system+0x84>
  410fd0:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:96
    }

    printf(" <===>remount_system bengin to  find_remount \n");
  410fd4:	3c020041 	lui	v0,0x41
  410fd8:	2444492c 	addiu	a0,v0,18732
  410fdc:	0c10540c 	jal	415030 <puts@plt>
  410fe0:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:97
    dev = find_mount("/system");
  410fe4:	3c020041 	lui	v0,0x41
  410fe8:	2444495c 	addiu	a0,v0,18780
  410fec:	0c104360 	jal	410d80 <find_mount>
  410ff0:	00000000 	nop
  410ff4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/remount_service.c:100
    //dev = find_mount("/");

    if (!dev)
  410ff8:	8fc20018 	lw	v0,24(s8)
  410ffc:	14400006 	bnez	v0,411018 <remount_system+0x80>
  411000:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:101
	 printf("<===>remount_system find_remount result=%s \n", dev);
  411004:	3c020041 	lui	v0,0x41
  411008:	24444964 	addiu	a0,v0,18788
  41100c:	8fc50018 	lw	a1,24(s8)
  411010:	0c105400 	jal	415000 <printf@plt>
  411014:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:102
        return -1;
  411018:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/remount_service.c:111

    free(dev);

   printf("<===>remount_system end \n");
    return system_ro;
}
  41101c:	03c0e821 	move	sp,s8
  411020:	8fbf0024 	lw	ra,36(sp)
  411024:	8fbe0020 	lw	s8,32(sp)
  411028:	27bd0028 	addiu	sp,sp,40
  41102c:	03e00008 	jr	ra
  411030:	00000000 	nop

00411034 <write_string>:
write_string():
/home_a/ppchen/adb/remount_service.c:114

static void write_string(int fd, const char* str)
{
  411034:	27bdffe0 	addiu	sp,sp,-32
  411038:	afbf001c 	sw	ra,28(sp)
  41103c:	afbe0018 	sw	s8,24(sp)
  411040:	03a0f021 	move	s8,sp
  411044:	afc40020 	sw	a0,32(s8)
  411048:	afc50024 	sw	a1,36(s8)
/home_a/ppchen/adb/remount_service.c:115
    writex(fd, str, strlen(str));
  41104c:	8fc40024 	lw	a0,36(s8)
  411050:	0c10531c 	jal	414c70 <strlen@plt>
  411054:	00000000 	nop
  411058:	8fc40020 	lw	a0,32(s8)
  41105c:	8fc50024 	lw	a1,36(s8)
  411060:	00403021 	move	a2,v0
  411064:	0c101f4e 	jal	407d38 <writex>
  411068:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:116
}
  41106c:	03c0e821 	move	sp,s8
  411070:	8fbf001c 	lw	ra,28(sp)
  411074:	8fbe0018 	lw	s8,24(sp)
  411078:	27bd0020 	addiu	sp,sp,32
  41107c:	03e00008 	jr	ra
  411080:	00000000 	nop

00411084 <remount_service>:
remount_service():
/home_a/ppchen/adb/remount_service.c:119

void remount_service(int fd, void *cookie)
{
  411084:	27bdff10 	addiu	sp,sp,-240
  411088:	afbf00ec 	sw	ra,236(sp)
  41108c:	afbe00e8 	sw	s8,232(sp)
  411090:	03a0f021 	move	s8,sp
  411094:	afc400f0 	sw	a0,240(s8)
  411098:	afc500f4 	sw	a1,244(s8)
/home_a/ppchen/adb/remount_service.c:120
    int ret = remount_system();
  41109c:	0c1043e6 	jal	410f98 <remount_system>
  4110a0:	00000000 	nop
  4110a4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/remount_service.c:122

    if (!ret)
  4110a8:	8fc20018 	lw	v0,24(s8)
  4110ac:	14400008 	bnez	v0,4110d0 <remount_service+0x4c>
  4110b0:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:123
       write_string(fd, "remount succeeded\n");
  4110b4:	8fc400f0 	lw	a0,240(s8)
  4110b8:	3c020041 	lui	v0,0x41
  4110bc:	24454994 	addiu	a1,v0,18836
  4110c0:	0c10440d 	jal	411034 <write_string>
  4110c4:	00000000 	nop
  4110c8:	10000014 	b	41111c <remount_service+0x98>
  4110cc:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:126
    else {
        char    buffer[200];
        snprintf(buffer, sizeof(buffer), "remount failed: %s\n", strerror(errno));
  4110d0:	0c1052c0 	jal	414b00 <__errno_location@plt>
  4110d4:	00000000 	nop
  4110d8:	8c420000 	lw	v0,0(v0)
  4110dc:	00402021 	move	a0,v0
  4110e0:	0c1053f8 	jal	414fe0 <strerror@plt>
  4110e4:	00000000 	nop
  4110e8:	27c3001c 	addiu	v1,s8,28
  4110ec:	00602021 	move	a0,v1
  4110f0:	240500c8 	li	a1,200
  4110f4:	3c030041 	lui	v1,0x41
  4110f8:	246649a8 	addiu	a2,v1,18856
  4110fc:	00403821 	move	a3,v0
  411100:	0c105334 	jal	414cd0 <snprintf@plt>
  411104:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:127
        write_string(fd, buffer);
  411108:	27c2001c 	addiu	v0,s8,28
  41110c:	8fc400f0 	lw	a0,240(s8)
  411110:	00402821 	move	a1,v0
  411114:	0c10440d 	jal	411034 <write_string>
  411118:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:130
    }

    adb_close(fd);
  41111c:	8fc400f0 	lw	a0,240(s8)
  411120:	0c104340 	jal	410d00 <adb_close>
  411124:	00000000 	nop
/home_a/ppchen/adb/remount_service.c:131
}
  411128:	03c0e821 	move	sp,s8
  41112c:	8fbf00ec 	lw	ra,236(sp)
  411130:	8fbe00e8 	lw	s8,232(sp)
  411134:	27bd00f0 	addiu	sp,sp,240
  411138:	03e00008 	jr	ra
  41113c:	00000000 	nop

00411140 <close_on_exec>:
close_on_exec():
/home_a/ppchen/adb/sysdeps.h:305
#define  ADB_MUTEX(x)   extern adb_mutex_t  x;
#include "mutex_list.h"


static __inline__ void  close_on_exec(int  fd)
{
  411140:	27bdffe0 	addiu	sp,sp,-32
  411144:	afbf001c 	sw	ra,28(sp)
  411148:	afbe0018 	sw	s8,24(sp)
  41114c:	03a0f021 	move	s8,sp
  411150:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:306
    fcntl( fd, F_SETFD, FD_CLOEXEC );
  411154:	8fc40020 	lw	a0,32(s8)
  411158:	24050002 	li	a1,2
  41115c:	24060001 	li	a2,1
  411160:	0c10532c 	jal	414cb0 <fcntl@plt>
  411164:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:307
}
  411168:	03c0e821 	move	sp,s8
  41116c:	8fbf001c 	lw	ra,28(sp)
  411170:	8fbe0018 	lw	s8,24(sp)
  411174:	27bd0020 	addiu	sp,sp,32
  411178:	03e00008 	jr	ra
  41117c:	00000000 	nop

00411180 <unix_open>:
unix_open():
/home_a/ppchen/adb/sysdeps.h:310

static __inline__ int  unix_open(const char*  path, int options,...)
{
  411180:	27bdffd8 	addiu	sp,sp,-40
  411184:	afbf0024 	sw	ra,36(sp)
  411188:	afbe0020 	sw	s8,32(sp)
  41118c:	03a0f021 	move	s8,sp
  411190:	afc40028 	sw	a0,40(s8)
  411194:	afc60030 	sw	a2,48(s8)
  411198:	afc70034 	sw	a3,52(s8)
  41119c:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:311
    if ((options & O_CREAT) == 0)
  4111a0:	8fc2002c 	lw	v0,44(s8)
  4111a4:	30420100 	andi	v0,v0,0x100
  4111a8:	14400007 	bnez	v0,4111c8 <unix_open+0x48>
  4111ac:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:313
    {
        return  open(path, options);
  4111b0:	8fc40028 	lw	a0,40(s8)
  4111b4:	8fc5002c 	lw	a1,44(s8)
  4111b8:	0c1052c4 	jal	414b10 <open@plt>
  4111bc:	00000000 	nop
  4111c0:	1000000d 	b	4111f8 <unix_open+0x78>
  4111c4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:319
    }
    else
    {
        int      mode;
        va_list  args;
        va_start( args, options );
  4111c8:	27c20030 	addiu	v0,s8,48
  4111cc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sysdeps.h:320
        mode = va_arg( args, int );
  4111d0:	8fc2001c 	lw	v0,28(s8)
  4111d4:	24430004 	addiu	v1,v0,4
  4111d8:	afc3001c 	sw	v1,28(s8)
  4111dc:	8c420000 	lw	v0,0(v0)
  4111e0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:322
        va_end( args );
        return open(path, options, mode);
  4111e4:	8fc40028 	lw	a0,40(s8)
  4111e8:	8fc5002c 	lw	a1,44(s8)
  4111ec:	8fc60018 	lw	a2,24(s8)
  4111f0:	0c1052c4 	jal	414b10 <open@plt>
  4111f4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:324
    }
}
  4111f8:	03c0e821 	move	sp,s8
  4111fc:	8fbf0024 	lw	ra,36(sp)
  411200:	8fbe0020 	lw	s8,32(sp)
  411204:	27bd0028 	addiu	sp,sp,40
  411208:	03e00008 	jr	ra
  41120c:	00000000 	nop

00411210 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  411210:	27bdffe0 	addiu	sp,sp,-32
  411214:	afbf001c 	sw	ra,28(sp)
  411218:	afbe0018 	sw	s8,24(sp)
  41121c:	03a0f021 	move	s8,sp
  411220:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  411224:	8fc40020 	lw	a0,32(s8)
  411228:	0c105378 	jal	414de0 <close@plt>
  41122c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  411230:	03c0e821 	move	sp,s8
  411234:	8fbf001c 	lw	ra,28(sp)
  411238:	8fbe0018 	lw	s8,24(sp)
  41123c:	27bd0020 	addiu	sp,sp,32
  411240:	03e00008 	jr	ra
  411244:	00000000 	nop

00411248 <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  411248:	27bdffe0 	addiu	sp,sp,-32
  41124c:	afbf001c 	sw	ra,28(sp)
  411250:	afbe0018 	sw	s8,24(sp)
  411254:	03a0f021 	move	s8,sp
  411258:	afc40020 	sw	a0,32(s8)
  41125c:	afc50024 	sw	a1,36(s8)
  411260:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  411264:	8fc40020 	lw	a0,32(s8)
  411268:	8fc50024 	lw	a1,36(s8)
  41126c:	8fc60028 	lw	a2,40(s8)
  411270:	0c105340 	jal	414d00 <read@plt>
  411274:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  411278:	03c0e821 	move	sp,s8
  41127c:	8fbf001c 	lw	ra,28(sp)
  411280:	8fbe0018 	lw	s8,24(sp)
  411284:	27bd0020 	addiu	sp,sp,32
  411288:	03e00008 	jr	ra
  41128c:	00000000 	nop

00411290 <adb_write>:
adb_write():
/home_a/ppchen/adb/sysdeps.h:367

#undef   read
#define  read  ___xxx_read

static __inline__ int  adb_write(int  fd, const void*  buf, size_t  len)
{
  411290:	27bdffe0 	addiu	sp,sp,-32
  411294:	afbf001c 	sw	ra,28(sp)
  411298:	afbe0018 	sw	s8,24(sp)
  41129c:	03a0f021 	move	s8,sp
  4112a0:	afc40020 	sw	a0,32(s8)
  4112a4:	afc50024 	sw	a1,36(s8)
  4112a8:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:368
    return write(fd, buf, len);
  4112ac:	8fc40020 	lw	a0,32(s8)
  4112b0:	8fc50024 	lw	a1,36(s8)
  4112b4:	8fc60028 	lw	a2,40(s8)
  4112b8:	0c10536c 	jal	414db0 <write@plt>
  4112bc:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:369
}
  4112c0:	03c0e821 	move	sp,s8
  4112c4:	8fbf001c 	lw	ra,28(sp)
  4112c8:	8fbe0018 	lw	s8,24(sp)
  4112cc:	27bd0020 	addiu	sp,sp,32
  4112d0:	03e00008 	jr	ra
  4112d4:	00000000 	nop

004112d8 <adb_thread_create>:
adb_thread_create():
/home_a/ppchen/adb/sysdeps.h:424
typedef  pthread_t                 adb_thread_t;

typedef void*  (*adb_thread_func_t)( void*  arg );

static __inline__ int  adb_thread_create( adb_thread_t  *pthread, adb_thread_func_t  start, void*  arg )
{
  4112d8:	27bdffb8 	addiu	sp,sp,-72
  4112dc:	afbf0044 	sw	ra,68(sp)
  4112e0:	afbe0040 	sw	s8,64(sp)
  4112e4:	03a0f021 	move	s8,sp
  4112e8:	afc40048 	sw	a0,72(s8)
  4112ec:	afc5004c 	sw	a1,76(s8)
  4112f0:	afc60050 	sw	a2,80(s8)
/home_a/ppchen/adb/sysdeps.h:429
    pthread_attr_t   attr;


    //pthread_detach(pthread_self());
    pthread_attr_init (&attr);
  4112f4:	27c2001c 	addiu	v0,s8,28
  4112f8:	00402021 	move	a0,v0
  4112fc:	0c1052ec 	jal	414bb0 <pthread_attr_init@plt>
  411300:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:430
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
  411304:	27c2001c 	addiu	v0,s8,28
  411308:	00402021 	move	a0,v0
  41130c:	24050001 	li	a1,1
  411310:	0c1052c8 	jal	414b20 <pthread_attr_setdetachstate@plt>
  411314:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:431
    pthread_attr_setstacksize(&attr, 64*1024);
  411318:	27c2001c 	addiu	v0,s8,28
  41131c:	00402021 	move	a0,v0
  411320:	3c050001 	lui	a1,0x1
  411324:	0c105314 	jal	414c50 <pthread_attr_setstacksize@plt>
  411328:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:434
   

    int ret =  pthread_create( pthread, &attr, start, arg );
  41132c:	27c2001c 	addiu	v0,s8,28
  411330:	8fc40048 	lw	a0,72(s8)
  411334:	00402821 	move	a1,v0
  411338:	8fc6004c 	lw	a2,76(s8)
  41133c:	8fc70050 	lw	a3,80(s8)
  411340:	0c105368 	jal	414da0 <pthread_create@plt>
  411344:	00000000 	nop
  411348:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:436

    return ret;
  41134c:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:437
}
  411350:	03c0e821 	move	sp,s8
  411354:	8fbf0044 	lw	ra,68(sp)
  411358:	8fbe0040 	lw	s8,64(sp)
  41135c:	27bd0048 	addiu	sp,sp,72
  411360:	03e00008 	jr	ra
  411364:	00000000 	nop

00411368 <adb_sleep_ms>:
adb_sleep_ms():
/home_a/ppchen/adb/sysdeps.h:479

#undef   socketpair
#define  socketpair   ___xxx_socketpair

static __inline__ void  adb_sleep_ms( int  mseconds )
{
  411368:	27bdffe0 	addiu	sp,sp,-32
  41136c:	afbf001c 	sw	ra,28(sp)
  411370:	afbe0018 	sw	s8,24(sp)
  411374:	03a0f021 	move	s8,sp
  411378:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:480
    usleep( mseconds*1000 );
  41137c:	8fc40020 	lw	a0,32(s8)
  411380:	00801821 	move	v1,a0
  411384:	00031080 	sll	v0,v1,0x2
  411388:	00401821 	move	v1,v0
  41138c:	00031140 	sll	v0,v1,0x5
  411390:	00431023 	subu	v0,v0,v1
  411394:	00441021 	addu	v0,v0,a0
  411398:	000210c0 	sll	v0,v0,0x3
  41139c:	00402021 	move	a0,v0
  4113a0:	0c1052d4 	jal	414b50 <usleep@plt>
  4113a4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:481
}
  4113a8:	03c0e821 	move	sp,s8
  4113ac:	8fbf001c 	lw	ra,28(sp)
  4113b0:	8fbe0018 	lw	s8,24(sp)
  4113b4:	27bd0020 	addiu	sp,sp,32
  4113b8:	03e00008 	jr	ra
  4113bc:	00000000 	nop

004113c0 <usb_cleanup>:
usb_cleanup():
/home_a/ppchen/adb/usb_linux_client.c:41
    adb_cond_t notify;
    adb_mutex_t lock;
};

void usb_cleanup()
{
  4113c0:	27bdfff8 	addiu	sp,sp,-8
  4113c4:	afbe0004 	sw	s8,4(sp)
  4113c8:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/usb_linux_client.c:43
    // nothing to do here
}
  4113cc:	03c0e821 	move	sp,s8
  4113d0:	8fbe0004 	lw	s8,4(sp)
  4113d4:	27bd0008 	addiu	sp,sp,8
  4113d8:	03e00008 	jr	ra
  4113dc:	00000000 	nop

004113e0 <usb_open_thread>:
usb_open_thread():
/home_a/ppchen/adb/usb_linux_client.c:46

static void *usb_open_thread(void *x)
{
  4113e0:	27bdffd8 	addiu	sp,sp,-40
  4113e4:	afbf0024 	sw	ra,36(sp)
  4113e8:	afbe0020 	sw	s8,32(sp)
  4113ec:	03a0f021 	move	s8,sp
  4113f0:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/usb_linux_client.c:47
    struct usb_handle *usb = (struct usb_handle *)x;
  4113f4:	8fc20028 	lw	v0,40(s8)
  4113f8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/usb_linux_client.c:52
    int fd;

    while (1) {
        // wait until the USB device needs opening
        adb_mutex_lock(&usb->lock);
  4113fc:	8fc2001c 	lw	v0,28(s8)
  411400:	24420038 	addiu	v0,v0,56
  411404:	00402021 	move	a0,v0
  411408:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  41140c:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:53
        while (usb->fd != -1)
  411410:	10000009 	b	411438 <usb_open_thread+0x58>
  411414:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:54
            adb_cond_wait(&usb->notify, &usb->lock);
  411418:	8fc2001c 	lw	v0,28(s8)
  41141c:	24430008 	addiu	v1,v0,8
  411420:	8fc2001c 	lw	v0,28(s8)
  411424:	24420038 	addiu	v0,v0,56
  411428:	00602021 	move	a0,v1
  41142c:	00402821 	move	a1,v0
  411430:	0c105404 	jal	415010 <pthread_cond_wait@plt>
  411434:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:53 (discriminator 1)
    int fd;

    while (1) {
        // wait until the USB device needs opening
        adb_mutex_lock(&usb->lock);
        while (usb->fd != -1)
  411438:	8fc2001c 	lw	v0,28(s8)
  41143c:	8c430000 	lw	v1,0(v0)
  411440:	2402ffff 	li	v0,-1
  411444:	1462fff4 	bne	v1,v0,411418 <usb_open_thread+0x38>
  411448:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:55
            adb_cond_wait(&usb->notify, &usb->lock);
        adb_mutex_unlock(&usb->lock);
  41144c:	8fc2001c 	lw	v0,28(s8)
  411450:	24420038 	addiu	v0,v0,56
  411454:	00402021 	move	a0,v0
  411458:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  41145c:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:60

     
        do {
            /* XXX use inotify? */
            fd = unix_open("/dev/android_adb", O_RDWR);
  411460:	3c020041 	lui	v0,0x41
  411464:	244449c0 	addiu	a0,v0,18880
  411468:	24050002 	li	a1,2
  41146c:	0c104460 	jal	411180 <unix_open>
  411470:	00000000 	nop
  411474:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/usb_linux_client.c:63
      
	  
            if (fd < 0) {
  411478:	8fc20018 	lw	v0,24(s8)
  41147c:	04410007 	bgez	v0,41149c <usb_open_thread+0xbc>
  411480:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:65
                // to support older kernels
                fd = unix_open("/dev/android", O_RDWR);
  411484:	3c020041 	lui	v0,0x41
  411488:	244449d4 	addiu	a0,v0,18900
  41148c:	24050002 	li	a1,2
  411490:	0c104460 	jal	411180 <unix_open>
  411494:	00000000 	nop
  411498:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/usb_linux_client.c:67
            }
            if (fd < 0) {
  41149c:	8fc20018 	lw	v0,24(s8)
  4114a0:	04410004 	bgez	v0,4114b4 <usb_open_thread+0xd4>
  4114a4:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:68
                adb_sleep_ms(1000);
  4114a8:	240403e8 	li	a0,1000
  4114ac:	0c1044da 	jal	411368 <adb_sleep_ms>
  4114b0:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:70
            }
        } while (fd < 0);
  4114b4:	8fc20018 	lw	v0,24(s8)
  4114b8:	0440ffe9 	bltz	v0,411460 <usb_open_thread+0x80>
  4114bc:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:73


        close_on_exec(fd);
  4114c0:	8fc40018 	lw	a0,24(s8)
  4114c4:	0c104450 	jal	411140 <close_on_exec>
  4114c8:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:74
        usb->fd = fd;
  4114cc:	8fc2001c 	lw	v0,28(s8)
  4114d0:	8fc30018 	lw	v1,24(s8)
  4114d4:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/usb_linux_client.c:77


        register_usb_transport(usb, 0, 1);
  4114d8:	8fc4001c 	lw	a0,28(s8)
  4114dc:	00002821 	move	a1,zero
  4114e0:	24060001 	li	a2,1
  4114e4:	0c101eb2 	jal	407ac8 <register_usb_transport>
  4114e8:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:78
    }
  4114ec:	1000ffc3 	b	4113fc <usb_open_thread+0x1c>
  4114f0:	00000000 	nop

004114f4 <usb_write>:
usb_write():
/home_a/ppchen/adb/usb_linux_client.c:85
    // never gets here
    return 0;
}

int usb_write(usb_handle *h, const void *data, int len)
{
  4114f4:	27bdffd8 	addiu	sp,sp,-40
  4114f8:	afbf0024 	sw	ra,36(sp)
  4114fc:	afbe0020 	sw	s8,32(sp)
  411500:	03a0f021 	move	s8,sp
  411504:	afc40028 	sw	a0,40(s8)
  411508:	afc5002c 	sw	a1,44(s8)
  41150c:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/usb_linux_client.c:87
    int n;
    n = adb_write(h->fd, data, len);
  411510:	8fc20028 	lw	v0,40(s8)
  411514:	8c430000 	lw	v1,0(v0)
  411518:	8fc20030 	lw	v0,48(s8)
  41151c:	00602021 	move	a0,v1
  411520:	8fc5002c 	lw	a1,44(s8)
  411524:	00403021 	move	a2,v0
  411528:	0c1044a4 	jal	411290 <adb_write>
  41152c:	00000000 	nop
  411530:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/usb_linux_client.c:88
    if(n != len) {
  411534:	8fc30018 	lw	v1,24(s8)
  411538:	8fc20030 	lw	v0,48(s8)
  41153c:	10620004 	beq	v1,v0,411550 <usb_write+0x5c>
  411540:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:90

        return -1;
  411544:	2402ffff 	li	v0,-1
  411548:	10000002 	b	411554 <usb_write+0x60>
  41154c:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:93
    }

    return 0;
  411550:	00001021 	move	v0,zero
/home_a/ppchen/adb/usb_linux_client.c:94
}
  411554:	03c0e821 	move	sp,s8
  411558:	8fbf0024 	lw	ra,36(sp)
  41155c:	8fbe0020 	lw	s8,32(sp)
  411560:	27bd0028 	addiu	sp,sp,40
  411564:	03e00008 	jr	ra
  411568:	00000000 	nop

0041156c <usb_read>:
usb_read():
/home_a/ppchen/adb/usb_linux_client.c:97

int usb_read(usb_handle *h, void *data, int len)
{
  41156c:	27bdffd8 	addiu	sp,sp,-40
  411570:	afbf0024 	sw	ra,36(sp)
  411574:	afbe0020 	sw	s8,32(sp)
  411578:	03a0f021 	move	s8,sp
  41157c:	afc40028 	sw	a0,40(s8)
  411580:	afc5002c 	sw	a1,44(s8)
  411584:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/usb_linux_client.c:99
    int n;
    n = adb_read(h->fd, data, len);
  411588:	8fc20028 	lw	v0,40(s8)
  41158c:	8c430000 	lw	v1,0(v0)
  411590:	8fc20030 	lw	v0,48(s8)
  411594:	00602021 	move	a0,v1
  411598:	8fc5002c 	lw	a1,44(s8)
  41159c:	00403021 	move	a2,v0
  4115a0:	0c104492 	jal	411248 <adb_read>
  4115a4:	00000000 	nop
  4115a8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/usb_linux_client.c:100
    if(n != len) {
  4115ac:	8fc30018 	lw	v1,24(s8)
  4115b0:	8fc20030 	lw	v0,48(s8)
  4115b4:	10620004 	beq	v1,v0,4115c8 <usb_read+0x5c>
  4115b8:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:102

        return -1;
  4115bc:	2402ffff 	li	v0,-1
  4115c0:	10000002 	b	4115cc <usb_read+0x60>
  4115c4:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:105
    }

    return 0;
  4115c8:	00001021 	move	v0,zero
/home_a/ppchen/adb/usb_linux_client.c:106
}
  4115cc:	03c0e821 	move	sp,s8
  4115d0:	8fbf0024 	lw	ra,36(sp)
  4115d4:	8fbe0020 	lw	s8,32(sp)
  4115d8:	27bd0028 	addiu	sp,sp,40
  4115dc:	03e00008 	jr	ra
  4115e0:	00000000 	nop

004115e4 <usb_init>:
usb_init():
/home_a/ppchen/adb/usb_linux_client.c:109

void usb_init()
{
  4115e4:	27bdffd0 	addiu	sp,sp,-48
  4115e8:	afbf002c 	sw	ra,44(sp)
  4115ec:	afbe0028 	sw	s8,40(sp)
  4115f0:	03a0f021 	move	s8,sp
/home_a/ppchen/adb/usb_linux_client.c:115
    usb_handle *h;
    adb_thread_t tid;
    int fd;


    h = calloc(1, sizeof(usb_handle));
  4115f4:	24040001 	li	a0,1
  4115f8:	24050050 	li	a1,80
  4115fc:	0c1052b8 	jal	414ae0 <calloc@plt>
  411600:	00000000 	nop
  411604:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/usb_linux_client.c:116
    h->fd = -1;
  411608:	8fc20018 	lw	v0,24(s8)
  41160c:	2403ffff 	li	v1,-1
  411610:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/usb_linux_client.c:117
    adb_cond_init(&h->notify, 0);
  411614:	8fc20018 	lw	v0,24(s8)
  411618:	24420008 	addiu	v0,v0,8
  41161c:	00402021 	move	a0,v0
  411620:	00002821 	move	a1,zero
  411624:	0c105398 	jal	414e60 <pthread_cond_init@plt>
  411628:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:118
    adb_mutex_init(&h->lock, 0);
  41162c:	8fc20018 	lw	v0,24(s8)
  411630:	24420038 	addiu	v0,v0,56
  411634:	00402021 	move	a0,v0
  411638:	00002821 	move	a1,zero
  41163c:	0c1052e4 	jal	414b90 <pthread_mutex_init@plt>
  411640:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:125
    // Open the file /dev/android_adb_enable to trigger 
    // the enabling of the adb USB function in the kernel.
    // We never touch this file again - just leave it open
    // indefinitely so the kernel will know when we are running
    // and when we are not.
    fd = unix_open("/dev/android_adb_enable", O_RDWR);
  411644:	3c020041 	lui	v0,0x41
  411648:	244449e4 	addiu	a0,v0,18916
  41164c:	24050002 	li	a1,2
  411650:	0c104460 	jal	411180 <unix_open>
  411654:	00000000 	nop
  411658:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/usb_linux_client.c:126
    if (fd < 0) {
  41165c:	8fc2001c 	lw	v0,28(s8)
  411660:	04400004 	bltz	v0,411674 <usb_init+0x90>
  411664:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:129
     
    } else {
        close_on_exec(fd);
  411668:	8fc4001c 	lw	a0,28(s8)
  41166c:	0c104450 	jal	411140 <close_on_exec>
  411670:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:134
    }


  
    int  ret = adb_thread_create(&tid, usb_open_thread, h);
  411674:	27c20024 	addiu	v0,s8,36
  411678:	00402021 	move	a0,v0
  41167c:	3c020041 	lui	v0,0x41
  411680:	244513e0 	addiu	a1,v0,5088
  411684:	8fc60018 	lw	a2,24(s8)
  411688:	0c1044b6 	jal	4112d8 <adb_thread_create>
  41168c:	00000000 	nop
  411690:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/usb_linux_client.c:135
    if(ret){
  411694:	8fc20020 	lw	v0,32(s8)
  411698:	10400005 	beqz	v0,4116b0 <usb_init+0xcc>
  41169c:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:137

        fatal_errno("cannot create usb thread");
  4116a0:	3c020041 	lui	v0,0x41
  4116a4:	244449fc 	addiu	a0,v0,18940
  4116a8:	0c1006cb 	jal	401b2c <fatal_errno>
  4116ac:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:139
    }
}
  4116b0:	03c0e821 	move	sp,s8
  4116b4:	8fbf002c 	lw	ra,44(sp)
  4116b8:	8fbe0028 	lw	s8,40(sp)
  4116bc:	27bd0030 	addiu	sp,sp,48
  4116c0:	03e00008 	jr	ra
  4116c4:	00000000 	nop

004116c8 <usb_kick>:
usb_kick():
/home_a/ppchen/adb/usb_linux_client.c:142

void usb_kick(usb_handle *h)
{
  4116c8:	27bdffe0 	addiu	sp,sp,-32
  4116cc:	afbf001c 	sw	ra,28(sp)
  4116d0:	afbe0018 	sw	s8,24(sp)
  4116d4:	03a0f021 	move	s8,sp
  4116d8:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/usb_linux_client.c:144

    adb_mutex_lock(&h->lock);
  4116dc:	8fc20020 	lw	v0,32(s8)
  4116e0:	24420038 	addiu	v0,v0,56
  4116e4:	00402021 	move	a0,v0
  4116e8:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  4116ec:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:145
    adb_close(h->fd);
  4116f0:	8fc20020 	lw	v0,32(s8)
  4116f4:	8c420000 	lw	v0,0(v0)
  4116f8:	00402021 	move	a0,v0
  4116fc:	0c104484 	jal	411210 <adb_close>
  411700:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:146
    h->fd = -1;
  411704:	8fc20020 	lw	v0,32(s8)
  411708:	2403ffff 	li	v1,-1
  41170c:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/usb_linux_client.c:149

    // notify usb_open_thread that we are disconnected
    adb_cond_signal(&h->notify);
  411710:	8fc20020 	lw	v0,32(s8)
  411714:	24420008 	addiu	v0,v0,8
  411718:	00402021 	move	a0,v0
  41171c:	0c105374 	jal	414dd0 <pthread_cond_signal@plt>
  411720:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:150
    adb_mutex_unlock(&h->lock);
  411724:	8fc20020 	lw	v0,32(s8)
  411728:	24420038 	addiu	v0,v0,56
  41172c:	00402021 	move	a0,v0
  411730:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  411734:	00000000 	nop
/home_a/ppchen/adb/usb_linux_client.c:151
}
  411738:	03c0e821 	move	sp,s8
  41173c:	8fbf001c 	lw	ra,28(sp)
  411740:	8fbe0018 	lw	s8,24(sp)
  411744:	27bd0020 	addiu	sp,sp,32
  411748:	03e00008 	jr	ra
  41174c:	00000000 	nop

00411750 <usb_close>:
usb_close():
/home_a/ppchen/adb/usb_linux_client.c:154

int usb_close(usb_handle *h)
{
  411750:	27bdfff8 	addiu	sp,sp,-8
  411754:	afbe0004 	sw	s8,4(sp)
  411758:	03a0f021 	move	s8,sp
  41175c:	afc40008 	sw	a0,8(s8)
/home_a/ppchen/adb/usb_linux_client.c:156
    // nothing to do here
    return 0;
  411760:	00001021 	move	v0,zero
/home_a/ppchen/adb/usb_linux_client.c:157
}
  411764:	03c0e821 	move	sp,s8
  411768:	8fbe0004 	lw	s8,4(sp)
  41176c:	27bd0008 	addiu	sp,sp,8
  411770:	03e00008 	jr	ra
  411774:	00000000 	nop
	...

00411780 <unix_open>:
unix_open():
/home_a/ppchen/adb/sysdeps.h:310
{
    fcntl( fd, F_SETFD, FD_CLOEXEC );
}

static __inline__ int  unix_open(const char*  path, int options,...)
{
  411780:	27bdffd8 	addiu	sp,sp,-40
  411784:	afbf0024 	sw	ra,36(sp)
  411788:	afbe0020 	sw	s8,32(sp)
  41178c:	03a0f021 	move	s8,sp
  411790:	afc40028 	sw	a0,40(s8)
  411794:	afc60030 	sw	a2,48(s8)
  411798:	afc70034 	sw	a3,52(s8)
  41179c:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/sysdeps.h:311
    if ((options & O_CREAT) == 0)
  4117a0:	8fc2002c 	lw	v0,44(s8)
  4117a4:	30420100 	andi	v0,v0,0x100
  4117a8:	14400007 	bnez	v0,4117c8 <unix_open+0x48>
  4117ac:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:313
    {
        return  open(path, options);
  4117b0:	8fc40028 	lw	a0,40(s8)
  4117b4:	8fc5002c 	lw	a1,44(s8)
  4117b8:	0c1052c4 	jal	414b10 <open@plt>
  4117bc:	00000000 	nop
  4117c0:	1000000d 	b	4117f8 <unix_open+0x78>
  4117c4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:319
    }
    else
    {
        int      mode;
        va_list  args;
        va_start( args, options );
  4117c8:	27c20030 	addiu	v0,s8,48
  4117cc:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/sysdeps.h:320
        mode = va_arg( args, int );
  4117d0:	8fc2001c 	lw	v0,28(s8)
  4117d4:	24430004 	addiu	v1,v0,4
  4117d8:	afc3001c 	sw	v1,28(s8)
  4117dc:	8c420000 	lw	v0,0(v0)
  4117e0:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/sysdeps.h:322
        va_end( args );
        return open(path, options, mode);
  4117e4:	8fc40028 	lw	a0,40(s8)
  4117e8:	8fc5002c 	lw	a1,44(s8)
  4117ec:	8fc60018 	lw	a2,24(s8)
  4117f0:	0c1052c4 	jal	414b10 <open@plt>
  4117f4:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:324
    }
}
  4117f8:	03c0e821 	move	sp,s8
  4117fc:	8fbf0024 	lw	ra,36(sp)
  411800:	8fbe0020 	lw	s8,32(sp)
  411804:	27bd0028 	addiu	sp,sp,40
  411808:	03e00008 	jr	ra
  41180c:	00000000 	nop

00411810 <adb_close>:
adb_close():
/home_a/ppchen/adb/sysdeps.h:351
}
#undef   shutdown
#define  shutdown   ____xxx_shutdown

static __inline__ int  adb_close(int fd)
{
  411810:	27bdffe0 	addiu	sp,sp,-32
  411814:	afbf001c 	sw	ra,28(sp)
  411818:	afbe0018 	sw	s8,24(sp)
  41181c:	03a0f021 	move	s8,sp
  411820:	afc40020 	sw	a0,32(s8)
/home_a/ppchen/adb/sysdeps.h:352
    return close(fd);
  411824:	8fc40020 	lw	a0,32(s8)
  411828:	0c105378 	jal	414de0 <close@plt>
  41182c:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:353
}
  411830:	03c0e821 	move	sp,s8
  411834:	8fbf001c 	lw	ra,28(sp)
  411838:	8fbe0018 	lw	s8,24(sp)
  41183c:	27bd0020 	addiu	sp,sp,32
  411840:	03e00008 	jr	ra
  411844:	00000000 	nop

00411848 <adb_read>:
adb_read():
/home_a/ppchen/adb/sysdeps.h:359
#undef   close
#define  close   ____xxx_close


static __inline__  int  adb_read(int  fd, void*  buf, size_t  len)
{
  411848:	27bdffe0 	addiu	sp,sp,-32
  41184c:	afbf001c 	sw	ra,28(sp)
  411850:	afbe0018 	sw	s8,24(sp)
  411854:	03a0f021 	move	s8,sp
  411858:	afc40020 	sw	a0,32(s8)
  41185c:	afc50024 	sw	a1,36(s8)
  411860:	afc60028 	sw	a2,40(s8)
/home_a/ppchen/adb/sysdeps.h:360
    return read(fd, buf, len);
  411864:	8fc40020 	lw	a0,32(s8)
  411868:	8fc50024 	lw	a1,36(s8)
  41186c:	8fc60028 	lw	a2,40(s8)
  411870:	0c105340 	jal	414d00 <read@plt>
  411874:	00000000 	nop
/home_a/ppchen/adb/sysdeps.h:361
}
  411878:	03c0e821 	move	sp,s8
  41187c:	8fbf001c 	lw	ra,28(sp)
  411880:	8fbe0018 	lw	s8,24(sp)
  411884:	27bd0020 	addiu	sp,sp,32
  411888:	03e00008 	jr	ra
  41188c:	00000000 	nop

00411890 <log_service>:
log_service():
/home_a/ppchen/adb/log_service.c:34
#define LOG_FILE_DIR    "/dev/log/"

void write_log_entry(int fd, struct logger_entry *buf);

void log_service(int fd, void *cookie)
{
  411890:	27bdebc8 	addiu	sp,sp,-5176
  411894:	afbf1434 	sw	ra,5172(sp)
  411898:	afbe1430 	sw	s8,5168(sp)
  41189c:	03a0f021 	move	s8,sp
  4118a0:	afc41438 	sw	a0,5176(s8)
  4118a4:	afc5143c 	sw	a1,5180(s8)
/home_a/ppchen/adb/log_service.c:36
    /* get the name of the log filepath to read */
    char * log_filepath = cookie;
  4118a8:	8fc2143c 	lw	v0,5180(s8)
  4118ac:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/log_service.c:39

    /* open the log file. */
    int logfd = unix_open(log_filepath, O_RDONLY);
  4118b0:	8fc40018 	lw	a0,24(s8)
  4118b4:	00002821 	move	a1,zero
  4118b8:	0c1045e0 	jal	411780 <unix_open>
  4118bc:	00000000 	nop
  4118c0:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/log_service.c:40
    if (logfd < 0) {
  4118c4:	8fc2001c 	lw	v0,28(s8)
  4118c8:	0440002b 	bltz	v0,411978 <log_service+0xe8>
  4118cc:	00000000 	nop
/home_a/ppchen/adb/log_service.c:46
        goto done;
    }

    // temp buffer to read the entries
    unsigned char buf[LOGGER_ENTRY_MAX_LEN + 1] __attribute__((aligned(4)));
    struct logger_entry *entry = (struct logger_entry *) buf;
  4118d0:	27c20028 	addiu	v0,s8,40
  4118d4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/log_service.c:51

    while (1) {
        int ret;

        ret = unix_read(logfd, entry, LOGGER_ENTRY_MAX_LEN);
  4118d8:	8fc4001c 	lw	a0,28(s8)
  4118dc:	8fc50020 	lw	a1,32(s8)
  4118e0:	24061400 	li	a2,5120
  4118e4:	0c104612 	jal	411848 <adb_read>
  4118e8:	00000000 	nop
  4118ec:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/log_service.c:52
        if (ret < 0) {
  4118f0:	8fc20024 	lw	v0,36(s8)
  4118f4:	0441000f 	bgez	v0,411934 <log_service+0xa4>
  4118f8:	00000000 	nop
/home_a/ppchen/adb/log_service.c:53
            if (errno == EINTR || errno == EAGAIN)
  4118fc:	0c1052c0 	jal	414b00 <__errno_location@plt>
  411900:	00000000 	nop
  411904:	8c430000 	lw	v1,0(v0)
  411908:	24020004 	li	v0,4
  41190c:	10620017 	beq	v1,v0,41196c <log_service+0xdc>
  411910:	00000000 	nop
/home_a/ppchen/adb/log_service.c:53 (discriminator 1)
  411914:	0c1052c0 	jal	414b00 <__errno_location@plt>
  411918:	00000000 	nop
  41191c:	8c430000 	lw	v1,0(v0)
  411920:	2402000b 	li	v0,11
  411924:	14620017 	bne	v1,v0,411984 <log_service+0xf4>
  411928:	00000000 	nop
/home_a/ppchen/adb/log_service.c:54
                continue;
  41192c:	1000000f 	b	41196c <log_service+0xdc>
  411930:	00000000 	nop
/home_a/ppchen/adb/log_service.c:58
            // perror("logcat read");
            goto done;
        }
        else if (!ret) {
  411934:	8fc20024 	lw	v0,36(s8)
  411938:	10400015 	beqz	v0,411990 <log_service+0x100>
  41193c:	00000000 	nop
/home_a/ppchen/adb/log_service.c:65
            goto done;
        }

        /* NOTE: driver guarantees we read exactly one full entry */

        entry->msg[entry->len] = '\0';
  411940:	8fc20020 	lw	v0,32(s8)
  411944:	94420000 	lhu	v0,0(v0)
  411948:	8fc30020 	lw	v1,32(s8)
  41194c:	00621021 	addu	v0,v1,v0
  411950:	a0400014 	sb	zero,20(v0)
/home_a/ppchen/adb/log_service.c:67

        write_log_entry(fd, entry);
  411954:	8fc41438 	lw	a0,5176(s8)
  411958:	8fc50020 	lw	a1,32(s8)
  41195c:	0c104697 	jal	411a5c <write_log_entry>
  411960:	00000000 	nop
/home_a/ppchen/adb/log_service.c:68
    }
  411964:	1000ffdc 	b	4118d8 <log_service+0x48>
  411968:	00000000 	nop
/home_a/ppchen/adb/log_service.c:54
        int ret;

        ret = unix_read(logfd, entry, LOGGER_ENTRY_MAX_LEN);
        if (ret < 0) {
            if (errno == EINTR || errno == EAGAIN)
                continue;
  41196c:	00000000 	nop
/home_a/ppchen/adb/log_service.c:68
        /* NOTE: driver guarantees we read exactly one full entry */

        entry->msg[entry->len] = '\0';

        write_log_entry(fd, entry);
    }
  411970:	1000ffd9 	b	4118d8 <log_service+0x48>
  411974:	00000000 	nop
/home_a/ppchen/adb/log_service.c:41
    char * log_filepath = cookie;

    /* open the log file. */
    int logfd = unix_open(log_filepath, O_RDONLY);
    if (logfd < 0) {
        goto done;
  411978:	00000000 	nop
  41197c:	10000005 	b	411994 <log_service+0x104>
  411980:	00000000 	nop
/home_a/ppchen/adb/log_service.c:56
        ret = unix_read(logfd, entry, LOGGER_ENTRY_MAX_LEN);
        if (ret < 0) {
            if (errno == EINTR || errno == EAGAIN)
                continue;
            // perror("logcat read");
            goto done;
  411984:	00000000 	nop
  411988:	10000002 	b	411994 <log_service+0x104>
  41198c:	00000000 	nop
/home_a/ppchen/adb/log_service.c:60
        }
        else if (!ret) {
            // fprintf(stderr, "read: Unexpected EOF!\n");
            goto done;
  411990:	00000000 	nop
/home_a/ppchen/adb/log_service.c:71

        write_log_entry(fd, entry);
    }

done:
    unix_close(fd);
  411994:	8fc41438 	lw	a0,5176(s8)
  411998:	0c104604 	jal	411810 <adb_close>
  41199c:	00000000 	nop
/home_a/ppchen/adb/log_service.c:72
    free(log_filepath);
  4119a0:	8fc40018 	lw	a0,24(s8)
  4119a4:	0c1053e4 	jal	414f90 <free@plt>
  4119a8:	00000000 	nop
/home_a/ppchen/adb/log_service.c:73
}
  4119ac:	03c0e821 	move	sp,s8
  4119b0:	8fbf1434 	lw	ra,5172(sp)
  4119b4:	8fbe1430 	lw	s8,5168(sp)
  4119b8:	27bd1438 	addiu	sp,sp,5176
  4119bc:	03e00008 	jr	ra
  4119c0:	00000000 	nop

004119c4 <get_log_file_path>:
get_log_file_path():
/home_a/ppchen/adb/log_service.c:76

/* returns the full path to the log file in a newly allocated string */
char * get_log_file_path(const char * log_name) {
  4119c4:	27bdffd8 	addiu	sp,sp,-40
  4119c8:	afbf0024 	sw	ra,36(sp)
  4119cc:	afbe0020 	sw	s8,32(sp)
  4119d0:	03a0f021 	move	s8,sp
  4119d4:	afc40028 	sw	a0,40(s8)
/home_a/ppchen/adb/log_service.c:77
    char *log_device = malloc(strlen(LOG_FILE_DIR) + strlen(log_name) + 1);
  4119d8:	8fc40028 	lw	a0,40(s8)
  4119dc:	0c10531c 	jal	414c70 <strlen@plt>
  4119e0:	00000000 	nop
  4119e4:	2442000a 	addiu	v0,v0,10
  4119e8:	00402021 	move	a0,v0
  4119ec:	0c105300 	jal	414c00 <malloc@plt>
  4119f0:	00000000 	nop
  4119f4:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/log_service.c:79

    strcpy(log_device, LOG_FILE_DIR);
  4119f8:	8fc20018 	lw	v0,24(s8)
  4119fc:	3c030041 	lui	v1,0x41
  411a00:	8c654a20 	lw	a1,18976(v1)
  411a04:	24644a20 	addiu	a0,v1,18976
  411a08:	8c840004 	lw	a0,4(a0)
  411a0c:	a8450003 	swl	a1,3(v0)
  411a10:	b8450000 	swr	a1,0(v0)
  411a14:	a8440007 	swl	a0,7(v0)
  411a18:	b8440004 	swr	a0,4(v0)
  411a1c:	24634a20 	addiu	v1,v1,18976
  411a20:	90640008 	lbu	a0,8(v1)
  411a24:	a0440008 	sb	a0,8(v0)
  411a28:	90630009 	lbu	v1,9(v1)
  411a2c:	a0430009 	sb	v1,9(v0)
/home_a/ppchen/adb/log_service.c:80
    strcat(log_device, log_name);
  411a30:	8fc40018 	lw	a0,24(s8)
  411a34:	8fc50028 	lw	a1,40(s8)
  411a38:	0c1052f0 	jal	414bc0 <strcat@plt>
  411a3c:	00000000 	nop
/home_a/ppchen/adb/log_service.c:82

    return log_device;
  411a40:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/log_service.c:83
}
  411a44:	03c0e821 	move	sp,s8
  411a48:	8fbf0024 	lw	ra,36(sp)
  411a4c:	8fbe0020 	lw	s8,32(sp)
  411a50:	27bd0028 	addiu	sp,sp,40
  411a54:	03e00008 	jr	ra
  411a58:	00000000 	nop

00411a5c <write_log_entry>:
write_log_entry():
/home_a/ppchen/adb/log_service.c:88


/* prints one log entry into the file descriptor fd */
void write_log_entry(int fd, struct logger_entry *buf)
{
  411a5c:	27bdffd8 	addiu	sp,sp,-40
  411a60:	afbf0024 	sw	ra,36(sp)
  411a64:	afbe0020 	sw	s8,32(sp)
  411a68:	03a0f021 	move	s8,sp
  411a6c:	afc40028 	sw	a0,40(s8)
  411a70:	afc5002c 	sw	a1,44(s8)
/home_a/ppchen/adb/log_service.c:89
    size_t size = sizeof(struct logger_entry) + buf->len;
  411a74:	8fc2002c 	lw	v0,44(s8)
  411a78:	94420000 	lhu	v0,0(v0)
  411a7c:	24420014 	addiu	v0,v0,20
  411a80:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/log_service.c:91

    writex(fd, buf, size);
  411a84:	8fc40028 	lw	a0,40(s8)
  411a88:	8fc5002c 	lw	a1,44(s8)
  411a8c:	8fc60018 	lw	a2,24(s8)
  411a90:	0c101f4e 	jal	407d38 <writex>
  411a94:	00000000 	nop
/home_a/ppchen/adb/log_service.c:92
}
  411a98:	03c0e821 	move	sp,s8
  411a9c:	8fbf0024 	lw	ra,36(sp)
  411aa0:	8fbe0020 	lw	s8,32(sp)
  411aa4:	27bd0028 	addiu	sp,sp,40
  411aa8:	03e00008 	jr	ra
  411aac:	00000000 	nop

00411ab0 <property_get>:
property_get():
/home_a/ppchen/adb/properties.c:261
#include <pthread.h>

static pthread_mutex_t  env_lock = PTHREAD_MUTEX_INITIALIZER;

int property_get(const char *key, char *value, const char *default_value)
{
  411ab0:	27bdffb0 	addiu	sp,sp,-80
  411ab4:	afbf004c 	sw	ra,76(sp)
  411ab8:	afbe0048 	sw	s8,72(sp)
  411abc:	03a0f021 	move	s8,sp
  411ac0:	afc40050 	sw	a0,80(s8)
  411ac4:	afc50054 	sw	a1,84(s8)
  411ac8:	afc60058 	sw	a2,88(s8)
/home_a/ppchen/adb/properties.c:266
    char ename[PROPERTY_KEY_MAX + 6];
    char *p;
    int len;
    
    len = strlen(key);
  411acc:	8fc40050 	lw	a0,80(s8)
  411ad0:	0c10531c 	jal	414c70 <strlen@plt>
  411ad4:	00000000 	nop
  411ad8:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/properties.c:267
    if(len >= PROPERTY_KEY_MAX) return -1;
  411adc:	8fc2001c 	lw	v0,28(s8)
  411ae0:	28420020 	slti	v0,v0,32
  411ae4:	14400004 	bnez	v0,411af8 <property_get+0x48>
  411ae8:	00000000 	nop
/home_a/ppchen/adb/properties.c:267 (discriminator 1)
  411aec:	2402ffff 	li	v0,-1
  411af0:	1000004c 	b	411c24 <property_get+0x174>
  411af4:	00000000 	nop
/home_a/ppchen/adb/properties.c:268
    memcpy(ename, "PROP_", 5);
  411af8:	27c20020 	addiu	v0,s8,32
  411afc:	00402021 	move	a0,v0
  411b00:	3c020041 	lui	v0,0x41
  411b04:	24454a30 	addiu	a1,v0,18992
  411b08:	24060005 	li	a2,5
  411b0c:	0c1052d8 	jal	414b60 <memcpy@plt>
  411b10:	00000000 	nop
/home_a/ppchen/adb/properties.c:269
    memcpy(ename + 5, key, len + 1);
  411b14:	8fc2001c 	lw	v0,28(s8)
  411b18:	24420001 	addiu	v0,v0,1
  411b1c:	27c30020 	addiu	v1,s8,32
  411b20:	24630005 	addiu	v1,v1,5
  411b24:	00602021 	move	a0,v1
  411b28:	8fc50050 	lw	a1,80(s8)
  411b2c:	00403021 	move	a2,v0
  411b30:	0c1052d8 	jal	414b60 <memcpy@plt>
  411b34:	00000000 	nop
/home_a/ppchen/adb/properties.c:271
    
    pthread_mutex_lock(&env_lock);
  411b38:	3c020042 	lui	v0,0x42
  411b3c:	24445ab0 	addiu	a0,v0,23216
  411b40:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  411b44:	00000000 	nop
/home_a/ppchen/adb/properties.c:273

    p = getenv(ename);
  411b48:	27c20020 	addiu	v0,s8,32
  411b4c:	00402021 	move	a0,v0
  411b50:	0c1052cc 	jal	414b30 <getenv@plt>
  411b54:	00000000 	nop
  411b58:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/properties.c:274
    if(p == 0) p = "";
  411b5c:	8fc20018 	lw	v0,24(s8)
  411b60:	14400004 	bnez	v0,411b74 <property_get+0xc4>
  411b64:	00000000 	nop
/home_a/ppchen/adb/properties.c:274 (discriminator 1)
  411b68:	3c020041 	lui	v0,0x41
  411b6c:	24424a38 	addiu	v0,v0,19000
  411b70:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/properties.c:275
    len = strlen(p);
  411b74:	8fc40018 	lw	a0,24(s8)
  411b78:	0c10531c 	jal	414c70 <strlen@plt>
  411b7c:	00000000 	nop
  411b80:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/properties.c:276
    if(len >= PROPERTY_VALUE_MAX) {
  411b84:	8fc2001c 	lw	v0,28(s8)
  411b88:	2842005c 	slti	v0,v0,92
  411b8c:	14400003 	bnez	v0,411b9c <property_get+0xec>
  411b90:	00000000 	nop
/home_a/ppchen/adb/properties.c:277
        len = PROPERTY_VALUE_MAX - 1;
  411b94:	2402005b 	li	v0,91
  411b98:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/properties.c:280
    }
    
    if((len == 0) && default_value) {
  411b9c:	8fc2001c 	lw	v0,28(s8)
  411ba0:	14400011 	bnez	v0,411be8 <property_get+0x138>
  411ba4:	00000000 	nop
/home_a/ppchen/adb/properties.c:280 (discriminator 1)
  411ba8:	8fc20058 	lw	v0,88(s8)
  411bac:	1040000e 	beqz	v0,411be8 <property_get+0x138>
  411bb0:	00000000 	nop
/home_a/ppchen/adb/properties.c:281
        len = strlen(default_value);
  411bb4:	8fc40058 	lw	a0,88(s8)
  411bb8:	0c10531c 	jal	414c70 <strlen@plt>
  411bbc:	00000000 	nop
  411bc0:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/properties.c:282
        memcpy(value, default_value, len + 1);
  411bc4:	8fc2001c 	lw	v0,28(s8)
  411bc8:	24420001 	addiu	v0,v0,1
  411bcc:	8fc40054 	lw	a0,84(s8)
  411bd0:	8fc50058 	lw	a1,88(s8)
  411bd4:	00403021 	move	a2,v0
  411bd8:	0c1052d8 	jal	414b60 <memcpy@plt>
  411bdc:	00000000 	nop
  411be0:	1000000b 	b	411c10 <property_get+0x160>
  411be4:	00000000 	nop
/home_a/ppchen/adb/properties.c:284
    } else {
        memcpy(value, p, len);
  411be8:	8fc2001c 	lw	v0,28(s8)
  411bec:	8fc40054 	lw	a0,84(s8)
  411bf0:	8fc50018 	lw	a1,24(s8)
  411bf4:	00403021 	move	a2,v0
  411bf8:	0c1052d8 	jal	414b60 <memcpy@plt>
  411bfc:	00000000 	nop
/home_a/ppchen/adb/properties.c:285
        value[len] = 0;
  411c00:	8fc2001c 	lw	v0,28(s8)
  411c04:	8fc30054 	lw	v1,84(s8)
  411c08:	00621021 	addu	v0,v1,v0
  411c0c:	a0400000 	sb	zero,0(v0)
/home_a/ppchen/adb/properties.c:288
    }

    pthread_mutex_unlock(&env_lock);
  411c10:	3c020042 	lui	v0,0x42
  411c14:	24445ab0 	addiu	a0,v0,23216
  411c18:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  411c1c:	00000000 	nop
/home_a/ppchen/adb/properties.c:290
    
    return len;
  411c20:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/properties.c:291
}
  411c24:	03c0e821 	move	sp,s8
  411c28:	8fbf004c 	lw	ra,76(sp)
  411c2c:	8fbe0048 	lw	s8,72(sp)
  411c30:	27bd0050 	addiu	sp,sp,80
  411c34:	03e00008 	jr	ra
  411c38:	00000000 	nop

00411c3c <property_set>:
property_set():
/home_a/ppchen/adb/properties.c:295


int property_set(const char *key, const char *value)
{
  411c3c:	27bdffb0 	addiu	sp,sp,-80
  411c40:	afbf004c 	sw	ra,76(sp)
  411c44:	afbe0048 	sw	s8,72(sp)
  411c48:	03a0f021 	move	s8,sp
  411c4c:	afc40050 	sw	a0,80(s8)
  411c50:	afc50054 	sw	a1,84(s8)
/home_a/ppchen/adb/properties.c:301
    char ename[PROPERTY_KEY_MAX + 6];
    char *p;
    int len;
    int r;

    if(strlen(value) >= PROPERTY_VALUE_MAX) return -1;
  411c54:	8fc40054 	lw	a0,84(s8)
  411c58:	0c10531c 	jal	414c70 <strlen@plt>
  411c5c:	00000000 	nop
  411c60:	2c42005c 	sltiu	v0,v0,92
  411c64:	14400004 	bnez	v0,411c78 <property_set+0x3c>
  411c68:	00000000 	nop
/home_a/ppchen/adb/properties.c:301 (discriminator 1)
  411c6c:	2402ffff 	li	v0,-1
  411c70:	1000002c 	b	411d24 <property_set+0xe8>
  411c74:	00000000 	nop
/home_a/ppchen/adb/properties.c:303
    
    len = strlen(key);
  411c78:	8fc40050 	lw	a0,80(s8)
  411c7c:	0c10531c 	jal	414c70 <strlen@plt>
  411c80:	00000000 	nop
  411c84:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/properties.c:304
    if(len >= PROPERTY_KEY_MAX) return -1;
  411c88:	8fc20018 	lw	v0,24(s8)
  411c8c:	28420020 	slti	v0,v0,32
  411c90:	14400004 	bnez	v0,411ca4 <property_set+0x68>
  411c94:	00000000 	nop
/home_a/ppchen/adb/properties.c:304 (discriminator 1)
  411c98:	2402ffff 	li	v0,-1
  411c9c:	10000021 	b	411d24 <property_set+0xe8>
  411ca0:	00000000 	nop
/home_a/ppchen/adb/properties.c:305
    memcpy(ename, "PROP_", 5);
  411ca4:	27c20020 	addiu	v0,s8,32
  411ca8:	00402021 	move	a0,v0
  411cac:	3c020041 	lui	v0,0x41
  411cb0:	24454a30 	addiu	a1,v0,18992
  411cb4:	24060005 	li	a2,5
  411cb8:	0c1052d8 	jal	414b60 <memcpy@plt>
  411cbc:	00000000 	nop
/home_a/ppchen/adb/properties.c:306
    memcpy(ename + 5, key, len + 1);
  411cc0:	8fc20018 	lw	v0,24(s8)
  411cc4:	24420001 	addiu	v0,v0,1
  411cc8:	27c30020 	addiu	v1,s8,32
  411ccc:	24630005 	addiu	v1,v1,5
  411cd0:	00602021 	move	a0,v1
  411cd4:	8fc50050 	lw	a1,80(s8)
  411cd8:	00403021 	move	a2,v0
  411cdc:	0c1052d8 	jal	414b60 <memcpy@plt>
  411ce0:	00000000 	nop
/home_a/ppchen/adb/properties.c:308

    pthread_mutex_lock(&env_lock);
  411ce4:	3c020042 	lui	v0,0x42
  411ce8:	24445ab0 	addiu	a0,v0,23216
  411cec:	0c105320 	jal	414c80 <pthread_mutex_lock@plt>
  411cf0:	00000000 	nop
/home_a/ppchen/adb/properties.c:317
        snprintf( temp, sizeof(temp), "%s=%s", ename, value);
        putenv(temp);
        r = 0;
    }
#else    
    r = setenv(ename, value, 1);
  411cf4:	27c20020 	addiu	v0,s8,32
  411cf8:	00402021 	move	a0,v0
  411cfc:	8fc50054 	lw	a1,84(s8)
  411d00:	24060001 	li	a2,1
  411d04:	0c1052f4 	jal	414bd0 <setenv@plt>
  411d08:	00000000 	nop
  411d0c:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/properties.c:319
#endif    
    pthread_mutex_unlock(&env_lock);
  411d10:	3c020042 	lui	v0,0x42
  411d14:	24445ab0 	addiu	a0,v0,23216
  411d18:	0c1053d4 	jal	414f50 <pthread_mutex_unlock@plt>
  411d1c:	00000000 	nop
/home_a/ppchen/adb/properties.c:321
    
    return r;
  411d20:	8fc2001c 	lw	v0,28(s8)
/home_a/ppchen/adb/properties.c:322
}
  411d24:	03c0e821 	move	sp,s8
  411d28:	8fbf004c 	lw	ra,76(sp)
  411d2c:	8fbe0048 	lw	s8,72(sp)
  411d30:	27bd0050 	addiu	sp,sp,80
  411d34:	03e00008 	jr	ra
  411d38:	00000000 	nop

00411d3c <property_list>:
property_list():
/home_a/ppchen/adb/properties.c:326

int property_list(void (*propfn)(const char *key, const char *value, void *cookie), 
                  void *cookie)
{
  411d3c:	27bdfff8 	addiu	sp,sp,-8
  411d40:	afbe0004 	sw	s8,4(sp)
  411d44:	03a0f021 	move	s8,sp
  411d48:	afc40008 	sw	a0,8(s8)
  411d4c:	afc5000c 	sw	a1,12(s8)
/home_a/ppchen/adb/properties.c:327
    return 0;
  411d50:	00001021 	move	v0,zero
/home_a/ppchen/adb/properties.c:328
}
  411d54:	03c0e821 	move	sp,s8
  411d58:	8fbe0004 	lw	s8,4(sp)
  411d5c:	27bd0008 	addiu	sp,sp,8
  411d60:	03e00008 	jr	ra
  411d64:	00000000 	nop
	...

00411d70 <socket_inaddr_any_server>:
socket_inaddr_any_server():
/home_a/ppchen/adb/socket_inaddr_any_server.c:37

#define LISTEN_BACKLOG 4

/* open listen() port on any interface */
int socket_inaddr_any_server(int port, int type)
{
  411d70:	27bdffb8 	addiu	sp,sp,-72
  411d74:	afbf0044 	sw	ra,68(sp)
  411d78:	afbe0040 	sw	s8,64(sp)
  411d7c:	03a0f021 	move	s8,sp
  411d80:	afc40048 	sw	a0,72(s8)
  411d84:	afc5004c 	sw	a1,76(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:42
    struct sockaddr_in addr;
    size_t alen;
    int s, n;

    memset(&addr, 0, sizeof(addr));
  411d88:	27c20028 	addiu	v0,s8,40
  411d8c:	00402021 	move	a0,v0
  411d90:	00002821 	move	a1,zero
  411d94:	24060010 	li	a2,16
  411d98:	0c1053ac 	jal	414eb0 <memset@plt>
  411d9c:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:43
    addr.sin_family = AF_INET;
  411da0:	24020002 	li	v0,2
  411da4:	a7c20028 	sh	v0,40(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:44
    addr.sin_port = htons(port);
  411da8:	8fc20048 	lw	v0,72(s8)
  411dac:	3042ffff 	andi	v0,v0,0xffff
  411db0:	00402021 	move	a0,v0
  411db4:	0c1052b0 	jal	414ac0 <htons@plt>
  411db8:	00000000 	nop
  411dbc:	a7c2002a 	sh	v0,42(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:45
    addr.sin_addr.s_addr = htonl(INADDR_ANY);
  411dc0:	00002021 	move	a0,zero
  411dc4:	0c10533c 	jal	414cf0 <htonl@plt>
  411dc8:	00000000 	nop
  411dcc:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:47

    s = socket(AF_INET, type, 0);
  411dd0:	24040002 	li	a0,2
  411dd4:	8fc5004c 	lw	a1,76(s8)
  411dd8:	00003021 	move	a2,zero
  411ddc:	0c1053c4 	jal	414f10 <socket@plt>
  411de0:	00000000 	nop
  411de4:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:48
    if(s < 0) return -1;
  411de8:	8fc20020 	lw	v0,32(s8)
  411dec:	04410004 	bgez	v0,411e00 <socket_inaddr_any_server+0x90>
  411df0:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:48 (discriminator 1)
  411df4:	2402ffff 	li	v0,-1
  411df8:	1000002d 	b	411eb0 <socket_inaddr_any_server+0x140>
  411dfc:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:50

    n = 1;
  411e00:	24020001 	li	v0,1
  411e04:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:51
    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &n, sizeof(n));
  411e08:	27c20038 	addiu	v0,s8,56
  411e0c:	24030004 	li	v1,4
  411e10:	afa30010 	sw	v1,16(sp)
  411e14:	8fc40020 	lw	a0,32(s8)
  411e18:	3405ffff 	li	a1,0xffff
  411e1c:	24060004 	li	a2,4
  411e20:	00403821 	move	a3,v0
  411e24:	0c10535c 	jal	414d70 <setsockopt@plt>
  411e28:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:53

    if(bind(s, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
  411e2c:	27c20028 	addiu	v0,s8,40
  411e30:	8fc40020 	lw	a0,32(s8)
  411e34:	00402821 	move	a1,v0
  411e38:	24060010 	li	a2,16
  411e3c:	0c1052a8 	jal	414aa0 <bind@plt>
  411e40:	00000000 	nop
  411e44:	04410007 	bgez	v0,411e64 <socket_inaddr_any_server+0xf4>
  411e48:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:54
        close(s);
  411e4c:	8fc40020 	lw	a0,32(s8)
  411e50:	0c105378 	jal	414de0 <close@plt>
  411e54:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:55
        return -1;
  411e58:	2402ffff 	li	v0,-1
  411e5c:	10000014 	b	411eb0 <socket_inaddr_any_server+0x140>
  411e60:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:58
    }

    if (type == SOCK_STREAM) {
  411e64:	8fc3004c 	lw	v1,76(s8)
  411e68:	24020002 	li	v0,2
  411e6c:	1462000f 	bne	v1,v0,411eac <socket_inaddr_any_server+0x13c>
  411e70:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:61
        int ret;

        ret = listen(s, LISTEN_BACKLOG);
  411e74:	8fc40020 	lw	a0,32(s8)
  411e78:	24050004 	li	a1,4
  411e7c:	0c1053fc 	jal	414ff0 <listen@plt>
  411e80:	00000000 	nop
  411e84:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:63

        if (ret < 0) {
  411e88:	8fc20024 	lw	v0,36(s8)
  411e8c:	04410007 	bgez	v0,411eac <socket_inaddr_any_server+0x13c>
  411e90:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:64
            close(s);
  411e94:	8fc40020 	lw	a0,32(s8)
  411e98:	0c105378 	jal	414de0 <close@plt>
  411e9c:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:65
            return -1; 
  411ea0:	2402ffff 	li	v0,-1
  411ea4:	10000002 	b	411eb0 <socket_inaddr_any_server+0x140>
  411ea8:	00000000 	nop
/home_a/ppchen/adb/socket_inaddr_any_server.c:69
        }
    }

    return s;
  411eac:	8fc20020 	lw	v0,32(s8)
/home_a/ppchen/adb/socket_inaddr_any_server.c:70
}
  411eb0:	03c0e821 	move	sp,s8
  411eb4:	8fbf0044 	lw	ra,68(sp)
  411eb8:	8fbe0040 	lw	s8,64(sp)
  411ebc:	27bd0048 	addiu	sp,sp,72
  411ec0:	03e00008 	jr	ra
  411ec4:	00000000 	nop
	...

00411ed0 <socket_make_sockaddr_un>:
socket_make_sockaddr_un():
/home_a/ppchen/adb/socket_local_client.c:47
#define LISTEN_BACKLOG 4

/* Documented in header file. */
int socket_make_sockaddr_un(const char *name, int namespaceId, 
        struct sockaddr_un *p_addr, socklen_t *alen)
{
  411ed0:	27bdffd8 	addiu	sp,sp,-40
  411ed4:	afbf0024 	sw	ra,36(sp)
  411ed8:	afbe0020 	sw	s8,32(sp)
  411edc:	03a0f021 	move	s8,sp
  411ee0:	afc40028 	sw	a0,40(s8)
  411ee4:	afc5002c 	sw	a1,44(s8)
  411ee8:	afc60030 	sw	a2,48(s8)
  411eec:	afc70034 	sw	a3,52(s8)
/home_a/ppchen/adb/socket_local_client.c:48
    memset (p_addr, 0, sizeof (*p_addr));
  411ef0:	8fc40030 	lw	a0,48(s8)
  411ef4:	00002821 	move	a1,zero
  411ef8:	2406006e 	li	a2,110
  411efc:	0c1053ac 	jal	414eb0 <memset@plt>
  411f00:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:51
    size_t namelen;

    switch (namespaceId) {
  411f04:	8fc2002c 	lw	v0,44(s8)
  411f08:	24030001 	li	v1,1
  411f0c:	10430022 	beq	v0,v1,411f98 <socket_make_sockaddr_un+0xc8>
  411f10:	00000000 	nop
  411f14:	24030002 	li	v1,2
  411f18:	10430041 	beq	v0,v1,412020 <socket_make_sockaddr_un+0x150>
  411f1c:	00000000 	nop
  411f20:	1440004f 	bnez	v0,412060 <socket_make_sockaddr_un+0x190>
  411f24:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:71
            p_addr->sun_path[0] = 0;
            memcpy(p_addr->sun_path + 1, name, namelen);
#else /*HAVE_LINUX_LOCAL_SOCKET_NAMESPACE*/
            /* this OS doesn't have the Linux abstract namespace */

            namelen = strlen(name) + strlen(FILESYSTEM_SOCKET_PREFIX);
  411f28:	8fc40028 	lw	a0,40(s8)
  411f2c:	0c10531c 	jal	414c70 <strlen@plt>
  411f30:	00000000 	nop
  411f34:	24420005 	addiu	v0,v0,5
  411f38:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:73
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
  411f3c:	8fc20018 	lw	v0,24(s8)
  411f40:	2c42006c 	sltiu	v0,v0,108
  411f44:	10400053 	beqz	v0,412094 <socket_make_sockaddr_un+0x1c4>
  411f48:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:78
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
            }

            strcpy(p_addr->sun_path, FILESYSTEM_SOCKET_PREFIX);
  411f4c:	8fc20030 	lw	v0,48(s8)
  411f50:	24420002 	addiu	v0,v0,2
  411f54:	3c030041 	lui	v1,0x41
  411f58:	8c644a40 	lw	a0,19008(v1)
  411f5c:	a8440003 	swl	a0,3(v0)
  411f60:	b8440000 	swr	a0,0(v0)
  411f64:	24634a40 	addiu	v1,v1,19008
  411f68:	90640004 	lbu	a0,4(v1)
  411f6c:	a0440004 	sb	a0,4(v0)
  411f70:	90630005 	lbu	v1,5(v1)
  411f74:	a0430005 	sb	v1,5(v0)
/home_a/ppchen/adb/socket_local_client.c:79
            strcat(p_addr->sun_path, name);
  411f78:	8fc20030 	lw	v0,48(s8)
  411f7c:	24420002 	addiu	v0,v0,2
  411f80:	00402021 	move	a0,v0
  411f84:	8fc50028 	lw	a1,40(s8)
  411f88:	0c1052f0 	jal	414bc0 <strcat@plt>
  411f8c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:81
#endif /*HAVE_LINUX_LOCAL_SOCKET_NAMESPACE*/
        break;
  411f90:	10000036 	b	41206c <socket_make_sockaddr_un+0x19c>
  411f94:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:84

        case ANDROID_SOCKET_NAMESPACE_RESERVED:
            namelen = strlen(name) + strlen(ANDROID_RESERVED_SOCKET_PREFIX);
  411f98:	8fc40028 	lw	a0,40(s8)
  411f9c:	0c10531c 	jal	414c70 <strlen@plt>
  411fa0:	00000000 	nop
  411fa4:	2442000c 	addiu	v0,v0,12
  411fa8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:86
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
  411fac:	8fc20018 	lw	v0,24(s8)
  411fb0:	2c42006c 	sltiu	v0,v0,108
  411fb4:	1040003a 	beqz	v0,4120a0 <socket_make_sockaddr_un+0x1d0>
  411fb8:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:91
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
            }

            strcpy(p_addr->sun_path, ANDROID_RESERVED_SOCKET_PREFIX);
  411fbc:	8fc20030 	lw	v0,48(s8)
  411fc0:	24420002 	addiu	v0,v0,2
  411fc4:	3c030041 	lui	v1,0x41
  411fc8:	8c664a48 	lw	a2,19016(v1)
  411fcc:	24644a48 	addiu	a0,v1,19016
  411fd0:	8c850004 	lw	a1,4(a0)
  411fd4:	24644a48 	addiu	a0,v1,19016
  411fd8:	8c840008 	lw	a0,8(a0)
  411fdc:	a8460003 	swl	a2,3(v0)
  411fe0:	b8460000 	swr	a2,0(v0)
  411fe4:	a8450007 	swl	a1,7(v0)
  411fe8:	b8450004 	swr	a1,4(v0)
  411fec:	a844000b 	swl	a0,11(v0)
  411ff0:	b8440008 	swr	a0,8(v0)
  411ff4:	24634a48 	addiu	v1,v1,19016
  411ff8:	9063000c 	lbu	v1,12(v1)
  411ffc:	a043000c 	sb	v1,12(v0)
/home_a/ppchen/adb/socket_local_client.c:92
            strcat(p_addr->sun_path, name);
  412000:	8fc20030 	lw	v0,48(s8)
  412004:	24420002 	addiu	v0,v0,2
  412008:	00402021 	move	a0,v0
  41200c:	8fc50028 	lw	a1,40(s8)
  412010:	0c1052f0 	jal	414bc0 <strcat@plt>
  412014:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:93
        break;
  412018:	10000014 	b	41206c <socket_make_sockaddr_un+0x19c>
  41201c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:96

        case ANDROID_SOCKET_NAMESPACE_FILESYSTEM:
            namelen = strlen(name);
  412020:	8fc40028 	lw	a0,40(s8)
  412024:	0c10531c 	jal	414c70 <strlen@plt>
  412028:	00000000 	nop
  41202c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:98
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
  412030:	8fc20018 	lw	v0,24(s8)
  412034:	2c42006c 	sltiu	v0,v0,108
  412038:	1040001c 	beqz	v0,4120ac <socket_make_sockaddr_un+0x1dc>
  41203c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:103
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
            }

            strcpy(p_addr->sun_path, name);
  412040:	8fc20030 	lw	v0,48(s8)
  412044:	24420002 	addiu	v0,v0,2
  412048:	00402021 	move	a0,v0
  41204c:	8fc50028 	lw	a1,40(s8)
  412050:	0c105418 	jal	415060 <strcpy@plt>
  412054:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:104
        break;
  412058:	10000004 	b	41206c <socket_make_sockaddr_un+0x19c>
  41205c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:107
        default:
            // invalid namespace id
            return -1;
  412060:	2402ffff 	li	v0,-1
  412064:	10000013 	b	4120b4 <socket_make_sockaddr_un+0x1e4>
  412068:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:110
    }

    p_addr->sun_family = AF_LOCAL;
  41206c:	8fc20030 	lw	v0,48(s8)
  412070:	24030001 	li	v1,1
  412074:	a4430000 	sh	v1,0(v0)
/home_a/ppchen/adb/socket_local_client.c:111
    *alen = namelen + offsetof(struct sockaddr_un, sun_path) + 1;
  412078:	8fc20018 	lw	v0,24(s8)
  41207c:	24430003 	addiu	v1,v0,3
  412080:	8fc20034 	lw	v0,52(s8)
  412084:	ac430000 	sw	v1,0(v0)
/home_a/ppchen/adb/socket_local_client.c:112
    return 0;
  412088:	00001021 	move	v0,zero
  41208c:	10000009 	b	4120b4 <socket_make_sockaddr_un+0x1e4>
  412090:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:75

            namelen = strlen(name) + strlen(FILESYSTEM_SOCKET_PREFIX);
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
  412094:	00000000 	nop
  412098:	10000005 	b	4120b0 <socket_make_sockaddr_un+0x1e0>
  41209c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:88
        case ANDROID_SOCKET_NAMESPACE_RESERVED:
            namelen = strlen(name) + strlen(ANDROID_RESERVED_SOCKET_PREFIX);
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
  4120a0:	00000000 	nop
  4120a4:	10000002 	b	4120b0 <socket_make_sockaddr_un+0x1e0>
  4120a8:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:100
        case ANDROID_SOCKET_NAMESPACE_FILESYSTEM:
            namelen = strlen(name);
            /* unix_path_max appears to be missing on linux */
            if (namelen > sizeof(*p_addr) 
                    - offsetof(struct sockaddr_un, sun_path) - 1) {
                goto error;
  4120ac:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:114

    p_addr->sun_family = AF_LOCAL;
    *alen = namelen + offsetof(struct sockaddr_un, sun_path) + 1;
    return 0;
error:
    return -1;
  4120b0:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/socket_local_client.c:115
}
  4120b4:	03c0e821 	move	sp,s8
  4120b8:	8fbf0024 	lw	ra,36(sp)
  4120bc:	8fbe0020 	lw	s8,32(sp)
  4120c0:	27bd0028 	addiu	sp,sp,40
  4120c4:	03e00008 	jr	ra
  4120c8:	00000000 	nop

004120cc <socket_local_client_connect>:
socket_local_client_connect():
/home_a/ppchen/adb/socket_local_client.c:126
 * 
 * Used by AndroidSocketImpl
 */
int socket_local_client_connect(int fd, const char *name, int namespaceId, 
        int type)
{
  4120cc:	27bdff68 	addiu	sp,sp,-152
  4120d0:	afbf0094 	sw	ra,148(sp)
  4120d4:	afbe0090 	sw	s8,144(sp)
  4120d8:	03a0f021 	move	s8,sp
  4120dc:	afc40098 	sw	a0,152(s8)
  4120e0:	afc5009c 	sw	a1,156(s8)
  4120e4:	afc600a0 	sw	a2,160(s8)
  4120e8:	afc700a4 	sw	a3,164(s8)
/home_a/ppchen/adb/socket_local_client.c:132
    struct sockaddr_un addr;
    socklen_t alen;
    size_t namelen;
    int err;

    err = socket_make_sockaddr_un(name, namespaceId, &addr, &alen);
  4120ec:	27c3001c 	addiu	v1,s8,28
  4120f0:	27c2008c 	addiu	v0,s8,140
  4120f4:	8fc4009c 	lw	a0,156(s8)
  4120f8:	8fc500a0 	lw	a1,160(s8)
  4120fc:	00603021 	move	a2,v1
  412100:	00403821 	move	a3,v0
  412104:	0c1047b4 	jal	411ed0 <socket_make_sockaddr_un>
  412108:	00000000 	nop
  41210c:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:134

    if (err < 0) {
  412110:	8fc20018 	lw	v0,24(s8)
  412114:	0440000e 	bltz	v0,412150 <socket_local_client_connect+0x84>
  412118:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:138
        goto error;
    }

    if(connect(fd, (struct sockaddr *) &addr, alen) < 0) {
  41211c:	27c2001c 	addiu	v0,s8,28
  412120:	00401821 	move	v1,v0
  412124:	8fc2008c 	lw	v0,140(s8)
  412128:	8fc40098 	lw	a0,152(s8)
  41212c:	00602821 	move	a1,v1
  412130:	00403021 	move	a2,v0
  412134:	0c1052dc 	jal	414b70 <connect@plt>
  412138:	00000000 	nop
  41213c:	04400007 	bltz	v0,41215c <socket_local_client_connect+0x90>
  412140:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:142
        goto error;
    }

    return fd;
  412144:	8fc20098 	lw	v0,152(s8)
  412148:	10000006 	b	412164 <socket_local_client_connect+0x98>
  41214c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:135
    int err;

    err = socket_make_sockaddr_un(name, namespaceId, &addr, &alen);

    if (err < 0) {
        goto error;
  412150:	00000000 	nop
  412154:	10000002 	b	412160 <socket_local_client_connect+0x94>
  412158:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:139
    }

    if(connect(fd, (struct sockaddr *) &addr, alen) < 0) {
        goto error;
  41215c:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:145
    }

    return fd;

error:
    return -1;
  412160:	2402ffff 	li	v0,-1
/home_a/ppchen/adb/socket_local_client.c:146
}
  412164:	03c0e821 	move	sp,s8
  412168:	8fbf0094 	lw	ra,148(sp)
  41216c:	8fbe0090 	lw	s8,144(sp)
  412170:	27bd0098 	addiu	sp,sp,152
  412174:	03e00008 	jr	ra
  412178:	00000000 	nop

0041217c <socket_local_client>:
socket_local_client():
/home_a/ppchen/adb/socket_local_client.c:153
/** 
 * connect to peer named "name"
 * returns fd or -1 on error
 */
int socket_local_client(const char *name, int namespaceId, int type)
{
  41217c:	27bdffd8 	addiu	sp,sp,-40
  412180:	afbf0024 	sw	ra,36(sp)
  412184:	afbe0020 	sw	s8,32(sp)
  412188:	03a0f021 	move	s8,sp
  41218c:	afc40028 	sw	a0,40(s8)
  412190:	afc5002c 	sw	a1,44(s8)
  412194:	afc60030 	sw	a2,48(s8)
/home_a/ppchen/adb/socket_local_client.c:156
    int s;

    s = socket(AF_LOCAL, type, 0);
  412198:	24040001 	li	a0,1
  41219c:	8fc50030 	lw	a1,48(s8)
  4121a0:	00003021 	move	a2,zero
  4121a4:	0c1053c4 	jal	414f10 <socket@plt>
  4121a8:	00000000 	nop
  4121ac:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:157
    if(s < 0) return -1;
  4121b0:	8fc20018 	lw	v0,24(s8)
  4121b4:	04410004 	bgez	v0,4121c8 <socket_local_client+0x4c>
  4121b8:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:157 (discriminator 1)
  4121bc:	2402ffff 	li	v0,-1
  4121c0:	10000010 	b	412204 <socket_local_client+0x88>
  4121c4:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:159

    if ( 0 > socket_local_client_connect(s, name, namespaceId, type)) {
  4121c8:	8fc40018 	lw	a0,24(s8)
  4121cc:	8fc50028 	lw	a1,40(s8)
  4121d0:	8fc6002c 	lw	a2,44(s8)
  4121d4:	8fc70030 	lw	a3,48(s8)
  4121d8:	0c104833 	jal	4120cc <socket_local_client_connect>
  4121dc:	00000000 	nop
  4121e0:	04410007 	bgez	v0,412200 <socket_local_client+0x84>
  4121e4:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:160
        close(s);
  4121e8:	8fc40018 	lw	a0,24(s8)
  4121ec:	0c105378 	jal	414de0 <close@plt>
  4121f0:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:161
        return -1;
  4121f4:	2402ffff 	li	v0,-1
  4121f8:	10000002 	b	412204 <socket_local_client+0x88>
  4121fc:	00000000 	nop
/home_a/ppchen/adb/socket_local_client.c:164
    }

    return s;
  412200:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/socket_local_client.c:165
}
  412204:	03c0e821 	move	sp,s8
  412208:	8fbf0024 	lw	ra,36(sp)
  41220c:	8fbe0020 	lw	s8,32(sp)
  412210:	27bd0028 	addiu	sp,sp,40
  412214:	03e00008 	jr	ra
  412218:	00000000 	nop
  41221c:	00000000 	nop

00412220 <socket_local_server_bind>:
socket_local_server_bind():
/home_a/ppchen/adb/socket_local_server.c:54
 * returns 's' on success, -1 on fail
 *
 * Does not call listen()
 */
int socket_local_server_bind(int s, const char *name, int namespaceId)
{
  412220:	27bdff58 	addiu	sp,sp,-168
  412224:	afbf00a4 	sw	ra,164(sp)
  412228:	afbe00a0 	sw	s8,160(sp)
  41222c:	03a0f021 	move	s8,sp
  412230:	afc400a8 	sw	a0,168(s8)
  412234:	afc500ac 	sw	a1,172(s8)
  412238:	afc600b0 	sw	a2,176(s8)
/home_a/ppchen/adb/socket_local_server.c:60
    struct sockaddr_un addr;
    socklen_t alen;
    int n;
    int err;

    err = socket_make_sockaddr_un(name, namespaceId, &addr, &alen);
  41223c:	27c30024 	addiu	v1,s8,36
  412240:	27c20094 	addiu	v0,s8,148
  412244:	8fc400ac 	lw	a0,172(s8)
  412248:	8fc500b0 	lw	a1,176(s8)
  41224c:	00603021 	move	a2,v1
  412250:	00403821 	move	a3,v0
  412254:	0c1047b4 	jal	411ed0 <socket_make_sockaddr_un>
  412258:	00000000 	nop
  41225c:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/socket_local_server.c:62

    if (err < 0) {
  412260:	8fc20020 	lw	v0,32(s8)
  412264:	04410004 	bgez	v0,412278 <socket_local_server_bind+0x58>
  412268:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:63
        return -1;
  41226c:	2402ffff 	li	v0,-1
  412270:	1000001f 	b	4122f0 <socket_local_server_bind+0xd0>
  412274:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:74
#else
    if (namespaceId == ANDROID_SOCKET_NAMESPACE_RESERVED
        || namespaceId == ANDROID_SOCKET_NAMESPACE_FILESYSTEM) {
#endif
        /*ignore ENOENT*/
        unlink(addr.sun_path);
  412278:	27c20024 	addiu	v0,s8,36
  41227c:	24420002 	addiu	v0,v0,2
  412280:	00402021 	move	a0,v0
  412284:	0c10539c 	jal	414e70 <unlink@plt>
  412288:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:77
    }

    n = 1;
  41228c:	24020001 	li	v0,1
  412290:	afc20098 	sw	v0,152(s8)
/home_a/ppchen/adb/socket_local_server.c:78
    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &n, sizeof(n));
  412294:	27c20098 	addiu	v0,s8,152
  412298:	24030004 	li	v1,4
  41229c:	afa30010 	sw	v1,16(sp)
  4122a0:	8fc400a8 	lw	a0,168(s8)
  4122a4:	3405ffff 	li	a1,0xffff
  4122a8:	24060004 	li	a2,4
  4122ac:	00403821 	move	a3,v0
  4122b0:	0c10535c 	jal	414d70 <setsockopt@plt>
  4122b4:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:80

    if(bind(s, (struct sockaddr *) &addr, alen) < 0) {
  4122b8:	27c20024 	addiu	v0,s8,36
  4122bc:	00401821 	move	v1,v0
  4122c0:	8fc20094 	lw	v0,148(s8)
  4122c4:	8fc400a8 	lw	a0,168(s8)
  4122c8:	00602821 	move	a1,v1
  4122cc:	00403021 	move	a2,v0
  4122d0:	0c1052a8 	jal	414aa0 <bind@plt>
  4122d4:	00000000 	nop
  4122d8:	04410004 	bgez	v0,4122ec <socket_local_server_bind+0xcc>
  4122dc:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:81
        return -1;
  4122e0:	2402ffff 	li	v0,-1
  4122e4:	10000002 	b	4122f0 <socket_local_server_bind+0xd0>
  4122e8:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:84
    }

    return s;
  4122ec:	8fc200a8 	lw	v0,168(s8)
/home_a/ppchen/adb/socket_local_server.c:86

}
  4122f0:	03c0e821 	move	sp,s8
  4122f4:	8fbf00a4 	lw	ra,164(sp)
  4122f8:	8fbe00a0 	lw	s8,160(sp)
  4122fc:	27bd00a8 	addiu	sp,sp,168
  412300:	03e00008 	jr	ra
  412304:	00000000 	nop

00412308 <socket_local_server>:
socket_local_server():
/home_a/ppchen/adb/socket_local_server.c:96
 *
 *  Returns fd on success, -1 on fail
 */

int socket_local_server(const char *name, int namespace, int type)
{
  412308:	27bdffd0 	addiu	sp,sp,-48
  41230c:	afbf002c 	sw	ra,44(sp)
  412310:	afbe0028 	sw	s8,40(sp)
  412314:	03a0f021 	move	s8,sp
  412318:	afc40030 	sw	a0,48(s8)
  41231c:	afc50034 	sw	a1,52(s8)
  412320:	afc60038 	sw	a2,56(s8)
/home_a/ppchen/adb/socket_local_server.c:100
    int err;
    int s;
    
    s = socket(AF_LOCAL, type, 0);
  412324:	24040001 	li	a0,1
  412328:	8fc50038 	lw	a1,56(s8)
  41232c:	00003021 	move	a2,zero
  412330:	0c1053c4 	jal	414f10 <socket@plt>
  412334:	00000000 	nop
  412338:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_local_server.c:101
    if (s < 0) return -1;
  41233c:	8fc20018 	lw	v0,24(s8)
  412340:	04410004 	bgez	v0,412354 <socket_local_server+0x4c>
  412344:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:101 (discriminator 1)
  412348:	2402ffff 	li	v0,-1
  41234c:	10000023 	b	4123dc <socket_local_server+0xd4>
  412350:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:103

    err = socket_local_server_bind(s, name, namespace);
  412354:	8fc40018 	lw	a0,24(s8)
  412358:	8fc50030 	lw	a1,48(s8)
  41235c:	8fc60034 	lw	a2,52(s8)
  412360:	0c104888 	jal	412220 <socket_local_server_bind>
  412364:	00000000 	nop
  412368:	afc2001c 	sw	v0,28(s8)
/home_a/ppchen/adb/socket_local_server.c:105

    if (err < 0) {
  41236c:	8fc2001c 	lw	v0,28(s8)
  412370:	04410007 	bgez	v0,412390 <socket_local_server+0x88>
  412374:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:106
        close(s);
  412378:	8fc40018 	lw	a0,24(s8)
  41237c:	0c105378 	jal	414de0 <close@plt>
  412380:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:107
        return -1;
  412384:	2402ffff 	li	v0,-1
  412388:	10000014 	b	4123dc <socket_local_server+0xd4>
  41238c:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:110
    }

    if (type == SOCK_STREAM) {
  412390:	8fc30038 	lw	v1,56(s8)
  412394:	24020002 	li	v0,2
  412398:	1462000f 	bne	v1,v0,4123d8 <socket_local_server+0xd0>
  41239c:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:113
        int ret;

        ret = listen(s, LISTEN_BACKLOG);
  4123a0:	8fc40018 	lw	a0,24(s8)
  4123a4:	24050004 	li	a1,4
  4123a8:	0c1053fc 	jal	414ff0 <listen@plt>
  4123ac:	00000000 	nop
  4123b0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/socket_local_server.c:115

        if (ret < 0) {
  4123b4:	8fc20020 	lw	v0,32(s8)
  4123b8:	04410007 	bgez	v0,4123d8 <socket_local_server+0xd0>
  4123bc:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:116
            close(s);
  4123c0:	8fc40018 	lw	a0,24(s8)
  4123c4:	0c105378 	jal	414de0 <close@plt>
  4123c8:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:117
            return -1;
  4123cc:	2402ffff 	li	v0,-1
  4123d0:	10000002 	b	4123dc <socket_local_server+0xd4>
  4123d4:	00000000 	nop
/home_a/ppchen/adb/socket_local_server.c:121
        }
    }

    return s;
  4123d8:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/socket_local_server.c:122
}
  4123dc:	03c0e821 	move	sp,s8
  4123e0:	8fbf002c 	lw	ra,44(sp)
  4123e4:	8fbe0028 	lw	s8,40(sp)
  4123e8:	27bd0030 	addiu	sp,sp,48
  4123ec:	03e00008 	jr	ra
  4123f0:	00000000 	nop
	...

00412400 <socket_loopback_server>:
socket_loopback_server():
/home_a/ppchen/adb/socket_loopback_server.c:37
#include <netinet/in.h>
#endif

/* open listen() port on loopback interface */
int socket_loopback_server(int port, int type)
{
  412400:	27bdffb8 	addiu	sp,sp,-72
  412404:	afbf0044 	sw	ra,68(sp)
  412408:	afbe0040 	sw	s8,64(sp)
  41240c:	03a0f021 	move	s8,sp
  412410:	afc40048 	sw	a0,72(s8)
  412414:	afc5004c 	sw	a1,76(s8)
/home_a/ppchen/adb/socket_loopback_server.c:42
    struct sockaddr_in addr;
    size_t alen;
    int s, n;

    memset(&addr, 0, sizeof(addr));
  412418:	27c20028 	addiu	v0,s8,40
  41241c:	00402021 	move	a0,v0
  412420:	00002821 	move	a1,zero
  412424:	24060010 	li	a2,16
  412428:	0c1053ac 	jal	414eb0 <memset@plt>
  41242c:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:43
    addr.sin_family = AF_INET;
  412430:	24020002 	li	v0,2
  412434:	a7c20028 	sh	v0,40(s8)
/home_a/ppchen/adb/socket_loopback_server.c:44
    addr.sin_port = htons(port);
  412438:	8fc20048 	lw	v0,72(s8)
  41243c:	3042ffff 	andi	v0,v0,0xffff
  412440:	00402021 	move	a0,v0
  412444:	0c1052b0 	jal	414ac0 <htons@plt>
  412448:	00000000 	nop
  41244c:	a7c2002a 	sh	v0,42(s8)
/home_a/ppchen/adb/socket_loopback_server.c:45
    addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
  412450:	3c027f00 	lui	v0,0x7f00
  412454:	34440001 	ori	a0,v0,0x1
  412458:	0c10533c 	jal	414cf0 <htonl@plt>
  41245c:	00000000 	nop
  412460:	afc2002c 	sw	v0,44(s8)
/home_a/ppchen/adb/socket_loopback_server.c:47

    s = socket(AF_INET, type, 0);
  412464:	24040002 	li	a0,2
  412468:	8fc5004c 	lw	a1,76(s8)
  41246c:	00003021 	move	a2,zero
  412470:	0c1053c4 	jal	414f10 <socket@plt>
  412474:	00000000 	nop
  412478:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/socket_loopback_server.c:48
    if(s < 0) return -1;
  41247c:	8fc20020 	lw	v0,32(s8)
  412480:	04410004 	bgez	v0,412494 <socket_loopback_server+0x94>
  412484:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:48 (discriminator 1)
  412488:	2402ffff 	li	v0,-1
  41248c:	1000002d 	b	412544 <socket_loopback_server+0x144>
  412490:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:50

    n = 1;
  412494:	24020001 	li	v0,1
  412498:	afc20038 	sw	v0,56(s8)
/home_a/ppchen/adb/socket_loopback_server.c:51
    setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &n, sizeof(n));
  41249c:	27c20038 	addiu	v0,s8,56
  4124a0:	24030004 	li	v1,4
  4124a4:	afa30010 	sw	v1,16(sp)
  4124a8:	8fc40020 	lw	a0,32(s8)
  4124ac:	3405ffff 	li	a1,0xffff
  4124b0:	24060004 	li	a2,4
  4124b4:	00403821 	move	a3,v0
  4124b8:	0c10535c 	jal	414d70 <setsockopt@plt>
  4124bc:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:53

    if(bind(s, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
  4124c0:	27c20028 	addiu	v0,s8,40
  4124c4:	8fc40020 	lw	a0,32(s8)
  4124c8:	00402821 	move	a1,v0
  4124cc:	24060010 	li	a2,16
  4124d0:	0c1052a8 	jal	414aa0 <bind@plt>
  4124d4:	00000000 	nop
  4124d8:	04410007 	bgez	v0,4124f8 <socket_loopback_server+0xf8>
  4124dc:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:54
        close(s);
  4124e0:	8fc40020 	lw	a0,32(s8)
  4124e4:	0c105378 	jal	414de0 <close@plt>
  4124e8:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:55
        return -1;
  4124ec:	2402ffff 	li	v0,-1
  4124f0:	10000014 	b	412544 <socket_loopback_server+0x144>
  4124f4:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:58
    }

    if (type == SOCK_STREAM) {
  4124f8:	8fc3004c 	lw	v1,76(s8)
  4124fc:	24020002 	li	v0,2
  412500:	1462000f 	bne	v1,v0,412540 <socket_loopback_server+0x140>
  412504:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:61
        int ret;

        ret = listen(s, LISTEN_BACKLOG);
  412508:	8fc40020 	lw	a0,32(s8)
  41250c:	24050004 	li	a1,4
  412510:	0c1053fc 	jal	414ff0 <listen@plt>
  412514:	00000000 	nop
  412518:	afc20024 	sw	v0,36(s8)
/home_a/ppchen/adb/socket_loopback_server.c:63

        if (ret < 0) {
  41251c:	8fc20024 	lw	v0,36(s8)
  412520:	04410007 	bgez	v0,412540 <socket_loopback_server+0x140>
  412524:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:64
            close(s);
  412528:	8fc40020 	lw	a0,32(s8)
  41252c:	0c105378 	jal	414de0 <close@plt>
  412530:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:65
            return -1; 
  412534:	2402ffff 	li	v0,-1
  412538:	10000002 	b	412544 <socket_loopback_server+0x144>
  41253c:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_server.c:69
        }
    }

    return s;
  412540:	8fc20020 	lw	v0,32(s8)
/home_a/ppchen/adb/socket_loopback_server.c:70
}
  412544:	03c0e821 	move	sp,s8
  412548:	8fbf0044 	lw	ra,68(sp)
  41254c:	8fbe0040 	lw	s8,64(sp)
  412550:	27bd0048 	addiu	sp,sp,72
  412554:	03e00008 	jr	ra
  412558:	00000000 	nop
  41255c:	00000000 	nop

00412560 <socket_loopback_client>:
socket_loopback_client():
/home_a/ppchen/adb/socket_loopback_client.c:38
/* Connect to port on the loopback IP interface. type is
 * SOCK_STREAM or SOCK_DGRAM. 
 * return is a file descriptor or -1 on error
 */
int socket_loopback_client(int port, int type)
{
  412560:	27bdffc8 	addiu	sp,sp,-56
  412564:	afbf0034 	sw	ra,52(sp)
  412568:	afbe0030 	sw	s8,48(sp)
  41256c:	03a0f021 	move	s8,sp
  412570:	afc40038 	sw	a0,56(s8)
  412574:	afc5003c 	sw	a1,60(s8)
/home_a/ppchen/adb/socket_loopback_client.c:43
    struct sockaddr_in addr;
    socklen_t alen;
    int s;

    memset(&addr, 0, sizeof(addr));
  412578:	27c2001c 	addiu	v0,s8,28
  41257c:	00402021 	move	a0,v0
  412580:	00002821 	move	a1,zero
  412584:	24060010 	li	a2,16
  412588:	0c1053ac 	jal	414eb0 <memset@plt>
  41258c:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:44
    addr.sin_family = AF_INET;
  412590:	24020002 	li	v0,2
  412594:	a7c2001c 	sh	v0,28(s8)
/home_a/ppchen/adb/socket_loopback_client.c:45
    addr.sin_port = htons(port);
  412598:	8fc20038 	lw	v0,56(s8)
  41259c:	3042ffff 	andi	v0,v0,0xffff
  4125a0:	00402021 	move	a0,v0
  4125a4:	0c1052b0 	jal	414ac0 <htons@plt>
  4125a8:	00000000 	nop
  4125ac:	a7c2001e 	sh	v0,30(s8)
/home_a/ppchen/adb/socket_loopback_client.c:46
    addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
  4125b0:	3c027f00 	lui	v0,0x7f00
  4125b4:	34440001 	ori	a0,v0,0x1
  4125b8:	0c10533c 	jal	414cf0 <htonl@plt>
  4125bc:	00000000 	nop
  4125c0:	afc20020 	sw	v0,32(s8)
/home_a/ppchen/adb/socket_loopback_client.c:48

    s = socket(AF_INET, type, 0);
  4125c4:	24040002 	li	a0,2
  4125c8:	8fc5003c 	lw	a1,60(s8)
  4125cc:	00003021 	move	a2,zero
  4125d0:	0c1053c4 	jal	414f10 <socket@plt>
  4125d4:	00000000 	nop
  4125d8:	afc20018 	sw	v0,24(s8)
/home_a/ppchen/adb/socket_loopback_client.c:49
    if(s < 0) return -1;
  4125dc:	8fc20018 	lw	v0,24(s8)
  4125e0:	04410004 	bgez	v0,4125f4 <socket_loopback_client+0x94>
  4125e4:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:49 (discriminator 1)
  4125e8:	2402ffff 	li	v0,-1
  4125ec:	10000010 	b	412630 <socket_loopback_client+0xd0>
  4125f0:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:51

    if(connect(s, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
  4125f4:	27c2001c 	addiu	v0,s8,28
  4125f8:	8fc40018 	lw	a0,24(s8)
  4125fc:	00402821 	move	a1,v0
  412600:	24060010 	li	a2,16
  412604:	0c1052dc 	jal	414b70 <connect@plt>
  412608:	00000000 	nop
  41260c:	04410007 	bgez	v0,41262c <socket_loopback_client+0xcc>
  412610:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:52
        close(s);
  412614:	8fc40018 	lw	a0,24(s8)
  412618:	0c105378 	jal	414de0 <close@plt>
  41261c:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:53
        return -1;
  412620:	2402ffff 	li	v0,-1
  412624:	10000002 	b	412630 <socket_loopback_client+0xd0>
  412628:	00000000 	nop
/home_a/ppchen/adb/socket_loopback_client.c:56
    }

    return s;
  41262c:	8fc20018 	lw	v0,24(s8)
/home_a/ppchen/adb/socket_loopback_client.c:58

}
  412630:	03c0e821 	move	sp,s8
  412634:	8fbf0034 	lw	ra,52(sp)
  412638:	8fbe0030 	lw	s8,48(sp)
  41263c:	27bd0038 	addiu	sp,sp,56
  412640:	03e00008 	jr	ra
  412644:	00000000 	nop
	...

00412658 <.pic.atexit>:
.pic.atexit():
  412658:	3c190041 	lui	t9,0x41
  41265c:	27392660 	addiu	t9,t9,9824

00412660 <atexit>:
atexit():
  412660:	3c1c0002 	lui	gp,0x2
  412664:	279cb130 	addiu	gp,gp,-20176
  412668:	0399e021 	addu	gp,gp,t9
  41266c:	8f828018 	lw	v0,-32744(gp)
  412670:	50400002 	beqzl	v0,41267c <atexit+0x1c>
  412674:	00003021 	move	a2,zero
  412678:	8c460000 	lw	a2,0(v0)
  41267c:	8f99801c 	lw	t9,-32740(gp)
  412680:	03200008 	jr	t9
  412684:	00002821 	move	a1,zero
	...

00412690 <__do_global_ctors_aux>:
__do_global_ctors_aux():
  412690:	3c020042 	lui	v0,0x42
  412694:	8c595090 	lw	t9,20624(v0)
  412698:	2402ffff 	li	v0,-1
  41269c:	13220010 	beq	t9,v0,4126e0 <__do_global_ctors_aux+0x50>
  4126a0:	00000000 	nop
  4126a4:	27bdffd8 	addiu	sp,sp,-40
  4126a8:	afb0001c 	sw	s0,28(sp)
  4126ac:	3c100042 	lui	s0,0x42
  4126b0:	afb10020 	sw	s1,32(sp)
  4126b4:	afbf0024 	sw	ra,36(sp)
  4126b8:	2610508c 	addiu	s0,s0,20620
  4126bc:	2411ffff 	li	s1,-1
  4126c0:	0320f809 	jalr	t9
  4126c4:	2610fffc 	addiu	s0,s0,-4
  4126c8:	8e190004 	lw	t9,4(s0)
  4126cc:	1731fffc 	bne	t9,s1,4126c0 <__do_global_ctors_aux+0x30>
  4126d0:	8fbf0024 	lw	ra,36(sp)
  4126d4:	8fb10020 	lw	s1,32(sp)
  4126d8:	8fb0001c 	lw	s0,28(sp)
  4126dc:	27bd0028 	addiu	sp,sp,40
  4126e0:	03e00008 	jr	ra
  4126e4:	00000000 	nop
	...

Disassembly of section .MIPS.stubs:

004126f0 <_MIPS_STUBS_>:
_MIPS_STUBS_():
  4126f0:	8f998010 	lw	t9,-32752(gp)
  4126f4:	03e07821 	move	t7,ra
  4126f8:	0320f809 	jalr	t9
  4126fc:	24180071 	li	t8,113
	...

Disassembly of section .fini:

00412710 <_fini>:
_fini():
  412710:	3c1c0002 	lui	gp,0x2
  412714:	279cb080 	addiu	gp,gp,-20352
  412718:	0399e021 	addu	gp,gp,t9
  41271c:	27bdffe0 	addiu	sp,sp,-32
  412720:	afbc0010 	sw	gp,16(sp)
  412724:	afbf001c 	sw	ra,28(sp)
  412728:	afbc0018 	sw	gp,24(sp)
  41272c:	04110001 	bal	412734 <_fini+0x24>
  412730:	00000000 	nop
  412734:	0c1005a9 	jal	4016a4 <__do_global_dtors_aux>
  412738:	00000000 	nop
  41273c:	8fbf001c 	lw	ra,28(sp)
  412740:	03e00008 	jr	ra
  412744:	27bd0020 	addiu	sp,sp,32

Disassembly of section .plt:

00414a80 <_PROCEDURE_LINKAGE_TABLE_>:
_PROCEDURE_LINKAGE_TABLE_():
  414a80:	3c1c0042 	lui	gp,0x42
  414a84:	8f9950a4 	lw	t9,20644(gp)
  414a88:	279c50a4 	addiu	gp,gp,20644
  414a8c:	031cc023 	subu	t8,t8,gp
  414a90:	03e07821 	move	t7,ra
  414a94:	0018c082 	srl	t8,t8,0x2
  414a98:	0320f809 	jalr	t9
  414a9c:	2718fffe 	addiu	t8,t8,-2

00414aa0 <bind@plt>:
  414aa0:	3c0f0042 	lui	t7,0x42
  414aa4:	8df950ac 	lw	t9,20652(t7)
  414aa8:	03200008 	jr	t9
  414aac:	25f850ac 	addiu	t8,t7,20652

00414ab0 <__register_frame_info_bases@plt>:
  414ab0:	3c0f0042 	lui	t7,0x42
  414ab4:	8df950b0 	lw	t9,20656(t7)
  414ab8:	03200008 	jr	t9
  414abc:	25f850b0 	addiu	t8,t7,20656

00414ac0 <htons@plt>:
  414ac0:	3c0f0042 	lui	t7,0x42
  414ac4:	8df950b4 	lw	t9,20660(t7)
  414ac8:	03200008 	jr	t9
  414acc:	25f850b4 	addiu	t8,t7,20660

00414ad0 <strftime@plt>:
  414ad0:	3c0f0042 	lui	t7,0x42
  414ad4:	8df950b8 	lw	t9,20664(t7)
  414ad8:	03200008 	jr	t9
  414adc:	25f850b8 	addiu	t8,t7,20664

00414ae0 <calloc@plt>:
  414ae0:	3c0f0042 	lui	t7,0x42
  414ae4:	8df950bc 	lw	t9,20668(t7)
  414ae8:	03200008 	jr	t9
  414aec:	25f850bc 	addiu	t8,t7,20668

00414af0 <creat@plt>:
  414af0:	3c0f0042 	lui	t7,0x42
  414af4:	8df950c0 	lw	t9,20672(t7)
  414af8:	03200008 	jr	t9
  414afc:	25f850c0 	addiu	t8,t7,20672

00414b00 <__errno_location@plt>:
  414b00:	3c0f0042 	lui	t7,0x42
  414b04:	8df950c4 	lw	t9,20676(t7)
  414b08:	03200008 	jr	t9
  414b0c:	25f850c4 	addiu	t8,t7,20676

00414b10 <open@plt>:
  414b10:	3c0f0042 	lui	t7,0x42
  414b14:	8df950c8 	lw	t9,20680(t7)
  414b18:	03200008 	jr	t9
  414b1c:	25f850c8 	addiu	t8,t7,20680

00414b20 <pthread_attr_setdetachstate@plt>:
  414b20:	3c0f0042 	lui	t7,0x42
  414b24:	8df950cc 	lw	t9,20684(t7)
  414b28:	03200008 	jr	t9
  414b2c:	25f850cc 	addiu	t8,t7,20684

00414b30 <getenv@plt>:
  414b30:	3c0f0042 	lui	t7,0x42
  414b34:	8df950d0 	lw	t9,20688(t7)
  414b38:	03200008 	jr	t9
  414b3c:	25f850d0 	addiu	t8,t7,20688

00414b40 <fwrite@plt>:
  414b40:	3c0f0042 	lui	t7,0x42
  414b44:	8df950d4 	lw	t9,20692(t7)
  414b48:	03200008 	jr	t9
  414b4c:	25f850d4 	addiu	t8,t7,20692

00414b50 <usleep@plt>:
  414b50:	3c0f0042 	lui	t7,0x42
  414b54:	8df950d8 	lw	t9,20696(t7)
  414b58:	03200008 	jr	t9
  414b5c:	25f850d8 	addiu	t8,t7,20696

00414b60 <memcpy@plt>:
  414b60:	3c0f0042 	lui	t7,0x42
  414b64:	8df950dc 	lw	t9,20700(t7)
  414b68:	03200008 	jr	t9
  414b6c:	25f850dc 	addiu	t8,t7,20700

00414b70 <connect@plt>:
  414b70:	3c0f0042 	lui	t7,0x42
  414b74:	8df950e0 	lw	t9,20704(t7)
  414b78:	03200008 	jr	t9
  414b7c:	25f850e0 	addiu	t8,t7,20704

00414b80 <realloc@plt>:
  414b80:	3c0f0042 	lui	t7,0x42
  414b84:	8df950e4 	lw	t9,20708(t7)
  414b88:	03200008 	jr	t9
  414b8c:	25f850e4 	addiu	t8,t7,20708

00414b90 <pthread_mutex_init@plt>:
  414b90:	3c0f0042 	lui	t7,0x42
  414b94:	8df950e8 	lw	t9,20712(t7)
  414b98:	03200008 	jr	t9
  414b9c:	25f850e8 	addiu	t8,t7,20712

00414ba0 <vfprintf@plt>:
  414ba0:	3c0f0042 	lui	t7,0x42
  414ba4:	8df950ec 	lw	t9,20716(t7)
  414ba8:	03200008 	jr	t9
  414bac:	25f850ec 	addiu	t8,t7,20716

00414bb0 <pthread_attr_init@plt>:
  414bb0:	3c0f0042 	lui	t7,0x42
  414bb4:	8df950f0 	lw	t9,20720(t7)
  414bb8:	03200008 	jr	t9
  414bbc:	25f850f0 	addiu	t8,t7,20720

00414bc0 <strcat@plt>:
  414bc0:	3c0f0042 	lui	t7,0x42
  414bc4:	8df950f4 	lw	t9,20724(t7)
  414bc8:	03200008 	jr	t9
  414bcc:	25f850f4 	addiu	t8,t7,20724

00414bd0 <setenv@plt>:
  414bd0:	3c0f0042 	lui	t7,0x42
  414bd4:	8df950f8 	lw	t9,20728(t7)
  414bd8:	03200008 	jr	t9
  414bdc:	25f850f8 	addiu	t8,t7,20728

00414be0 <strtoul@plt>:
  414be0:	3c0f0042 	lui	t7,0x42
  414be4:	8df950fc 	lw	t9,20732(t7)
  414be8:	03200008 	jr	t9
  414bec:	25f850fc 	addiu	t8,t7,20732

00414bf0 <mkdir@plt>:
  414bf0:	3c0f0042 	lui	t7,0x42
  414bf4:	8df95100 	lw	t9,20736(t7)
  414bf8:	03200008 	jr	t9
  414bfc:	25f85100 	addiu	t8,t7,20736

00414c00 <malloc@plt>:
  414c00:	3c0f0042 	lui	t7,0x42
  414c04:	8df95104 	lw	t9,20740(t7)
  414c08:	03200008 	jr	t9
  414c0c:	25f85104 	addiu	t8,t7,20740

00414c10 <strrchr@plt>:
  414c10:	3c0f0042 	lui	t7,0x42
  414c14:	8df95108 	lw	t9,20744(t7)
  414c18:	03200008 	jr	t9
  414c1c:	25f85108 	addiu	t8,t7,20744

00414c20 <strncmp@plt>:
  414c20:	3c0f0042 	lui	t7,0x42
  414c24:	8df9510c 	lw	t9,20748(t7)
  414c28:	03200008 	jr	t9
  414c2c:	25f8510c 	addiu	t8,t7,20748

00414c30 <__uClibc_main@plt>:
  414c30:	3c0f0042 	lui	t7,0x42
  414c34:	8df95110 	lw	t9,20752(t7)
  414c38:	03200008 	jr	t9
  414c3c:	25f85110 	addiu	t8,t7,20752

00414c40 <ioctl@plt>:
  414c40:	3c0f0042 	lui	t7,0x42
  414c44:	8df95114 	lw	t9,20756(t7)
  414c48:	03200008 	jr	t9
  414c4c:	25f85114 	addiu	t8,t7,20756

00414c50 <pthread_attr_setstacksize@plt>:
  414c50:	3c0f0042 	lui	t7,0x42
  414c54:	8df95118 	lw	t9,20760(t7)
  414c58:	03200008 	jr	t9
  414c5c:	25f85118 	addiu	t8,t7,20760

00414c60 <recv@plt>:
  414c60:	3c0f0042 	lui	t7,0x42
  414c64:	8df9511c 	lw	t9,20764(t7)
  414c68:	03200008 	jr	t9
  414c6c:	25f8511c 	addiu	t8,t7,20764

00414c70 <strlen@plt>:
  414c70:	3c0f0042 	lui	t7,0x42
  414c74:	8df95120 	lw	t9,20768(t7)
  414c78:	03200008 	jr	t9
  414c7c:	25f85120 	addiu	t8,t7,20768

00414c80 <pthread_mutex_lock@plt>:
  414c80:	3c0f0042 	lui	t7,0x42
  414c84:	8df95124 	lw	t9,20772(t7)
  414c88:	03200008 	jr	t9
  414c8c:	25f85124 	addiu	t8,t7,20772

00414c90 <opendir@plt>:
  414c90:	3c0f0042 	lui	t7,0x42
  414c94:	8df95128 	lw	t9,20776(t7)
  414c98:	03200008 	jr	t9
  414c9c:	25f85128 	addiu	t8,t7,20776

00414ca0 <ptsname@plt>:
  414ca0:	3c0f0042 	lui	t7,0x42
  414ca4:	8df9512c 	lw	t9,20780(t7)
  414ca8:	03200008 	jr	t9
  414cac:	25f8512c 	addiu	t8,t7,20780

00414cb0 <fcntl@plt>:
  414cb0:	3c0f0042 	lui	t7,0x42
  414cb4:	8df95130 	lw	t9,20784(t7)
  414cb8:	03200008 	jr	t9
  414cbc:	25f85130 	addiu	t8,t7,20784

00414cc0 <sendmsg@plt>:
  414cc0:	3c0f0042 	lui	t7,0x42
  414cc4:	8df95134 	lw	t9,20788(t7)
  414cc8:	03200008 	jr	t9
  414ccc:	25f85134 	addiu	t8,t7,20788

00414cd0 <snprintf@plt>:
  414cd0:	3c0f0042 	lui	t7,0x42
  414cd4:	8df95138 	lw	t9,20792(t7)
  414cd8:	03200008 	jr	t9
  414cdc:	25f85138 	addiu	t8,t7,20792

00414ce0 <dup2@plt>:
  414ce0:	3c0f0042 	lui	t7,0x42
  414ce4:	8df9513c 	lw	t9,20796(t7)
  414ce8:	03200008 	jr	t9
  414cec:	25f8513c 	addiu	t8,t7,20796

00414cf0 <htonl@plt>:
  414cf0:	3c0f0042 	lui	t7,0x42
  414cf4:	8df95140 	lw	t9,20800(t7)
  414cf8:	03200008 	jr	t9
  414cfc:	25f85140 	addiu	t8,t7,20800

00414d00 <read@plt>:
  414d00:	3c0f0042 	lui	t7,0x42
  414d04:	8df95144 	lw	t9,20804(t7)
  414d08:	03200008 	jr	t9
  414d0c:	25f85144 	addiu	t8,t7,20804

00414d10 <localtime_r@plt>:
  414d10:	3c0f0042 	lui	t7,0x42
  414d14:	8df95148 	lw	t9,20808(t7)
  414d18:	03200008 	jr	t9
  414d1c:	25f85148 	addiu	t8,t7,20808

00414d20 <select@plt>:
  414d20:	3c0f0042 	lui	t7,0x42
  414d24:	8df9514c 	lw	t9,20812(t7)
  414d28:	03200008 	jr	t9
  414d2c:	25f8514c 	addiu	t8,t7,20812

00414d30 <__deregister_frame_info_bases@plt>:
  414d30:	3c0f0042 	lui	t7,0x42
  414d34:	8df95150 	lw	t9,20816(t7)
  414d38:	03200008 	jr	t9
  414d3c:	25f85150 	addiu	t8,t7,20816

00414d40 <utime@plt>:
  414d40:	3c0f0042 	lui	t7,0x42
  414d44:	8df95154 	lw	t9,20820(t7)
  414d48:	03200008 	jr	t9
  414d4c:	25f85154 	addiu	t8,t7,20820

00414d50 <access@plt>:
  414d50:	3c0f0042 	lui	t7,0x42
  414d54:	8df95158 	lw	t9,20824(t7)
  414d58:	03200008 	jr	t9
  414d5c:	25f85158 	addiu	t8,t7,20824

00414d60 <getpid@plt>:
  414d60:	3c0f0042 	lui	t7,0x42
  414d64:	8df9515c 	lw	t9,20828(t7)
  414d68:	03200008 	jr	t9
  414d6c:	25f8515c 	addiu	t8,t7,20828

00414d70 <setsockopt@plt>:
  414d70:	3c0f0042 	lui	t7,0x42
  414d74:	8df95160 	lw	t9,20832(t7)
  414d78:	03200008 	jr	t9
  414d7c:	25f85160 	addiu	t8,t7,20832

00414d80 <time@plt>:
  414d80:	3c0f0042 	lui	t7,0x42
  414d84:	8df95164 	lw	t9,20836(t7)
  414d88:	03200008 	jr	t9
  414d8c:	25f85164 	addiu	t8,t7,20836

00414d90 <strtok@plt>:
  414d90:	3c0f0042 	lui	t7,0x42
  414d94:	8df95168 	lw	t9,20840(t7)
  414d98:	03200008 	jr	t9
  414d9c:	25f85168 	addiu	t8,t7,20840

00414da0 <pthread_create@plt>:
  414da0:	3c0f0042 	lui	t7,0x42
  414da4:	8df9516c 	lw	t9,20844(t7)
  414da8:	03200008 	jr	t9
  414dac:	25f8516c 	addiu	t8,t7,20844

00414db0 <write@plt>:
  414db0:	3c0f0042 	lui	t7,0x42
  414db4:	8df95170 	lw	t9,20848(t7)
  414db8:	03200008 	jr	t9
  414dbc:	25f85170 	addiu	t8,t7,20848

00414dc0 <closedir@plt>:
  414dc0:	3c0f0042 	lui	t7,0x42
  414dc4:	8df95174 	lw	t9,20852(t7)
  414dc8:	03200008 	jr	t9
  414dcc:	25f85174 	addiu	t8,t7,20852

00414dd0 <pthread_cond_signal@plt>:
  414dd0:	3c0f0042 	lui	t7,0x42
  414dd4:	8df95178 	lw	t9,20856(t7)
  414dd8:	03200008 	jr	t9
  414ddc:	25f85178 	addiu	t8,t7,20856

00414de0 <close@plt>:
  414de0:	3c0f0042 	lui	t7,0x42
  414de4:	8df9517c 	lw	t9,20860(t7)
  414de8:	03200008 	jr	t9
  414dec:	25f8517c 	addiu	t8,t7,20860

00414df0 <fputc@plt>:
  414df0:	3c0f0042 	lui	t7,0x42
  414df4:	8df95180 	lw	t9,20864(t7)
  414df8:	03200008 	jr	t9
  414dfc:	25f85180 	addiu	t8,t7,20864

00414e00 <setsid@plt>:
  414e00:	3c0f0042 	lui	t7,0x42
  414e04:	8df95184 	lw	t9,20868(t7)
  414e08:	03200008 	jr	t9
  414e0c:	25f85184 	addiu	t8,t7,20868

00414e10 <unlockpt@plt>:
  414e10:	3c0f0042 	lui	t7,0x42
  414e14:	8df95188 	lw	t9,20872(t7)
  414e18:	03200008 	jr	t9
  414e1c:	25f85188 	addiu	t8,t7,20872

00414e20 <tzset@plt>:
  414e20:	3c0f0042 	lui	t7,0x42
  414e24:	8df9518c 	lw	t9,20876(t7)
  414e28:	03200008 	jr	t9
  414e2c:	25f8518c 	addiu	t8,t7,20876

00414e30 <umask@plt>:
  414e30:	3c0f0042 	lui	t7,0x42
  414e34:	8df95190 	lw	t9,20880(t7)
  414e38:	03200008 	jr	t9
  414e3c:	25f85190 	addiu	t8,t7,20880

00414e40 <sscanf@plt>:
  414e40:	3c0f0042 	lui	t7,0x42
  414e44:	8df95194 	lw	t9,20884(t7)
  414e48:	03200008 	jr	t9
  414e4c:	25f85194 	addiu	t8,t7,20884

00414e50 <socketpair@plt>:
  414e50:	3c0f0042 	lui	t7,0x42
  414e54:	8df95198 	lw	t9,20888(t7)
  414e58:	03200008 	jr	t9
  414e5c:	25f85198 	addiu	t8,t7,20888

00414e60 <pthread_cond_init@plt>:
  414e60:	3c0f0042 	lui	t7,0x42
  414e64:	8df9519c 	lw	t9,20892(t7)
  414e68:	03200008 	jr	t9
  414e6c:	25f8519c 	addiu	t8,t7,20892

00414e70 <unlink@plt>:
  414e70:	3c0f0042 	lui	t7,0x42
  414e74:	8df951a0 	lw	t9,20896(t7)
  414e78:	03200008 	jr	t9
  414e7c:	25f851a0 	addiu	t8,t7,20896

00414e80 <execl@plt>:
  414e80:	3c0f0042 	lui	t7,0x42
  414e84:	8df951a4 	lw	t9,20900(t7)
  414e88:	03200008 	jr	t9
  414e8c:	25f851a4 	addiu	t8,t7,20900

00414e90 <sync@plt>:
  414e90:	3c0f0042 	lui	t7,0x42
  414e94:	8df951a8 	lw	t9,20904(t7)
  414e98:	03200008 	jr	t9
  414e9c:	25f851a8 	addiu	t8,t7,20904

00414ea0 <fflush@plt>:
  414ea0:	3c0f0042 	lui	t7,0x42
  414ea4:	8df951ac 	lw	t9,20908(t7)
  414ea8:	03200008 	jr	t9
  414eac:	25f851ac 	addiu	t8,t7,20908

00414eb0 <memset@plt>:
  414eb0:	3c0f0042 	lui	t7,0x42
  414eb4:	8df951b0 	lw	t9,20912(t7)
  414eb8:	03200008 	jr	t9
  414ebc:	25f851b0 	addiu	t8,t7,20912

00414ec0 <getuid@plt>:
  414ec0:	3c0f0042 	lui	t7,0x42
  414ec4:	8df951b4 	lw	t9,20916(t7)
  414ec8:	03200008 	jr	t9
  414ecc:	25f851b4 	addiu	t8,t7,20916

00414ed0 <fprintf@plt>:
  414ed0:	3c0f0042 	lui	t7,0x42
  414ed4:	8df951b8 	lw	t9,20920(t7)
  414ed8:	03200008 	jr	t9
  414edc:	25f851b8 	addiu	t8,t7,20920

00414ee0 <abort@plt>:
  414ee0:	3c0f0042 	lui	t7,0x42
  414ee4:	8df951bc 	lw	t9,20924(t7)
  414ee8:	03200008 	jr	t9
  414eec:	25f851bc 	addiu	t8,t7,20924

00414ef0 <memcmp@plt>:
  414ef0:	3c0f0042 	lui	t7,0x42
  414ef4:	8df951c0 	lw	t9,20928(t7)
  414ef8:	03200008 	jr	t9
  414efc:	25f851c0 	addiu	t8,t7,20928

00414f00 <sprintf@plt>:
  414f00:	3c0f0042 	lui	t7,0x42
  414f04:	8df951c4 	lw	t9,20932(t7)
  414f08:	03200008 	jr	t9
  414f0c:	25f851c4 	addiu	t8,t7,20932

00414f10 <socket@plt>:
  414f10:	3c0f0042 	lui	t7,0x42
  414f14:	8df951c8 	lw	t9,20936(t7)
  414f18:	03200008 	jr	t9
  414f1c:	25f851c8 	addiu	t8,t7,20936

00414f20 <lstat@plt>:
  414f20:	3c0f0042 	lui	t7,0x42
  414f24:	8df951cc 	lw	t9,20940(t7)
  414f28:	03200008 	jr	t9
  414f2c:	25f851cc 	addiu	t8,t7,20940

00414f30 <exit@plt>:
  414f30:	3c0f0042 	lui	t7,0x42
  414f34:	8df951d0 	lw	t9,20944(t7)
  414f38:	03200008 	jr	t9
  414f3c:	25f851d0 	addiu	t8,t7,20944

00414f40 <fork@plt>:
  414f40:	3c0f0042 	lui	t7,0x42
  414f44:	8df951d4 	lw	t9,20948(t7)
  414f48:	03200008 	jr	t9
  414f4c:	25f851d4 	addiu	t8,t7,20948

00414f50 <pthread_mutex_unlock@plt>:
  414f50:	3c0f0042 	lui	t7,0x42
  414f54:	8df951d8 	lw	t9,20952(t7)
  414f58:	03200008 	jr	t9
  414f5c:	25f851d8 	addiu	t8,t7,20952

00414f60 <strcmp@plt>:
  414f60:	3c0f0042 	lui	t7,0x42
  414f64:	8df951dc 	lw	t9,20956(t7)
  414f68:	03200008 	jr	t9
  414f6c:	25f851dc 	addiu	t8,t7,20956

00414f70 <waitpid@plt>:
  414f70:	3c0f0042 	lui	t7,0x42
  414f74:	8df951e0 	lw	t9,20960(t7)
  414f78:	03200008 	jr	t9
  414f7c:	25f851e0 	addiu	t8,t7,20960

00414f80 <accept@plt>:
  414f80:	3c0f0042 	lui	t7,0x42
  414f84:	8df951e4 	lw	t9,20964(t7)
  414f88:	03200008 	jr	t9
  414f8c:	25f851e4 	addiu	t8,t7,20964

00414f90 <free@plt>:
  414f90:	3c0f0042 	lui	t7,0x42
  414f94:	8df951e8 	lw	t9,20968(t7)
  414f98:	03200008 	jr	t9
  414f9c:	25f851e8 	addiu	t8,t7,20968

00414fa0 <atoi@plt>:
  414fa0:	3c0f0042 	lui	t7,0x42
  414fa4:	8df951ec 	lw	t9,20972(t7)
  414fa8:	03200008 	jr	t9
  414fac:	25f851ec 	addiu	t8,t7,20972

00414fb0 <strpbrk@plt>:
  414fb0:	3c0f0042 	lui	t7,0x42
  414fb4:	8df951f0 	lw	t9,20976(t7)
  414fb8:	03200008 	jr	t9
  414fbc:	25f851f0 	addiu	t8,t7,20976

00414fc0 <readdir@plt>:
  414fc0:	3c0f0042 	lui	t7,0x42
  414fc4:	8df951f4 	lw	t9,20980(t7)
  414fc8:	03200008 	jr	t9
  414fcc:	25f851f4 	addiu	t8,t7,20980

00414fd0 <strchr@plt>:
  414fd0:	3c0f0042 	lui	t7,0x42
  414fd4:	8df951f8 	lw	t9,20984(t7)
  414fd8:	03200008 	jr	t9
  414fdc:	25f851f8 	addiu	t8,t7,20984

00414fe0 <strerror@plt>:
  414fe0:	3c0f0042 	lui	t7,0x42
  414fe4:	8df951fc 	lw	t9,20988(t7)
  414fe8:	03200008 	jr	t9
  414fec:	25f851fc 	addiu	t8,t7,20988

00414ff0 <listen@plt>:
  414ff0:	3c0f0042 	lui	t7,0x42
  414ff4:	8df95200 	lw	t9,20992(t7)
  414ff8:	03200008 	jr	t9
  414ffc:	25f85200 	addiu	t8,t7,20992

00415000 <printf@plt>:
  415000:	3c0f0042 	lui	t7,0x42
  415004:	8df95204 	lw	t9,20996(t7)
  415008:	03200008 	jr	t9
  41500c:	25f85204 	addiu	t8,t7,20996

00415010 <pthread_cond_wait@plt>:
  415010:	3c0f0042 	lui	t7,0x42
  415014:	8df95208 	lw	t9,21000(t7)
  415018:	03200008 	jr	t9
  41501c:	25f85208 	addiu	t8,t7,21000

00415020 <strdup@plt>:
  415020:	3c0f0042 	lui	t7,0x42
  415024:	8df9520c 	lw	t9,21004(t7)
  415028:	03200008 	jr	t9
  41502c:	25f8520c 	addiu	t8,t7,21004

00415030 <puts@plt>:
  415030:	3c0f0042 	lui	t7,0x42
  415034:	8df95210 	lw	t9,21008(t7)
  415038:	03200008 	jr	t9
  41503c:	25f85210 	addiu	t8,t7,21008

00415040 <execvp@plt>:
  415040:	3c0f0042 	lui	t7,0x42
  415044:	8df95214 	lw	t9,21012(t7)
  415048:	03200008 	jr	t9
  41504c:	25f85214 	addiu	t8,t7,21012

00415050 <pipe@plt>:
  415050:	3c0f0042 	lui	t7,0x42
  415054:	8df95218 	lw	t9,21016(t7)
  415058:	03200008 	jr	t9
  41505c:	25f85218 	addiu	t8,t7,21016

00415060 <strcpy@plt>:
  415060:	3c0f0042 	lui	t7,0x42
  415064:	8df9521c 	lw	t9,21020(t7)
  415068:	03200008 	jr	t9
  41506c:	25f8521c 	addiu	t8,t7,21020

00415070 <grantpt@plt>:
  415070:	3c0f0042 	lui	t7,0x42
  415074:	8df95220 	lw	t9,21024(t7)
  415078:	03200008 	jr	t9
  41507c:	25f85220 	addiu	t8,t7,21024

00415080 <shutdown@plt>:
  415080:	3c0f0042 	lui	t7,0x42
  415084:	8df95224 	lw	t9,21028(t7)
  415088:	03200008 	jr	t9
  41508c:	25f85224 	addiu	t8,t7,21028
